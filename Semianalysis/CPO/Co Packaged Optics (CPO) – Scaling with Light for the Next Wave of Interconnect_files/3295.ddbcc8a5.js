"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3295"],{38476:function(e,t,n){n.d(t,{A:()=>r});let r={shimmer:"shimmer-DF054A",shimmerAnimation:"shimmerAnimation-dmgPXN",transition:"transition-Na2iYv",from:"from-LIO3hL",to:"to-rGgfVf",icon:"icon-kVFYHC",errorIcon:"errorIcon-yltUsD",toastContainer:"toastContainer-s9kdmI"}},72285:function(e,t,n){n.d(t,{A:()=>r});let r={avatarButton:"avatarButton-lZBlGB",dropdownBadge:"dropdownBadge-CARUw5"}},26620:function(e,t,n){n.d(t,{A:()=>r});let r={container:"container-KbMeLj",themed:"themed-EbT4uD",saveButton:"saveButton-bEqkhJ",text:"text-RPsawq",short:"short-ZM5yW_","lineClamp-4":"lineClamp-4-JbwbHY",lineClamp4:"lineClamp-4-JbwbHY",imageText:"imageText-mhB5o2",backdrop:"backdrop-Xjlnco",imageBackdrop:"imageBackdrop-mwjQFt",tinted:"tinted-Vm3IqP",blurred:"blurred-UbnY7U",tint:"tint-HtqWIV",header:"header-ndGPw6",restack:"restack-YSzWKs",permalink:"permalink-bijGJH",footer:"footer-0EQTsv",swatchesContainer:"swatchesContainer-TDgd_R",swatchContainer:"swatchContainer-IIrOXq",selected:"selected-how610",alignmentSwatchContainer:"alignmentSwatchContainer-_cyt17",swatch:"swatch-otVp71"}},8174:function(e,t,n){n.d(t,{A:()=>r});let r={signInAppUpsell:"signInAppUpsell-u9SVL0",isDesktop:"isDesktop-_mI6rc",appDownloadButton:"appDownloadButton-Lbsixg",qrContainer:"qrContainer-ApUIIX",qrCode:"qrCode-f8T8_u"}},6986:function(e,t,n){n.d(t,{A:()=>r});let r={badge:"badge-jGMz0j",dot:"dot-dFwIaI",singleElement:"singleElement-ve4D6v",fillIcon:"fillIcon-hub55b",empty:"empty-w6FjPW",shape_circle:"shape_circle-Q9w9_R",shapeCircle:"shape_circle-Q9w9_R",shape_square:"shape_square-O2PxpD",shapeSquare:"shape_square-O2PxpD","placement_top-left":"placement_top-left-dsosXN",placementTopLeft:"placement_top-left-dsosXN","placement_top-right":"placement_top-right-CTrC80",placementTopRight:"placement_top-right-CTrC80","placement_bottom-left":"placement_bottom-left-JFLMtf",placementBottomLeft:"placement_bottom-left-JFLMtf","placement_bottom-right":"placement_bottom-right-hoG7Xz",placementBottomRight:"placement_bottom-right-hoG7Xz"}},40719:function(e,t,n){n.d(t,{A:()=>r});let r={overscrollTransition:"overscrollTransition-QBV35u"}},79804:function(e,t,n){n.d(t,{A:()=>r});let r={avatarLink:"avatarLink-M6ZJnW",inlineComposer:"inlineComposer-v8PLSi",disabled:"disabled-YAsoUi",mobileInlineComposer:"mobileInlineComposer-jKgh_1",isDragging:"isDragging-TcoucF",floatingComposer:"floatingComposer-np5rUF",inputSpacer:"inputSpacer-x19EDg",wordCountIndicator:"wordCountIndicator-KkYqEv",exceded:"exceded-x1z6ce",composerModal:"composerModal-q2ZgZt",setupProfileModalContent:"setupProfileModalContent-IhiQBI",modalColumn:"modalColumn-qiWdAx",editorContainer:"editorContainer-Lfneza",dropdownIcon:"dropdownIcon-HzL2Jt",dropdownMenu:"dropdownMenu-RAjGgB",pubRow:"pubRow-ZqkbZG",pubName:"pubName-DndaDy",linkImage:"linkImage-VNRJEM",imageContainer:"imageContainer-sSgwnk",imageActions:"imageActions-J_pVYc",removeAttachment:"removeAttachment-lybT5W",shareImageButton:"shareImageButton-O3Fvsx",notifyConformModalPubRow:"notifyConformModalPubRow-929y7D"}},95755:function(e,t,n){n.d(t,{A:()=>r});let r={modalBody:"modalBody-yrSvJm",captcha:"captcha-awCBm5"}},76199:function(e,t,n){n.d(t,{ZD:()=>D,lY:()=>A});var r=n(10201),i=n(35426),o=n(32485),a=n.n(o),l=n(45773),d=n(48697),c=n(94796),s=n(17402),u=n(89333),p=n(72880),m=n(84605),h=n(86500),g=n(74049),f=n(35369),Y=n(10238),v=n(76977),y=n(63136),b=n(2481),w=n(39318),C=n(38476);let _=()=>(0,r.Y)(v.Ye,{radius:"full",className:C.A.shimmer,style:{height:"var(--size-6)",width:"100%"}}),k=(0,s.createContext)({addMediaUpload:e=>{let{}=e;throw Error("Adding a download requires a DownloadProvider.")},markAsDownloaded:()=>{throw Error("Marking as downloaded requires a DownloadProvider.")},hasBeenDownloaded:()=>{throw Error("Checking download status requires a DownloadProvider.")}}),I=e=>{var t;let{context:n,download:{mediaUpload:i,title:o,thumbnailUrl:Y,source:k},pub:I,onRemoveItem:D}=e,{markAsDownloaded:S,hasBeenDownloaded:F}=A(),{iString:P}=(0,m.GO)(),{mediaUpload:x,downloadUrl:B}=(0,u.Dw)(i.id),T=(0,b.NP)(),M=(null==x?void 0:x.state)==="error",L="downloads";(0,s.useEffect)(()=>{B&&x&&!F(i.id)&&((0,g.P)(x,o),S(i.id),(0,h.u4)(h.qY.MEDIA_CLIP_DOWNLOAD_COMPLETED,{video_upload_id:i.id,is_post_editor:!1,type:k,surface:L}))},[i.id,B,x,F,S,k,o]);let E=(0,s.useCallback)(e=>{e.preventDefault(),(0,h.u4)(h.qY.MEDIA_CLIP_BUTTON_CLICKED,{button:"share_to_notes",source:"download_toast",surface:L});let t="publisher"===n?"".concat(P("Subscribe to get the full video when it's released."),"\n"):"";T.open({initialText:"".concat(t),videoUploadId:i.id,onCompose:e=>{(0,h.u4)(h.qY.MEDIA_CLIP_SHARED,{destination:"notes",note_id:e.id,video_upload_id:i.id,is_post_editor:"publisher"===n,surface:L})}})},[T,n,P,i.id,I]);return(0,r.FD)(v.Ye,{gap:16,children:[(0,r.Y)("div",{children:(0,r.FD)(v.Ye,{position:"relative",children:[(0,r.Y)(p.o,{src:null!=(t=null!=Y?Y:(0,w.Pzx)(i))?t:"",maxWidth:40,radius:"xs",imageProps:{height:Math.round(40),smartCrop:!0}}),B&&(0,r.Y)(v.pT,{bg:"white",radius:"full",width:20,height:20,position:"absolute",alignItems:"center",justifyContent:"center",className:C.A.icon,children:(0,r.Y)(l.A,{stroke:"black",strokeWidth:2,size:14})}),M&&(0,r.Y)(v.pT,{radius:"full",width:20,height:20,position:"absolute",alignItems:"center",justifyContent:"center",className:a()(C.A.icon,C.A.errorIcon),children:(0,r.Y)(d.A,{stroke:"white",strokeWidth:2,size:14})})]})}),(0,r.FD)(v.I1,{gap:8,children:[(0,r.FD)(v.Ye,{gap:12,children:[(0,r.FD)(v.Ye,{style:{width:"250px"},alignItems:"center",gap:8,children:[(0,r.FD)(v.I1,{flex:"grow",children:[(0,r.Y)(y.EY.B4,{color:"white",weight:"semibold",style:{overflowWrap:"anywhere"},children:o}),B?(0,r.Y)(y.EY.B4,{color:"white",children:P("Complete")}):(0,r.FD)(y.EY.B4,{color:"white",children:[P("Downloading clip"),"â€¦"]}),M&&(0,r.Y)(y.EY.B4,{color:"error",weight:"semibold",style:{overflowWrap:"anywhere"},children:P("Download failed")})]}),B&&(0,r.Y)(f.$n,{leading:(0,r.Y)(c.A,{size:16}),priority:"primary",size:"sm",onClick:E,children:P("Share")})]}),(0,r.Y)(v.Ye,{cursor:"pointer",onClick:e=>{e.stopPropagation(),D()},children:(0,r.Y)(d.A,{stroke:"gray"})})]}),B||M?null:(0,r.Y)(_,{})]})]})};function D(e){let{children:t,pub:n,context:o}=e,[a,l]=(0,s.useState)([]),[d,c]=(0,s.useState)(new Set);return(0,r.FD)(k.Provider,{value:{addMediaUpload:e=>{l(t=>[...t,e])},markAsDownloaded:e=>{c(t=>{let n=new Set(t);return n.add(e),n})},hasBeenDownloaded:e=>d.has(e)},children:[t,!!a.length&&(0,r.Y)("div",{className:C.A.toastContainer,style:{zIndex:Y.GJ},children:(0,r.Y)(i.e,{show:!0,appear:!0,enter:C.A.transition,enterFrom:C.A.from,enterTo:C.A.to,leave:C.A.transition,leaveFrom:C.A.to,leaveTo:C.A.from,children:(0,r.Y)(v.I1,{style:{backgroundColor:"#232525"},radius:"md",padding:16,gap:8,children:a.map((e,t)=>(0,r.Y)(I,{context:o,download:e,pub:n,onRemoveItem:()=>l(a.filter(t=>{let{mediaUpload:n}=t;return n.id!==e.mediaUpload.id}))},"".concat(t,"_").concat(e.mediaUpload.id)))})})})]})}function A(){return(0,s.useContext)(k)}},31452:function(e,t,n){n.d(t,{N:()=>a});var r=n(99851),i=n(69277),o=n(41873);class a extends o.A{trackMedia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={content_type:"livestream",entity_type:"livestream",primary_entity_type:"livestream",entity_key:String(this.props.liveStreamId),primary_entity_key:String(this.props.liveStreamId)};super.trackMedia(e,(0,i._)({},t,n))}constructor(...e){super(...e),(0,r._)(this,"getBaseVideoSrc",e=>{let t="/api/v1/live_stream/".concat(this.props.liveStreamId),n=new URLSearchParams;return e&&n.append("type",e),n.append("src","true"),this.props.noJoin&&n.append("noJoin","true"),this.props.portrait&&n.append("portrait","true"),"".concat(t,"?").concat(n.toString())}),(0,r._)(this,"onPreviewClick",e=>{var t;this.player&&this.player.duration&&this.player.duration>1&&!isNaN(this.player.duration)&&(null==(t=this.player)?void 0:t.paused)&&(this.player.currentTime=this.player.duration-1),this.player&&this.player.paused&&(this.player.playbackRate=1),super.onPreviewClick(e)}),(0,r._)(this,"refreshVideoSrc",()=>{var e;this.setState({autoPlay:!(null==(e=this.player)?void 0:e.paused)}),n.e("9234").then(n.bind(n,40137)).then(e=>{this._initHlsjsWrapped(e.default)})})}}o.A},58475:function(e,t,n){n.d(t,{G:()=>a,Z:()=>l});var r=n(10201),i=n(17402);let o=(0,i.createContext)(null);function a(e){let{root:t,children:n}=e,a=(0,i.useRef)(t);return(0,r.FD)(o.Provider,{value:a,children:[n,!t&&(0,r.Y)("div",{ref:a})]})}function l(e){let{children:t}=e,n=(0,i.useContext)(o).current;return n?(0,i.createPortal)(t,n):null}},110:function(e,t,n){n.d(t,{A:()=>B});var r=n(10201);n(1683);var i=n(76199),o=n(58475),a=n(51419),l=n(52820),d=n(84565),c=n(69324),s=n(84605),u=n(46275),p=n(51440),m=n(40691),h=n(97640),g=n(13505),f=n(95899),Y=n(25006),v=n(99145),y=n(53989),b=n(3084),w=n(85478),C=n(98747),_=n(46271),k=n(57446),I=n(56007),D=n(3011),A=n(87370),S=n(2481),F=n(32848),P=n(14984),x=n(40659);function B(e){let{user:t=null,pub:n=null,children:B,siteConfigs:T={},hasThemedBackground:M=!1,language:L="en",preferredLanguage:E=null,locale:q,country:j,experimentInfo:N={variantOverrides:{},experimentFeatures:{},experimentExposures:{}},portalRoot:V,shouldLoad:O,shouldPollNotifications:R=!1,publicationSettings:U={},userSettings:z,publicationUserSettings:G={},activityToken:W,loadPubClientSearch:J,enablePubClientSearchShortcuts:X=!0,loadGlobalSearch:K,includePodcasts:H=!1,context:Z="reader",isMarketingPage:Q=!1,browser:$}=e;void 0===O&&(O=!!t);let ee=(0,F.Of)({isLoggedIn:!!t,includePodcasts:H});return(0,r.Y)(a.WJ,{browser:$,children:(0,r.Y)(p.PC,{country:j||"US",children:(0,r.Y)(s.Pz,{language:L||"en",preferredLanguage:E,locale:q,children:(0,r.Y)(C.wX,{value:{hasThemedBackground:M},children:(0,r.Y)(w.eE,{siteConfigs:T,children:(0,r.Y)(l.S$,{siteConfigs:T,experimentInfo:N,children:(0,r.Y)(d.sV,{siteConfigs:T,experimentInfo:N,children:(0,r.Y)(y.Fm,{settings:U,children:(0,r.Y)(b.iB,{preloadPubUserSettings:G,children:(0,r.Y)(h._b,{shouldLoad:O,shouldPoll:R,activityToken:W,children:(0,r.Y)(o.G,{root:V,children:(0,r.Y)(_.vu,{defaultValue:t,userSettings:z,children:(0,r.Y)(k.Q,{children:(0,r.Y)(f.HW,{children:(0,r.Y)(u.Sn,{children:(0,r.Y)(I.tE,{children:(0,r.Y)(D.B,{children:(0,r.Y)(m.Zn,{children:(0,r.Y)(S.wG,{children:(0,r.Y)(i.ZD,{context:Z,pub:n,children:(0,r.Y)(F.C8.Provider,{value:ee,children:(0,r.Y)(A.b,{children:(0,r.Y)(Y.pP.Provider,{value:n,children:(0,r.Y)(P.tB,{user:t,children:(0,r.Y)(c.yl,{load:K,useLocalNavigation:!Q,children:(0,r.Y)(v.BR,{load:J,pub:n,enableShortcuts:X,children:(0,r.Y)(g.kL,{children:(0,r.Y)(x.Fg,{children:B})})})})})})})})})})})})})})})})})})})})})})})})})})})})}},40691:function(e,t,n){n.d(t,{Zn:()=>l,hS:()=>d});var r=n(10201),i=n(17402),o=n(16993);let a=(0,i.createContext)({openModal:()=>{},closeModal:()=>{}});function l(e){let{children:t}=e,[n,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)({width:540,children:null}),s=()=>{l(!1)};return(0,r.FD)(a.Provider,{value:{openModal:e=>{c(e),l(!0)},closeModal:s},children:[(0,r.Y)(o.aF,{isOpen:n,onClose:s,width:d.width,children:d?d.children:null}),t]})}function d(){return(0,i.useContext)(a)}a.displayName="ModalContext"},59922:function(e,t,n){n.d(t,{A:()=>i});var r=n(17402);let i=(e,t)=>{let n=(0,r.useRef)();(0,r.useEffect)(()=>{n.current=e},[e]),(0,r.useEffect)(()=>{if(null!==t){let e=setInterval(function(){var e;null==(e=n.current)||e.call(n)},t);return()=>clearInterval(e)}},[t])}},62076:function(e,t,n){n.d(t,{k:()=>i});var r=n(39891);function i(e,t){let{width:n,height:i}=t,l=o.flatMap(t=>a.map(o=>"'".concat((0,r.dJ)(e,n*o,{format:t,height:i?i*o:void 0,crop:"fill"}),"' ").concat(o,"x type('image/").concat(t,"')")));return"image-set(".concat(l.join(", "),")")}let o=["avif","jpeg"],a=[1,2,3]},80103:function(e,t,n){n.d(t,{a7:()=>Y});var r=n(10201),i=n(32485),o=n.n(i);n(99862);var a=n(47963);n(78895),n(20201),n(79909),n(52820),n(85478);var l=n(86500),d=n(56804);n(3479),n(35840),n(49660);var c=n(76977),s=n(63136);n(4016);var u=n(39318),p=n(98949),m=n(57324),h=n(8174);let g=m._9.appMarketing,f=m.fL.signInPage;function Y(e){let{abTestingId:t}=e,n=(0,p.aR)()?"ios":(0,p.m0)()?"android":"desktop",i="desktop"===n?180:120;return(0,r.Y)(c.pT,{padding:20,paddingTop:32,alignItems:"center",justifyContent:"center",children:(0,r.FD)(c.Ye,{radius:"lg",border:"detail",className:o()(h.A.signInAppUpsell,{[h.A.isDesktop]:"desktop"===n}),paddingX:20,paddingTop:20,gap:20,shadow:"lg",cursor:"pointer",onClick:e=>{(0,l.u4)(l.qY.SIGN_IN_APP_UPSELL_CLICKED,{position:"sign-in-page"}),(0,d.o)(e,(0,u.wHz)({utm_campaign:g,utm_content:f,utm_source:m.VU.upsell}),{native:!0,newTab:!0})},children:[(0,r.FD)(c.I1,{justifyContent:"space-between",flex:"grow",paddingBottom:20,gap:8,children:[(0,r.FD)(c.I1,{gap:8,children:[(0,r.Y)(s.EY.H3,{weight:"heavy",children:"Stay signed in"}),(0,r.Y)(s.EY.B4,{color:"secondary",children:"Download the Substack app for ".concat("ios"===n?"iOS":"android"===n?"Android":"Android or iOS")})]}),"desktop"===n?(0,r.Y)(v,{abTestingId:t}):(0,r.Y)(b,{type:n})]}),(0,r.Y)(c.pT,{alignItems:"end",children:(0,r.Y)("img",{style:{maxWidth:i},src:(0,u.dJ9)("/img/app_page/highlight-6-ios-v2.png",2*i)})})]})})}function v(e){let{abTestingId:t}=e;return(0,r.FD)(c.I1,{gap:16,alignItems:"center",children:[(0,r.Y)(y,{abTestingId:t}),(0,r.FD)(c.Ye,{gap:8,children:[(0,r.Y)(b,{type:"ios"}),(0,r.Y)(b,{type:"android"})]})]})}function y(e){let{abTestingId:t}=e;return(0,r.Y)(c.pT,{border:"detail",radius:"lg",className:h.A.qrContainer,children:(0,r.Y)(c.pT,{className:h.A.qrCode,padding:8,children:(0,r.Y)(a.hj,{abTestingId:t,width:160,height:160,utm_campaign:g,utm_content:f,utm_source:m.VU.qr})})})}function b(e){let{type:t}=e;return(0,r.Y)(c.pT,{style:{minWidth:135},radius:"sm",overflowX:"hidden",overflowY:"hidden",className:h.A.appDownloadButton,as:"a",href:(0,u.wHz)({utm_campaign:g,utm_content:f,utm_source:m.VU.badge,force:"android"===t?"android":"ios"}),onClick:e=>e.stopPropagation(),children:(0,r.Y)("img",{className:"app-upsell",src:(0,u.dJ9)("android"===t?"/img/app_page/google-play.png":"/img/app_page/app-store.png",320),height:40})})}},22057:function(e,t,n){n.d(t,{Z:()=>u});var r=n(69277),i=n(10201),o=n(32485),a=n.n(o),l=n(24078),d=n(89490),c=n(82776),s=n(72458);function u(e){let{users:t,renderAvatar:n=e=>(0,i.Y)(l.eu,(0,r._)({},e)),max:o=5,total:d,size:c=32,direction:u="ltr",className:g,renderCount:f,loading:Y}=e,v=o?t.slice(0,o):t,y=d?d-v.length:o?t.length-o:0,b="rtl"===u?[...v].reverse():v,w=(0,i.Y)(p,{size:c,remainingCount:y}),C=null==f?void 0:f(y),_=.25*c,k=Math.max(.125*c,3);return(0,i.FD)(m,{children:[(0,i.FD)(h,{className:a()(s.A[u],g),style:{"--scale":"".concat(c,"px"),"--offset":"".concat(_,"px"),"--border-width":"".concat(k,"px")},children:[Y?function(e){let{size:t,max:n}=e;return Array(n).fill(null).map((e,r)=>(0,i.Y)(l.mM,{size:t,className:a()(s.A.avatar,0!==r&&s.A.overlap,r===n-1&&s.A.last)},r))}({size:c,max:o}):b.map((e,t)=>n({user:e,size:c,className:a()(s.A.avatar,0!==t&&s.A.overlap,t===b.length-1&&s.A.last)})),y>0&&!f&&w]}),y>0&&f&&C]})}function p(e){let{size:t,remainingCount:n}=e;return(0,i.Y)(l.j0,{className:a()(s.A.avatar,s.A.overlap,s.A.last),size:t,children:(0,i.Y)(l.NV,{size:t,text:"+".concat((0,c.numberToRoughShortString)(Math.max(n,1),{plusSignifier:""}))})})}let m=(0,d.I4)({display:"flex",direction:"row",gap:8,alignItems:"center",justifyContent:"start"}),h=(0,d.I4)({display:"flex",direction:"row",alignItems:"center",justifyContent:"start"})},2824:function(e,t,n){n.d(t,{a:()=>m});var r=n(10201),i=n(67078),o=n(84605),a=n(46271),l=n(12501),d=n(35369),c=n(16993),s=n(84843),u=n(49807),p=n(57324);function m(e){let{isOpen:t,onClose:n,requirement:m,writerId:h}=e,g=(0,a.Jd)(),{iString:f}=(0,o.GO)(),{result:Y}=(0,l.st)({pathname:"/api/v1/user/".concat(h,"/primary-publication"),deps:[h],auto:!0}),v=f("free_subscriber"===m?"Subscribers only":"Paid subscribers only"),y=f("free_subscriber"===m?"To join the conversation, become a subscriber.":"To join the conversation, become a paying subscriber.");return(0,r.FD)(c.aF,{isOpen:t,onClose:n,children:[(0,r.Y)(c.rQ,{alignItems:"center",title:v,description:y,icon:(0,r.Y)(s.qx,{icon:(0,r.Y)(i.A,{})}),showClose:!1}),(0,r.Y)(c.q1,{}),(0,r.Y)(c.jl,{direction:"column",primaryButton:Y?(0,r.Y)(d.$n,{priority:"primary",rounded:!0,href:(0,u.eV6)(Y,{user:g,addBase:!0,params:{utm_source:p.VU.feedCommentReplyRestriction}}),children:f("free_subscriber"===m?"Subscribe":"Upgrade")}):void 0,secondaryButton:(0,r.Y)(d.$n,{priority:"secondary",rounded:!0,onClick:n,children:f(Y?"Cancel":"Ok")})})]})}},81870:function(e,t,n){n.d(t,{C:()=>c});var r=n(10201),i=n(43954),o=n(84605),a=n(35369),l=n(16993),d=n(84843);function c(e){let{isOpen:t,onClose:n}=e,{iString:c}=(0,o.GO)();return(0,r.FD)(l.aF,{isOpen:t,onClose:n,children:[(0,r.Y)(l.rQ,{alignItems:"center",title:c("Confirm your email address"),description:c("Please confirm your email address before posting a note."),icon:(0,r.Y)(d.qx,{icon:(0,r.Y)(i.A,{})}),showClose:!1}),(0,r.Y)(l.q1,{}),(0,r.Y)(l.jl,{direction:"column",primaryButton:(0,r.Y)(a.$n,{priority:"primary",rounded:!0,onClick:n,children:c("Ok")}),secondaryButton:(0,r.Y)(a.$n,{priority:"secondary",href:"/settings",children:c("Resend confirmation email")})})]})}},50630:function(e,t,n){n.d(t,{W:()=>a,r:()=>l});var r=n(10201),i=n(17402);let o=(0,i.createContext)(null);function a(e){let{children:t}=e,[n,a]=(0,i.useState)("email"),[l,d]=(0,i.useState)(""),[c,s]=(0,i.useState)(!1),[u,p]=(0,i.useState)(null);return(0,r.Y)(o.Provider,{value:{mode:n,email:l,verificationCodeEnabled:c,onboardingRedirect:u,setMode:e=>{"magic-link"!==e&&s(!1),a(e)},setEmail:d,setVerificationCodeEnabled:s,setOnboardingRedirect:p},children:t})}function l(){let e=(0,i.useContext)(o);if(!e)throw Error("useSignIn must be used within an SignInProvider");return e}},83842:function(e,t,n){n.d(t,{j:()=>f});var r=n(79785),i=n(10201),o=n(43954),a=n(84605),l=n(59922),d=n(38093),c=n(17028),s=n(16993),u=n(84843),p=n(50630),m=n(62088);function h(){let e=(0,r._)(["We've sent an email to ",". Click the magic link or enter the code below:"]);return h=function(){return e},e}function g(){let e=(0,r._)(["We've sent an email to ",". Click the magic link inside to continue."]);return g=function(){return e},e}let f=e=>{let{noCloseButton:t,noExit:n,onCancel:r,onSuccess:o}=e;return(0,i.FD)(i.FK,{children:[(0,i.Y)(Y,{noCloseButton:!t||n,onCancel:r}),(0,i.Y)(v,{onSuccess:o}),(0,i.Y)(y,{})]})},Y=e=>{let{noCloseButton:t,onCancel:n}=e,{iString:r,iTemplate:l}=(0,a.GO)(),{verificationCodeEnabled:d,email:c}=(0,p.r)();return(0,i.Y)(u.rQ,{title:r("Check your email to continue"),showClose:!t,onClose:n,icon:(0,i.Y)(u.qx,{icon:(0,i.Y)(o.A,{size:20})}),alignItems:"center",description:l(d?h():g(),null!=c?c:"your email address")})};function v(e){let{onSuccess:t}=e,{verificationCodeEnabled:n,email:r,onboardingRedirect:o}=(0,p.r)();return(0,l.A)(()=>{fetch("/api/v1/am_i_logged_in").then(async e=>{(await e.json()).loggedIn&&t()})},5e3),n?(0,i.Y)(s.cw,{children:(0,i.Y)(d.Z,{email:r,redirect:o||document.location.href})}):(0,i.Y)(s.q1,{})}let y=()=>{let{iString:e}=(0,a.GO)(),{setMode:t}=(0,p.r)();return(0,i.Y)(m.dt,{children:(0,i.FD)(i.FK,{children:[e("Didn't get the email? "),(0,i.Y)(c.Yq,{color:"substack",decoration:"hover-underline",onClick:()=>t("email"),cursor:"pointer",children:e("Try again")})]})})}},23358:function(e,t,n){n.d(t,{_:()=>f});var r=n(10201),i=n(84605),o=n(43294),a=n(94729),l=n(12501),d=n(68349),c=n(17028),s=n(20500),u=n(16993),p=n(65842),m=n(50630),h=n(62088),g=n(95755);let f=e=>{let{overrideTitle:t,noCloseButton:n,onCancel:i,onSignup:o,onUserCreated:a,redirectOverride:l}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)(h.$P,{overrideTitle:t,noCloseButton:n,onCancel:i,onSignup:o}),(0,r.Y)(Y,{onUserCreated:a,redirectOverride:l})]})};function Y(e){let{onUserCreated:t,redirectOverride:n}=e,{iString:h}=(0,i.GO)(),{setMode:f,setEmail:Y,setVerificationCodeEnabled:v,setOnboardingRedirect:y,email:b}=(0,m.r)(),w=(0,o.X)(),C=(0,l.st)({pathname:"/api/v1/email-login",method:"POST"});return(0,r.FD)("form",{onSubmit:e=>{if(e.preventDefault(),C.isLoading)return;let r=e.currentTarget.email.value;C.refetch({json:{email:r,redirect:n||location.pathname,can_create_user:!0}}).then(e=>{if(!(e instanceof a.fk)){if(!(e instanceof Error)&&"optional"===e.verification_code){v(!0),Y(r),y(e.onboarding_redirect||null),f("magic-link");return}if(!(e instanceof Error)&&e.user){if(t)return void t(e.user);window.location.reload()}Y(r),f("magic-link")}})},children:[(0,r.Y)(u.cw,{className:g.A.modalBody,children:(0,r.FD)(c.VP,{gap:16,children:[(0,r.Y)(p.ks,{type:"email",name:"email",placeholder:h("Your email"),autoComplete:"email",ref:w,autoFocus:!0,defaultValue:b}),C.error&&(0,r.Y)(s.yn,{children:(0,d.uX)(C.error)})]})}),(0,r.Y)(u.jl,{direction:"column",primaryButton:(0,r.Y)(c.$n,{priority:"primary",type:"submit",loading:C.isLoading,children:h("Continue")}),secondaryButton:(0,r.Y)(c.$n,{priority:"secondary-outline",onClick:()=>{var e;Y((null==(e=w.current)?void 0:e.value)||""),f("password")},children:h("Sign in with password")}),buttonDivider:(0,r.Y)(c.vj,{})})]})}},82804:function(e,t,n){n.d(t,{Q:()=>h});var r=n(10201),i=n(67078),o=n(84605),a=n(94729),l=n(12501),d=n(38093),c=n(17028),s=n(16993),u=n(84843),p=n(50630),m=n(62088);let h=e=>{let{onSuccess:t}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)(g,{}),(0,r.Y)(f,{onSuccess:t}),(0,r.Y)(Y,{})]})},g=()=>{let{iString:e}=(0,o.GO)();return(0,r.Y)(u.rQ,{title:e("Enter the code from your authenticator app"),description:e("This helps us make sure it's really you."),showClose:!1,icon:(0,r.Y)(u.qx,{icon:(0,r.Y)(i.A,{size:20})}),alignItems:"center"})};function f(e){let{onSuccess:t}=e,n=(0,l.st)({pathname:"/api/v1/mfa-login",method:"Post"});return(0,r.Y)(s.cw,{children:(0,r.Y)(c.VP,{gap:16,children:(0,r.Y)(d.Q,{onComplete:e=>{n.isLoading||n.refetch({json:{code:e}}).then(e=>{e instanceof a.fk||t()})},error:n.error,isLoading:n.isLoading})})})}let Y=()=>{let{iString:e}=(0,o.GO)(),{setMode:t}=(0,p.r)();return(0,r.Y)(m.dt,{children:(0,r.FD)(r.FK,{children:[e("Made a mistake? "),(0,r.Y)(c.Yq,{color:"substack",decoration:"hover-underline",onClick:()=>t("email"),cursor:"pointer",children:e("Start over")})]})})}},23191:function(e,t,n){n.d(t,{d:()=>v});var r=n(10201),i=n(17402),o=n(42250),a=n(84605),l=n(43294),d=n(94729),c=n(12501),s=n(68349),u=n(17028),p=n(20500),m=n(16993),h=n(65842),g=n(50630),f=n(62088),Y=n(95755);let v=e=>{let{overrideTitle:t,noCloseButton:n,noExit:i,onCancel:o,onSignup:a,onSuccess:l}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)(f.$P,{overrideTitle:t,noCloseButton:n||i,onCancel:o,onSignup:a}),(0,r.Y)(y,{onSuccess:l})]})};function y(e){let{onSuccess:t}=e,{iString:n}=(0,a.GO)(),{email:f,setEmail:v,setMode:y}=(0,g.r)(),b=(0,c.st)({pathname:"/api/v1/login",method:"post"}),w=(0,i.useRef)(),C=(0,l.X)(),_=(0,l.X)(),k=async e=>{if(e.preventDefault(),b.isLoading)return;let n=Object.fromEntries(Array.from(e.currentTarget.elements).filter(e=>e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement).map(e=>[e.name,e.value]));w.current&&(n.captcha_response=w.current.getResponse());let r=await b.refetch({json:n});r instanceof Error||(r.mfa_required?y("mfa"):t())};return(0,r.FD)(r.FK,{children:[b.error instanceof d.fk&&401===b.error.response.status&&(0,r.Y)(o.A,{ref:w}),(0,r.FD)("form",{onSubmit:k,children:[(0,r.Y)(m.cw,{className:Y.A.modalBody,children:(0,r.FD)(u.VP,{gap:8,children:[(0,r.Y)(h.ks,{type:"email",name:"email",placeholder:n("Your email"),autoComplete:"email",ref:_,defaultValue:f,autoFocus:!0}),(0,r.Y)(h.ks,{type:"password",name:"password",placeholder:n("Your password"),ref:C}),b.error&&(0,r.Y)(p.yn,{children:(0,s.uX)(b.error)})]})}),(0,r.Y)(m.jl,{direction:"column",primaryButton:(0,r.Y)(u.$n,{priority:"primary",type:"submit",loading:b.isLoading,children:n("Continue")}),secondaryButton:(0,r.Y)(u.$n,{priority:"secondary-outline",onClick:()=>{var e;v((null==(e=_.current)?void 0:e.value)||""),y("email")},children:n("Sign in with email")}),buttonDivider:(0,r.Y)(u.vj,{})})]})]})}},72104:function(e,t,n){n.d(t,{k:()=>d,D:()=>l});var r,i=n(95951),o=((r=o||{})[r.Vibrant=0]="Vibrant",r[r.DarkVibrant=1]="DarkVibrant",r[r.LightVibrant=2]="LightVibrant",r[r.Muted=3]="Muted",r[r.DarkMuted=4]="DarkMuted",r[r.LightMuted=5]="LightMuted",r);let a=Object.keys(o),l={custom:{green:"var(--color-bg-marketing-green)",orange:"var(--color-accent-fg-orange)"},basic:{primary:"var(--color-bg-secondary)"},image:{tintedImageMuted:"cover_image_tinted_muted",tintedImageVibrant:"cover_image_tinted_vibrant",fadedImage:"cover_image_faded",blurredImage:"cover_image_blurred"}};function d(e){let{coverImage:t,palette:n}=e;return i.PK.filter(e=>e in l.basic||e in l.custom||e in l.image&&!!t||!!a.includes(e)&&!!(null==n?void 0:n[e]))}},95951:function(e,t,n){n.d(t,{PK:()=>r,Rt:()=>o,zr:()=>a});let r=["DarkMuted","Vibrant","green","orange","primary","blurredImage","fadedImage","tintedImageMuted","tintedImageVibrant"];var i,o=((i={}).Left="left",i.Center="center",i);let a=Object.values(o)}}]);