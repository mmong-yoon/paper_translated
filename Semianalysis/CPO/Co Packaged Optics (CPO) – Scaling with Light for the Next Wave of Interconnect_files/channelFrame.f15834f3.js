(()=>{var e,t,n,r,o={2404:function(e,t,n){var r=n(60270);e.exports=function(e,t){return r(e,t)}},6585:function(e){function t(e,t,n,r){return Math.round(e/n)+" "+r+(t>=1.5*n?"s":"")}e.exports=function(e,n){n=n||{};var r,o,a,i,s=typeof e;if("string"===s&&e.length>0){var u=e;if(!((u=String(u)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(c){var l=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return 6048e5*l;case"days":case"day":case"d":return 864e5*l;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*l;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*l;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:break}}}return}if("number"===s&&isFinite(e)){return n.long?(o=Math.abs(r=e))>=864e5?t(r,o,864e5,"day"):o>=36e5?t(r,o,36e5,"hour"):o>=6e4?t(r,o,6e4,"minute"):o>=1e3?t(r,o,1e3,"second"):r+" ms":(i=Math.abs(a=e))>=864e5?Math.round(a/864e5)+"d":i>=36e5?Math.round(a/36e5)+"h":i>=6e4?Math.round(a/6e4)+"m":i>=1e3?Math.round(a/1e3)+"s":a+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},45994:function(e,t,n){"use strict";n.d(t,{Bi:()=>O,J0:()=>b,Kr:()=>k,MN:()=>S,Md:()=>H,NT:()=>E,Nf:()=>I,WO:()=>w,Yn:()=>D,hb:()=>N,li:()=>y,vJ:()=>g});var r,o,a,i,s=n(50172),u=0,c=[],l=s.options,d=l.__b,_=l.__r,f=l.diffed,p=l.__c,h=l.unmount,m=l.__;function v(e,t){l.__h&&l.__h(o,e,u||t),u=0;var n=o.__H||(o.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function b(e){return u=1,w(x,e)}function w(e,t,n){var a=v(r++,2);if(a.t=e,!a.__c&&(a.__=[n?n(t):x(void 0,t),function(e){var t=a.__N?a.__N[0]:a.__[0],n=a.t(t,e);t!==n&&(a.__N=[n,a.__[1]],a.__c.setState({}))}],a.__c=o,!o.__f)){var i=function(e,t,n){if(!a.__c.__H)return!0;var r=a.__c.__H.__.filter(function(e){return!!e.__c});if(r.every(function(e){return!e.__N}))return!s||s.call(this,e,t,n);var o=a.__c.props!==e;return r.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}}),s&&s.call(this,e,t,n)||o};o.__f=!0;var s=o.shouldComponentUpdate,u=o.componentWillUpdate;o.componentWillUpdate=function(e,t,n){if(this.__e){var r=s;s=void 0,i(e,t,n),s=r}u&&u.call(this,e,t,n)},o.shouldComponentUpdate=i}return a.__N||a.__}function g(e,t){var n=v(r++,3);!l.__s&&j(n.__H,t)&&(n.__=e,n.u=t,o.__H.__h.push(n))}function I(e,t){var n=v(r++,4);!l.__s&&j(n.__H,t)&&(n.__=e,n.u=t,o.__h.push(n))}function y(e){return u=5,k(function(){return{current:e}},[])}function D(e,t,n){u=6,I(function(){if("function"==typeof e){var n=e(t());return function(){e(null),n&&"function"==typeof n&&n()}}if(e)return e.current=t(),function(){return e.current=null}},null==n?n:n.concat(e))}function k(e,t){var n=v(r++,7);return j(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function N(e,t){return u=8,k(function(){return e},t)}function E(e){var t=o.context[e.__c],n=v(r++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(o)),t.props.value):e.__}function S(e,t){l.useDebugValue&&l.useDebugValue(t?t(e):e)}function H(e){var t=v(r++,10),n=b();return t.__=e,o.componentDidCatch||(o.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]}function O(){var e=v(r++,11);if(!e.__){for(var t=o.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function P(){for(var e;e=c.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(M),e.__H.__h.forEach(A),e.__H.__h=[]}catch(t){e.__H.__h=[],l.__e(t,e.__v)}}l.__b=function(e){o=null,d&&d(e)},l.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),m&&m(e,t)},l.__r=function(e){_&&_(e),r=0;var t=(o=e.__c).__H;t&&(a===o?(t.__h=[],o.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(M),t.__h.forEach(A),t.__h=[],r=0)),a=o},l.diffed=function(e){f&&f(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==c.push(t)&&i===l.requestAnimationFrame||((i=l.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),T&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);T&&(t=requestAnimationFrame(n))})(P)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),a=o=null},l.__c=function(e,t){t.some(function(e){try{e.__h.forEach(M),e.__h=e.__h.filter(function(e){return!e.__||A(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],l.__e(n,e.__v)}}),p&&p(e,t)},l.unmount=function(e){h&&h(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{M(e)}catch(e){t=e}}),n.__H=void 0,t&&l.__e(t,n.__v))};var T="function"==typeof requestAnimationFrame;function M(e){var t=o,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),o=t}function A(e){var t=o;e.__c=e.__(),o=t}function j(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function x(e,t){return"function"==typeof t?t(e):t}},87369:function(e,t,n){var r=n(84129),o=[n(99653),n(65416),n(9234),n(81529)];e.exports=r.createStore(o,[])},66616:function(e,t,n){"use strict";var r=n(34835),o=n(17402),a=n(86500);class i extends o.Component{componentDidMount(){let{likelyLoggedIn:e,loggedInSubscriberStat:t}=this.props.initialData;this.post({type:"frame-state",loggedInAtSubstack:!!e,subscriberState:t}),(0,a.u4)(a.qY.FRAME_MESSAGE_SENT,{hasUserState:!!t})}post(e){var t,n;let{protocol:r,port:o}=window.location,a=null==(t=this.props.initialData)?void 0:t.targetOrigin,i=(null==a?void 0:a.startsWith("http"))?a:"".concat(r,"//").concat(a).concat(o?":".concat(o):"");null==(n=window.top)||n.postMessage(e,i)}render(){return""}}(0,r.A)(i)},86500:function(e,t,n){"use strict";n.d(t,{Bu:()=>o.T,qY:()=>r.qY,u4:()=>r.u4}),n(25757),n(66565);var r=n(44803),o=n(43880)},44803:function(e,t,n){"use strict";n.d(t,{MY:()=>S,j6:()=>y,qY:()=>v,u4:()=>N});var r,o,a=n(72343),i=n(53928),s=n(4392),u=n(66565),c=n(7354),l=n(13022),d=n(82260),_=n(68349);n(40659),n(16291);var f=n(18189),p=n(39318),h=n(41086),m=n(94402);n(82776);let v=f.q,b="undefined"!=typeof window,w=!!(b&&window.navigator&&window.navigator.sendBeacon),g=!(0,_.lT)()&&w,I=new c.W({batchOptions:g?{maxBatchSize:8,maxBatchDataSize:1e4}:void 0,send:function(e,t){b&&(g&&t&&e.push(O(e,t)),new Image().src=(0,p.yRP)(g?"/api/v1/firehose/batch":"/api/v1/firehose",{_:new Date().getTime(),d:e.join(",")}))},beacon:function(e,t){if(!b)return;e.push(O(e,"beacon",t));let n=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon("/api/v1/firehose/batch",n)}}),y=()=>{b&&g&&(window.addEventListener("beforeunload",e=>{I.sendBeacon(e)}),window.addEventListener("pagehide",e=>{I.sendBeacon(e)}),document.addEventListener("visibilitychange",e=>{"hidden"===document.visibilityState&&I.sendBeacon(e)}),setInterval(()=>{I.intervalFlush()},6e4))},D=b&&window!=window.top&&(0,m.G)(_.QT),k="browser";function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n;if(["development","test"].includes((n="production",void 0!==n)?n:"")&&!e)throw Error("`undefined` event passed to FRONTEND track call");P(e,Object.assign({},t))}catch(e){try{window.Sentry&&window.Sentry.captureException(e)}catch(t){console.error("Failed to track event",e)}}}b&&(navigator.standalone||(null==(r=(o=window).matchMedia)?void 0:r.call(o,"(display-mode: standalone)").matches))&&(k="standalone");let E=()=>document.location.pathname.startsWith("/p/");function S(){var e,t,n,r,o,a,s;let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"==typeof document||document.location.pathname.startsWith("/embed")&&b&&(null==(n=window)||null==(t=n._preloads)||null==(e=t.pub)?void 0:e.embed_tracking_disabled))return;P(v.PAGES,Object.assign(function(){let e={};if(b){let t=window._preloads&&"post"in window._preloads&&window._preloads.post,n=window.location&&/^\/p\/([^\/]+)/.exec(window.location.pathname),r=window.location&&/\/p-(\d+)/.exec(window.location.pathname);if(n&&n[1]){let r=n[1];t&&t.slug===r&&(e.post_id=t.id,e.post_audience=t.audience,e.post_type=t.type),e.post_slug=r}else r&&r[1]&&(e.post_id=parseInt(r[1]))}return e}(),c));let _=(0,u.wJ)();if(_&&(new Image().src="https://www.facebook.com/tr?id=".concat(_,"&ev=PageView")),(0,d.F)("pageview"),(0,u.b8)("pageview"),(0,u.BU)("page_view"),b&&!E()&&(0,i.Mz)({path:document.location.pathname,title:document.title,sections:"",authors:""}),b&&window.PARSELY&&window.PARSELY.loaded&&window.PARSELY.beacon&&window.PARSELY.beacon.trackPageView){let e={url:document.location.origin+document.location.pathname+document.location.search,urlref:document.referrer||"",js:1,data:{}};if((0,l.Ay)("add_section_and_tag_metadata")){let t,n,i;if(E()&&(n=(null==(t=window._preloads)||null==(r=t.post)?void 0:r.id)&&(null==t?void 0:t.pub),i=!!(null==t||null==(o=t.post)?void 0:o.slug)&&(null==t||null==(a=t.post)?void 0:a.slug)===document.location.pathname.split("/")[document.location.pathname.split("/").length-1],!(n&&E())||!i))return;if(E()){let t=window._preloads;e.data={audience:(s=null==t?void 0:t.user)?s.is_subscribed?"Paid subs":s.is_free_subscribed?"Free subs":"Anonymous":"Anonymous"}}}window.PARSELY.beacon.trackPageView(e)}}function H(e){var t,n,r,o,i,u,c,l,d;let f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=null;try{p=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}let m={event:e,timestamp:new Date().toISOString(),properties:Object.assign({browserSessionId:s.O,iframeVisitId:D,r:(0,h.y)("r"),magicUserId:"undefined"!=typeof window&&(null==(r=window)||null==(n=r._preloads)||null==(t=n.user)?void 0:t.is_magic)?window._preloads.user.id:void 0},f),context:{client_type:"web",displayMode:k,page:{referrer:document.referrer,title:document.title,url:document.location.href,height:null!=(u="undefined"!=typeof window&&window.innerHeight)?u:0,width:null!=(c="undefined"!=typeof window&&window.innerWidth)?c:0},campaign:(0,a.t)(),timezone:p,screen:{height:null!=(l="undefined"!=typeof window&&(null==(o=window.screen)?void 0:o.height))?l:0,width:null!=(d="undefined"!=typeof window&&(null==(i=window.screen)?void 0:i.width))?d:0}}};return(0,_.Cw)(JSON.stringify(m))}function O(e,t,n){let r=e.length,o=e.map(e=>e.length).reduce((e,t)=>e+t,0);return H(v.FIREHOSE_BATCH_SENT,{dataSize:o,batchSize:r,batchType:t,eventType:null==n?void 0:n.type})}function P(e){var t,n,r;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||"undefined"==typeof document)return;let a=H(e,o);I.add(a),(null==(r=window)||null==(n=r._preloads)||null==(t=n.user)?void 0:t.is_global_admin)&&console.log("EVENT: ".concat(e),o)}},17186:function(e,t,n){"use strict";n(87369)},48863:function(e,t,n){"use strict";function r(e){if(null==e)return{};try{var t,n,r;let o=new URL(e);if("substack:"!==o.protocol)return{};let a={},i=o.pathname.split("/").filter(e=>e.length>0),s=new URLSearchParams(o.search),u={};s.forEach((e,t)=>{u[t]=e}),Object.keys(u).length>0&&(a.queryParams=u);let c=o.host;if(null==c&&0===Object.keys(u).length)return a;switch(c){case"users":i[0]&&"me"!==i[0]&&(a.surface="profile",a.userID=Number(i[0]),a.surfaceID=a.userID);break;case"posts":case"post":i[0]&&(a.postID=Number(i[0]),a.surface="post",a.surfaceID=a.postID),"comments"===i[1]&&(a.commentID=i[2],a.surface="post-comment",a.surfaceID=Number(i[0]),i[2]&&(a.surfaceID=Number(a.commentID)));break;case"publications":i[0]&&(a.publicationID=Number(i[0]),a.surface="publication",a.surfaceID=a.publicationID),"posts"===i[1]&&i[2]&&(a.slug=i[2],a.surface="post",a.surfaceID=a.slug),"drafts"===i[1]&&i[2]&&(a.draftID=i[2]),"chat"===i[1]&&(a.surface="publication-chat",a.surfaceID=a.publicationID),"threads"===i[1]&&(a.surface="publication-threads",a.surfaceID=a.publicationID);break;case"notes":a.surface="notes",i[0]&&(a.noteID=i[0],a.surfaceID=a.noteID,"module"===i[0]&&null!=i[1]&&(a.surface="notes-module",a.surfaceID=i[1]));break;case"communityPosts":i[0]&&(a.communityPostID=i[0],a.surface="community-post",a.surfaceID=a.communityPostID);break;case"communityComments":i[0]&&(a.replyID=i[0],a.surface="community-comments",a.surfaceID=a.replyID);break;case"messages":"dm"===i[0]&&(a.surface="dm","user"===i[1]&&i[2]?a.userID=Number(i[2]):i[1]&&(a.threadID=i[1],a.surface="dm-thread",a.surfaceID=a.threadID,"reply"===i[2]&&i[3]&&(a.messageID=i[3],a.surface="dm-reply",a.surfaceID=a.messageID)));break;case"accept-gift":i[0]&&(a.giftID=i[0],a.surfaceID=a.giftID,a.surface="accept-gift");break;case"send-reader-gifts":i[0]&&(a.giftID=i[0],a.surfaceID=a.giftID,a.surface="send-reader-gift");break;case"post-collection":i[0]&&(a.collectionID=i[0]);break;case"live-stream":i[0]&&(a.streamID=i[0],a.surface="live-stream",a.surfaceID=a.streamID,"invite"===i[1]&&i[2]&&(a.inviteID=i[2]));break;case"feed":a.surface="feed","topic"===i[0]&&i[1]?(a.topicID=i[1],a.surface="feed-topic",a.surfaceID=a.topicID):i[0]&&(a.noteID=i[0],a.surfaceID=a.noteID);break;case"post-composer":i[0]&&(a.draftID=i[0]);break;case"media-feed":i[0]&&(a.surface="media-feed",a.noteID=i[0],a.surfaceID=a.noteID);break;case"publication":i[0]&&(a.publicationID=Number(i[0]),a.surface="publication",a.surfaceID=a.publicationID,"post"===i[1]&&i[2]&&(a.postID=Number(i[2]),a.surface="post",a.surfaceID=a.postID));break;case"leaderboard":i[0]&&(a.surface="leaderboard",a.surfaceID=i[0]);break;case"user-suggestions":a.surface="user-suggestions";break;case"search":a.surface="app-search";break;case"discover":a.surface="discover"}return u.query&&(a.query=u.query,"app-search"===a.surface&&(a.surfaceID=a.query)),u.url&&(a.url=u.url),null!=u.name&&null!=u.id&&(a.categoryID=u.id,"discover"===a.surface&&(a.surfaceID=a.categoryID)),(null!=u.postId||null!=u.post_id)&&(a.postID=Number(null!=(t=u.postId)?t:u.post_id),a.surface="posts"===c?"post":c,a.surfaceID=a.postID),(null!=u.publicationId||null!=u.publication_id)&&(a.publicationID=Number(null!=(n=u.publicationId)?n:u.publication_id),a.surface="posts"===c?"post":c,a.surfaceID=null!=(r=a.postID)?r:a.publicationID),null!=a.publicationID&&isNaN(a.publicationID)&&delete a.publicationID,null!=a.userID&&isNaN(a.userID)&&delete a.userID,null!=a.postID&&isNaN(a.postID)&&delete a.postID,null!=a.surfaceID&&"string"!=typeof a.surfaceID&&isNaN(a.surfaceID)&&delete a.surfaceID,a}catch(e){return{}}}n.d(t,{qc:()=>r}),n(92636)},60639:function(e,t,n){"use strict";n.d(t,{uV:()=>o});var r=n(99851);class o extends Error{constructor(e,t={},n=!1,o=null){let a,i;super(e),(0,r._)(this,"status",void 0),(0,r._)(this,"userVisible",void 0),(0,r._)(this,"messageHtml",void 0),(0,r._)(this,"response",void 0),(0,r._)(this,"type",void 0),(0,r._)(this,"metadata",void 0),this.name=this.constructor.name;let s=null,u=null,c=null;if("object"==typeof t){var l,d,_,f,p,h;a=null!=(l=t.status)?l:500,n=null!=(d=t.userVisible)&&d,o=null!=(_=t.messageHtml)?_:null,s=null!=(f=t.responseBody)?f:null,u=null!=(p=t.type)?p:null,c=null!=(h=t.metadata)?h:null}else a=t;this.status=a,this.userVisible=!!s||n,this.messageHtml=o,this.type=u,this.metadata=c,s?i=s:this.userVisible?o?i={errors:[{msg:e,msgHTML:o}],type:"list"}:(i={error:e,type:"single"},this.type&&(i.type=this.type),this.metadata&&(i.metadata=this.metadata)):i={error:""},this.response={body:i},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=o,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),e=[],i.O=(t,n,r,o)=>{if(n){o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[n,r,o];return}for(var s=1/0,a=0;a<e.length;a++){for(var[n,r,o]=e[a],u=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(i.O).every(e=>i.O[e](n[c]))?n.splice(c--,1):(u=!1,o<s&&(s=o));if(u){e.splice(a--,1);var l=r();void 0!==l&&(t=l)}}return t},t={4272:0},i.O.j=e=>0===t[e],n=(e,n)=>{var r,o,[a,s,u]=n,c=0;if(a.some(e=>0!==t[e])){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(u)var l=u(i)}for(e&&e(n);c<a.length;c++)o=a[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(l)},(r=self.webpackChunksubstack=self.webpackChunksubstack||[]).forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r));var s=i.O(void 0,["8047","7583","6992","4601","9017","7752","4395","3671","7890","3305"],function(){return i(66616)});s=i.O(s)})();