(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["586"],{83915:function(e,t,n){var r=n(38859),o=n(15325),i=n(29905),a=n(34932),u=n(27301),l=n(19219);e.exports=function(e,t,n,s){var c=-1,d=o,f=!0,p=e.length,m=[],v=t.length;if(!p)return m;n&&(t=a(t,u(n))),s?(d=i,f=!1):t.length>=200&&(d=l,f=!1,t=new r(t));e:for(;++c<p;){var w=e[c],y=null==n?w:n(w);if(w=s||0!==w?w:0,f&&y==y){for(var h=v;h--;)if(t[h]===y)continue e;m.push(w)}else d(t,y,s)||m.push(w)}return m}},69302:function(e,t,n){var r=n(83488),o=n(56757),i=n(32865);e.exports=function(e,t){return i(o(e,t,r),e+"")}},83693:function(e,t,n){var r=n(64894),o=n(40346);e.exports=function(e){return o(e)&&r(e)}},74242:function(e,t,n){"use strict";n.d(t,{A:()=>r});let r=(0,n(81315).A)("user-round-check",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]])},31062:function(e,t,n){"use strict";n.d(t,{A:()=>r});let r=(0,n(81315).A)("user-round-x",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]])},63122:function(e,t,n){"use strict";n.d(t,{A:()=>r});let r=(0,n(81315).A)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])},61133:function(e,t,n){"use strict";n.d(t,{bL:()=>F,UC:()=>$,l9:()=>_,ZL:()=>U});var r,o=n(17402);function i(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}"undefined"!=typeof window&&window.document&&window.document.createElement;var a=n(94341),u=n(97372);function l(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let n=!1,r=e.map(e=>{let r=l(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():l(e[t],null)}}}}function c(...e){return o.useCallback(s(...e),e)}var d=n(73809),f=n(51181),p=globalThis?.document?o.useLayoutEffect:()=>{},m=e=>{var t;let n,r,{present:i,children:a}=e,u=function(e){var t,n;let[r,i]=o.useState(),a=o.useRef(null),u=o.useRef(e),l=o.useRef("none"),[s,c]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},o.useReducer((e,t)=>n[e][t]??e,t));return o.useEffect(()=>{let e=v(a.current);l.current="mounted"===s?e:"none"},[s]),p(()=>{let t=a.current,n=u.current;if(n!==e){let r=l.current,o=v(t);e?c("MOUNT"):"none"===o||t?.display==="none"?c("UNMOUNT"):n&&r!==o?c("ANIMATION_OUT"):c("UNMOUNT"),u.current=e}},[e,c]),p(()=>{if(r){let e,t=r.ownerDocument.defaultView??window,n=n=>{let o=v(a.current).includes(CSS.escape(n.animationName));if(n.target===r&&o&&(c("ANIMATION_END"),!u.current)){let n=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=n)})}},o=e=>{e.target===r&&(l.current=v(a.current))};return r.addEventListener("animationstart",o),r.addEventListener("animationcancel",n),r.addEventListener("animationend",n),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",o),r.removeEventListener("animationcancel",n),r.removeEventListener("animationend",n)}}c("ANIMATION_END")},[r,c]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:o.useCallback(e=>{a.current=e?getComputedStyle(e):null,i(e)},[])}}(i),l="function"==typeof a?a({present:u.isPresent}):o.Children.only(a),s=c(u.ref,(t=l,(r=(n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in n&&n.isReactWarning)?t.ref:(r=(n=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in n&&n.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof a||u.isPresent?o.cloneElement(l,{ref:s}):null};function v(e){return e?.animationName||"none"}m.displayName="Presence";var w=Symbol("radix.slottable");function y(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===w}var h=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var n,r;let i,u,l,c=(r=n=`Primitive.${t}`,(i=o.forwardRef((e,t)=>{let{children:n,...r}=e;if(o.isValidElement(n)){var i;let e,a,u=(i=n,(a=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(a=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),l=function(e,t){let n={...t};for(let r in t){let o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...e)=>{let t=i(...e);return o(...e),t}:o&&(n[r]=o):"style"===r?n[r]={...o,...i}:"className"===r&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==o.Fragment&&(l.ref=t?s(t,u):u),o.cloneElement(n,l)}return o.Children.count(n)>1?o.Children.only(null):null})).displayName=`${r}.SlotClone`,u=i,(l=o.forwardRef((e,t)=>{let{children:n,...r}=e,i=o.Children.toArray(n),l=i.find(y);if(l){let e=l.props.children,n=i.map(t=>t!==l?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,a.Y)(u,{...r,ref:t,children:o.isValidElement(e)?o.cloneElement(e,void 0,n):null})}return(0,a.Y)(u,{...r,ref:t,children:n})})).displayName=`${n}.Slot`,l),d=o.forwardRef((e,n)=>{let{asChild:r,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.Y)(r?c:t,{...o,ref:n})});return d.displayName=`Primitive.${t}`,{...e,[t]:d}},{}),E=n(46546),g="HoverCard",[N,T]=function(e,t=[]){let n=[],r=()=>{let t=n.map(e=>o.createContext(e));return function(n){let r=n?.[e]||t;return o.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){let i=o.createContext(r),u=n.length;n=[...n,r];let l=t=>{let{scope:n,children:r,...l}=t,s=n?.[e]?.[u]||i,c=o.useMemo(()=>l,Object.values(l));return(0,a.Y)(s.Provider,{value:c,children:r})};return l.displayName=t+"Provider",[l,function(n,a){let l=a?.[e]?.[u]||i,s=o.useContext(l);if(s)return s;if(void 0!==r)return r;throw Error(`\`${n}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=n.reduce((t,{useScope:n,scopeName:r})=>{let o=n(e)[`__scope${r}`];return{...t,...o}},{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}(r,...t)]}(g,[d.Bk]),b=(0,d.Bk)(),[C,R]=N(g),x=e=>{let{__scopeHoverCard:t,children:n,open:r,defaultOpen:i,onOpenChange:l,openDelay:s=700,closeDelay:c=300}=e,f=b(t),p=o.useRef(0),m=o.useRef(0),v=o.useRef(!1),w=o.useRef(!1),[y,h]=(0,u.i)({prop:r,defaultProp:i??!1,onChange:l,caller:g}),E=o.useCallback(()=>{clearTimeout(m.current),p.current=window.setTimeout(()=>h(!0),s)},[s,h]),N=o.useCallback(()=>{clearTimeout(p.current),v.current||w.current||(m.current=window.setTimeout(()=>h(!1),c))},[c,h]),T=o.useCallback(()=>h(!1),[h]);return o.useEffect(()=>()=>{clearTimeout(p.current),clearTimeout(m.current)},[]),(0,a.Y)(C,{scope:t,open:y,onOpenChange:h,onOpen:E,onClose:N,onDismiss:T,hasSelectionRef:v,isPointerDownOnContentRef:w,children:(0,a.Y)(d.bL,{...f,children:n})})};x.displayName=g;var P="HoverCardTrigger",S=o.forwardRef((e,t)=>{let{__scopeHoverCard:n,...r}=e,o=R(P,n),u=b(n);return(0,a.Y)(d.Mz,{asChild:!0,...u,children:(0,a.Y)(h.a,{"data-state":o.open?"open":"closed",...r,ref:t,onPointerEnter:i(e.onPointerEnter,I(o.onOpen)),onPointerLeave:i(e.onPointerLeave,I(o.onClose)),onFocus:i(e.onFocus,o.onOpen),onBlur:i(e.onBlur,o.onClose),onTouchStart:i(e.onTouchStart,e=>e.preventDefault())})})});S.displayName=P;var O="HoverCardPortal",[M,L]=N(O,{forceMount:void 0}),D=e=>{let{__scopeHoverCard:t,forceMount:n,children:r,container:o}=e,i=R(O,t);return(0,a.Y)(M,{scope:t,forceMount:n,children:(0,a.Y)(m,{present:n||i.open,children:(0,a.Y)(f.Z,{asChild:!0,container:o,children:r})})})};D.displayName=O;var k="HoverCardContent",A=o.forwardRef((e,t)=>{let n=L(k,e.__scopeHoverCard),{forceMount:r=n.forceMount,...o}=e,u=R(k,e.__scopeHoverCard);return(0,a.Y)(m,{present:r||u.open,children:(0,a.Y)(Y,{"data-state":u.open?"open":"closed",...o,onPointerEnter:i(e.onPointerEnter,I(u.onOpen)),onPointerLeave:i(e.onPointerLeave,I(u.onClose)),ref:t})})});A.displayName=k;var Y=o.forwardRef((e,t)=>{let{__scopeHoverCard:n,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:s,onInteractOutside:f,...p}=e,m=R(k,n),v=b(n),w=o.useRef(null),y=c(t,w),[h,g]=o.useState(!1);return o.useEffect(()=>{if(h){let e=document.body;return r=e.style.userSelect||e.style.webkitUserSelect,e.style.userSelect="none",e.style.webkitUserSelect="none",()=>{e.style.userSelect=r,e.style.webkitUserSelect=r}}},[h]),o.useEffect(()=>{if(w.current){let e=()=>{g(!1),m.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(m.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",e),()=>{document.removeEventListener("pointerup",e),m.hasSelectionRef.current=!1,m.isPointerDownOnContentRef.current=!1}}},[m.isPointerDownOnContentRef,m.hasSelectionRef]),o.useEffect(()=>{w.current&&(function(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t})(w.current).forEach(e=>e.setAttribute("tabindex","-1"))}),(0,a.Y)(E.qW,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:f,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:i(s,e=>{e.preventDefault()}),onDismiss:m.onDismiss,children:(0,a.Y)(d.UC,{...v,...p,onPointerDown:i(p.onPointerDown,e=>{e.currentTarget.contains(e.target)&&g(!0),m.hasSelectionRef.current=!1,m.isPointerDownOnContentRef.current=!0}),ref:y,style:{...p.style,userSelect:h?"text":void 0,WebkitUserSelect:h?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})});function I(e){return t=>"touch"===t.pointerType?void 0:e()}o.forwardRef((e,t)=>{let{__scopeHoverCard:n,...r}=e,o=b(n);return(0,a.Y)(d.i3,{...o,...r,ref:t})}).displayName="HoverCardArrow";var F=x,_=S,U=D,$=A},28001:function(e,t,n){"use strict";n.d(t,{VY:()=>eo,LM:()=>et,rc:()=>ei,bL:()=>en,Kq:()=>ee,hE:()=>er,bm:()=>ea});var r=n(17402);function o(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let n=!1,r=e.map(e=>{let r=i(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():i(e[t],null)}}}}function u(...e){return r.useCallback(a(...e),e)}"undefined"!=typeof window&&window.document&&window.document.createElement;var l=n(6218),s=n(94341),c=n(46546),d=n(51181),f=globalThis?.document?r.useLayoutEffect:()=>{},p=e=>{var t;let n,o,{present:i,children:a}=e,l=function(e){var t,n;let[o,i]=r.useState(),a=r.useRef(null),u=r.useRef(e),l=r.useRef("none"),[s,c]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},r.useReducer((e,t)=>n[e][t]??e,t));return r.useEffect(()=>{let e=m(a.current);l.current="mounted"===s?e:"none"},[s]),f(()=>{let t=a.current,n=u.current;if(n!==e){let r=l.current,o=m(t);e?c("MOUNT"):"none"===o||t?.display==="none"?c("UNMOUNT"):n&&r!==o?c("ANIMATION_OUT"):c("UNMOUNT"),u.current=e}},[e,c]),f(()=>{if(o){let e,t=o.ownerDocument.defaultView??window,n=n=>{let r=m(a.current).includes(CSS.escape(n.animationName));if(n.target===o&&r&&(c("ANIMATION_END"),!u.current)){let n=o.style.animationFillMode;o.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===o.style.animationFillMode&&(o.style.animationFillMode=n)})}},r=e=>{e.target===o&&(l.current=m(a.current))};return o.addEventListener("animationstart",r),o.addEventListener("animationcancel",n),o.addEventListener("animationend",n),()=>{t.clearTimeout(e),o.removeEventListener("animationstart",r),o.removeEventListener("animationcancel",n),o.removeEventListener("animationend",n)}}c("ANIMATION_END")},[o,c]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:r.useCallback(e=>{a.current=e?getComputedStyle(e):null,i(e)},[])}}(i),s="function"==typeof a?a({present:l.isPresent}):r.Children.only(a),c=u(l.ref,(t=s,(o=(n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in n&&n.isReactWarning)?t.ref:(o=(n=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in n&&n.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof a||l.isPresent?r.cloneElement(s,{ref:c}):null};function m(e){return e?.animationName||"none"}p.displayName="Presence";var v=Symbol("radix.slottable");function w(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===v}var y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var n,o;let i,u,l,c=(o=n=`Primitive.${t}`,(i=r.forwardRef((e,t)=>{let{children:n,...o}=e;if(r.isValidElement(n)){var i;let e,u,l=(i=n,(u=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(u=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),s=function(e,t){let n={...t};for(let r in t){let o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...e)=>{let t=i(...e);return o(...e),t}:o&&(n[r]=o):"style"===r?n[r]={...o,...i}:"className"===r&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}(o,n.props);return n.type!==r.Fragment&&(s.ref=t?a(t,l):l),r.cloneElement(n,s)}return r.Children.count(n)>1?r.Children.only(null):null})).displayName=`${o}.SlotClone`,u=i,(l=r.forwardRef((e,t)=>{let{children:n,...o}=e,i=r.Children.toArray(n),a=i.find(w);if(a){let e=a.props.children,n=i.map(t=>t!==a?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,s.Y)(u,{...o,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null})}return(0,s.Y)(u,{...o,ref:t,children:n})})).displayName=`${n}.Slot`,l),d=r.forwardRef((e,n)=>{let{asChild:r,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.Y)(r?c:t,{...o,ref:n})});return d.displayName=`Primitive.${t}`,{...e,[t]:d}},{});function h(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...e)=>t.current?.(...e),[])}var E=n(97372),g=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),N=r.forwardRef((e,t)=>(0,s.Y)(y.span,{...e,ref:t,style:{...g,...e.style}}));N.displayName="VisuallyHidden";var T="ToastProvider",[b,C,R]=(0,l.N)("Toast"),[x,P]=function(e,t=[]){let n=[],o=()=>{let t=n.map(e=>r.createContext(e));return function(n){let o=n?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...n,[e]:o}}),[n,o])}};return o.scopeName=e,[function(t,o){let i=r.createContext(o),a=n.length;n=[...n,o];let u=t=>{let{scope:n,children:o,...u}=t,l=n?.[e]?.[a]||i,c=r.useMemo(()=>u,Object.values(u));return(0,s.Y)(l.Provider,{value:c,children:o})};return u.displayName=t+"Provider",[u,function(n,u){let l=u?.[e]?.[a]||i,s=r.useContext(l);if(s)return s;if(void 0!==o)return o;throw Error(`\`${n}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=n.reduce((t,{useScope:n,scopeName:r})=>{let o=n(e)[`__scope${r}`];return{...t,...o}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}(o,...t)]}("Toast",[R]),[S,O]=x(T),M=e=>{let{__scopeToast:t,label:n="Notification",duration:o=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:u}=e,[l,c]=r.useState(null),[d,f]=r.useState(0),p=r.useRef(!1),m=r.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${T}\`. Expected non-empty \`string\`.`),(0,s.Y)(b.Provider,{scope:t,children:(0,s.Y)(S,{scope:t,label:n,duration:o,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:r.useCallback(()=>f(e=>e+1),[]),onToastRemove:r.useCallback(()=>f(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:m,children:u})})};M.displayName=T;var L="ToastViewport",D=["F8"],k="toast.viewportPause",A="toast.viewportResume",Y=r.forwardRef((e,t)=>{let{__scopeToast:n,hotkey:o=D,label:i="Notifications ({hotkey})",...a}=e,l=O(L,n),d=C(n),f=r.useRef(null),p=r.useRef(null),m=r.useRef(null),v=r.useRef(null),w=u(t,v,l.onViewportChange),h=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=l.toastCount>0;r.useEffect(()=>{let e=e=>{0!==o.length&&o.every(t=>e[t]||e.code===t)&&v.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o]),r.useEffect(()=>{let e=f.current,t=v.current;if(E&&e&&t){let n=()=>{if(!l.isClosePausedRef.current){let e=new CustomEvent(k);t.dispatchEvent(e),l.isClosePausedRef.current=!0}},r=()=>{if(l.isClosePausedRef.current){let e=new CustomEvent(A);t.dispatchEvent(e),l.isClosePausedRef.current=!1}},o=t=>{e.contains(t.relatedTarget)||r()},i=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",o),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",i),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",o),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[E,l.isClosePausedRef]);let g=r.useCallback(({tabbingDirection:e})=>{let t=d().map(t=>{let n=t.ref.current,r=[n,...function(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}(n)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[d]);return r.useEffect(()=>{let e=v.current;if(e){let t=t=>{let n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){let n=document.activeElement,r=t.shiftKey;if(t.target===e&&r)return void p.current?.focus();let o=g({tabbingDirection:r?"backwards":"forwards"}),i=o.findIndex(e=>e===n);Q(o.slice(i+1))?t.preventDefault():r?p.current?.focus():m.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[d,g]),(0,s.FD)(c.lg,{ref:f,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&(0,s.Y)(F,{ref:p,onFocusFromOutsideViewport:()=>{Q(g({tabbingDirection:"forwards"}))}}),(0,s.Y)(b.Slot,{scope:n,children:(0,s.Y)(y.ol,{tabIndex:-1,...a,ref:w})}),E&&(0,s.Y)(F,{ref:m,onFocusFromOutsideViewport:()=>{Q(g({tabbingDirection:"backwards"}))}})]})});Y.displayName=L;var I="ToastFocusProxy",F=r.forwardRef((e,t)=>{let{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=e,i=O(I,n);return(0,s.Y)(N,{tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:e=>{let t=e.relatedTarget;i.viewport?.contains(t)||r()}})});F.displayName=I;var _="Toast",U=r.forwardRef((e,t)=>{let{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...u}=e,[l,c]=(0,E.i)({prop:r,defaultProp:i??!0,onChange:a,caller:_});return(0,s.Y)(p,{present:n||l,children:(0,s.Y)(j,{open:l,...u,ref:t,onClose:()=>c(!1),onPause:h(e.onPause),onResume:h(e.onResume),onSwipeStart:o(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:o(e.onSwipeMove,e=>{let{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:o(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:o(e.onSwipeEnd,e=>{let{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),c(!1)})})})});U.displayName=_;var[$,W]=x(_,{onClose(){}}),j=r.forwardRef((e,t)=>{let{__scopeToast:n,type:i="foreground",duration:a,open:l,onClose:d,onEscapeKeyDown:f,onPause:p,onResume:m,onSwipeStart:v,onSwipeMove:w,onSwipeCancel:E,onSwipeEnd:g,...N}=e,T=O(_,n),[C,R]=r.useState(null),x=u(t,e=>R(e)),P=r.useRef(null),S=r.useRef(null),M=a||T.duration,L=r.useRef(0),D=r.useRef(M),Y=r.useRef(0),{onToastAdd:I,onToastRemove:F}=T,U=h(()=>{C?.contains(document.activeElement)&&T.viewport?.focus(),d()}),W=r.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(Y.current),L.current=new Date().getTime(),Y.current=window.setTimeout(U,e))},[U]);r.useEffect(()=>{let e=T.viewport;if(e){let t=()=>{W(D.current),m?.()},n=()=>{let e=new Date().getTime()-L.current;D.current=D.current-e,window.clearTimeout(Y.current),p?.()};return e.addEventListener(k,n),e.addEventListener(A,t),()=>{e.removeEventListener(k,n),e.removeEventListener(A,t)}}},[T.viewport,M,p,m,W]),r.useEffect(()=>{l&&!T.isClosePausedRef.current&&W(M)},[l,M,T.isClosePausedRef,W]),r.useEffect(()=>(I(),()=>F()),[I,F]);let j=r.useMemo(()=>C?function e(t){let n=[];return Array.from(t.childNodes).forEach(t=>{var r;if(t.nodeType===t.TEXT_NODE&&t.textContent&&n.push(t.textContent),(r=t).nodeType===r.ELEMENT_NODE){let r=t.ariaHidden||t.hidden||"none"===t.style.display,o=""===t.dataset.radixToastAnnounceExclude;if(!r)if(o){let e=t.dataset.radixToastAnnounceAlt;e&&n.push(e)}else n.push(...e(t))}}),n}(C):null,[C]);return T.viewport?(0,s.FD)(s.FK,{children:[j&&(0,s.Y)(K,{__scopeToast:n,role:"status","aria-live":"foreground"===i?"assertive":"polite",children:j}),(0,s.Y)($,{scope:n,onClose:U,children:r.createPortal((0,s.Y)(b.ItemSlot,{scope:n,children:(0,s.Y)(c.bL,{asChild:!0,onEscapeKeyDown:o(f,()=>{T.isFocusedToastEscapeKeyDownRef.current||U(),T.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,s.Y)(y.li,{tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":T.swipeDirection,...N,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:o(e.onKeyDown,e=>{"Escape"===e.key&&(f?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(T.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:o(e.onPointerDown,e=>{0===e.button&&(P.current={x:e.clientX,y:e.clientY})}),onPointerMove:o(e.onPointerMove,e=>{if(!P.current)return;let t=e.clientX-P.current.x,n=e.clientY-P.current.y,r=!!S.current,o=["left","right"].includes(T.swipeDirection),i=["left","up"].includes(T.swipeDirection)?Math.min:Math.max,a=o?i(0,t):0,u=o?0:i(0,n),l="touch"===e.pointerType?10:2,s={x:a,y:u},c={originalEvent:e,delta:s};r?(S.current=s,G("toast.swipeMove",w,c,{discrete:!1})):J(s,T.swipeDirection,l)?(S.current=s,G("toast.swipeStart",v,c,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(P.current=null)}),onPointerUp:o(e.onPointerUp,e=>{let t=S.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),S.current=null,P.current=null,t){let n=e.currentTarget,r={originalEvent:e,delta:t};J(t,T.swipeDirection,T.swipeThreshold)?G("toast.swipeEnd",g,r,{discrete:!0}):G("toast.swipeCancel",E,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),T.viewport)})]}):null}),K=e=>{let{__scopeToast:t,children:n,...o}=e,i=O(_,t),[a,u]=r.useState(!1),[l,c]=r.useState(!1);return function(e=()=>{}){let t=h(e);f(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>u(!0)),r.useEffect(()=>{let e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),l?null:(0,s.Y)(d.Z,{asChild:!0,children:(0,s.Y)(N,{...o,children:a&&(0,s.FD)(s.FK,{children:[i.label," ",n]})})})},V=r.forwardRef((e,t)=>{let{__scopeToast:n,...r}=e;return(0,s.Y)(y.div,{...r,ref:t})});V.displayName="ToastTitle";var H=r.forwardRef((e,t)=>{let{__scopeToast:n,...r}=e;return(0,s.Y)(y.div,{...r,ref:t})});H.displayName="ToastDescription";var q="ToastAction",B=r.forwardRef((e,t)=>{let{altText:n,...r}=e;return n.trim()?(0,s.Y)(X,{altText:n,asChild:!0,children:(0,s.Y)(z,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${q}\`. Expected non-empty \`string\`.`),null)});B.displayName=q;var Z="ToastClose",z=r.forwardRef((e,t)=>{let{__scopeToast:n,...r}=e,i=W(Z,n);return(0,s.Y)(X,{asChild:!0,children:(0,s.Y)(y.button,{type:"button",...r,ref:t,onClick:o(e.onClick,i.onClose)})})});z.displayName=Z;var X=r.forwardRef((e,t)=>{let{__scopeToast:n,altText:r,...o}=e;return(0,s.Y)(y.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:t})});function G(e,t,n,{discrete:o}){let i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});if(t&&i.addEventListener(e,t,{once:!0}),o)i&&r.flushSync(()=>i.dispatchEvent(a));else i.dispatchEvent(a)}var J=(e,t,n=0)=>{let r=Math.abs(e.x),o=Math.abs(e.y),i=r>o;return"left"===t||"right"===t?i&&r>n:!i&&o>n};function Q(e){let t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var ee=/^(3195|7582|8893|9623)$/.test(n.j)?null:M,et=/^(3195|7582|8893|9623)$/.test(n.j)?null:Y,en=U,er=V,eo=H,ei=B,ea=z}}]);