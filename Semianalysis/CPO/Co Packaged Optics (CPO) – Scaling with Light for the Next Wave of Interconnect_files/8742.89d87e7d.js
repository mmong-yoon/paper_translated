"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["8742"],{95836:function(e,t,n){n.d(t,{A:()=>l});let l={attachment:"attachment-E9mJrI",logoContainer:"logoContainer-vqxwR7",bgImage:"bgImage-OTU5LC",header:"header-d8U2_d",gradientBG:"gradientBG-jbdaN9",gradientBg:"gradientBG-jbdaN9",button:"button-uDQ6x4"}},4438:function(e,t,n){n.d(t,{A:()=>l});let l={link:"link-LIBpto"}},1218:function(e,t,n){n.d(t,{A:()=>l});let l={videoPlayer:"videoPlayer-AdXrEr",videoPlayerContainer:"videoPlayerContainer-rPl28G",tagContainer:"tagContainer-S_oHWt"}},64843:function(e,t,n){n.d(t,{q:()=>E});var l=n(69277),i=n(10201),r=n(32485),a=n.n(r),o=n(93540),c=n(43850),d=n(17402),u=n(23623),s=n(31452),m=n(46271),h=n(94328),v=n(68349),p=n(68410),f=n(89490),g=n(76977),y=n(63136),b=n(68391),w=n(43296),S=n(13348),Y=n(59294),k=n(1235),I=n(55714),_=n(49807),C=n(57324);let x="viewerCountContainer-uxBWdH",E=e=>{var t,n;let{activeLiveStream:r,fromPub:E=!1,listenForViewerCount:T=!0,isFeedItem:B=!1,videoPlayerProps:A,startMuted:F=!1}=e,P=(0,d.useRef)(null),N=(0,d.useRef)(null),[D,L]=(0,d.useState)(!B);(0,b.C4)({videoPlayerRef:P,showPaywall:!1,disable:D}),(0,d.useEffect)(()=>{if(D){let e=()=>{L(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}},[D]),(0,d.useEffect)(()=>{var e;let t=null==(e=P.current)?void 0:e.player,n=()=>{t&&t.duration&&t.duration>1&&!isNaN(t.duration)&&(t.currentTime=t.duration-1),t&&(t.playbackRate=1)};return t&&t.addEventListener("play",n),()=>{null==t||t.removeEventListener("play",n)}},[P.current]);let O=(0,Y.AC)(N),[j,M]=(0,d.useState)(r.liveStreamInformation.currentViewerCount),[U,R]=(0,d.useState)(!1),{isMobile:z}=(0,p.sM)(),H=(0,m.Qg)().autoPlayVideo,[G,V]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let e;return G&&(e=setTimeout(()=>{V(!1)},4e3)),()=>{clearTimeout(e)}},[G]);let J=(0,w.XW)();(0,d.useEffect)(()=>{if(T)return null==J?void 0:J.listen({[(0,I.sl)({streamId:r.liveStream.id})]:e=>{var t,n;let{data:l}=e;(null==l||null==(t=l.message)?void 0:t.type)==="live-stream:viewer-count-updated"&&M(l.message.current_viewer_count),(null==l||null==(n=l.message)?void 0:n.type)==="live-stream:ended"&&R(!0)}})},[J,T]);let X=r.liveStreamInformation.isExplicit||"active"!==r.liveStream.status;return U?null:(0,i.FD)(g.pT,{position:"relative",overflow:"hidden",radius:"sm",ref:N,className:"liveStreamContainer-NKIioJ",onClick:e=>{if(e.stopPropagation(),"active"===r.liveStream.status){let e=(0,v.rr)()?(0,_.Xrv)({liveStreamId:r.liveStream.id,utm_campaign:C._9.substackProfile,params:(0,l._)({utm_medium:C.Jn.web},E&&{fromPub:E})}):(0,_.UUj)({noBase:!0,liveStreamId:r.liveStream.id,params:(0,l._)({utm_campaign:C._9.substackProfile,utm_medium:C.Jn.web},E&&{fromPub:E})});(0,v.rr)()?document.location.href=e:(0,v.V2)(e)}else V(!0)},cursor:"pointer",children:[X?(0,i.FD)(i.FK,{children:[r.liveStreamInformation.isExplicit&&(0,i.Y)(f.az,{position:"absolute",inset:0,zIndex:1,children:(0,i.FD)(g.I1,{className:"liveStreamExplicitLabel-roJA52",alignItems:"center",justifyContent:"center",gap:4,children:[(0,i.Y)(o.A,{stroke:"white",size:24}),(0,i.Y)(y.EY.B5,{color:"white",textAlign:"center",translated:!0,children:"May contain sensitive content"})]})}),(0,i.Y)("img",{className:a()("liveStreamThumbnail-uER3zj",r.liveStreamInformation.isExplicit&&"explicit-tw5du6"),src:r.liveStreamInformation.desktopThumbnailGifUrl,alt:"Live stream thumbnail"})]}):(0,i.Y)(s.N,(0,l._)({className:"liveStreamVideoPlayer-tm5aYT",ref:P,liveStreamId:r.liveStream.id,noKeyboardShortcuts:!0,noControls:!0,autoPlay:H,pub:r.pub||null,mediaUpload:{id:"ls-".concat(r.liveStream.id),width:1920,height:1080},noJoin:!0,thumbnailUrl:r.liveStreamInformation.desktopThumbnailPhotoUrl,isLive:!0,renderPlayButton:B?()=>(0,i.Y)(S.ro,{isPlaying:!1,size:z?40:56}):void 0,startMuted:F},A),!0),"active"===r.liveStream.status?(0,i.FD)(g.Ye,{gap:8,className:x,children:[(0,i.Y)(h.LM,{}),(0,i.Y)(h.u8,{viewerCount:j})]}):(0,i.Y)(g.Ye,{className:x,children:(0,i.Y)(h.OT,{})}),G&&(0,i.Y)(g.Ye,{className:"endedMessage-Z3p5RL",children:(0,i.FD)(g.I1,{className:"endedMessageContent-d_enFy",padding:12,radius:"md",alignItems:"center",justifyContent:"center",gap:4,children:[(0,i.Y)(c.A,{size:24,stroke:"white"}),(0,i.Y)(y.EY.B3,{color:"white",children:"Live video has ended"})]})}),(0,i.Y)("div",{className:"backDrop-FxvQIL"}),(0,i.FD)(g.Ye,{position:"absolute",style:{left:0,right:0,bottom:0,width:"100%",pointerEvents:"none"},direction:"row-reverse",alignItems:"end",children:[!X&&(0,i.Y)(f.az,{padding:12,onClick:e=>{e.stopPropagation()},style:{pointerEvents:"auto"},children:(0,i.Y)(k.A,{hideVolumeBar:!0,disableShortcuts:!1,disableTooltips:!1,isFocused:O,mediaRef:P})}),(0,i.Y)(u.a,{children:(0,i.Y)(g.I1,{className:"liveStreamTitle-xahUfX",gap:4*!B,padding:B?12:16,style:{pointerEvents:"none"},children:B?(0,i.FD)(i.FK,{children:[(0,i.Y)(y.EY.B3,{weight:"semibold",color:"vibrance-primary",children:r.liveStream.title}),(0,i.Y)(y.EY.B4,{color:"vibrance-secondary",children:null==(t=r.pub)?void 0:t.name})]}):(0,i.FD)(i.FK,{children:[(0,i.Y)(y.EY.H4,{color:"vibrance-primary",children:r.liveStream.title}),(0,i.Y)(y.EY.B3,{color:"vibrance-secondary",children:null==(n=r.pub)?void 0:n.name})]})})})]})]})}},7984:function(e,t,n){n.d(t,{a:()=>s,x:()=>c});var l=n(10201),i=n(84605),r=n(89490),a=n(76977),o=n(44307);function c(e){let{country:t,type:n,id:r}=e,{iString:c}=(0,i.GO)(),u="https://embed.music.apple.com/".concat(t,"/").concat(n,"/").concat(r,"?theme=auto&app=music");return(0,l.Y)(a.pT,{radius:"md",outline:"detail",overflow:"hidden",className:o.A.appleMusic,children:(0,l.Y)(d,{src:u,height:"song"===n?"175":"450",frameBorder:0,allow:"encrypted-media *",title:c("Apple Music player"),sandbox:"allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"})})}let d=(0,r.I4)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),u=["album","playlist","song","artist","station"];function s(e){if(!e)return null;try{let t=new URL(e);if(!["music.apple.com","www.music.apple.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<3)return null;let[l,i,...r]=n,a=r[r.length-1];if(!l||!i||!a)return null;if("album"===i&&t.searchParams.has("i")){let e=t.searchParams.get("i");if(e)return{country:l,type:"song",id:e}}if(!u.includes(i))return null;return{country:l,type:i,id:a}}catch(e){return null}}},95887:function(e,t,n){n.d(t,{G:()=>v});var l=n(10201),i=n(17402),r=n(64843),a=n(68349),o=n(76977),c=n(42588),d=n(20437),u=n(74171),s=n(49807),m=n(57324),h=n(44307);function v(e){let{activeLiveStream:t,onAttachmentClick:n,maxWidth:v,videoPlayerProps:p,feedItem:f}=e,g=(0,a.rr)(),y=(0,i.useRef)(null),b=(0,d.wF)(y,v);if("scheduled"===t.liveStream.status)return(0,l.Y)(c.S,{liveStream:t,post:null,feedItem:f});let w=u.mc/u.ld,S={};if(g){let e=null!=b?b:d.PH;S={width:"".concat(e,"px"),height:"".concat(e/w,"px")}}else{let e=null!=b?b:d.di;S={width:"".concat(e,"px"),height:"".concat(e/w,"px")}}return(0,l.Y)(o.I1,{width:"100%",ref:y,onClick:()=>{null==n||n({attachmentType:"live_stream",attachmentId:t.liveStream.id.toString()});let e=g?(0,s.Xrv)({liveStreamId:t.liveStream.id,utm_campaign:m._9.substackProfile,params:{utm_medium:m.Jn.web,appStoreRedirect:!!g}}):(0,s.UUj)({noBase:!0,liveStreamId:t.liveStream.id,params:{utm_campaign:m._9.substackProfile,utm_medium:m.Jn.web}});g?document.location.href=e:(0,a.V2)(e)},children:(0,l.Y)(o.I1,{style:S,radius:"md",overflow:"hidden",position:"relative",className:h.A.videoPlayerContainer,children:(0,l.Y)(r.q,{activeLiveStream:t,listenForViewerCount:!1,isFeedItem:!0,videoPlayerProps:p,startMuted:!0})})})}},26401:function(e,t,n){n.d(t,{G:()=>m});var l=n(10201),i=n(17402),r=n(78649),a=n(84605),o=n(42686),c=n(35369),d=n(76977),u=n(63136),s=n(504);function m(e){let{attachment:t,readOnly:n,isRestack:m,onAttachmentClick:h,utm_content:v}=e,p=["you-blocked","you-muted"].includes(t.reason)&&!!t.hidden_attachment,[f,g]=(0,i.useState)(!1),{iString:y}=(0,a.GO)();return f&&t.hidden_attachment?(0,l.Y)(o.wR,{attachment:t.hidden_attachment,readOnly:n,isRestack:m,onAttachmentClick:h,utm_content:v}):(0,l.Y)(r.Q,{children:(0,l.FD)(d.pT,{bg:"primary",border:"detail",justifyContent:p?"space-between":"center",alignItems:"center",radius:"md",padding:16,children:[(0,l.Y)(u.EY.B4,{color:"secondary",align:"center",children:"you-blocked"===t.reason?"This note is from someone you blocked.":"you-muted"===t.reason?"This note is from someone you muted.":"This attachment is not available."}),p&&(0,l.Y)(c.Nm,{resetCss:!0,onClick:()=>{var e;(0,s.qx)(t.id,t.reason,{noteId:null==(e=t.hidden_attachment)?void 0:e.id}),g(!0)},children:(0,l.Y)(u.EY,{weight:"bold",size:14,color:"secondary",children:y("Show")})})]})})}n(50129)},77181:function(e,t,n){n.d(t,{Y:()=>c,l:()=>u});var l=n(10201),i=n(84605),r=n(89490),a=n(76977),o=n(44307);function c(e){let{url:t,type:n}=e,{iString:r}=(0,i.GO)(),c=encodeURIComponent(t);return(0,l.Y)(a.pT,{radius:"md",outline:"detail",overflow:"hidden",className:o.A.soundcloud,children:(0,l.Y)(d,{src:"https://w.soundcloud.com/player/?url=".concat(c,"&color=%23ff6719&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&show_teaser=false&visual=true"),height:"track"===n?"166":"300",frameBorder:0,scrolling:"no",title:r("Soundcloud player"),allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",sandbox:"allow-scripts allow-same-origin"})})}let d=(0,r.I4)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe");function u(e){if(!e)return null;try{let t=new URL(e);if(!["soundcloud.com","www.soundcloud.com","m.soundcloud.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let l="track";return n.includes("sets")?l="set":n.length>=2&&(l="track"),{url:e,type:l}}catch(e){return null}}},25667:function(e,t,n){n.d(t,{E:()=>c,x:()=>s});var l=n(10201),i=n(84605),r=n(89490),a=n(76977),o=n(44307);function c(e){let{embedType:t,resourceId:n}=e,{iString:r}=(0,i.GO)();if(!n)return null;let c="https://open.spotify.com/embed/".concat(t,"/").concat(n);return(0,l.Y)(a.pT,{radius:"md",outline:"detail",overflow:"hidden",className:o.A.spotify,children:(0,l.Y)(d,{src:c,height:"playlist"===t||"album"===t?"352":"152",frameBorder:0,allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",title:r("Spotify player"),sandbox:"allow-scripts allow-same-origin"})})}let d=(0,r.I4)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),u=["track","playlist","show","episode","artist","album"];function s(e){if(!e)return null;try{let t=new URL(e);if(!["spotify.com","www.spotify.com","open.spotify.com","play.spotify.com","embed.spotify.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let[l,i]=n;if(!u.includes(l))return null;return{embedType:l,resourceId:i}}catch(e){return null}}},81992:function(e,t,n){n.d(t,{ot:()=>s});var l=n(10201),i=n(2675),r=n(25859),a=n(63136),o=n(83629),c=n(50129),d=n(49807),u=n(11993);function s(e){let{attachments:t,readOnly:n,onAttachmentClick:i,utm_content:r}=e;if(0===t.length)return null;let a=t.filter(e=>"image"!==e.type&&"video"!==e.type&&!("post"===e.type&&e.postSelection));return(0,l.Y)(l.FK,{children:a.map(e=>(0,l.Y)(m,{attachment:e,readOnly:n,onAttachmentClick:i,utm_content:r},e.id))})}function m(e){let{attachment:t,readOnly:n,onAttachmentClick:i,utm_content:r}=e,o=null;return(0,c._d)(t)?null:("textlink"===t.type&&(o=(0,l.Y)(h,{url:t.url,readOnly:n,onClick:()=>{null==i||i()}})),"link"===t.type&&(o=(0,l.Y)(v,{readOnly:n,onClick:i,url:t.linkMetadata.url},t.id)),"post"===t.type&&(o=(0,l.Y)(p,{readOnly:n,post:t.post,publication:t.publication,onClick:i},t.id)),"comment"===t.type&&(o=(0,l.Y)(g,{comment:t.comment,readOnly:n,onAttachmentClick:i,utm_content:r},t.id)),"publication"===t.type&&(o=(0,l.Y)(f,{readOnly:n,publication:t.publication,onClick:i},t.id)),o?(0,l.Y)(a.EY.B4,{color:"highlight",children:o}):null)}function h(e){let{url:t,readOnly:n,onClick:i}=e;return(0,l.Y)(r.Yq,{onClick:i,href:n?void 0:t,rel:"nofollow noopener ugc",target:"_blank",className:"note-link",color:"highlight",fontSize:14,children:(0,u.H)(t,48)})}function v(e){let{url:t,readOnly:n,onClick:i}=e;return(0,l.Y)(h,{url:t,readOnly:n,onClick:i})}function p(e){let{post:t,publication:n,readOnly:r,onClick:a}=e,o=(0,d.wu9)(n,t,{feedViewer:!1}),c=(0,i.vZ)({post:t,publication:n,readOnly:r,onClick:a});return(0,l.Y)(h,{url:o,readOnly:r,onClick:()=>{c(new MouseEvent("click"))}})}function f(e){let{publication:t,readOnly:n,onClick:i}=e;return(0,l.Y)(h,{url:t.base_url,readOnly:n,onClick:i})}function g(e){let{comment:t,readOnly:n,onAttachmentClick:i,utm_content:r}=e,a=(0,d.Zgx)(t,{noBase:o.Z,urlParams:{utm_content:null!=r?r:void 0}});return(0,l.Y)(h,{url:a,readOnly:n,onClick:()=>null==i?void 0:i({commentId:String(t.id)})})}},9079:function(e,t,n){n.d(t,{k:()=>o});var l=n(10201),i=n(89490),r=n(76977),a=n(44307);function o(e){let{videoId:t}=e;return(0,l.Y)(r.pT,{radius:"md",outline:"detail",overflow:"hidden",className:a.A.tiktok,children:(0,l.Y)(c,{src:"https://www.tiktok.com/player/v1/".concat(t,"?").concat("volume_control=0&loop=1&timestamp=0&closed_caption=0&play_button=1&fullscreen_button=0"),frameBorder:0})})}let c=(0,i.I4)({className:a.A.tiktokIframe,border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe")},46478:function(e,t,n){n.d(t,{H:()=>o});var l=n(10201),i=n(89490),r=n(76977),a=n(44307);function o(e){let{videoId:t}=e;return(0,l.Y)(r.pT,{radius:"md",outline:"detail",overflow:"hidden",className:a.A.youtube,children:(0,l.Y)(c,{src:"https://www.youtube.com/embed/".concat(t),frameBorder:0})})}let c=(0,i.I4)({className:a.A.youtubeIframe,border:"unset",bg:"black",flex:"grow"},"iframe")},42588:function(e,t,n){n.d(t,{S:()=>w});var l=n(10201),i=n(17402),r=n(23623),a=n(64843),o=n(84605),c=n(94729),d=n(56804),u=n(68349),s=n(89490),m=n(35369),h=n(76977),v=n(63136),p=n(504),f=n(38992),g=n(16291),y=n(49807);let b="countdownTimer-Hez1AS";function w(e){var t;let{liveStream:n,post:w,feedItem:Y}=e,{iString:k}=(0,o.GO)(),{liveStream:I}=(0,f.u)({liveStream:n}),[_,C]=(0,i.useState)((0,g.A)(null==I?void 0:I.liveStream.scheduled_at).valueOf()-Date.now()),[x,E]=(0,i.useState)((0,g.A)(null==I?void 0:I.liveStream.scheduled_at).isAfter((0,g.A)().add(15,"minutes")));if((0,i.useEffect)(()=>{(null==I?void 0:I.liveStream.scheduled_at)&&E((0,g.A)(I.liveStream.scheduled_at).isAfter((0,g.A)().add(15,"minutes")))},[I]),(0,i.useEffect)(()=>{(null==I?void 0:I.liveStream.scheduled_at)&&C((0,g.A)(I.liveStream.scheduled_at).valueOf()-Date.now());let e=setInterval(()=>{C((0,g.A)(null==I?void 0:I.liveStream.scheduled_at).valueOf()-Date.now())},1e3);return()=>clearInterval(e)},[I]),!(null==I?void 0:I.liveStream.id))return null;if((null==I?void 0:I.liveStream.status)==="active")return(0,l.Y)(a.q,{activeLiveStream:I,isFeedItem:!0,listenForViewerCount:!1});let T=Math.max(_/1e3,0),B=Math.floor(T/60/60/24),A=Math.floor(T/60/60%24),F=Math.floor(T/60%60),P=String(B).padStart(2,"0"),N=String(A).padStart(2,"0"),D=String(F).padStart(2,"0"),L=String(Math.floor(T%60)).padStart(2,"0"),O=(0,y.Xrv)({liveStreamId:null==I?void 0:I.liveStream.id});return(0,l.Y)(r.a,{children:(0,l.FD)(s.az,{as:"a",onClick:e=>{Y&&((0,p.Qb)(Y,"permalink","attachment",{extraEventProps:{live_stream_id:null==I?void 0:I.liveStream.id,post_id:null==w?void 0:w.id}}),(0,d.o)(e,O))},href:(0,y.Xrv)({liveStreamId:null==I?void 0:I.liveStream.id}),radius:"md",overflow:"hidden",children:[(0,l.Y)(h.pT,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"black",children:x?(0,l.Y)(h.pT,{className:b,justifyContent:"center",alignItems:"center",children:(0,l.FD)(h.pT,{children:[B>0?(0,l.FD)(l.FK,{children:[(0,l.Y)(S,{value:P,unit:"DAYS"}),(0,l.Y)(h.pT,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,l.Y)(v.EY.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})})]}):null,(0,l.Y)(S,{value:N,unit:"HR"}),(0,l.Y)(h.pT,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,l.Y)(v.EY.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,l.Y)(S,{value:D,unit:"MIN"}),0===B?(0,l.FD)(l.FK,{children:[(0,l.Y)(h.pT,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,l.Y)(v.EY.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,l.Y)(S,{value:L,unit:"SEC"})]}):null]})}):(0,l.FD)(h.I1,{className:b,justifyContent:"center",alignItems:"center",gap:4,children:[(0,l.FD)(h.pT,{children:[(0,l.Y)(S,{value:D}),(0,l.Y)(h.pT,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,l.Y)(v.EY.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,l.Y)(S,{value:L})]}),(0,l.Y)(v.EY.B4,{color:"vibrance-secondary",transform:"uppercase",children:k("Starting soon...")})]})}),(0,l.FD)(h.pT,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"secondary",borderTop:"detail",children:[(0,l.FD)(h.I1,{gap:4,children:[(0,l.Y)(v.EY.B4,{color:"vibrance-secondary",children:null==I||null==(t=I.liveStream.user)?void 0:t.name}),(0,l.Y)(v.EY.B4,{weight:"bold",color:"white",children:null==I?void 0:I.liveStream.title})]}),(0,l.Y)(m.$n,{priority:"primary",onClick:async e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),Y&&(0,p.Qb)(Y,"permalink","add_to_calendar",{extraEventProps:{live_stream_id:null==I?void 0:I.liveStream.id,post_id:null==w?void 0:w.id}});try{await (0,c.x6)("/api/v1/live_stream/".concat(null==I?void 0:I.liveStream.id,"/rsvp"),{method:"PUT"})}catch(e){console.error(e)}(0,u.V2)((0,y.Xrv)({liveStreamId:null==I?void 0:I.liveStream.id}),{local_navigation:!1})},children:x?"Interested":"Join now"})]})]})})}let S=e=>{let{value:t,unit:n}=e;return(0,l.FD)(h.I1,{alignItems:"center",gap:4,children:[(0,l.Y)(h.I1,{justifyContent:"end",alignItems:"center",height:40,children:(0,l.Y)(v.EY.B4,{font:"digit",fontSize:30,lineHeight:30,color:"white",children:t})}),n&&(0,l.Y)(v.EY.B4,{color:"vibrance-secondary",children:n})]})}},38992:function(e,t,n){n.d(t,{u:()=>c});var l=n(17402),i=n(94729),r=n(43296),a=n(16291),o=n(55714);let c=e=>{var t,n;let{liveStream:c}=e,d=(0,r.XW)(),[u,s]=(0,l.useState)(null),[m,h]=(0,l.useState)(c),[v,p]=(0,l.useState)(null);return(0,l.useEffect)(()=>{h(c)},[c]),(0,l.useEffect)(()=>{if(!m||"scheduled"!==m.liveStream.status)return;let e=(0,a.A)(m.liveStream.scheduled_at),t=(0,a.A)();if(9e5>e.diff(t)){let e=setInterval(()=>{(0,i.x6)("/api/v1/live_stream/".concat(m.liveStream.id)).then(e=>{"scheduled"!==e.activeLiveStream.liveStream.status&&(s(null),p(e.activeLiveStream))}).catch(e=>{console.error(e)})},1e3);s(e)}return null==d?void 0:d.listen({[(0,o.sl)({streamId:m.liveStream.id})]:e=>{var t;let{data:n}=e;(null==n||null==(t=n.message)?void 0:t.type)==="live-stream:started"&&((0,i.x6)("/api/v1/live_stream/".concat(m.liveStream.id)).then(e=>{p(e.activeLiveStream)}).catch(e=>{console.error(e)}),u&&s(null))}})},[null==m||null==(t=m.liveStream)?void 0:t.id,null==m||null==(n=m.liveStream)?void 0:n.status,d]),(0,l.useEffect)(()=>{if(v){let e=v.liveStream.is_rtmp?v.liveStreamInformation.playbackUrl:v.liveStreamInformation.desktopPlaybackUrl;if(e){let t=setInterval(()=>{(0,i.x6)(e).then(()=>{s(null),h(v),p(null)})},1e3);s(t)}}},[v]),(0,l.useEffect)(()=>()=>{u&&clearInterval(u)},[u]),{liveStream:m,setLiveStream:h}}},95147:function(e,t,n){n.d(t,{B:()=>function e(t){let n=0;if(t)if(t.content&&t.content.length>0)for(let l of t.content)n+=e(l);else{var l,i;n+=null!=(i=null==(l=t.text)?void 0:l.length)?i:0}return n},M:()=>r});var l=n(88420),i=n(79207);function r(e){let t=0;return(0,i.jE)(e,e=>{e.type&&l.b.includes(e.type)&&("codeBlock"===e.type&&e.content?e.content.forEach(e=>{if("text"===e.type){var n,l;t+=(null!=(l=(null!=(n=e.text)?n:"").match(/\n/g))?l:[]).length+1}}):t++)}),t}},41245:function(e,t,n){n.d(t,{Z:()=>function e(t,n){var r;let o=[],c=!1,d=0;for(let l of null!=(r=t.content)?r:[]){if(l.type&&a.b.includes(l.type)){if(++d===n){c=!0,o.push(l);break}}else if(l.content){let t=e(l,n-d);if(d+=t.blockCount,t.isTruncated){o.push(t.doc),c=!0;break}}o.push(l)}let u=(0,i._)((0,l._)({},t),{content:o});return t.text&&(u.text=t.text.split(/\n/g).slice(0,n).join("\n")),{doc:u,blockCount:d,isTruncated:c}},x:()=>function e(t){let{limit:n=420}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null,o=0,c=!1;if(t){var d,u,s,m;if(n<=0)c=!0;else if(t.content&&t.content.length>0)for(let r of(a=(0,i._)((0,l._)({},t),{content:[]}),t.content)){let t=e(r,{limit:n-o});if(t.doc){if(null==(d=a.content)||d.push(t.doc),o+=t.length,t.isTruncated){c=!0;break}}else{c=!0;break}}else o+=null!=(m=null==(u=(a=(0,i._)((0,l._)({},t),{text:null!=(s=(0,r.truncateText)(t.text,n))?s:void 0})).text)?void 0:u.length)?m:0,t.text!==a.text&&(c=!0)}return{doc:a,length:o,isTruncated:c}}});var l=n(69277),i=n(70408),r=n(82776),a=n(88420)}}]);