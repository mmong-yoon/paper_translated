"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["711"],{34746:function(e,l,t){if(t.d(l,{EH:()=>q,Qy:()=>G,pU:()=>L}),t(99851),!/^(2101|3268)$/.test(t.j))var a=t(69277);if(!/^(2101|3268)$/.test(t.j))var n=t(32641);var i=t(79785),s=t(10201),c=t(32485),r=t.n(c),o=t(17402),u=t(15734),d=t.n(u),p=t(47963),m=t(97432),h=t(81209),b=t(41873),f=t(84605),_=t(86500),y=t(68349),v=t(24078),w=t(35369),Y=t(76977),g=t(16993),k=t(63136),N=t(11510),U=t(98111),C=t(56458),S=t(39318),E=t(41086),F=t(57324),A=t(73683);function V(){let e=(0,i._)(["Available now for iOS and Android"]);return V=function(){return e},e}function O(){let e=(0,i._)(["Upgrade to ",""]);return O=function(){return e},e}function D(){let e=(0,i._)(["Upgrade to ",""]);return D=function(){return e},e}function T(){let e=(0,i._)(["Already in the "," plan?"]);return T=function(){return e},e}function P(){let e=(0,i._)(["Already in the Founding Member plan?"]);return P=function(){return e},e}let L=e=>{var l,t;let a,{className:n=null,title:i,subtitle:c=null,reauthenticationTitle:u,publication:b,post:w,user:g,freeSignup:U=null,freeSignupEmail:C=null,email_form:A=!1,autoFocus:O=!1,isStatic:D=!1,coupon:T=null,showPostUnlockPrompt:P=!1,magicToken:L=null,onPostUnlockError:K=null,isUnsubscribedPostUnlockUpsell:x,onOpenPostUnlockModal:J=null,hasCompletedUnsubscribedUnlock:R=!1}=e,q=null==g?void 0:g.reader_installed_at,{iString:H,iTemplate:W}=(0,f.GO)(),{modal:X,open:Q}=(0,p.El)({utm_campaign:F._9.paywallPostUnlockPrompt,utm_source:F.VU.substack,overrideCTA:q?H("Open in app"):void 0,overrideTitle:H(q?"Unlock your free post in the Substack app":"Get the free Substack app to unlock this post"),subTitle:W(V()),openUrl:null!=(l=q&&(0,S.XV8)(b.subdomain,w.slug))?l:void 0}),$=g&&g.email||C||null,z=!!((null==g?void 0:g.is_subscribed)&&(null==g?void 0:g.is_magic)),M=(null==w?void 0:w.audience)==="founding",Z=!!((null==g?void 0:g.is_free_subscribed)||U),ee=(0,S.wu9)(b,w),el=(0,N.Iu)(),et=(0,o.useCallback)(async e=>{if(e||(0,_.u4)(_.qY.PAYWALL_UNLOCK_CTA_CLICKED,{post_id:w.id,publication_id:b.id,from_email:e,source:"paywall"}),x&&J)R&&el?(0,y.V2)((0,S.XV8)(b.subdomain,w.slug,{redirect:"app-store",params:{utm_campaign:F._9.paywallPostUnlockPrompt,utm_source:F.VU.paywall}})):J();else try{await d().post("/api/v1/post_unlock_token").send({post_id:w.id,token:L}),el?(0,y.V2)((0,S.XV8)(b.subdomain,w.slug,{redirect:"app-store",params:{utm_campaign:F._9.paywallPostUnlockPrompt,utm_source:F.VU.paywall}})):Q()}catch(e){null==K||K()}},[w.id,w.slug,b.id,b.subdomain,L,q,Q,K,el,x,J,R]),ea=(0,o.useCallback)(()=>et(!0),[et]),en=(0,o.useCallback)(()=>et(!1),[et]);(0,o.useEffect)(()=>{P&&(0,_.u4)(_.qY.PAYWALL_UNLOCK_CTA_VIEWED,{publication_id:b.id,post_id:w.id})},[w.id,b.id,P]),(0,o.useEffect)(()=>{(0,E.y)("launch_post_unlock_offer")&&(ea(),window.history.replaceState({},document.title,(0,S.oRR)({launch_post_unlock_offer:null})))},[ea]);let ei=!!T&&!!T.id&&!M&&!P;return a=ei?H((null==w?void 0:w.type)==="podcast"?"Listen to this episode with a 7-day free trial":(null==w?void 0:w.type)==="video"?"Watch with a 7-day free trial":"Keep reading with a 7-day free trial"):z?u:i,(0,s.FD)("div",{className:r()("paywall",n),"data-testid":"paywall","data-component-name":"Paywall",role:"region","aria-label":H("Paywall"),children:[P&&(0,s.Y)(v.eu,{photoUrl:null!=(t=b.author_photo_url)?t:void 0,size:64,className:D?"paywall-unlock-avatar-static":"paywall-unlock-avatar"}),$&&!P&&(0,s.FD)(k.EY,{translated:!0,as:"div",className:"paywall-intro",paddingBottom:8*!!P,children:["Hi ",(0,s.Y)("b",{children:I18N.p($)})]}),(0,s.Y)("h2",{className:r()("paywall-title",P&&"unlock-treatment-new"),children:a}),c&&!ei&&(0,s.Y)("p",{className:"paywall-subtitle",children:c}),ei&&(0,s.FD)("div",{className:"paywall-free-trial-subtitle",children:[(null==w?void 0:w.type)==="podcast"&&(0,s.FD)(k.EY,{translated:!0,as:"p",className:"paywall-subtitle",children:["Subscribe to"," ",(0,s.Y)(k.EY,{as:"span",weight:"bold",fontStyle:"italic",children:I18N.p(b.name)})," ","to listen to this post and get 7 days of free access to the full post archives."]}),(null==w?void 0:w.type)==="video"&&(0,s.FD)(k.EY,{translated:!0,as:"p",className:"paywall-subtitle",children:["Subscribe to"," ",(0,s.Y)(k.EY,{as:"span",weight:"bold",fontStyle:"italic",children:I18N.p(b.name)})," ","to watch this video and get 7 days of free access to the full post archives."]}),(null==w?void 0:w.type)==="newsletter"&&(0,s.FD)(k.EY,{translated:!0,as:"p",className:"paywall-subtitle",children:["Subscribe to"," ",(0,s.Y)(k.EY,{as:"span",weight:"bold",fontStyle:"italic",children:I18N.p(b.name)})," ","to keep reading this post and get 7 days of free access to the full post archives."]}),(null==w?void 0:w.type)==="adhoc_email"&&(0,s.FD)(k.EY,{translated:!0,as:"p",className:"paywall-subtitle",children:["Subscribe to"," ",(0,s.Y)(k.EY,{weight:"bold",fontStyle:"italic",children:I18N.p(b.name)})," ","to keep reading this email and get 7 days of free access to the full post archives."]})]}),A?!Z&&(0,s.Y)(Y.Ye,{paddingTop:24,justifyContent:"center",children:(0,s.Y)(m.A,{autoFocus:null==O||O,email:$,freeSignup:U,freeSignupEmail:C,onAccentBackground:!0,pub:b,source:"post-unlock",submitButtonText:H((null==w?void 0:w.type)==="podcast"?"Start listening":(null==w?void 0:w.type)==="video"?"Start watching":"Start reading"),user:g,onSuccess:()=>document.location.reload()})}):P?(0,s.FD)(s.FK,{children:[X,(0,s.Y)(j,{isStatic:D,onClick:en,btnClassName:r()(P&&"paywall-cta-icon"),isUnsubscribedPostUnlockUpsell:x,children:H(x&&R?"Open the app":"Claim my free post")})]}):(0,s.Y)(I,{coupon:T,email:$,isStatic:D,post:w,postUrl:ee,publication:b,useCoupon:ei,user:g}),P&&(0,s.Y)(B,{isStatic:D,publication:b,post:w,postUrl:ee,coupon:T,useCoupon:ei,children:x?(0,s.Y)(s.FK,{children:H("Or purchase a paid subscription.")}):(0,s.FD)(s.FK,{children:[H("Or upgrade your subscription.")," ",(0,s.Y)("b",{children:(0,s.Y)(h.n,{pub:b,user:g,isStatic:!0})})]})}),!z&&!D&&!P&&(0,s.Y)("div",{className:"paywall-login",children:(0,s.FD)("a",{href:(0,S.a7q)({for_pub:b.subdomain,change_user:!!$}),native:!0,children:[G({post:w,publication:b,isPaid:!A})," ",(0,s.Y)("b",{children:H($?"Switch accounts":"Sign in")})]})})]})},I=e=>{var l,t;let{coupon:a,email:n,isStatic:i,post:c,postUrl:r,publication:o,useCoupon:u,user:d}=e,p=!!(null==d?void 0:d.is_founding),m=!!(null==d?void 0:d.is_subscribed),b=!!((null==d?void 0:d.is_subscribed)&&(null==d?void 0:d.is_magic)),_=(null==c?void 0:c.audience)==="founding",{iString:y,iTemplate:v}=(0,f.GO)();if(i){if(!o.plans)return null;let e=_?U.T.FOUNDING_CHECKOUT_URL:U.T.CHECKOUT_URL,t=u?"&coupon=".concat(null==a?void 0:a.id):"",n=_?v(O(),null!=(l=(0,C.m4)(o))?l:""):u?y("Start trial"):(0,s.Y)(h.n,{pub:o,user:d,isStatic:i});return(0,s.Y)(K,{href:"".concat(e,"simple=true&utm_source=").concat(F.VU.paywall,"&utm_medium=").concat(F.Jn.email,"&utm_content=").concat(c.id,"&next=").concat(r).concat(t),children:n})}return!p&&_?o.plans?(0,s.Y)(x,{href:(0,S.my9)(o,{simple:!0,next:document.location.href,utm_source:F.VU.paywall,utm_medium:F.Jn.web,utm_content:c?c.id:null,plan:"founding"}),children:v(D(),null!=(t=(0,C.m4)(o))?t:"")}):null:m?b?(0,s.Y)(x,{href:(0,S.a7q)({for_pub:o.subdomain,email:n}),children:y("Click here to sign in")}):null:o.plans?(0,s.Y)(x,{href:(0,S.my9)(o,{simple:!0,next:document.location.href,utm_source:u?F.VU.paywallFreeTrial:F.VU.paywall,utm_medium:i?F.VU.email:F.VU.web,utm_content:c?c.id:null,coupon:u?null==a?void 0:a.id:null}),children:u?y("Start trial"):(0,s.Y)(h.n,{pub:o,user:d,isStatic:i})}):null},K=e=>{let{children:l,href:t}=e;return(0,s.Y)("div",{className:"paywall-cta",children:(0,s.Y)("a",{className:"button primary subscribe-btn",href:t,children:(0,s.Y)("span",{children:l})})})},x=e=>{let{children:l,href:t}=e;return(0,s.Y)("div",{className:"paywall-cta",children:(0,s.Y)("a",{href:t,native:!0,children:(0,s.Y)(w.Nm,{resetCss:!0,className:r()("subscribe-btn",A.A.subscribeButton),children:l})})})},B=e=>{let{post:l,isStatic:t,publication:a,onClick:n,children:i,postUrl:c,coupon:r,useCoupon:o}=e,u=(0,S.my9)(a,{simple:!0,next:document.location.href,utm_source:F.VU.paywall,utm_medium:t?F.Jn.email:F.Jn.web,utm_content:l?l.id:null,just_signed_up:!1});n=async()=>{(0,y.V2)(u)};let d=o?"&coupon=".concat(null==r?void 0:r.id):"",p="".concat(u,"simple=true&utm_source=").concat(F.VU.paywall,"&utm_medium=").concat(F.Jn.email,"&utm_content=").concat(l.id,"&next=").concat(c).concat(d);return t?(0,s.Y)(J,{href:p,children:i}):(0,s.Y)(R,{onClick:n,href:p,children:i})},J=e=>{let{children:l,href:t}=e;return(0,s.Y)("div",{className:"paywall-secondary-cta",children:(0,s.Y)("a",{href:t,children:l})})},R=e=>{let{children:l,href:t,onClick:a}=e;return(0,s.Y)("div",{className:"paywall-secondary-cta",children:(0,s.Y)("a",{onClick:a,href:t,native:!0,children:l})})},j=e=>{let{isStatic:l,onClick:t,children:a,btnClassName:n,disabled:i,isUnsubscribedPostUnlockUpsell:c}=e;return l?(0,s.Y)("div",{className:"paywall-cta",children:(0,s.Y)("a",{className:r()("button","primary",n),href:"".concat(U.T.POST_URL).concat(c?"&launch_post_unlock_offer=true&bypass_subscription_check=true":"&launch_post_unlock_offer=true"),children:a})}):(0,s.Y)("div",{className:"paywall-cta",children:(0,s.Y)("a",{onClick:t,native:!0,children:(0,s.Y)(w.Nm,{resetCss:!0,className:r()("subscribe-btn",A.A.subscribeButton,n),disabled:i,children:a})})})};function q(e){let{isOpen:l,onClose:t}=e,i=(0,n._)(e,["isOpen","onClose"]);return(0,s.FD)(g.aF,{isOpen:l,onClose:t,children:[(0,s.Y)(g.rQ,{showClose:!0,onClose:t}),(0,s.Y)(L,(0,a._)({className:"modal-paywall"},i))]})}function G(){let{post:e,publication:l,isPaid:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{iString:a,iTemplate:n}=I18N.i(l?{pub:l}:"en");if(!t)return a("Already a subscriber?");if((null==e?void 0:e.audience)==="founding"){var i;return(0,C.m4)(l)?n(T(),null!=(i=(0,C.m4)(l))?i:""):n(P())}return a("Already a paid subscriber?")}b.A}}]);