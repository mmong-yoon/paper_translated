"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["4166"],{62614:function(e,t,n){n.d(t,{A:()=>r});let r={tag:"tag-XbOVLt",clickable:"clickable-nTmG6b",trailing:"trailing-TAQX7m",leading:"leading-mI5Ihl",fillIcon:"fillIcon-dQ0mii",theme_default:"theme_default-ZkFeoy",themeDefault:"theme_default-ZkFeoy",priority_primary:"priority_primary-uPxff5",priorityPrimary:"priority_primary-uPxff5",theme_accent:"theme_accent-Y2sqZY",themeAccent:"theme_accent-Y2sqZY",theme_error:"theme_error-Ob6GzK",themeError:"theme_error-Ob6GzK",theme_success:"theme_success-rIz3Am",themeSuccess:"theme_success-rIz3Am",theme_warn:"theme_warn-Cpi08d",themeWarn:"theme_warn-Cpi08d",theme_paid:"theme_paid-dQGqrS",themePaid:"theme_paid-dQGqrS",theme_substack:"theme_substack-jJ5UVL",themeSubstack:"theme_substack-jJ5UVL",theme_select:"theme_select-sAp6Wr",themeSelect:"theme_select-sAp6Wr",priority_secondary:"priority_secondary-AEjb79",prioritySecondary:"priority_secondary-AEjb79","priority_secondary-outline":"priority_secondary-outline-RpooJS",prioritySecondaryOutline:"priority_secondary-outline-RpooJS",priority_tertiary:"priority_tertiary-HMnJV4",priorityTertiary:"priority_tertiary-HMnJV4",media:"media-cKchX2"}},52820:function(e,t,n){n.d(t,{EL:()=>v,Kd:()=>f,S$:()=>x,WR:()=>g,Wk:()=>w,qL:()=>h});var r,i=n(69277),o=n(70408),a=n(10201),u=n(44383),l=n.n(u),s=n(17402),d=n(34835),c=n(94729),p=n(98149);let m={variantOverrides:{},experimentFeatures:{},experimentExposures:{}};function f(){return"undefined"!=typeof window&&(0,i._)({variantOverrides:{},experimentFeatures:{},experimentExposures:{}},l()(window._preloads,["variantOverrides","experimentFeatures","experimentExposures","pubIdOverride"]))||m}let _=f(),y="undefined"!=typeof window?null==(r=window._preloads)?void 0:r.siteConfigs:{},v=(e,t)=>{let n=t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n},r=e=>{if(!e)return null;let r=n(e);if((0,p.rc)(r))return{intendedVariant:r,shouldLog:!1};if(t.variantOverrides&&e in t.variantOverrides)return{intendedVariant:t.variantOverrides[e],shouldLog:!1};let i=t.experimentExposures||{};if(i[e])return{intendedVariant:i[e],shouldLog:!1};let o=t.experimentFeatures||{};return o[e]?{intendedVariant:o[e],shouldLog:!0}:null},i=async(e,t,n)=>{if("undefined"!=typeof window){window._preloads.experimentExposures=window._preloads.experimentExposures||{};let r=window._preloads.experimentExposures;r[e]=t;try{await (0,c.x6)("/api/v1/experiment_exposure",{json:{experiment_name:e,variant_name:t,ignore_downsampling:!!n},method:"post"})}catch(t){delete r[e]}}};return{getExperimentVariant:e=>{let t=r(e);return t?t.intendedVariant:null},exposeExperiment:async function(e){let{ignoreDownsampling:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{intendedVariant:n,shouldLog:o}=r(e)||{};return!!o&&(await i(e,n,!!t),!0)},getExposedVariant:e=>{if(!e)return null;let r=n(e);if((0,p.rc)(r))return r;if(t.variantOverrides&&e in t.variantOverrides)return t.variantOverrides[e];let i=t.experimentExposures||{};return i[e]?i[e]:null},refreshExperimentVariants:async function(){let e,{ignoreDownsampling:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(e=new URLSearchParams({ignore_downsampling:"true"}));let n=await (0,c.x6)("/api/v1/experiment_features",{method:"get",query:e});(null==n?void 0:n.features)&&(0,d.E)({experimentFeatures:n.features})}}},h=(0,s.createContext)(v(y,_));function x(e){let{siteConfigs:t={},experimentInfo:n,children:r}=e,i=n||_,o=(0,s.useMemo)(()=>v(t,i),[t,...Object.values(i)]);return(0,a.Y)(h.Provider,{value:o,children:r})}function w(){return(0,s.useContext)(h)}h.displayName="ExperimentsContext";let g=e=>{let t=(0,s.forwardRef)((t,n)=>{let r=w();return(0,a.Y)(e,(0,o._)((0,i._)({},r,t),{ref:n}))});return t.displayName="withExperimentsContext(".concat(e.displayName||e.name||"Anonymous",")"),t}},84565:function(e,t,n){n.d(t,{Ke:()=>f,NQ:()=>y,sV:()=>_,yq:()=>v});var r,i,o=n(69277),a=n(70408),u=n(10201),l=n(17402),s=n(52820),d=n(85478);let c=(0,s.Kd)(),p="undefined"!=typeof window&&null!=(i=null==(r=window._preloads)?void 0:r.siteConfigs)?i:{},m=(e,t)=>(0,o._)({},(0,s.EL)(e,t),(0,d.UE)(e)),f=(0,l.createContext)(m(p,c));function _(e){let{siteConfigs:t={},experimentInfo:n,children:r}=e,i=n||c,o=(0,l.useMemo)(()=>m(t,i),[t,i]);return(0,u.Y)(f.Provider,{value:o,children:r})}function y(){return(0,l.useContext)(f)}f.displayName="ExperimentsAndSiteConfigContext";let v=e=>{let t=(0,l.forwardRef)((t,n)=>{let r=y();return(0,u.Y)(e,(0,a._)((0,o._)({},r,t),{ref:n}))});return t.displayName="withExperimentsAndSiteConfigContext(".concat(e.displayName||e.name||"Anonymous",")"),t}},53989:function(e,t,n){n.d(t,{Fm:()=>f,Pu:()=>_,S0:()=>m,l9:()=>p});var r,i,o=n(69277),a=n(70408),u=n(10201),l=n(17402),s=n(94729);let d="undefined"!=typeof window&&null!=(i=null==(r=window._preloads)?void 0:r.publicationSettings)?i:{};function c(e){return t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n}}let p=(0,l.createContext)({getSettingFor:c(d),changeSetting:()=>Promise.resolve(void 0),preloadedPubSettings:d});p.displayName="PublicationSettingsContext";let m=e=>{let t=(0,l.forwardRef)((t,n)=>{let r=_();return(0,u.Y)(e,(0,a._)((0,o._)({},r,t),{ref:n}))});return t.displayName="withPubSettingsContext(".concat(e.displayName||e.name||"Anonymous",")"),t};function f(e){let{settings:t={},children:n}=e,[r,i]=(0,l.useState)(t),a=async e=>{i((0,o._)({},r,e));try{await (0,s.x6)("/api/v1/publication_settings",{method:"PUT",json:e})}catch(e){console.error(e)}},d=(0,l.useMemo)(()=>({getSettingFor:c(r),changeSetting:a,preloadedPubSettings:r}),[r]);return(0,u.Y)(p.Provider,{value:d,children:n})}function _(){return(0,l.useContext)(p)}},3084:function(e,t,n){n.d(t,{iB:()=>m});var r,i,o=n(69277),a=n(70408),u=n(10201),l=n(17402),s=n(94729);let d="undefined"!=typeof window&&null!=(i=null==(r=window._preloads)?void 0:r.publicationUserSettings)?i:{},c=e=>({getSettingForPubUser:t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n}}),p=(0,l.createContext)((0,a._)((0,o._)({},c(d)),{changeUserSetting:()=>Promise.resolve(void 0)}));function m(e){let{preloadPubUserSettings:t={},children:n}=e,[r,i]=(0,l.useState)(t),d=(0,l.useCallback)(async(e,t)=>{i(n=>(0,a._)((0,o._)({},n),{[e]:t}));try{await (0,s.x6)("/api/v1/publication_user_settings/user",{method:"PUT",json:{type:e,value:t}})}catch(e){console.error(e)}},[i]),m=(0,l.useMemo)(()=>(0,a._)((0,o._)({},c(r)),{changeUserSetting:d}),[r,d]);return(0,u.Y)(p.Provider,{value:m,children:n})}p.displayName="PublicationUserSettingsContext"},85478:function(e,t,n){n.d(t,{P_:()=>m,UE:()=>d,W8:()=>c,eE:()=>p,mJ:()=>f});var r,i,o=n(69277),a=n(70408),u=n(10201),l=n(17402);let s="undefined"!=typeof window&&null!=(i=null==(r=window._preloads)?void 0:r.siteConfigs)?i:{},d=e=>({allConfigs:e,getConfigFor:t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n}}),c=(0,l.createContext)(d(s));function p(e){let{siteConfigs:t={},children:n}=e,r=(0,l.useMemo)(()=>d(t),[t]);return(0,u.Y)(c.Provider,{value:r,children:n})}c.displayName="SiteConfigsContext";let m=e=>{let t=(0,l.forwardRef)((t,n)=>{let r=f();return(0,u.Y)(e,(0,a._)((0,o._)({},r,t),{ref:n}))});return t.displayName="withSiteConfigContext(".concat(e.displayName||e.name||"Anonymous",")"),t};function f(){return(0,l.useContext)(c)}},46271:function(e,t,n){n.d(t,{Jd:()=>y,Qg:()=>v,ur:()=>h,vu:()=>_});var r,i,o,a,u=n(69277),l=n(70408),s=n(10201),d=n(17402),c=n(94729);let p="undefined"!=typeof window&&null!=(o=null==(r=window._preloads)?void 0:r.user)?o:null,m="undefined"!=typeof window&&null!=(a=null==(i=window._preloads)?void 0:i.userSettings)?a:{},f=(0,d.createContext)({user:p,setUser:()=>void 0,userSettings:m,changeSetting:()=>Promise.resolve()});function _(e){let{defaultValue:t,userSettings:n,children:r}=e,[i,o]=(0,d.useState)(t||p),[a,_]=(0,d.useState)(null!=n?n:m),y=async(e,t,n,r)=>{if(!i&&!(null==r?void 0:r.token))return;let o=a[e];_((0,l._)((0,u._)({},a),{[e]:t}));try{await (0,c.x6)("/api/v1/user-setting",{method:"PUT",json:{type:e,value_bool:"bool"!==n&&(n||"boolean"!=typeof t)?void 0:t,value_datetime:"datetime"!==n&&(n||"string"!=typeof t)?void 0:t,value_text:"text"===n?t:void 0,token:null==r?void 0:r.token}})}catch(t){if(t instanceof c.fk)alert(t.getMessage()),_(t=>(0,l._)((0,u._)({},t),{[e]:o}));else throw t}},v=(0,d.useMemo)(()=>({user:i,setUser:o,userSettings:a,changeSetting:y}),[i,a]);return(0,s.Y)(f.Provider,{value:v,children:r})}function y(){return(0,d.useContext)(f).user}function v(){return(0,d.useContext)(f).userSettings}function h(){return(0,d.useContext)(f)}f.displayName="UserContext"}}]);