"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7517"],{23725:function(e,n,i){i.d(n,{A:()=>o});var t=i(69277),l=i(70408),r=i(10201),a=i(97731);let o=e=>(0,r.FD)(a.A,(0,l._)((0,t._)({},e),{name:"SimpleCheckmarkIcon",svgParams:{height:100,width:100},children:[(0,r.Y)("path",{d:"m40.9 70c-.5 0-1-.2-1.4-.6-.8-.8-.8-2 0-2.8l36.8-36.8c.8-.8 2-.8 2.8 0s.8 2 0 2.8l-36.8 36.8c-.4.4-.9.6-1.4.6z"}),(0,r.Y)("path",{d:"m40.9 70c-.5 0-1-.2-1.4-.6l-16.5-16.5c-.8-.8-.8-2 0-2.8s2-.8 2.8 0l16.5 16.5c.8.8.8 2 0 2.8-.4.4-.9.6-1.4.6z"})]}))},51651:function(e,n,i){i.d(n,{I:()=>D});var t=i(79785),l=i(10201),r=i(45994),a=i(15734),o=i.n(a),s=i(84605),d=i(86500),c=i(12501),u=i(35369),h=i(76977),p=i(57820),E=i(63136),m=i(82772),g=i(60322),b=i(81203),_=i(39318),I=i(57324);let R=e=>{let{pubs:n,selected:i,setSelected:t,onRecommendationsFirstVisible:r}=e;return(0,l.FD)(h.I1,{padding:8,style:{marginBottom:"20px"},children:[(0,l.Y)(h.Ye,{alignItems:"center",justifyContent:"end",children:(0,l.Y)(E.EY.Meta,{onClick:()=>{(0,d.u4)(d.qY.ALL_ONBOARDING_PUBLICATIONS_TOGGLED,{surface:"reader_onboarding",action:i.length<n.length?"select_all":"unselect_all",pubIds:n.map(e=>{let{id:n}=e;return n})}),i.length<n.length?t(n.map(e=>{let{id:n}=e;return n})):t([])},padding:4,cursor:"pointer",children:i.length<n.length?"Select all":"Unselect all"})}),(0,l.Y)(h.I1,{divider:"detail",style:{overflow:"auto",height:"50vh",paddingBottom:20,paddingRight:8},children:n.map((e,n)=>(0,l.Y)(Y,{pub:e,index:n,selected:i.includes(e.id),toggleSelected:()=>{var n;let l;return n=e.id,l=!1,void(i.includes(n)?t(i.filter(e=>e!==n)):(t([...i,n]),l=!0),(0,d.u4)(d.qY.READER_ONBOARDING_RECOMMENDED_PUB_TOGGLED,{surface:"reader_onboarding",publication_id:n,added:l}))},onRecommendationsFirstVisible:r},e.id))})]})},Y=e=>{let{pub:n,selected:i,index:t,toggleSelected:a,onRecommendationsFirstVisible:o}=e,s=(0,r.li)(null);(0,m.S8)(s,()=>{o&&o(n,t)},{threshold:.5});let d=n.subdomain?"".concat((0,_.$_T)({subdomain:n.subdomain}),"/?utm_source=").concat(I.VU.homepageReaderOnboarding):void 0;return(0,l.FD)(h.Ye,{ref:s,alignItems:"start",justifyContent:"space-between",paddingY:12,children:[(0,l.FD)(h.Ye,{alignItems:"start",justifyContent:"start",gap:8,children:[(0,l.Y)(b.wg,{logoUrl:n.imageUrl,publicationName:n.name,pub:n,href:d}),(0,l.FD)(h.I1,{justifyContent:"start",alignItems:"start",gap:4,children:[(0,l.FD)(h.I1,{alignItems:"start",justifyContent:"center",children:[(0,l.Y)(E.EY.H4,{children:n.name}),(0,l.Y)(E.EY.B4,{color:"pub-secondary-text",children:n.subtitle})]}),n.description&&(0,l.Y)(E.EY.B4,{color:"pub-secondary-text",textAlign:"left",children:n.description})]})]}),(0,l.Y)(g.S,{checked:i,onChange:a,size:"md"})]})};var S=i(59956),A=i(78979),N=i(38018);let y="contentContainer-A4QvRn";function v(){let e=(0,t._)(["Select "," more to continue"]);return v=function(){return e},e}let D=e=>{let{onCategoriesFinalized:n=null,setStep:i,handleError:t,pub:a=null,entry:m,user:g,setPreviousStepData:b,canBeSkipped:_=!1}=e,{iString:I,iPlural:Y,iTemplate:D}=(0,s.GO)(),[f,C]=(0,r.J0)([]),[O,P]=(0,r.J0)([]),[T,B]=(0,r.J0)(!1),[F,k]=(0,r.J0)([]),[G,U]=(0,r.J0)(!1),{result:L,isLoading:w}=(0,c.st)({pathname:"/api/v1/categories/recommended",auto:!0}),{result:J,isLoading:x,refetch:q}=(0,c.st)({pathname:"/api/v1/onboarding/recommended",auto:!1});(0,r.vJ)(()=>{(0,d.u4)(d.qY.READER_ONBOARDING_CATEGORIES_SCREEN_SHOWN,{entry:m,hasSelectedCategories:T})},[m,T]),(0,r.vJ)(()=>{if(T&&J&&!x){let e=(e=>{var n,i,t,l,r;let a=[],o=new Set,s=null==e||null==(n=e.collections.find(e=>(null==e?void 0:e.title)==="\uD83D\uDC64️ For you"))?void 0:n.publications;if(s&&(a=s.slice(0,N.l)).forEach(e=>o.add(e.id)),a.length<N.l){let n=(null==e||null==(i=e.collections)?void 0:i.length)||0;if(n>=3){let n=0;for(;a.length<N.l;){let i=!1;for(let l=0;l<3;l++){let r=null==e?void 0:e.collections[l],s=null==r||null==(t=r.publications)?void 0:t[n];if(s&&!o.has(s.id)&&(a.push(s),i=!0,o.add(s.id),a.length>=N.l))break}if(!i)break;n++}}else{let i=0;for(;a.length<N.l;){let t=Math.floor(i/n),s=null==e||null==(l=e.collections)?void 0:l[i%n],d=null==s||null==(r=s.publications)?void 0:r[t];if(!d)break;!o.has(d.id)&&(a.push(d),o.add(d.id),i++)}}}return a})(J);0===e.length&&(0,d.u4)(d.qY.READER_ONBOARDING_CATEGORIES_ERROR,{entry:m,error:"No recommendations found"}),P(e),e.some(e=>737237===e.id)&&k([737237])}},[J,x,T,m]);let W=null==L?void 0:L.categories,H=async()=>{try{let e={categoryIds:JSON.stringify(f)};await q({query:e})}catch(e){t(e,{ignore:!0}),i(A.d.PROFILE);return}for(let e of((0,d.u4)(d.qY.READER_ONBOARDING_CATEGORIES_FINALIZED,{entry:m,numberOfCategories:f.length}),f))(0,d.u4)(d.qY.READER_ONBOARDING_CATEGORY_REQUESTED,{entry:m,categoryId:e});B(!0),null==n||n()},K=async()=>{let e=g?g.profile_set_up_at?g.has_publication?A.d.APP_UPSELL:A.d.START_WRITING:A.d.PROFILE:A.d.SIGNUP;if(F.length>0)try{U(!0),(0,d.u4)(d.qY.READER_ONBOARDING_BULK_SUBSCRIBE_SELECTED_IN_UI,{entry:m,numberOfSubscriptions:F.length,recommendationsFrom:"model"}),g?(await o().post("/api/v1/bulk_signup").send({publications:F,source:"reader2-onboarding-modal"}),(0,d.u4)(d.qY.READER_ONBOARDING_BULK_SUBSCRIBED,{entry:m,numberOfSubscriptions:F.length,recommendationsFrom:"model"})):b(A.d.CATEGORIES,{publications:F,selectedCategoryIds:f}),i(e)}catch(e){(0,d.u4)(d.qY.READER_ONBOARDING_CATEGORIES_ERROR,{entry:m,error:e}),t(e,{ignore:!1})}else g?(0,d.u4)(d.qY.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:m,recommendationsFrom:"model"}):b(A.d.CATEGORIES,{publications:[],selectedCategoryIds:f}),i(e)};return T||0!==O.length?(0,l.FD)(h.I1,{children:[(0,l.FD)(h.I1,{children:[(0,l.Y)(E.EY.H2,{translated:!0,children:"Creators you may like"}),(0,l.Y)(E.EY.B2,{color:"pub-secondary-text",translated:!0,children:"We found some writers based on your interests."})]}),x?(0,l.Y)(p.y$,{}):(0,l.Y)(R,{pubs:O,selected:F,setSelected:k,onRecommendationsFirstVisible:(e,n)=>{(0,d.u4)(d.qY.READER_ONBOARDING_PUB_RECOMMENDED,{entry:m,publication_id:e.id,suggestion_rank:n,recommendationFrom:"model"})}}),(0,l.FD)(h.I1,{gap:8,children:[(0,l.FD)(u.$n,{priority:"primary",onClick:K,disabled:G,children:[F.length>0&&Y("Subscribe and continue","Subscribe to %1 and continue",F.length),0===F.length&&I("Continue without subscribing")]}),_&&(0,l.Y)(u.$n,{priority:"secondary",onClick:()=>{(0,d.u4)(d.qY.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:m,recommendationsFrom:"model"}),i(A.d.APP_UPSELL)},disabled:G,children:I("Skip for now")})]})]}):(0,l.FD)(h.I1,{className:"categories-step",gap:2,children:[(0,l.FD)(h.I1,{children:[a?(0,l.FD)(h.I1,{children:[(0,l.Y)(E.EY.H3,{translated:!0,children:"You're subscribed!"}),(0,l.Y)(E.EY.B2,{color:"pub-secondary-text",translated:!0,children:"Now dive into your interests"})]}):(0,l.Y)(E.EY.H3,{translated:!0,children:"Dive into your interests"}),(0,l.Y)(E.EY.B2,{color:"pub-secondary-text",translated:!0,children:"We'll recommend top publications based on the topics you select."})]}),w?(0,l.Y)(p.y$,{}):W?(0,l.Y)(h.I1,{className:y,children:(0,l.Y)(S.LJ,{hasFeatured:!1,categories:W,categoryIds:f,onCategoryClicked:e=>{let{categoryId:n}=e;if(f.includes(n)){var i;let e=null==W||null==(i=W.find(e=>(null==e?void 0:e.id)===n))?void 0:i.subcategories;C(f.filter(i=>i!==n&&!(null==e?void 0:e.some(e=>e.id===i))))}else C([...f,n])},ranking:"all",defaultExpanded:!0})}):(0,l.Y)(h.I1,{className:y,children:(0,l.Y)(E.EY.B2,{translated:!0,children:"Something went wrong."})}),(0,l.Y)(u.$n,{className:"primary",onClick:H,children:f.length<3?D(v(),3-f.length):I("Continue")})]})}},20360:function(e,n,i){i.d(n,{A:()=>u});var t=i(10201),l=i(45994),r=i(47963),a=i(86500),o=i(35369),s=i(76977),d=i(63136),c=i(57324);function u(e){let{onComplete:n}=e;return(0,l.vJ)(()=>(0,a.u4)(a.qY.READER_ONBOARDING_APP_UPSELL_SHOWN),[]),(0,t.FD)(s.I1,{paddingTop:24,gap:12,children:[(0,t.Y)(d.EY.H1,{weight:"heavy",children:"Download the Substack app"}),(0,t.Y)(d.EY.B3,{children:"Get the best reading experience on Android and iOS."}),(0,t.Y)(r.gF,{utm_campaign:c._9.readerOnboarding,utm_source:c.VU.substack}),(0,t.Y)("div",{className:"modal-ctas",children:(0,t.Y)(o.$n,{priority:"primary",onClick:n,children:"Continue"})})]})}},7717:function(e,n,i){i.d(n,{A:()=>y});var t=i(10201),l=i(45994),r=i(32485),a=i.n(r),o=i(38221),s=i.n(o),d=i(15734),c=i.n(d),u=i(42250),h=i(69277),p=i(70408),E=i(97731);let m=e=>(0,t.Y)(E.A,(0,p._)((0,h._)({},e),{name:"InvertedWarningIcon",svgParams:{height:18,width:18},children:(0,t.Y)("path",{d:"M9.00033 0.666992C4.39783 0.666992 0.666992 4.39783 0.666992 9.00033C0.666992 13.6028 4.39783 17.3337 9.00033 17.3337C13.6028 17.3337 17.3337 13.6028 17.3337 9.00033C17.3337 4.39783 13.6028 0.666992 9.00033 0.666992ZM9.00033 2.33366C12.682 2.33366 15.667 5.31866 15.667 9.00033C15.667 12.682 12.682 15.667 9.00033 15.667C5.31866 15.667 2.33366 12.682 2.33366 9.00033C2.33366 5.31866 5.31866 2.33366 9.00033 2.33366ZM8.16699 4.83366V9.83366H9.83366V4.83366H8.16699ZM8.16699 11.5003V13.167H9.83366V11.5003H8.16699Z"})}));var g=i(23725),b=i(86500),_=i(35369),I=i(76977),R=i(63136),Y=i(78979),S=i(82776);let A="errorText-XpsJyQ",N="aTag-yo_zoZ",y=e=>{let{user:n,setStep:i,entry:r,setPreviousStepData:o}=e,d=(0,l.li)(null),h=(0,l.li)(null),[p,E]=(0,l.J0)(""),[y,v]=(0,l.J0)([]),[D,f]=(0,l.J0)(!1),[C,O]=(0,l.J0)(!1),[P,T]=(0,l.J0)(!1);(0,l.vJ)(()=>{let e=async()=>{try{let e=await c().get("/api/v1/publication/suggestion");e.body.subdomain&&(f(!0),E(e.body.subdomain))}catch(e){console.error("Failed to get subdomain suggestion:",e)}};C||(O(!0),(0,b.u4)(b.qY.READER_ONBOARDING_CREATE_PUBLICATION_STEP_STARTED,{entry:r}),e(),O(!1))},[C,O,r]);let B=s()(e=>{F(e)},500),F=async e=>{let n=e.target.value;if(E(n),0===n.length)return void v([]);try{(await c().get("/api/v1/check_subdomain",{subdomain:n})).body.available?(f(!0),v([])):(f(!1),v([{msg:"This URL is taken. Try another."}]))}catch(n){var i,t;let e=[];null==(t=n.response.body)||null==(i=t.errors)||i.forEach(i=>{n.response.body.errors.length>1&&"Please enter a valid web URL (letters and numbers only)"===i.msg||e.push(i)}),f(!1),v(e)}},k=async()=>{var e,t,l,a,s;try{let l=(await c().post("/api/v1/publication").send({name:"".concat((0,S.guessFirstName)(null!=(t=null==n?void 0:n.name)?t:null)||"My"," Publication"),subdomain:p,hero_text:"Welcome to my publication",tos:!0,captcha_response:P&&(null==h||null==(e=h.current)?void 0:e.getResponse())})).body;o(Y.d.CREATE_PUBLICATION,{createdPub:l}),i(Y.d.CREATE_PUBLICATION_SUCCESS)}catch(n){if((0,b.u4)(b.qY.READER_ONBOARDING_CREATE_PUBLICATION_STEP_ERROR,{entry:r,message:n.toString()}),401===n.response.statusCode){T(!0),f(!1),v([]);return}let e=[];null==(a=n.response.body)||null==(l=a.errors)||l.forEach(i=>{n.response.body.errors.length>1&&"Please enter a valid web URL (letters and numbers only)"===i.msg||e.push(i)}),(null==(s=n.response.body)?void 0:s.error)&&e.push({msg:n.response.body.error}),f(!1),v(e)}};return(0,t.FD)(I.I1,{gap:32,paddingTop:48,className:"mobileAwareWidth-lMCXnu",children:[(0,t.Y)(R.EY.H1,{children:"Create your publication"}),(0,t.FD)(I.I1,{className:"borderedBox-PucNvX",gap:56,paddingTop:56,paddingBottom:32,paddingX:{mobile:12,desktop:48},radius:"md",children:[(0,t.FD)(I.I1,{gap:16,children:[(0,t.Y)(R.EY.B3,{align:"left",weight:"bold",children:"Publication URL"}),(0,t.FD)(I.Ye,{gap:12,alignItems:"center",children:[(0,t.Y)("input",{ref:d,type:"text",name:"subdomain",id:"subdomain",onInput:e=>{B(e)},value:p,className:a()("liveUpdatingInput-AypZsP",{["".concat("invalid-mVGeLg")]:y.length})}),(0,t.Y)(R.EY.B3,{children:".substack.com"}),(0,t.Y)(I.pT,{className:"right-XckP6Z",children:D&&!y.length?(0,t.Y)(g.A,{isStatic:!0,height:18,fill:"#4c3",stroke:"#4c3"}):(0,t.Y)(m,{height:16,width:16,fill:"#D72B2B",stroke:"#D72B2B",strokeWidth:0})})]}),P&&(0,t.Y)(u.A,{ref:h}),(y.length>0||P)&&(0,t.FD)(I.I1,{gap:8,children:[y.map(e=>(0,t.Y)(R.EY.B4,{className:A,align:"left",children:e.msg})),P&&(0,t.Y)(R.EY.B4,{className:A,align:"left",children:"Please complete the captcha to continue"})]})]}),(0,t.Y)(I.I1,{gap:24,children:(0,t.Y)(_.$n,{size:"lg",onClick:k,disabled:y.length>0,children:"Continue"})})]}),(0,t.Y)(I.pT,{className:"autoMargins-UJ_Q1X",alignItems:"center",children:(0,t.FD)(R.EY.B4,{color:"secondary",className:"narrower-nMJULR",children:["By signing up, you agree to"," ",(0,t.Y)("a",{className:N,href:"https://substack.com/pa",target:"_blank",rel:"noopener",children:"our publisher agreement"}),","," ",(0,t.Y)("a",{className:N,href:"https://substack.com/ccpa#personal-data-collected",target:"_blank",rel:"noopener",children:"information collection notice"}),", and"," ",(0,t.Y)("a",{className:N,href:"https://substack.com/privacy",target:"_blank",rel:"noopener",children:"privacy policy"})]})})]})}},14868:function(e,n,i){i.d(n,{A:()=>u});var t=i(10201),l=i(45994),r=i(86500),a=i(35369),o=i(76977),s=i(63136),d=i(78979),c=i(39318);let u=e=>{let{setStep:n,entry:i,previousStepData:u}=e;return(0,l.vJ)(()=>{(0,r.u4)(r.qY.READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_STARTED,{entry:i})}),(0,t.FD)(o.I1,{gap:48,paddingBottom:120,alignItems:"center",children:[(0,t.Y)("img",{className:"image-OdneRK",src:(0,c.dJ9)("/img/reader_onboarding/car.png",264)}),(0,t.FD)(o.I1,{gap:4,children:[(0,t.Y)(s.EY.H1,{children:"Success!"}),(0,t.Y)(s.EY.B3,{children:"You're all set! Head over to your dashboard and tell the world about your Susbtack"})]}),(0,t.FD)(o.I1,{className:"buttonGroup-HpHxnd",gap:4,children:[(0,t.Y)(a.$n,{size:"lg",onClick:()=>{window.location.href=(0,c.Z96)(u[d.d.CREATE_PUBLICATION].createdPub,{addBase:!0})},children:"Visit writer dashboard"}),(0,t.Y)(a.$n,{size:"lg",priority:"secondary",onClick:()=>{(0,r.u4)(r.qY.READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_SKIPPED,{entry:i}),n(d.d.APP_UPSELL)},children:"Visit later"})]})]})}},95573:function(e,n,i){i.d(n,{A:()=>a});var t=i(10201),l=i(24142),r=i(35369);let a=e=>{let{close:n}=e;return(0,t.FD)("div",{className:"welcome-step",children:[(0,t.FD)("div",{className:"headings",children:[(0,t.Y)(l.A,{className:"substack",width:72,height:72}),(0,t.Y)("h3",{children:"Something went wrong"}),(0,t.Y)("p",{children:"We're sorry for the inconvenience."})]}),(0,t.Y)("div",{className:"spacer"}),(0,t.Y)("div",{className:"spacer"}),(0,t.Y)("div",{className:"modal-ctas",children:(0,t.Y)(r.$n,{priority:"secondary",onClick:n,children:"Close"})})]})}},21980:function(e,n,i){i.d(n,{A:()=>b});var t=i(69277),l=i(70408),r=i(10201),a=i(45994),o=i(32485),s=i.n(o),d=i(15734),c=i.n(d),u=i(61431),h=i(5109),p=i(46271),E=i(86500),m=i(94729),g=i(78979);let b=e=>{let{setStep:n,handleError:i,user:o,entry:d,followUserIds:b,redirectAfterProfile:_=!1,barebones:I=!1}=e,[R,Y]=(0,a.J0)(null),[S,A]=(0,a.J0)(!1),N=o?o.id:null,{setUser:y}=(0,p.ur)();(0,a.vJ)(()=>{(async()=>{if(null==b?void 0:b.length)try{await (0,m.x6)("/api/v1/feed/bulk-follow",{method:"POST",json:{surface:"post-follow-referrer-prompt",userIds:b}})}catch(e){console.error("could not bulk-follow",e)}})()},[b]),(0,a.vJ)(()=>{(0,E.u4)(E.qY.READER_ONBOARDING_PROFILE_SETUP_STARTED,{entry:d});let e=async()=>{try{var e;let n=(await c().get("/api/v1/user/".concat(N,"/profile/edit"))).body;n&&!n.profile_set_up_at&&(null==(e=n.subscriptions)?void 0:e.length)>0&&(n.subscriptions=n.subscriptions.map(e=>(0,l._)((0,t._)({},e),{visibility:"public"}))),Y(n)}catch(e){i(e,{ignore:!0}),n(g.d.APP_UPSELL)}};N&&e()},[i,n,N,d]);let v=!!(null==R?void 0:R.profile_set_up_at);return(0,r.FD)(r.FK,{children:[(0,r.FD)("div",{className:s()("profile-step",{hidden:!S}),children:[(0,r.Y)("h3",{children:"Subscriptions displayed on profile"}),(0,r.Y)("p",{children:"Subscriptions appear on your profile by default, but you can choose to hide some or all of them"}),(0,r.Y)(u._,{profile:R,onFinalizeVisibility:()=>A(!1),onSetVisibility:e=>{R?Y((0,l._)((0,t._)({},R),{subscriptions:[...R.subscriptions.map(n=>{let i=e[n.publication.id];return i?(0,l._)((0,t._)({},n),{visibility:i}):n})]})):console.warn("No profile, cannot set visibility")},source:"homepage-reader-onboarding"})]}),(0,r.FD)("div",{className:s()("profile-step",{hidden:S}),children:[(0,r.Y)("h3",{children:"Tell us about yourself"}),(0,r.Y)("p",{children:"Add your name, a profile picture, and a bit more about who you are."}),(0,r.Y)(h.dx,{pageTitle:"",user:o,freeSignup:!0,freeSignupEmail:null,needsPhoto:!1,optionalPhoto:!0,isPostInvite:!1,primaryEligiblePublications:[],onSuccess:e=>{let i=null==e?void 0:e.body;i&&y(i),_?n(g.d.EXIT):n(g.d.APP_UPSELL)},onEditReadVisibility:()=>{A(!0),(0,E.u4)(E.qY.READER_ONBOARDING_PROFILE_SETUP_SKIPPED,{entry:d})},numVisibleSubscriptions:(null==R?void 0:R.subscriptions.filter(e=>{let{visibility:n}=e;return"public"===n}).length)||0,numSubscriptions:(null==R?void 0:R.subscriptions.length)||0,complete:!0,text:"Continue",profileExists:v,prepareData:e=>(e.reads_visibility=(null==R?void 0:R.subscriptions.map(e=>{let{id:n,visibility:i}=e;return{id:n,visibility:i}}))||[],e),barebones:I})]})]})}},10023:function(e,n,i){i.d(n,{A:()=>Y});var t=i(10201),l=i(45994),r=i(32485),a=i.n(r),o=i(15734),s=i.n(o),d=i(34206),c=i(24142),u=i(46271),h=i(34835),p=i(86500),E=i(60322),m=i(76977),g=i(63136),b=i(92028),_=i(78979),I=i(39318),R=i(80856);function Y(e){var n,i,r,o,c;let{user:Y,setStep:A,entry:N,previousStepData:y,prefilledEmail:v,skipCategories:D=!1}=e,{setUser:f}=(0,u.ur)(),[C,O]=(0,l.J0)(null!=v?v:""),[P,T]=(0,l.J0)(!1),[B,F]=(0,l.J0)(!1);(0,l.vJ)(()=>{Y&&!y[_.d.CATEGORIES]&&A(_.d.CATEGORIES)},[Y,A,y]);let[k,G]=(0,l.J0)(!1),U=async e=>{if(e.body.userExists)return void T(!0);if(e.body.emailConfirmationRequired)return void F(!0);if((0,p.u4)(p.qY.READER_ONBOARDING_SIGNUP_SUCCEEDED,{entry:N}),Y||((0,h.E)({user:e.body.user}),f(e.body.user)),y[_.d.CATEGORIES]){var n;e.body.userExists?A(_.d.APP_UPSELL):A(_.d.PROFILE);let i=null==(n=y[_.d.CATEGORIES])?void 0:n.publications;(null==i?void 0:i.length)?(await s().post("/api/v1/bulk_signup").send({publications:i,source:"".concat(N,"-reader-onboarding"),email:C}),(0,p.u4)(p.qY.READER_ONBOARDING_BULK_SUBSCRIBED,{entry:N,numberOfSubscriptions:i.length,recommendationsFrom:"categories"})):(0,p.u4)(p.qY.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:N,recommendationsFrom:"categories"})}else D?A(_.d.PROFILE):A(_.d.CATEGORIES)};if(B)return(0,t.FD)(m.I1,{className:"signup-step",children:[(0,t.Y)(S,{title:"Verify your email address"}),(0,t.FD)(g.EY.B3,{children:["We just sent an email to ",(0,t.Y)("strong",{children:C}),". Please check your inbox before continuing."]}),(0,t.Y)(m.pT,{flex:"grow"}),(0,t.Y)("div",{className:"modal-ctas",children:(0,t.Y)(b.Q,{onClick:e=>{e.preventDefault(),F(!1)},children:(0,t.Y)(g.EY,{as:"span",decoration:"hover-underline",children:"Or edit your email address or try again."})})})]});let L=null!=(o=null==(n=y[_.d.CATEGORIES])?void 0:n.publications)?o:[],w=null!=(c=null==(i=y[_.d.CATEGORIES])?void 0:i.selectedCategoryIds)?c:[];return(0,t.FD)("div",{className:"signup-step",children:[(0,t.Y)(S,{title:"Sign up to subscribe",subtitle:"Substack is the home for great writing."}),(0,t.FD)(d.Ay,{method:"post",action:"/api/v1/reader/signup/just_email",loading:!1,autoLock:!0,onSuccess:U,children:[(0,t.Y)("input",{type:"hidden",name:"publicationIds",value:L.join(",")}),(0,t.Y)("input",{type:"hidden",name:"selectedCategoryIds",value:w.join(",")}),(0,t.FD)("p",{children:[(0,t.Y)("label",{for:"email",children:"Your email address"}),(0,t.Y)("input",{type:"email",name:"email","aria-label":"Email",value:C,tabIndex:0,onInput:e=>{O(e.target.value)},onChange:e=>{O(e.target.value)}}),P&&(0,t.FD)("div",{className:"error",children:["This email is already registered with Substack. Please"," ",(0,t.Y)("a",{native:!0,href:(0,I.fxv)(),children:"sign in to continue"}),"."]}),B&&(0,t.Y)("div",{className:"error",children:"We have sent you a confirmation email. Please check your inbox before continuing."})]}),(0,t.Y)("div",{id:"error-container"}),(0,t.FD)(m.I1,{gap:16,children:[(0,t.FD)(m.Ye,{as:"label",gap:8,className:"checkboxLabel-gCoESV",children:[(0,t.Y)(E.S,{checked:k,onChange:e=>{G(e)},size:"sm"}),(0,t.Y)(m.I1,{flex:"grow",children:(0,t.FD)(g.EY.B3,{as:"span",textAlign:"left",children:["I agree to Substack’s"," ",(0,t.Y)("a",{href:(0,R.lk)(),target:"_blank",children:"Terms of Use"})," ","and acknowledge its"," ",(0,t.Y)("a",{href:(0,R.iQ)(),target:"_blank",children:"Information Collection Notice"})," ","and"," ",(0,t.Y)("a",{href:(0,R.gB)(),target:"_blank",children:"Privacy Policy"})]})})]}),(0,t.Y)("button",{className:a()("button primary",{disabled:!k},"noMargin-hNmNqv"),type:"submit",disabled:!k,children:y[_.d.CATEGORIES]&&(null==(r=y[_.d.CATEGORIES])?void 0:r.publications.length)?"Subscribe and join Substack":"Get started"}),(0,t.FD)(g.EY.B3,{children:["Already have a Substack account?"," ",(0,t.Y)("a",{native:!0,href:(0,I.fxv)(),children:"Sign in"})]})]})]})]})}function S(e){let{title:n,subtitle:i}=e;return(0,t.FD)("div",{className:"headings",children:[(0,t.Y)(c.A,{className:"substack",width:68,height:68}),(0,t.Y)("h3",{children:n}),i&&(0,t.Y)("p",{children:i})]})}},71419:function(e,n,i){i.d(n,{A:()=>u});var t=i(10201),l=i(45994),r=i(86500),a=i(35369),o=i(76977),s=i(63136),d=i(78979),c=i(39318);let u=e=>{let{setStep:n,entry:i}=e;return(0,l.vJ)(()=>{(0,r.u4)(r.qY.READER_ONBOARDING_START_WRITING_STEP_STARTED,{entry:i})}),(0,t.FD)(o.I1,{alignItems:"center",gap:48,paddingBottom:120,children:[(0,t.Y)("img",{className:"image-eElYa7",src:(0,c.dJ9)("/img/reader_onboarding/jobpage_penholder.png",150)}),(0,t.FD)(o.I1,{gap:4,children:[(0,t.Y)(s.EY.H1,{children:"Want to start writing on Substack?"}),(0,t.Y)(s.EY.B3,{color:"secondary",children:"Write posts, grow your audience, and make money on Substack"})]}),(0,t.FD)(o.I1,{className:"buttonGroup-BqeO0U",gap:4,children:[(0,t.Y)(a.$n,{size:"lg",onClick:()=>n(d.d.CREATE_PUBLICATION),children:"Create my publication"}),(0,t.Y)(a.$n,{size:"lg",priority:"secondary",onClick:()=>{(0,r.u4)(r.qY.READER_ONBOARDING_START_WRITING_STEP_SKIPPED,{entry:i}),n(d.d.APP_UPSELL)},children:"Skip for now"})]})]})}},52023:function(e,n,i){i.d(n,{A:()=>s});var t=i(10201),l=i(24142),r=i(86500),a=i(35369),o=i(78979);let s=e=>{let{pub:n=null,profile:i,entry:s,setStep:d}=e;return(0,t.FD)("div",{className:"welcome-step",children:[(0,t.FD)("div",{className:"headings",children:[(0,t.Y)(l.A,{className:"substack",width:68,height:68}),(0,t.Y)("h3",{children:"You're all set up"}),(0,t.FD)("p",{children:["You will now start receiving new posts from"," ",i?(0,t.FD)(t.FK,{children:[(0,t.Y)("b",{children:i.name})," and the other writers"]}):n?(0,t.FD)(t.FK,{children:[(0,t.Y)("b",{children:n.name})," and the other publications"]}):"the publications"," ","you subscribed to. Happy reading!"]})]}),(0,t.Y)("div",{className:"spacer"}),(0,t.Y)("div",{className:"spacer"}),(0,t.Y)("div",{className:"modal-ctas",children:(0,t.FD)(a.$n,{priority:"primary",onClick:()=>{(0,r.u4)(r.qY.READER_ONBOARDING_START_READING_CLICKED,{entry:s}),d(o.d.EXIT)},children:["Start reading",i?" ".concat(i.name):n?" ".concat(n.name):""]})})]})}},78979:function(e,n,i){i.d(n,{d:()=>t});let t={SIGNUP:"SIGNUP",PUB_LANDING:"PUB_LANDING",PUB_SIGNUP:"PUB_SIGNUP",CATEGORIES:"CATEGORIES",CATEGORIES_SUGGESTIONS:"CATEGORIES_SUGGESTIONS",PROFILE:"PROFILE",START_WRITING:"START_WRITING",CREATE_PUBLICATION:"CREATE_PUBLICATION",CREATE_PUBLICATION_SUCCESS:"CREATE_PUBLICATION_SUCCESS",WELCOME:"WELCOME",ERROR:"ERROR",EXIT:"EXIT",APP_UPSELL:"APP_UPSELL"}},38018:function(e,n,i){i.d(n,{l:()=>t});let t=7}}]);