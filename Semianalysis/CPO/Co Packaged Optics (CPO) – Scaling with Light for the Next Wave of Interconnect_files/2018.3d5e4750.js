(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["2018"],{7642:function(e,t,n){"use strict";n.d(t,{A:()=>r});let r={popover:"popover-Q5L48i",visible:"visible-w2GbD1",mounted:"mounted-xAyTLJ",disabled:"disabled-qyVgYn",explainer:"explainer-FXmc_P",dismissExplainer:"dismissExplainer-ns56FG",mobileFooter:"mobileFooter-CGz8PV",button:"button-r00Nrm"}},91086:function(e,t,n){"use strict";n.d(t,{A:()=>r});let r={transcriptionStatus:"transcriptionStatus-OyxRN5",transcriptionChunk:"transcriptionChunk-DKBYAw",hoverChunk:"hoverChunk-IPtOLw",rowIndicator:"rowIndicator-jiY8sp",hoverRow:"hoverRow-zMw3pV",activeRow:"activeRow-S2HzS9",rowText:"rowText-T4jYBi",speakerText:"speakerText-lh6QvQ",rowEditableText:"rowEditableText-PLHmec",activeWord:"activeWord-J6YmxG",playCircle:"playCircle-Ech_eu"}},73683:function(e,t,n){"use strict";n.d(t,{A:()=>r});let r={subscribeButton:"subscribeButton-LcKYi7"}},96063:function(e,t,n){"use strict";n.d(t,{A:()=>r});let r={"byline-wrapper":"byline-wrapper-rwhTzJ",bylineWrapper:"byline-wrapper-rwhTzJ",bottomWithTos:"bottomWithTos-g5MwKO","byline-wrapper--swap-on-mobile":"byline-wrapper--swap-on-mobile-Cs2Jac",bylineWrapperSwapOnMobile:"byline-wrapper--swap-on-mobile-Cs2Jac","byline-faces--swap-on-mobile":"byline-faces--swap-on-mobile-ucRXf3",bylineFacesSwapOnMobile:"byline-faces--swap-on-mobile-ucRXf3",subscribeWidget:"subscribeWidget-sIP7pQ",title:"title-X77sOw",subtitle:"subtitle-HEEcLo"}},74213:function(e,t,n){"use strict";n.d(t,{A:()=>r});let r={postUFI:"postUFI-Oh86n4",postUfi:"postUFI-Oh86n4",hasVoiceover:"hasVoiceover-rbvr3u",editButtonContainer:"editButtonContainer-hWwvUO"}},67754:function(e,t,n){"use strict";n.d(t,{A:()=>r});let r={inputWithIcons:"inputWithIcons-vs0rlV",error:"error-nMG79e",inputWrapper:"inputWrapper-Wvkzvn",icon:"icon-wnhO6c"}},3526:function(e,t,n){"use strict";n.d(t,{D:()=>k});var r=n(79785),i=n(10201),a=n(32485),o=n.n(a),l=n(17402),s=n(72880),c=n(84605),d=n(86500),u=n(58418),p=n(35369),h=n(76977),m=n(16993),g=n(63136),f=n(39318),b=n(50963),Y=n(57324);let _="ig_modal_logo-jNPKzo",v="logo_substack-xHlM5o";function w(){let e=(0,r._)(["Follow "," in the app"]);return w=function(){return e},e}function y(){let e=(0,r._)(["Get the Substack app to follow ","'s reading and writing."]);return y=function(){return e},e}let k=e=>{let{pub:t,slug:n,action:r,platform:a}=e,{iString:k,iTemplate:S}=(0,c.GO)(),[C,I]=(0,u.A)("".concat(a,"_webview_app_upsell"),259200),[E,F]=(0,l.useState)(!C);(0,l.useEffect)(()=>{E&&(0,d.u4)(d.qY.APP_FOOTER_SHEET_CTA_VIEWED,{surface:"post",type:"webview-sheet",platform:a})},[]);let D=(0,f.XV8)(t.subdomain,n,{redirect:"app-store",source:Y.VU.postFooter}),A="read"===r?t.logo_url:t.author_photo_url||t.logo_url;return(0,i.Y)(m.aF,{isOpen:E,onClose:()=>{F(!1)},children:(0,i.Y)(m.cw,{children:(0,i.FD)(h.I1,{gap:32,alignItems:"center",paddingY:40,paddingX:24,children:[(0,i.Y)(h.Ye,{alignItems:"center",justifyContent:"center",style:{position:"relative"},children:A?(0,i.FD)(i.FK,{children:[(0,i.Y)(h.pT,{justifyContent:"center",alignItems:"center",className:o()(_,v,"logo_left-HHdifs"),children:(0,i.Y)(s.o,{src:"/img/substack-white.svg",imageIsFixedWidth:!0,useRetinaSizing:!0,maxWidth:44})}),(0,i.Y)(h.pT,{justifyContent:"center",alignItems:"center",className:o()(_,"logo_right-_og3lw"),children:(0,i.Y)(s.o,{className:"ig_image_border-FuLDjr",src:A,imageIsFixedWidth:!0,useRetinaSizing:!0,maxWidth:56})})]}):(0,i.Y)(h.pT,{justifyContent:"center",alignItems:"center",className:o()(_,v),children:(0,i.Y)(s.o,{src:"/img/substack-white.svg",imageIsFixedWidth:!0,useRetinaSizing:!0,maxWidth:44})})}),(0,i.FD)(h.I1,{gap:8,alignItems:"center",children:[(0,i.Y)(g.EY.B1,{align:"center",weight:"semibold",children:"read"===r?k("Read in the Substack app"):S(w(),t.author_name)}),(0,i.Y)(g.EY.B4,{align:"center",fontSize:14,color:"secondary",children:"read"===r?k("Get the Substack app for the best reading experience on the go."):S(y(),(0,b.$k)(t.author_name))})]}),(0,i.FD)(h.I1,{gap:16,paddingX:16,alignItems:"center",className:"ig_modal_button_container-wKHKdO",children:[(0,i.Y)(p.$n,{priority:"primary",onClick:()=>{(0,d.u4)(d.qY.APP_BANNER_TAPPED,{surface:"post",type:"webview-sheet",platform:a})},href:D,children:k("Open in app")}),(0,i.Y)(p.$n,{priority:"tertiary",onClick:()=>{(0,d.u4)(d.qY.APP_FOOTER_SHEET_CTA_DISMISSED,{surface:"post",type:"webview-sheet",platform:a}),I(),F(!1)},children:k("Maybe later")})]})]})})})}},70997:function(e,t,n){"use strict";n.d(t,{p:()=>h});var r=n(10201),i=n(87677),a=n(17402),o=n(94794),l=n(86500),s=n(16074),c=n(76977),d=n(63136),u=n(18947),p=n(57324);let h=e=>{let{user:t,isMobile:n,post:h}=e,m=(0,o.aZ)(),g=(null==t?void 0:t.is_contributor)&&!m,f=!n||!g;return((0,a.useEffect)(()=>{f||(0,l.u4)(l.qY.POST_STATS_IN_APP_UPSELL_SEEN,{post_id:h.id,source:"mobile_post_page"})}),f)?null:(0,r.FD)(c.VP,{children:[(0,r.Y)(s.c,{}),(0,r.FD)(c.fI,{className:"statsLink-zUlL_7",alignItems:"center",justifyContent:"space-between",children:[(0,r.Y)(d.EY.B3,{paddingY:16,as:"a",weight:"semibold",translated:!0,href:(0,u.MG)({postId:h.id,params:{utm_source:p.VU.substack,utm_medium:p.Jn.web,utm_campaign:p._9.postStatsUpsellMobilePostPage,redirect:"app-store"}}),onClick:()=>(0,l.u4)(l.qY.POST_STATS_IN_APP_UPSELL_CLICKED,{post_id:h.id,source:"mobile_post_page"}),children:"View stats in the app"}),(0,r.Y)(i.A,{})]}),(0,r.Y)(s.c,{})]})}},76219:function(e,t,n){"use strict";n.d(t,{u:()=>a});var r=n(10201),i=n(63136);function a(e){let{doiUrl:t,pdfUrl:n}=e;return t&&n?(0,r.FD)(i.EY,{as:"p",children:["Cite as:"," ",(0,r.Y)("a",{href:t,target:"_blank",children:t})," ","â€¢"," ",(0,r.Y)("a",{href:n,target:"_blank",children:"PDF"})]}):null}},71328:function(e,t,n){"use strict";n.d(t,{k:()=>p});var r=n(69277),i=n(70408),a=n(10201),o=n(60927),l=n(93038),s=n(76977),c=n(63136),d=n(49807);let u={blurb:"blurb-PNfDEK"};function p(e){let{crossPostInfo:{introText:t,crossPostedPub:n,crossPostingByLine:r},postType:i}=e;return(0,a.Y)(s.VP,{paddingTop:8,paddingBottom:24*("podcast"!==i),children:(0,a.FD)(s.VP,{paddingX:20,padding:8,className:u.blurb,gap:12,children:[(0,a.Y)(h,{crossPostedPub:n}),(0,a.Y)(m,{introText:t}),(0,a.Y)(g,{byline:r})]})})}function h(e){let{crossPostedPub:t}=e;return(0,a.FD)(s.fI,{className:u.attribution,gap:8,alignItems:"center",children:[(0,a.Y)(o.A,{stroke:"var(--color-accent)",size:16}),(0,a.FD)(c.EY.Meta,{translated:!0,color:"accent",children:["Cross-posted by ",(0,a.Y)(c.Yq,{href:(0,d.$_T)(t),children:I18N.p(t.name)})]})]})}function m(e){let{introText:t}=e;return t?(0,a.Y)(c.EY.B2,{fontStyle:"italic",children:'"'.concat(t,'"')}):null}function g(e){let{byline:t}=e,n=null==t?void 0:t[0];return n?(0,a.FD)(c.EY.B2,{color:"accent",children:["- ",(0,a.Y)(l.Ay,(0,i._)((0,r._)({},n),{type:"user",uuid:""}))]}):null}},70345:function(e,t,n){"use strict";n.d(t,{y$:()=>L});var r=n(69277),i=n(70408),a=n(79785),o=n(10201),l=n(17402),s=n(47963),c=n(85048),d=n(58050),u=n(84605),p=n(46271),h=n(86500),m=n(94729),g=n(17186),f=n(68349),b=n(24078),Y=n(35369),_=n(76977),v=n(16993),w=n(63136),y=n(65842),k=n(36372),S=n(11510),C=n(16291),I=n(39318),E=n(41086),F=n(50963),D=n(57324);let A={is_www:!0,is_personal_mode:!1,id:0,name:"Substack",subdomain:"www",copyright:"Substack Inc.",mailing_address:"548 Market Street PMB 72296\nSan Francisco, CA 94104",email_from:"no-reply@substack.com",email_from_name:"Substack",logo_url:"/img/substack.png?v=3",language:"en",theme:void 0,theme_var_color_links:void 0,theme_var_background_pop:void 0,theme_var_cover_bg_color:void 0,custom_domain:void 0,type:void 0};function x(){let e=(0,a._)(["Already following ",""]);return x=function(){return e},e}function N(){let e=(0,a._)(["",", a paid subscriber of ",", shared this with you."]);return N=function(){return e},e}function T(){let e=(0,a._)(["",", a subscriber of ",", shared this with you."]);return T=function(){return e},e}function P(){let e=(0,a._)([""," shared this with you."]);return P=function(){return e},e}function O(){let e=(0,a._)(["Follow "," and continue reading"]);return O=function(){return e},e}function B(){let e=(0,a._)(["Sign up and follow ",""]);return B=function(){return e},e}let L=e=>{let{pub:t,post:n,referringUser:a,freeSignupEmail:s,forceFollowPrompt:c,surface:b}=e,[Y,w]=(0,l.useState)(!1),[y,S]=(0,l.useState)(!1),[D,A]=(0,l.useState)(0),[N,T]=(0,l.useState)(s),[P,O]=(0,l.useState)(!1),{iString:B,iTemplate:L}=(0,u.GO)(),V=(0,k.d)(),U=(0,p.Jd)(),j=!!U||!!s,W=(0,d.cC)(a,null!=b?b:"follow-referrer-prompt",void 0,{auto:j}),z=(0,l.useMemo)(()=>({free_signup_email:s,post_id:null==n?void 0:n.id,referring_user_id:a.id}),[s,null==n?void 0:n.id,a.id]);(0,l.useEffect)(()=>{if(j&&!W.isLoaded||W.isFollowing){c&&W.isFollowing&&V.popToast(()=>(0,o.Y)(k.y,{text:L(x(),(0,F.$k)(a.name))}));return}try{let e=new URL(document.referrer);if(/(\b|\.)google\./.test(e.hostname)||["news.ycombinator.com","hckrnews.com"].includes(e.hostname))return}catch(e){}if(U&&(0,E.y)("follow-referrer-on-load")){(0,f.qm)("follow-referrer-on-load"),(0,h.u4)(h.qY.FOLLOW_REFERRER_PROMPT_REDIRECTED,z),G({fromRedirect:!0}).then(()=>w(!0));return}let e="follow-prompt-for-post-".concat(null==n?void 0:n.id,"-and-referrer-").concat(a.id,"-shown-at"),t=(0,g.xm)(e);!c&&t&&(0,C.A)().subtract(7,"days").isBefore(t)||((0,g.X3)(e,Date.now()),w(!0),(0,h.u4)(h.qY.FOLLOW_REFERRER_PROMPT_SHOWN,z))},[U,W.isLoaded]);let J=(0,l.useCallback)(()=>{(0,h.u4)(h.qY.FOLLOW_REFERRER_PROMPT_DISMISSED,(0,i._)((0,r._)({},z),{step:D})),w(!1)},[z,w,D]),K=(0,l.useCallback)(function(){let{email:e,reason:n="sign-in-click"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,h.u4)(h.qY.FOLLOW_REFERRER_PROMPT_SIGN_IN_INITIATED,(0,i._)((0,r._)({},z),{reason:n}));let o=(0,I.oRR)({"follow-referrer-on-load":a.id});(0,f.V2)((0,I.a7q)({email:e,for_pub:null==t?void 0:t.subdomain,redirect:o}))},[z,null==t?void 0:t.subdomain,a.id]),q=(0,l.useCallback)(async function(){let e,t,n,{email:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{({user:e,userExists:t}=await (0,m.x6)("/api/v1/reader/signup/just_email",{method:"POST",json:{email:a}}))}catch(e){e instanceof m.fk&&(n=e.getMessage())}return e?(T(a),0):t?((0,h.u4)(h.qY.FOLLOW_REFERRER_PROMPT_EXISTING_EMAIL_ENTERED,(0,i._)((0,r._)({},z),{email:a})),T(a),2):((0,h.u4)(h.qY.FOLLOW_REFERRER_PROMPT_SIGNUP_FAILED,(0,i._)((0,r._)({},z),{email:a,error:n})),V.popToast(()=>(0,o.Y)(k.y,{text:n||B("Something went wrong. Please try again later.")})),1)},[z,V,B]),G=(0,l.useCallback)(async function(){let e,{email:t,fromRedirect:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!y){if(S(!0),n||(0,h.u4)(h.qY.FOLLOW_REFERRER_PROMPT_CTA_CLICKED,(0,i._)((0,r._)({},z),{email:t})),!j){if(!t){A(1),S(!1);return}if(1===(e=await q({email:t})))return void S(!1)}W.isFollowing||void 0!==e&&0!==e||(await W.toggle(),O(!0)),!U||n?A(2):w(!1),S(!1)}},[U,j,W,z,y,S,A,q]);return(0,o.Y)(v.aF,{fullscreenMobile:0!==D,isOpen:Y,onClose:J,children:(0,o.FD)(_.I1,{style:{height:"100%"},children:[(0,o.Y)(v.rQ,{showClose:!0,onClose:J}),(0,o.FD)(_.I1,{flex:"grow",gap:48,paddingX:32,paddingBottom:32,paddingTop:12,children:[0===D&&(0,o.Y)(R,{pub:t,referringUser:a,loading:y,onFollowClick:G,onDismiss:J}),1===D&&(0,o.Y)(M,{referringUser:a,loading:y,onFollowWithEmail:G,onSignInClick:K}),2===D&&(0,o.Y)(H,{email:N,referringUser:a,followed:P,onDismiss:J})]})]})})},R=e=>{var t,n,r,i,a;let l,{pub:s,referringUser:c,loading:d,onFollowClick:p,onDismiss:h}=e,{iTemplate:m,iString:g}=(0,u.GO)(),f=null!=(a=null!=(i=null!=(r=c.photo_url)?r:null==s?void 0:s.logo_url)?i:null==s?void 0:s.author_photo_url)?a:(0,I.Ji1)(c.id),v=(0,F.$k)(c.name),y=null==(n=c.subscriptions)||null==(t=n.find(e=>e.publication_id==(null==s?void 0:s.id)))?void 0:t.membership_state;return l=s&&"subscribed"===y?m(N(),c.name,s.name):s&&"free_signup"===y?m(T(),c.name,s.name):m(P(),c.name),(0,o.FD)(_.I1,{alignItems:"center",gap:8,children:[(0,o.FD)(_.I1,{alignItems:"center",gap:16,paddingBottom:16,children:[(0,o.Y)("div",{className:"avatarContainer-Bvvbb6",children:(0,o.Y)(b.eu,{className:"avatar-Gt1fvo",user:{photo_url:f},size:64})}),(0,o.Y)(w.EY.H3,{align:"center",weight:"heavy",children:l})]}),(0,o.Y)(Y.$n,{priority:"primary",disabled:d,onClick:p,children:m(O(),v)}),(0,o.Y)(Y.$n,{priority:"secondary",onClick:h,children:g("Skip")})]})},M=e=>{let{referringUser:t,loading:n,onFollowWithEmail:r,onSignInClick:i}=e,[a,s]=(0,l.useState)(""),{iTemplate:d}=(0,u.GO)(),p=(0,l.useRef)(null);(0,l.useEffect)(()=>{var e;null==(e=p.current)||e.focus()},[]);let h=(0,l.useCallback)(e=>{e.preventDefault(),""!==a&&r({email:a})},[r,a]),m=(0,F.$k)(t.name);return(0,o.FD)(o.FK,{children:[(0,o.FD)(_.I1,{alignItems:"center",gap:8,children:[(0,o.FD)(w.EY.H3,{translated:!0,align:"center",weight:"heavy",children:["Sign up to follow ",I18N.p(m)]}),(0,o.Y)(w.EY.B4,{translated:!0,align:"center",color:"secondary",children:"Discover great writing and follow your friends on Substack"})]}),(0,o.FD)(_.I1,{gap:12,children:[(0,o.Y)(w.EY.B4,{translated:!0,weight:"semibold",children:"Your email address"}),(0,o.Y)("form",{onSubmit:h,children:(0,o.Y)(y.ks,{ref:p,placeholder:"bob@gmail.com",value:a,onChange:e=>s(e.currentTarget.value)})})]}),(0,o.FD)(_.I1,{alignItems:"center",gap:16,justifyContent:"center",children:[(0,o.Y)(Y.$n,{disabled:n||""===a,onClick:h,children:d(B(),m)}),(0,o.FD)(w.EY.B4,{translated:!0,align:"center",color:"secondary",children:["Already have a Substack account?"," ",(0,o.Y)(w.EY.B4,{translated:!0,color:"secondary",decoration:"underline",as:"a",href:"#",onClick:i,children:"Sign in"})]})]}),(0,o.Y)(_.I1,{flex:"grow",justifyContent:"end",children:(0,o.Y)(w.EY.B4,{align:"center",children:(0,o.Y)(c.qd,{className:"termsFooter-KerNk3",publication:A})})})]})},H=e=>{let{onDismiss:t,email:n,referringUser:a,followed:l}=e,{iString:c}=(0,u.GO)(),d=(0,S.Iu)(),p={utm_medium:D.Jn.web,utm_campaign:D._9.postFollowReferrerPrompt,utm_source:D.VU.post};return(0,o.FD)(o.FK,{children:[l?(0,o.FD)(_.I1,{alignItems:"center",gap:4,children:[(0,o.Y)(w.EY.H3,{translated:!0,align:"center",weight:"heavy",children:"Read and follow in the app"}),(0,o.FD)(w.EY.B4,{translated:!0,align:"center",color:"secondary",children:["See who else ",I18N.p((0,F.$k)(a.name))," reads in the Substack app"]})]}):(0,o.FD)(_.I1,{alignItems:"center",gap:4,children:[(0,o.FD)(w.EY.H3,{translated:!0,align:"center",weight:"heavy",children:["Finish following ",I18N.p((0,F.$k)(a.name))," in the app"]}),(0,o.FD)(w.EY.B4,{translated:!0,align:"center",color:"secondary",children:["See who else ",I18N.p((0,F.$k)(a.name))," reads on Substack"]})]}),d?(0,o.FD)(o.FK,{children:[(0,o.Y)(_.Ye,{alignSelf:"center",children:(0,o.Y)("img",{src:(0,I.dJ9)("/img/app-preview-card.png"),height:265})}),(0,o.Y)(_.Ye,{flex:"grow",children:(0,o.FD)(_.I1,{alignItems:"center",flex:"grow",gap:8,children:[(0,o.Y)(Y.$n,{href:(0,I.wHz)(p),children:c("Get the Substack app")}),(0,o.Y)(Y.$n,{priority:"tertiary",onClick:t,children:c("Skip")})]})})]}):(0,o.FD)(_.I1,{alignItems:"center",gap:24,children:[(0,o.Y)("div",{style:{minHeight:231},children:(0,o.Y)(s.gF,(0,i._)((0,r._)({},p),{suggestedEmail:n,size:180,padding:0}))}),(0,o.Y)(Y.$n,{priority:"secondary",onClick:t,children:c("Continue reading")})]})]})}},47789:function(e,t,n){"use strict";n.d(t,{I:()=>i});var r=n(41935);function i(e){let{post:t,user:n,onChange:i,reaction_token:a,children:o}=e,{toggle:l}=(0,r.Ph)({post:t,user:n,surface:"reader",onChange:i?e=>{let{post:t}=e;return i({post:t})}:void 0,postReactionToken:a});return o(async()=>{await l()})}},75890:function(e,t,n){"use strict";n.d(t,{C:()=>m});var r=n(69277),i=n(32641),a=n(10201),o=n(70408),l=n(97731);let s=e=>{var{stroke:t="black",height:n=19,width:s=19}=e,c=(0,i._)(e,["stroke","height","width"]);return(0,a.FD)(l.A,(0,o._)((0,r._)({},c),{name:"AdhocEmailIcon",svgParams:{height:n,width:s,viewBox:"0 0 19 19"},children:[(0,a.Y)("path",{d:"M3 4C3 3.72386 3.22386 3.5 3.5 3.5H13C13.2761 3.5 13.5 3.72386 13.5 4V12.5C13.5 12.7761 13.2761 13 13 13H3.5C3.22386 13 3 12.7761 3 12.5V4Z",stroke:t}),(0,a.Y)("path",{d:"M3.5 4L8.25 9.02499L13 4",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,a.Y)("path",{d:"M5 13.5V15C5 15.2761 5.22386 15.5 5.5 15.5H15.3151C15.5913 15.5 15.8151 15.2761 15.8151 15V7C15.8151 6.72386 15.5913 6.5 15.3151 6.5H14",stroke:t})]}))};var c=n(14394),d=n(16461);let u=e=>(0,a.FD)(l.A,(0,o._)((0,r._)({},e),{name:"PodcastIcon",svgParams:{height:19,width:19},children:[(0,a.Y)("path",{d:"M10.1505 3H8.61291C6.06527 3 4 4.9401 4 7.33333V10","stroke-linejoin":"round"}),(0,a.Y)("path",{d:"M8.89246 3H10.4301C12.9778 3 15.043 4.9401 15.043 7.33333V10.5","stroke-linejoin":"round"}),(0,a.Y)("path",{d:"M3 12.1429V13.3571C3 14.5406 3.81359 15.5 4.81721 15.5H6.42473V10H4.81721C3.81359 10 3 10.9594 3 12.1429Z","stroke-linejoin":"round"}),(0,a.Y)("path",{d:"M16 12.1429V13.3571C16 14.5406 15.1864 15.5 14.1828 15.5H12.5753V10H14.1828C15.1864 10 16 10.9594 16 12.1429Z","stroke-linejoin":"round"})]}));var p=n(15052);let h=e=>{var{stroke:t="black",height:n=19,width:s=19}=e,c=(0,i._)(e,["stroke","height","width"]);return(0,a.Y)(l.A,(0,o._)((0,r._)({},c),{name:"VideoIcon",svgParams:{height:n,width:s,viewBox:"2 2 15 15"},children:(0,a.FD)("g",{fill:"transparent",children:[(0,a.Y)("path",{d:"M15.5 15H3.5V4H15.5V15Z",stroke:t,"stroke-linejoin":"round"}),(0,a.Y)("path",{d:"M11.5 11L8.5 9V12.5L11.5 11Z",stroke:t,"stroke-linejoin":"round"}),(0,a.Y)("path",{d:"M4 7H15",stroke:t}),(0,a.Y)("path",{d:"M4.5 4L7.5 7",stroke:t}),(0,a.Y)("path",{d:"M8 4L11 7",stroke:t}),(0,a.Y)("path",{d:"M11.5 4L14.5 7",stroke:t})]})}))},m=e=>{var{postType:t}=e,n=(0,i._)(e,["postType"]);switch(t){case"newsletter":return(0,a.Y)(d.A,(0,r._)({},n));case"adhoc_email":return(0,a.Y)(s,(0,r._)({},n));case"thread":return(0,a.Y)(p.A,(0,r._)({},n));case"podcast":return(0,a.Y)(u,(0,r._)({},n));case"video":return(0,a.Y)(h,(0,r._)({},n));case"restack":return(0,a.Y)(c.A,(0,r._)({},n));default:return console.warn("Unrecognized post type: [".concat(t,"]")),null}}},3338:function(e,t,n){"use strict";n.d(t,{V:()=>k});var r=n(10201),i=n(81143),a=n(17402),o=n(15734),l=n.n(o),s=n(47963),c=n(84605),d=n(43294),u=n(86500),p=n(94729),h=n(24078),m=n(35369),g=n(16074),f=n(76977),b=n(16993),Y=n(63136),_=n(65842),v=n(11510),w=n(39318),y=n(57324);let k=e=>{let{post:t,pub:n,freeSignupEmail:o,user:d,magicToken:h,onClose:Y,onSubscriptionComplete:_,onUnlockFailed:k,hasCompletedUnlock:I=!1}=e,[E,F]=(0,a.useState)(!0),[D,A]=(0,a.useState)(!1),[x,N]=(0,a.useState)(!d&&!I),[T,P]=(0,a.useState)(I),[O,B]=(0,a.useState)((null==d?void 0:d.email)||o||""),[L,R]=(0,a.useState)(!1),[M,H]=(0,a.useState)(!1),[V,U]=(0,a.useState)(!1),{iString:j}=(0,c.GO)(),W=(0,v.Iu)();(0,a.useEffect)(()=>{(0,u.u4)(u.qY.UNSUBSCRIBED_POST_UNLOCK_MODAL_VIEWED,{post_id:t.id})},[t.id]);let z=()=>{(0,u.u4)(u.qY.UNSUBSCRIBED_POST_UNLOCK_MODAL_DISMISSED,{post_id:t.id,has_reached_max_tokens:L}),F(!1),null==Y||Y()},J=(0,w.XV8)(n.subdomain,t.slug,{params:{utm_campaign:y._9.postUnlockUnsubscribedModal,utm_source:y.VU.post},redirect:"app-store"}),K=async e=>{if((0,u.u4)(u.qY.PAYWALL_UNLOCK_CTA_CLICKED,{post_id:t.id,has_email:!!e||!!(null==d?void 0:d.email),source:"unsubscribed_post_unlock_modal"}),!d&&!e)return void N(!0);let n=e||(null==d?void 0:d.email)||"";if(!n||!n.trim())return void N(!0);B(n),A(!0);try{await l().post("/api/v1/free").send({email:n,source:"post_unlock_upsell"});try{await l().post("/api/v1/post_unlock_token").send({post_id:t.id,token:h,email:n})}catch(n){var r,i,a,o;let e=(null==n||null==(i=n.response)||null==(r=i.body)?void 0:r.error)||(null==n||null==(o=n.response)||null==(a=o.body)?void 0:a.message)||(null==n?void 0:n.message)||"";"Max tokens redeemed"===e?(null==k||k(),R(!0)):H(!0),(0,u.u4)(u.qY.UNSUBSCRIBED_POST_UNLOCK_MODAL_ERROR,{post_id:t.id,error:e,max_redeem_error:"Max tokens redeemed"===e}),console.warn("Failed to create unlock token, user may need to complete setup in app:",n)}null==_||_(),P(!0)}catch(e){console.error("Failed to subscribe or unlock:",e)}finally{A(!1)}},q=async()=>{A(!0);try{await (0,p.x6)("/api/v1/send_app_download_link",{method:"POST",json:{email:O}}),U(!0)}catch(e){console.error("Failed to send app download link:",e)}finally{A(!1)}};return(0,r.Y)(b.aF,{isOpen:E,onClose:z,children:(0,r.Y)(b.cw,{children:T?(0,r.FD)(f.I1,{gap:16,children:[(0,r.Y)(S,{post:t,pub:n,secondaryText:j(W?"Open the Substack app to read this post":"Scan the QR code or receive a link to read this post in the Substack app"),errorText:L?j("You've already redeemed an unlock token"):M?j("Something went wrong. Please try again later."):void 0}),!W&&(0,r.FD)(f.I1,{gap:16,alignItems:"center",children:[(0,r.Y)(s.hj,{size:142,utm_campaign:y._9.postUnlockUnsubscribedModal,utm_source:y.VU.post,openUrl:J}),(0,r.Y)(g.v,{}),(0,r.Y)(m.$n,{priority:"primary",onClick:q,disabled:V||D,children:j(V?"Email sent":"Email me a link")})]}),W&&(0,r.Y)(f.I1,{alignItems:"center",paddingBottom:16,children:(0,r.Y)(m.$n,{href:J,style:{width:"80%"},children:j("Install the app")})})]}):x?(0,r.FD)(f.I1,{gap:8,children:[(0,r.Y)(S,{post:t,pub:n}),(0,r.Y)(C,{freeSignupEmail:o,onSubmit:K,isLoading:D})]}):(0,r.FD)(f.I1,{gap:8,children:[(0,r.Y)(S,{post:t,pub:n}),(0,r.Y)(m.$n,{leading:(0,r.Y)(i.A,{}),priority:"primary",paddingY:12,disabled:D,onClick:()=>K(),children:j("Subscribe and unlock")}),(0,r.Y)(m.$n,{priority:"secondary",onClick:z,children:j("Maybe later")})]})})})},S=e=>{var t;let{post:n,pub:i,secondaryText:a,errorText:o}=e,{iString:l}=(0,c.GO)(),s=null==(t=n.publishedBylines)?void 0:t[0],d=s?{id:s.id,name:s.name,photo_url:s.photo_url}:{id:i.author_id,name:i.author_name,photo_url:i.author_photo_url};return(0,r.FD)(f.I1,{gap:16,alignItems:"center",children:[(0,r.Y)(h.tp,{size:96,user:d}),(0,r.FD)(f.I1,{gap:8,alignItems:"center",children:[(0,r.Y)(Y.EY.H3,{align:"center",children:l("Unlock this post")}),o&&(0,r.Y)(Y.EY.B3,{color:"error",align:"center",children:o}),(0,r.Y)(Y.EY.B3,{color:"secondary",align:"center",children:a||l("Get a free subscription and unlock this paid post in the Substack app")})]})]})},C=e=>{let{freeSignupEmail:t,onSubmit:n,isLoading:i}=e,[o,l]=(0,a.useState)(null!=t?t:""),{iString:s}=(0,c.GO)(),u=(0,d.X)();return(0,r.FD)(f.I1,{gap:16,children:[(0,r.Y)(_.ks,{type:"email",name:"email",placeholder:s("Email Address"),ref:u,value:o,onInput:e=>l(e.target.value)}),(0,r.Y)(m.$n,{priority:"primary",onClick:()=>n(o),disabled:i,children:s(i?"Subscribing...":"Subscribe and unlock")}),(0,r.Y)(Y.EY.B4,{color:"secondary",weight:"light",align:"center",children:s("Maximum one post unlock per account")})]})}},76185:function(e,t,n){"use strict";n.d(t,{R:()=>F});var r=n(79785),i=n(10201),a=n(17402),o=n(15734),l=n.n(o),s=n(69277),c=n(48697),d=n(84605),u=n(86500),p=n(69618),h=n(68349),m=n(89490),g=n(35369),f=n(76977),b=n(81203),Y=n(63136),_=n(11587),v=n(36372),w=n(82776);function y(){let e=(0,r._)(["Why do you recommend this Substack?"]);return y=function(){return e},e}function k(){let e=(0,r._)(["Optional"]);return k=function(){return e},e}let S=e=>{var t;let{pubToRecommendBack:n,recommendingPub:r,recommendedPubs:o,setStep:u,close:S,setLoading:I,source:E}=e,{iString:F,iTemplate:D}=(0,d.GO)(),[A,x]=(0,a.useState)(null),{popToast:N}=(0,v.d)();(0,a.useEffect)(()=>{let e=null==o?void 0:o.find(e=>{let{id:t}=e;return t===n.id});if(null===A&&e){var t;x(null!=(t=e.blurb)?t:null)}},[A,o,n.id]);let T=async()=>{r?(await l().put("/api/v1/recommendations").send((0,s._)({recommended_publication_id:n.id,recommending_publication_id:r.id,source:E||"recommendation_notification_email",suggested:!1},A&&A.trim()?{description:A.trim()}:{})),(null==o?void 0:o.some(e=>{let{id:t}=e;return t!==n.id}))?null==S||S():null==u||u("choose"),I?(I(!0),null==S||S()):((0,h.V2)("/publish/recommendations"),N(()=>(0,i.Y)(v.y,{text:F("Recommendation added")})))):console.warn("No recommending pub")},P=(0,w.getByLine)(n);return(0,i.FD)(i.FK,{children:[(0,i.FD)(f.Ye,{justifyContent:"space-between",alignItems:"center",flex:"grow",paddingX:20,paddingTop:20,paddingBottom:16,borderBottom:"detail",children:[(0,i.Y)(Y.EY.H3,{weight:"heavy",flex:"grow",children:F("New recommendation")}),(0,i.Y)(g.K0,{priority:"tertiary",role:"button",size:"sm",title:"Close",onClick:()=>{S&&S()},"aria-label":"close",children:(0,i.Y)(c.A,{size:20})})]}),(0,i.Y)(f.I1,{padding:20,children:(0,i.FD)(f.I1,{gap:24,children:[(0,i.Y)(f.I1,{padding:12,gap:12,bg:"secondary",radius:"sm",shadow:"xs",children:(0,i.FD)(f.Ye,{gap:12,flex:"grow",alignItems:"center",children:[(0,i.Y)(m.az,{radius:"xs",border:"detail",children:(0,i.Y)(b.Nq,{pub:n,size:56,radius:"xs"})}),(0,i.FD)(f.I1,{flex:"grow",minWidth:0,children:[(0,i.Y)(Y.EY.B3,{weight:"semibold",ellipsis:!0,children:n.name}),P&&(0,i.Y)(Y.EY.B4,{color:"secondary",children:"By ".concat(P)})]})]})}),(0,i.FD)(f.I1,{gap:8,children:[(0,i.FD)(f.Ye,{flex:"grow",justifyContent:"space-between",children:[(0,i.Y)(Y.EY.B4,{weight:"semibold",children:D(y())}),(0,i.Y)(Y.EY.B4,{color:"secondary",children:D(k())})]}),(0,i.Y)(_.T,(0,s._)({placeholder:F("Tell your subscribers why they might enjoy ".concat(n.name,"...")),onChange:e=>x(e.currentTarget.value),value:null!=A?A:"",rows:6,maxlength:500},p.b))]}),(0,i.FD)(f.I1,{gap:12,children:[(0,i.Y)(g.$n,{disabled:(null!=(t=null==A?void 0:A.length)?t:0)>500,onClick:T,children:F("Recommend ".concat(n.name))}),(0,i.Y)(C,{})]})]})})]})},C=()=>{let{iString:e}=(0,d.GO)();return(0,i.FD)(Y.EY.B4,{color:"secondary",align:"center",children:[e("Recommendations will be shown to people after they subscribe to your Substack.")," ",(0,i.Y)(Y.Yq,{href:"https://support.substack.com/hc/en-us/articles/5036794583828-How-can-I-recommend-other-publications-on-Substack-",onClick:()=>{(0,u.u4)(u.qY.MANAGE_RECOMMENDATIONS_LEARN_MORE_CLICKED,{source:"modal-recommend-pub"})},decoration:"underline",children:e("Learn more")})]})};var I=n(16993);function E(){let e=(0,r._)(["Recommend "," to your readers"]);return E=function(){return e},e}let F=e=>{let{pub:t}=e,[n,r]=(0,a.useState)(!0),[o,s]=(0,a.useState)(null),[c,p]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),{iString:_,iTemplate:v}=(0,d.GO)();return((0,a.useEffect)(()=>{let e=async()=>{try{let e=(await l().get("/api/v1/publication_user/default")).body;if(s(e),!e||e.id===t.id){p(!0),r(!1);return}let n=await l().get("/api/v1/recommendations/from/".concat(e.id,"/to/").concat(t.id));p(!!n.body),r(!1)}catch(e){console.error("Failed to load recommend cta: ",e)}};!o&&n&&e()},[t,n,o]),n||c||o&&o.invite_only)?null:(0,i.FD)(i.FK,{children:[(0,i.FD)(f.I1,{alignItems:"center",padding:32,gap:20,borderTop:"detail",style:{marginTop:24},"data-testid":"recommendation-footer",children:[(0,i.Y)(b.wg,{pub:t,size:48,openInNewTab:!0}),(0,i.FD)(f.I1,{gap:8,children:[(0,i.Y)(Y.EY.H4,{align:"center",children:v(E(),t.name)}),t.hero_text&&(0,i.Y)(Y.EY.B3,{color:"secondary",align:"center",clamp:3,children:t.hero_text})]}),(0,i.Y)(g.$n,{onClick:()=>{(0,u.u4)(u.qY.END_OF_POST_RECOMMEND_CTA_CLICKED,{recommended_pub_id:t.id,recommending_pub_id:null==o?void 0:o.id}),m(!0)},children:_("Recommend")})]}),(0,i.Y)(D,{isOpen:h,onClose:()=>m(!1),pubToRecommend:t,recommendingPub:o,setStep:()=>{m(!1)},setLoading:r})]})},D=e=>{let{isOpen:t,onClose:n,pubToRecommend:r,recommendingPub:a,setLoading:o,setStep:l}=e,s=(0,v.d)(),{iString:c}=(0,d.GO)();return(0,i.Y)(I.aF,{isOpen:t,onClose:n,children:(0,i.Y)(S,{pubToRecommendBack:r,recommendingPub:a,setStep:l,close:n,setLoading:e=>{o(e),s.popToast(()=>(0,i.Y)(v.y,{text:c("Recommendation added")}))},source:"end-of-post-recommend-cta"})})}},58925:function(e,t,n){"use strict";n.d(t,{ut:()=>el,YA:()=>ea});var r=n(20347),i=n(3849),a=n(69277),o=n(10201),l=n(32485),s=n.n(l),c=n(15977),d=n(72170),u=n(17402),p=n(23623),h=n(35426),m=n(89490);let g=(0,m.I4)({className:"backdrop-TSZpWr",height:40,paddingTop:64,paddingBottom:16,paddingLeft:16,paddingRight:16,pointerEvents:"none"}),f="transition-kQjRL0",b="show-SOOiPA",Y="hide-xglgl1";function _(e){let{children:t}=e;return(0,o.Y)(h.e.Child,{as:u.Fragment,enter:f,enterFrom:Y,enterTo:b,leave:f,leaveFrom:b,leaveTo:Y,children:t})}let v="show-RjVr49",w="hide-TYuTf7";function y(e){let{children:t}=e;return(0,o.Y)(h.e.Child,{as:u.Fragment,enter:"enter-BY7bVS",enterFrom:w,enterTo:v,leave:"leave-AN8v0R",leaveFrom:v,leaveTo:w,children:t})}var k=n(84605),S=n(35369),C=n(10996);function I(e){let{handleQuoteRestack:t,disableRestackButton:n,handleShare:r,isVisible:i,showRestackButton:a}=e;return(0,o.Y)(h.e,{as:u.Fragment,appear:!0,show:i,children:(0,o.Y)(D,{children:(0,o.FD)(C.e$,{children:[(0,o.Y)(_,{children:(0,o.Y)(g,{})}),(0,o.Y)(y,{children:(0,o.FD)(A,{children:[a&&(0,o.Y)(E,{onClick:t,disabled:n}),(0,o.Y)(F,{onClick:r,showRestackButton:a})]})})]})})})}function E(e){let{onClick:t,disabled:n}=e,{iString:r}=(0,k.GO)();return(0,o.Y)(S.Bj,{onClick:t,leading:(0,o.Y)(c.A,{size:20}),priority:"primary",flex:"grow",disabled:n,children:r("Restack")})}function F(e){let{onClick:t,showRestackButton:n}=e,{iString:r}=(0,k.GO)();return(0,o.Y)(S.Bj,{onClick:t,leading:(0,o.Y)(d.A,{size:20}),priority:"primary",flex:"grow",children:r(n?"Share":"Share quote")})}let D=(0,m.I4)({className:"root-VHsWlA",display:"flex",position:"fixed",padding:16}),A=(0,m.I4)({display:"flex",flex:"grow",justifyContent:"space-between",gap:12,zIndex:1});var x=n(48309),N=n(82853),T=n(68924),P=n(4067),O=n(79146),B=n(9979),L=n(93355),R=n(62870),M=n(98949);let H=e=>{let{pub:t,post:n,style:r,selectionId:i,size:a,hoverOverlay:l=!0}=e,{img:s,imgDownload:c,shareData:d,useNativeShare:p}=(0,L.Y)((0,R.wj)({pub:t,post:n,selectionId:i,style:r})),h=(0,u.useCallback)(async()=>{await (0,R.f3)({post_id:n.id,selection_id:i,aspect_ratio:r.aspectRatio,type:"post_selection",shareData:p?d:void 0,eventName:"SHARE_SELECTION_IMAGE_DOWNLOADED",additionalTrackingData:{interaction:"click"}})},[n.id,i,r.aspectRatio,p,d]);return(0,o.Y)(R.Cs,{onClick:h,href:p?void 0:c,children:(0,o.FD)(R.OK,{size:a,children:[!(0,M.Fr)()&&s&&l&&(0,o.Y)(R.lh,{onClick:h}),(0,o.Y)(R.BB,{img:s})]})})};var V=n(46271),U=n(86500),j=n(94729),W=n(12501),z=n(68349),J=n(76977),K=n(16993),q=n(36372),G=n(8295),Z=n(11510),$=n(39318),X=n(49807),Q=n(57324);let ee=e=>{let{assetStyle:t,aspectRatio:n,loadingSelection:r,post:i,pub:a,themeVariables:l,setAspectRatio:s,assetTheme:c,setAssetTheme:d,selectionId:u}=e,p=[],h=(null==i?void 0:i.cover_image)||(null==a?void 0:a.cover_photo_url);return h&&p.push("image"),l.background_pop&&p.push("accent"),p.push("primary"),(0,o.Y)(K.cw,{children:(0,o.FD)(J.I1,{gap:20,children:[(0,o.Y)(J.pT,{className:"imageContainer-OjAkhl",alignItems:"center",justifyContent:"center",children:i&&u&&!r&&(0,o.Y)(H,{pub:a,post:i,style:t,selectionId:u,size:400,hoverOverlay:!1})}),(0,o.FD)(G._d,{children:[(0,o.Y)(G.Jj,{assetThemes:p,assetTheme:c,setAssetTheme:d,theme:l,pubCoverImageUrl:h}),(0,o.Y)(G.aD,{aspectRatio:n,setAspectRatio:s,includeInstagram:!0})]})]})})},et=e=>{let{pub:t,post:n,isOpen:r,onClose:i,selection:a,selectionId:l,setSelectionId:s,themeVariables:c}=e,{iString:d}=(0,k.GO)(),[p,h]=(0,u.useState)(!1),[m,g]=(0,u.useState)("instagram"),f=(null==n?void 0:n.cover_image)||(null==t?void 0:t.cover_photo_url),[b,Y]=(0,u.useState)(f?"image":"accent"),_=(0,V.Jd)(),v=(0,q.d)(),w=(0,Z.Iu)(),y=(0,M.Fr)({checkFirst4:!0}),{result:C}=(0,W.st)({pathname:"/api/v1/publication/".concat(t.id,"/theme"),auto:!!a&&n&&r&&!c,cacheTtl:1/0,initialResult:c,deps:[a,n,r,c]}),I=r&&(!!l||p)&&!!C;(0,u.useEffect)(()=>{I&&(null==n?void 0:n.id)&&(0,U.u4)(U.qY.SHARE_SELECTION_MODAL_OPENED,{post_id:n.id})},[I,n]),(0,u.useEffect)(()=>{a&&n&&r&&(async()=>{h(!0);try{let e=await (0,j.x6)("/api/v1/post_selection",{method:"PUT",json:{postId:n.id,publication_id:t.id,startParagraph:a.startParagraph,endParagraph:a.endParagraph,startOffset:a.startOffset,endOffset:a.endOffset}});if(h(!1),e instanceof Error)throw e;s(e.selection.id.toString())}catch(e){alert((0,j.Qd)(e)),h(!1),i()}})()},[t,n,a,r,s,i]);let E=(e,r)=>{let i=R(),a=(0,B.x5)(null,{pub:t,post:n,selectionId:l,user:_||void 0,medium:"web",utm_campaign:Q._9.postShareSelection,params:{aspectRatio:m,bgColor:i.bgColor,textColor:i.textColor,bgImage:i.bgImage}});(0,B.Q_)(e,r,{shareUrl:a,post:n,pub:t,selectionId:l,utm_campaign:Q._9.postShareSelection})},F=async()=>{E("copy",e=>((0,z.lW)(e),v.popToast(()=>(0,o.Y)(q.y,{text:d("Copied link to clipboard")})),!1))},D=async()=>{E("facebook",e=>(0,X.yRP)("https://www.facebook.com/sharer/sharer.php",{u:e}))},A=async()=>{n&&E("twitter",e=>(0,$.gKg)({url:e,text:n.title}))},L=async()=>{E("linkedin",e=>(0,X.yRP)("https://www.linkedin.com/sharing/share-offsite/",{url:e}))},R=()=>{if(!C)return{aspectRatio:m};switch(b){case"image":return{aspectRatio:m,textColor:"#ffffff",bgImage:!0};case"accent":return{aspectRatio:m,bgColor:C.background_pop,textColor:C.print_on_pop};default:return{aspectRatio:m,bgColor:C.web_bg_color||C.cover_bg_color,textColor:C&&"string"==typeof C.print_on_web_bg_color&&C.print_on_web_bg_color.startsWith("hsl")?C.cover_print_primary||"#1a1a1a":(null==C?void 0:C.print_on_web_bg_color)||"#1a1a1a"}}},H=async()=>{let e=R(),r="Share Selection - ".concat(e.aspectRatio);(0,U.u4)(U.qY.SHARE_SELECTION_IMAGE_DOWNLOADED,{post_id:null==n?void 0:n.id,selection_id:l,type:r,aspect_ratio:m,interaction:"click"});let i=document.createElement("a");i.href=n&&l?(0,$.SAZ)(t,n,l,e,r):"",i.download="Share Selection - ".concat(m),i.target="_blank",i.rel="noopener noreferrer",i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)};return(0,o.FD)(K.aF,{isOpen:I,onClose:i,width:640,fullscreenMobile:!0,children:[(0,o.Y)(K.rQ,{title:d("Share quote"),showClose:!0,onClose:i,showDivider:!0}),(0,o.Y)(ee,{assetStyle:R(),aspectRatio:m,loadingSelection:p,post:n,pub:t,themeVariables:C,setAspectRatio:g,assetTheme:b,setAssetTheme:Y,selectionId:l,setSelectionId:s}),(0,o.Y)(K.jl,{direction:"row",showDivider:!0,primaryButton:y?void 0:(0,o.Y)(S.$n,{priority:"primary",flex:w?void 0:"grow",disabled:!l,onClick:H,leading:(0,o.Y)(x.A,{size:20}),children:d("Download")}),secondaryButton:(0,o.FD)(J.Ye,{gap:8,children:[(0,o.Y)(S.K0,{priority:"secondary-outline",onClick:F,disabled:!l,children:(0,o.Y)(N.A,{height:20,width:20})}),(0,o.Y)(S.K0,{priority:"secondary-outline",onClick:A,disabled:!l,children:(0,o.Y)(O.A,{height:20,width:20})}),(0,o.Y)(S.K0,{priority:"secondary-outline",onClick:D,disabled:!l,children:(0,o.Y)(T.A,{height:20,width:20})}),(0,o.Y)(S.K0,{priority:"secondary-outline",onClick:L,disabled:!l,children:(0,o.Y)(P.A,{height:20,width:20})})]})})]})};var en=n(63136),er=n(2481),ei=n(7642);function ea(e){var t,n,r;let{post:i,pub:a,selection:l,onClose:s,themeVariables:c,userInteractionDisabled:d}=e,[p,h]=(0,u.useState)(!1),[m,g]=(0,u.useState)(),f=(0,u.useRef)(null),b=(null==l||null==(r=l.text)||null==(n=r.split)||null==(t=n.call(r," "))?void 0:t.length)||0,Y=!!(l&&b>=3&&!i.is_draft&&!(null==a?void 0:a.invite_only));(0,u.useEffect)(()=>{l&&(f.current=l)},[l]);let _=l||f.current;return(0,o.FD)(o.FK,{children:[_&&(0,o.Y)(eo,{selection:_,onClose:s,userInteractionDisabled:d,onShowSelectionModal:h,post:i,pub:a,isOpen:Y}),(0,o.Y)(et,{selection:l,pub:a,post:i,isOpen:p,onClose:()=>h(!1),selectionId:m,setSelectionId:g,themeVariables:c})]})}function eo(e){let{selection:t,onClose:n,userInteractionDisabled:r,onShowSelectionModal:i,post:a,pub:l,isOpen:s}=e,{iString:h}=(0,k.GO)(),m=(0,Z.Iu)(),g=(0,V.Jd)(),f=(0,er.NP)(),b=(0,q.d)(),Y=!a.is_draft&&!!g,[_,v]=(0,u.useState)(!1),[w,y]=(0,u.useState)(!1);(0,u.useEffect)(()=>{s?y(!0):y(!1)},[s]),(0,u.useEffect)(()=>{if(!s)return;let e=()=>{y(!1),n()};return window.addEventListener("scroll",e,{passive:!0,capture:!0,once:!0}),()=>{window.removeEventListener("scroll",e,{capture:!0})}},[n,s]),(0,u.useEffect)(()=>{let e=()=>{t.y-57*!!m<104?C({top:t.rect.bottom+12}):C({top:t.y-92-12})};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[t,m]);let[S,C]=(0,u.useState)({top:-1}),E=()=>{i(!0)},F=async()=>{v(!0);try{let e=await (0,j.x6)("/api/v1/post_selection",{method:"PUT",json:{postId:a.id,publication_id:l.id,startParagraph:t.startParagraph,endParagraph:t.endParagraph,startOffset:t.startOffset,endOffset:t.endOffset}});if(v(!1),e instanceof Error)throw e;return e.selection.id}catch(e){alert((0,j.Qd)(e)),v(!1)}},D=async()=>{let e=await F();if((0,U.u4)(U.qY.RESTACK_SELECTION_CLICKED,{post_id:a.id}),!g){let t=(0,$.oRR)(document.location.href,{action:"restack-comment",selection:e}),n=(0,$.a7q)({redirect:t});(0,z.V2)(n,{local_navigation:!1,event});return}let t=(0,$.wu9)(l,a,{urlParams:{r:g?g.id.toString(36):null,selection:e,utm_campaign:Q._9.postShareSelection,utm_medium:Q.Jn.web}});await f.open({restackUrl:t}) instanceof Error?b.popToast(()=>(0,o.Y)(q.y,{text:"Failed to post"})):b.popToast(()=>(0,o.Y)(q.y,{text:"Note sent",cta:"View now",href:(0,X.oT5)()}))},A=!Y&&!_&&!!g;return -1===S.top?null:m?(0,o.Y)(I,{handleQuoteRestack:D,showRestackButton:!l.hide_post_restacks&&Y,disableRestackButton:A,handleShare:E,isVisible:w}):(0,o.Y)(p.a,{children:(0,o.FD)(J.I1,{style:{top:S.top,bottom:S.bottom,left:t.rect.x+t.rect.width/2},justifyContent:"center",outline:"detail",shadow:"md",radius:"md",className:"".concat(ei.A.popover," ").concat(w?ei.A.visible:""," ").concat(r?ei.A.disabled:""),padding:4,gap:4,children:[!l.hide_post_restacks&&Y&&(0,o.FD)(el,{onClick:D,disabled:A,children:[(0,o.Y)(c.A,{stroke:"var(--color-utility-white)",size:20}),(0,o.Y)(en.EY.B4,{color:"vibrance-primary",weight:"medium",children:h("Restack")})]}),(0,o.FD)(el,{onClick:E,children:[(0,o.Y)(d.A,{stroke:"var(--color-utility-white)",size:20}),(0,o.Y)(en.EY.B4,{color:"vibrance-primary",weight:"medium",children:h("Share")})]})]})})}function el(e){var t=(0,r._)({},(0,i._)(e));return(0,o.Y)(S.Nm,(0,a._)({className:s()(ei.A.button,t.disabled&&ei.A.disabled),resetCss:!0},t))}},65207:function(e,t,n){"use strict";n.d(t,{F:()=>L});var r=n(69277),i=n(79785),a=n(10201),o=n(17402),l=n(15734),s=n.n(l),c=n(13950),d=n(32485),u=n.n(d),p=n(3680),h=n(63446),m=n(15894),g=n(84605),f=n(86500),b=n(68349),Y=n(24078),_=n(76977),v=n(39318);let w={subscribeDialog:"subscribeDialog-ApxQJS",dismissButton:"dismissButton-gWmS4u",pictureBox:"pictureBox-yO_tQ9",childPublicationIcon:"childPublicationIcon-u5S7bv",signInLink:"signInLink-v__pXF",background:"background-qPxN3C",error:"error-ekhTFi",closeIcon:"closeIcon-pSUQVJ",fp:"fp-sXrGxn",form:"form-mUblsD",subscribeButton:"subscribeButton-GT6UQz",signInLinkWrapper:"signInLinkWrapper-WFxaK4",hed:"hed-pyKjVu",dek:"dek-YOBGIH",emailInput:"emailInput-Znhurz"},y=e=>{let{position:t,offset:n,target:r,left:i,modal:o,pub:l,setDismissed:s,subscribe:c,email:d,setEmail:y,loading:k,errors:S,post:C,opacityOfBackground:I,onBackgroundClicked:E}=e,{iString:F}=(0,g.GO)();return(0,a.FD)(a.FK,{children:[(0,a.Y)(_.I1,{ref:o,alignItems:"center",className:u()(w.subscribeDialog,w.fp),style:{top:"absolute"===t?"".concat(n,"px"):"".concat(r,"px"),left:"".concat(i,"px"),position:t},children:(0,a.FD)(a.FK,{children:[(0,a.FD)(_.Ye,{alignItems:"end",justifyContent:"center",paddingBottom:8,children:[(0,a.Y)("div",{className:w.pictureBox,children:(0,a.Y)(Y.eu,{className:w.authorIcon,size:80,user:{photo_url:l.logo_url}})}),(0,a.Y)("div",{className:w.closeIcon,onClick:()=>s(!0),children:(0,a.Y)(p.A,{})})]}),(0,a.FD)(m.T,{align:"center",className:w.hed,preset:"h4-sans-condensed",children:[F("Discover more from"),(0,a.Y)("br",{}),I18N.p(l.name)]}),(0,a.Y)(m.T,{align:"center",className:w.dek,preset:"body",children:l.hero_text}),(0,a.FD)("form",{className:w.form,onSubmit:e=>{e.preventDefault(),c(d)},children:[(0,a.Y)("input",{className:w.emailInput,disabled:k,placeholder:F("Enter your email"),value:d,onChange:e=>{e.stopPropagation(),e.preventDefault(),y(e.currentTarget.value)}}),(0,a.Y)("div",{id:"error-container",children:S&&S.map(e=>(0,a.Y)("div",{className:w.error,children:e}))}),(0,a.Y)(h.v,{className:w.subscribeButton,disabled:k,type:"submit",children:F("Subscribe")})]}),(0,a.Y)(h.v,{className:w.dismissButton,trailingIcon:"chevron-right",variant:"tertiary",onClick:()=>s(!0),children:F("Continue reading")}),(0,a.FD)(m.T,{align:"center",className:w.signInLinkWrapper,preset:"caption",children:[(0,a.Y)("div",{children:F("Already have an account?")}),(0,a.FD)("div",{children:[(0,a.Y)("a",{className:w.signInLink,style:{cursor:"pointer"},onClick:()=>{(0,f.u4)(f.qY.SUBSCRIBE_PROMPT_SIGN_IN_CLICKED,{post_id:C.id}),(0,b.V2)((0,v.a7q)({for_pub:l.subdomain,redirect:(0,v.wu9)(l,C)}))},children:F("Sign in")})," "]})]})]})}),I>0&&(0,a.Y)("div",{className:w.background,style:{opacity:"".concat(I,"%")},onClick:E})]})};var k=n(17186),S=n(89490),C=n(35369),I=n(20500),E=n(84843),F=n(63136),D=n(65842),A=n(62088),x=n(11510),N=n(61554),T=n(16291),P=n(4016),O=n(57324);function B(){let e=(0,i._)(["Discover more from ",""]);return B=function(){return e},e}let L=e=>{var t;let{pub:n,post:i,isTest:l}=e,[d,u]=(0,o.useState)(!1),[p,h]=(0,o.useState)(!1),[m,L]=(0,o.useState)(!1),[R,M]=(0,o.useState)(""),[H,V]=(0,o.useState)([]),[U,j]=(0,o.useState)(200),[W,z]=(0,o.useState)(0),J=(0,o.useRef)(null),K=(0,x.Iu)(),q="pub-".concat(n.id,"-subscribe-prompt-next-shown-at"),G="pub-".concat(n.id,"-takeover-next-shown-at"),Z="undefined"!=typeof window&&(null==(t=window)?void 0:t.innerHeight)?window.innerHeight:700,$=document.getElementsByClassName("available-content"),X=$.length>0&&$[0]?$[0].scrollHeight:0,Q=600;Q=Math.max(Math.min(600,X-Z),600),(()=>{var e;let{height:t,width:n}=(null==(e=J.current)?void 0:e.getBoundingClientRect())||{height:0,width:0};j("undefined"!=typeof window&&window&&J.current?(window.innerHeight-t)/2:200),z("undefined"!=typeof window&&window&&J.current?(window.innerWidth-n)/2:0)})();let[ee,et]=(0,o.useState)(Z+Math.max(U,Q)),[en,er]=(0,o.useState)(Math.max(document.documentElement.scrollTop||document.body.scrollTop,0)),[ei,ea]=(0,o.useState)("absolute"),[eo,el]=(0,o.useState)("fixed"===ei||en>ee-Z),es="fixed"===ei?60:Math.min(Math.max((en-ee+Z)/(Z-U)*60,0),60),ec=(0,o.useCallback)(()=>{!K&&en>=ee-300&&h(!0)},[en,K,ee,U,h]);(0,o.useEffect)(()=>{var e;if(l)return;X<=1.5*Z&&u(!0);let t=null;if(null==(e=document)?void 0:e.referrer){try{t=new URL(document.referrer)}catch(e){}((null==t?void 0:t.hostname)==="news.ycombinator.com"||(null==t?void 0:t.hostname)==="hckrnews.com")&&u(!0),"undefined"!=typeof navigator&&/Twitter for/i.test(navigator.userAgent)&&u(!0)}(0,k.xm)(q)>Date.now()&&u(!0)},[]),(0,o.useEffect)(()=>{!eo||d||((0,f.u4)(f.qY.SUBSCRIBE_PROMPT_SHOWN,{post_id:i.id}),(0,k.X3)(q,(0,T.A)().add(1,"hour").valueOf()),(0,k.X3)(G,(0,T.A)().add(1,"hour").valueOf()))},[eo,d]),(0,o.useEffect)(()=>{p&&((0,f.u4)(f.qY.SUBSCRIBE_PROMPT_DISMISSED,{post_id:i.id}),(0,k.X3)(q,(0,T.A)().add(1,"day").valueOf()),(0,k.X3)(G,(0,T.A)().add(1,"hour").valueOf()))},[p]);let ed=(0,o.useCallback)(async e=>{if(!m){var t,a,o,l,c;L(!0),V([]),(0,f.u4)(f.qY.SUBSCRIBE_PROMPT_SUBMITTED,{post_id:i.id});try{let t=await s().post("/api/v1/free").send({email:e,source:"post-subscribe-prompt"});((0,f.$5)(t.body.requires_confirmation),"enabled"===n.payments_state||n.has_recommendations)?document.location.href=(0,v.eV6)(n,(0,r._)({utm_medium:O.Jn.web,utm_source:O.VU.postSubscribePrompt,utm_content:i&&i.id,simple:!0,just_signed_up:!0,next:(0,v.wu9)(n,i),requires_confirmation:t.body.requires_confirmation?"true":""},t.body.subscription_id&&{subscription_id:t.body.subscription_id},t.body.referral_token&&{referral_token:t.body.referral_token})):window.location.href=(0,v.wu9)(n,i,{urlParams:{subscribe_prompt:"free"}})}catch(e){(null==e||null==(a=e.response)||null==(t=a.body)?void 0:t.error)&&"string"==typeof e.response.body.error?V([e.response.body.error]):(null==e||null==(l=e.response)||null==(o=l.body)?void 0:o.errors)&&Array.isArray(e.response.body.errors)&&e.response.body.errors.length>0&&"string"==typeof(null==(c=e.response.body.errors[0])?void 0:c.msg)&&V(e.response.body.errors.map(e=>e.msg))}finally{L(!1)}}},[i,n,m,L]);(0,o.useEffect)(()=>{if(d||p)return;let e=()=>{let e=Math.max(document.documentElement.scrollTop||document.body.scrollTop,0),t=e-en;t>0&&"absolute"===ei&&e>ee-U&&ea("fixed"),t<0&&"fixed"===ei&&(ea("absolute"),et(en+U)),t<0&&"absolute"===ei&&e<ee-Z&&et(Z+Math.max(U,Q,en)),er(e),("fixed"===ei||t>0&&e>ee-Z)&&el(!0)};return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[ei,ee,et,en,er,el]),(0,o.useEffect)(()=>{if(d||p)return;let e=e=>{"Escape"===e.key&&h(!0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[d,p,h]);let{iString:eu,iTemplate:ep}=(0,g.GO)();return d||p?(0,a.Y)(a.FK,{}):(0,P.lu)({pub:n})?(0,a.Y)(y,{position:ei,offset:ee,target:U,left:W,modal:J,pub:n,setDismissed:h,subscribe:ed,email:R,setEmail:M,loading:m,errors:H,post:i,opacityOfBackground:es,onBackgroundClicked:ec}):(0,a.FD)(c.DH,{children:[(0,a.FD)(_.I1,{ref:J,bg:"primary",border:"detail",radius:"md",shadow:"xl",className:w.subscribeDialog,style:{top:"absolute"===ei?"".concat(ee,"px"):"".concat(U,"px"),left:"".concat(W,"px"),position:ei},role:"dialog","aria-label":eu("Subscribe modal"),children:[(0,a.FD)(_.I1,{gap:20,position:"relative",padding:20,children:[(0,a.Y)(E.J,{onClose:()=>h(!0)}),(0,a.Y)(S.az,{alignSelf:"center",children:(0,a.Y)(Y.eu,{size:64,photoUrl:n.author_photo_url})}),(0,a.FD)(_.I1,{justifyContent:"center",gap:4,alignItems:"center",textAlign:"center",children:[(0,a.Y)(F.EY.B2,{weight:"semibold",color:"primary",children:ep(B(),n.name)}),n.hero_text&&(0,a.Y)(F.EY.B3,{color:"secondary",clamp:3,children:n.hero_text}),n.rankingDetailFreeSubscriberCount&&(0,a.Y)(F.EY.B4,{paddingBottom:24,align:"center",color:"pub-secondary-text",children:n.rankingDetailFreeSubscriberCount})]}),(0,a.Y)("form",{onSubmit:e=>{e.preventDefault(),ed(R)},children:(0,a.FD)(_.I1,{gap:8,children:[(0,a.Y)(D.ks,{placeholder:eu("Enter your email..."),value:R,disabled:m,onChange:e=>{e.stopPropagation(),e.preventDefault(),M(e.currentTarget.value)}}),H.length>0&&(0,a.Y)(_.I1,{gap:4,children:H.map(e=>(0,a.Y)(I.yn,{align:"center",children:e}))}),(0,a.Y)(C.$n,{type:"submit",disabled:m,priority:"primary",children:eu("Subscribe")}),(0,a.Y)(_.VP,{paddingTop:8,opacity:80,children:(0,a.Y)(N.U,{includeCheckbox:!1,addSubscribePreamble:!0,color:"secondary",textAlign:"center",pub:n})})]})})]}),(0,a.Y)(A.dt,{children:(0,a.FD)(a.FK,{children:[eu("Already have an account? "),(0,a.Y)(F.Yq,{color:"accent",decoration:"hover-underline",onClick:()=>{(0,f.u4)(f.qY.SUBSCRIBE_PROMPT_SIGN_IN_CLICKED,{post_id:i.id}),(0,b.V2)((0,v.a7q)({for_pub:n.subdomain,redirect:(0,v.wu9)(n,i)}))},cursor:"pointer",children:eu("Sign in")})]})})]}),es>0&&(0,a.Y)("div",{className:w.background,onClick:ec,style:{opacity:"".concat(es,"%")}})]})}},64591:function(e,t,n){"use strict";n.d(t,{M:()=>_});var r=n(10201),i=n(32485),a=n.n(i),o=n(17402),l=n(84605),s=n(68349),c=n(35369),d=n(76977),u=n(37598),p=n(75303),h=n(63136),m=n(98949);let g={trigger:"trigger-V8d1vI",absolute:"absolute-PTY2O3",fixed:"fixed-n4RrZu",line:"line-DsYVXw",active:"active-Yh0Zwm","indent-1":"indent-1-vdeuvl",indent1:"indent-1-vdeuvl","indent-2":"indent-2-yiZ6hb",indent2:"indent-2-yiZ6hb","indent-3":"indent-3-levoo9",indent3:"indent-3-levoo9",label:"label-ZmMXKp",menu:"menu-IsOZj4",row:"row-gbMU1E"},f=e=>e?/^H[1-5]$/i.test(e.tagName)?e:f(e.parentElement):null,b=e=>{let{toc:t,minLevel:n,activeItem:i}=e;return(0,r.Y)(d.I1,{gap:12,paddingY:12,paddingX:8,alignItems:"end",children:t.map((e,t)=>{let o=e.level-n,l="indent-".concat(Math.min(o,3)),c=(0,s.uB)(e.text.toLowerCase(),!0);return(0,r.Y)("div",{className:a()(g.line,g[l],i===c&&g.active)},t)})})},Y=e=>{let{toc:t,minLevel:n,activeItem:i,onItemClick:o}=e,{iString:c}=(0,l.GO)();return(0,r.FD)(d.I1,{gap:4,padding:8,className:g.menu,children:[(0,r.Y)(h.EY.Meta,{padding:4,color:"primary",children:c("Contents")}),t.map((e,t)=>{let l=(0,s.uB)(e.text.toLowerCase(),!0),c=e.level-n,u="indent-".concat(Math.min(c,3));return(0,r.Y)(p.AE,{href:"#\xa7".concat(l),onClick:e=>{e.preventDefault(),o(l)},children:(0,r.Y)(d.Ye,{padding:4,className:a()(g.row),children:(0,r.Y)(h.EY.B3,{className:a()(g.label,g[u],i===l&&g.active),ellipsis:!0,children:e.text})})},t)})]})},_=e=>{let{toc:t,position:n="fixed"}=e,{iString:i}=(0,l.GO)(),d=Math.min(...t.map(e=>e.level)),[p,h]=(0,o.useState)(null),_=(e=>{let[t,n]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let t=[];return e.forEach(e=>{let r=(0,s.uB)(e.text.toLowerCase(),!0),i=document.getElementById("\xa7".concat(r));if(i){let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.intersectionRatio>=.8&&n(r)})},{threshold:.5,rootMargin:"0px 0px -90% 0px"});e.observe(i),t.push(e)}}),()=>t.forEach(e=>e.disconnect())},[e]),t})(t);return t.length<2||(0,m.Fr)()?null:(0,r.Y)(u.A,{trigger:(0,r.Y)(c.Nm,{className:a()(g.trigger,g[n]),"aria-label":i("Table of Contents"),position:n,showFocus:!0,children:(0,r.Y)(b,{toc:t,minLevel:d,activeItem:_})}),side:"right",children:(0,r.Y)(Y,{toc:t,minLevel:d,activeItem:_,onItemClick:e=>{let t=document.getElementById("\xa7".concat(e));if(t){let n=f(t);if(n){if(p){let e=document.getElementById("\xa7".concat(p)),t=e?f(e):null;null==t||t.classList.remove("highlight")}n.classList.add("highlight"),h(e),t.scrollIntoView({behavior:"smooth",block:"start"})}}}})})}},54014:function(e,t,n){"use strict";n.d(t,{j:()=>g});var r=n(69277),i=n(70408),a=n(10201),o=n(15734),l=n.n(o),s=n(52077),c=n(84605),d=n(35369),u=n(76977),p=n(76171),h=n(16993),m=n(65842);function g(e){let{isOpen:t,onClose:n,speakers:o,speakerMap:g,onChangeSpeakerMap:f,postId:b}=e,{iString:Y}=(0,c.GO)();return(0,a.FD)(h.aF,{isOpen:t,onClose:n,children:[(0,a.Y)(h.rQ,{title:Y("Assign Speakers"),description:Y("Assign names to each identified speaker to show them on the transcript. If there are too many speakers, you may have to duplicate a name."),showClose:!0,onClose:n,showDivider:!0}),(0,a.Y)(h.cw,{children:(0,a.Y)(u.I1,{gap:20,children:o.map(e=>(0,a.FD)(m.A0,{children:[(0,a.Y)(p.JU,{children:(0,s.Ui)(e)}),(0,a.Y)(m.ks,{onChange:t=>{var n;return f((0,i._)((0,r._)({},g),{[e]:null==(n=t.target)?void 0:n.value}))},value:(null==g?void 0:g[e])||"",placeholder:Y("Assign a name...")})]}))})}),(0,a.Y)(h.jl,{direction:"column",showDivider:!0,primaryButton:(0,a.Y)(d.$n,{priority:"primary",onClick:()=>{g&&Object.keys(g).length>0&&l().put("/api/v1/drafts/".concat(b,"/transcript")).send({speaker_map:g}).then(e=>{e.body.data&&n()})},children:Y("Save changes")})})]})}},76609:function(e,t,n){"use strict";n.d(t,{g:()=>_});var r=n(10201),i=n(38893),a=n(14506),o=n(48617),l=n(99070),s=n(91461),c=n(76977),d=n(63136);function u(e){let{text:t}=e;return(0,r.FD)(c.ov,{gap:8,flex:"grow",children:[(0,r.Y)(c.ov,{flex:"auto",children:(0,r.Y)(s.A,{size:16,color:"var(--color-fg-secondary)"})}),(0,r.Y)(d.EY.B4,{weight:"medium",color:"secondary",children:t})]})}var p=n(4169),h=n(69277),m=n(70408),g=n(97731);let f=e=>(0,r.FD)(g.A,(0,m._)((0,h._)({},e),{name:"VoiceoverIcon",svgParams:{height:24,width:24,viewBox:"0 0 24 24"},fill:"none",children:[(0,r.Y)("path",{d:"M11.8518 3.31518C12.2459 4.26329 13.551 7.10985 14.4542 8.3467C15.3764 9.60967 12.8285 9.95184 12 10.5",strokeWidth:"1.5",strokeLinecap:"round"}),(0,r.Y)("path",{d:"M12 10.5C12 10.5 12.4662 11.2332 12.7627 11.7326C13.0592 12.232 13 12.5 11.5 13C10.7772 13.2409 9.5 13.5 9.5 13.5C10.3447 13.9272 12.2664 14.1393 12.4041 14.3167C12.763 14.779 12.3241 15.4618 11.8617 15.8208C11.3994 16.1797 12.0724 18.7353 10.5 19.5C8.9276 20.2647 5.70772 19.432 3 18",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("path",{d:"M18.5 6.5L20.3544 4.8526",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("path",{d:"M18.5 15.5L20.3544 17.2545",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("path",{d:"M19.5 11.0326L22 11.0326",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}));var b=n(84605),Y=n(11510);function _(e){let{mediaUploadId:t,pub:n,post:s,duration:h,autoPlay:m,href:g,isPaywalled:f,trackingProps:_}=e,{iString:w}=(0,b.GO)(),y=(0,Y.Iu)();return(0,r.Y)(l.A,{src:"/api/v1/audio/upload/".concat(t,"/src"),pub:n,post:s,duration:h,autoPlay:m,href:g,isPaywalled:f,feature:"Add voiceover",metricsPost:s,trackingProps:null!=_?_:{},render:e=>{let{isPaywalled:t,currentTime:n,isPlaying:l,progress:s,progressBarRef:h,progressBarOnMouseDown:m,remainingTime:g,playbackRate:f,setPlaybackRate:b,togglePlayback:Y}=e;return(0,r.FD)(c.fI,{gap:8,flex:"grow",children:[!y&&(0,r.Y)(v,{}),(0,r.FD)(i.ju,{"aria-label":w("Voiceover player"),role:"region",children:[(0,r.Y)(a.e,{isPlaying:l,disabled:t,onClick:Y,size:"lg"}),t?(0,r.Y)(u,{text:w("Upgrade to paid to play voiceover")}):(0,r.FD)(i.lC,{children:[(0,r.Y)(d.EY.B4,{weight:"medium",color:"secondary",children:w("Article voiceover")}),(0,r.Y)(p.b,{currentTime:n,remainingTime:g,containerRef:h,progress:s,onMouseDown:m})]}),!t&&(0,r.Y)(o.x,{onSetPlaybackRate:b,playbackRate:f})]})]})}})}function v(){return(0,r.Y)(c.ov,{radius:"sm",height:72,width:72,flex:"auto",border:"detail",children:(0,r.Y)(f,{stroke:"var(--color-fg-secondary)"})})}},95337:function(e,t,n){"use strict";n.d(t,{K:()=>l});var r=n(10201);let i=e=>{let{children:t,href:n}=e;return(0,r.Y)(r.FK,{children:(0,r.Y)("table",{cellSpacing:"0",cellPadding:"8",border:"0",width:"100%",children:(0,r.Y)("tr",{children:(0,r.Y)("td",{align:"center",children:(0,r.Y)("a",{href:n,className:"tw-font-sans tw-text-[13px] tw-font-semibold tw-text-error",children:t})})})})})};var a=n(98111),o=n(57324);let l=e=>{let{post:t,compAlreadyExpired:n=!1}=e,l="".concat(a.T.CHECKOUT_URL,"&utm_medium=").concat(o.Jn.email,"&utm_campaign=").concat(o._9.continueYourSupport,"&utm_content=").concat(t.id);return(0,r.FD)("table",{width:"100%",cellSpacing:"0",cellPadding:"0",border:"0",className:"tw-bg-error-wash",bgcolor:"#FFFAFA",children:[(0,r.Y)("tr",{children:(0,r.Y)("td",{height:"16"})}),(0,r.Y)("tr",{children:(0,r.FD)("td",{align:"center",className:"tw-leading-5",children:[(0,r.Y)("span",{className:"tw-font-sans tw-text-base tw-font-bold tw-text-error",children:"Continue your support"}),(0,r.Y)("br",{}),n?(0,r.FD)("span",{className:"tw-font-sans tw-text-ssm tw-text-error",children:["Your free trial has ended!",(0,r.Y)("br",{}),"Continue your support to access paid-only content."]}):(0,r.FD)("span",{className:"tw-font-sans tw-text-ssm tw-text-error",children:["Subscribe now to keep your paid status. You won't be",(0,r.Y)("br",{}),"charged until your free trial ends on ",a.T.SUBSCRIPTION_EXPIRY_DATE,"."]})]})}),(0,r.Y)("tr",{children:(0,r.Y)("td",{height:"16"})}),(0,r.Y)("tr",{children:(0,r.Y)("td",{children:(0,r.Y)(i,{href:l,children:"Subscribe now"})})}),(0,r.Y)("tr",{children:(0,r.Y)("td",{height:"16"})})]})}},52117:function(e,t,n){"use strict";let r;n.d(t,{bs:()=>t_,Rv:()=>tv});var i,a=n(69277),o=n(70408),l=n(10201),s=n(31386),c=n(32485),d=n.n(c),u=n(17402),p=n(9751),h=n(83427),m=n(38893),g=n(97731);let f=e=>(0,l.FD)(g.A,(0,o._)((0,a._)({},e),{name:"PlayIconRound",svgParams:{height:24,width:24},children:[(0,l.Y)("path",{className:"outer-circle",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.Y)("path",{className:"inner-triangle",d:"M10 8L16 12L10 16V8Z",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"})]}));var b=n(84605),Y=n(82776);function _(e){var t;let{pub:n,post:r,duration:i,label:a}=e,{iString:o}=(0,b.GO)();return(0,l.Y)("table",{"data-component-name":"AudioEmbedPlayerStatic",className:"tw-w-full tw-rounded-full tw-bg-substack-wash",children:(0,l.Y)("tr",{children:(0,l.Y)("td",{className:"tw-text-center tw-font-meta tw-text-ssm tw-uppercase tw-text-substack-primary",children:(0,l.FD)("a",{href:null==r?void 0:r.canonical_url,className:d()("tw-block tw-w-full tw-p-4 tw-text-substack-primary","noUnderline-s6VF_k"),children:[(0,l.Y)(f,{className:"tw-w-max-4 tw-mr-2 tw-inline-block tw-w-4 tw-align-middle",stroke:null==(t=n.theme)?void 0:t.background_pop_color,isStatic:!0}),(0,l.FD)("span",{className:"tw-align-middle",children:[(0,Y.truncateText)(a,10)||o("Listen now")," \xb7 ",(0,Y.secondsToHHMMSS)(i||0)]})]})})})})}var v=n(98107),w=n(77473),y=n(32641),k=n(43327),S=n(47663),C=n(12988),I=n(84297),E=n(6049);let F=e=>{let{post:t}=e,{title:n,canonical_url:r}=t,i=(0,I.a)(t);return(0,l.FD)(E.jJ,{gap:4,children:[(0,l.Y)("div",{className:"heading-UGv4c2",children:i}),(0,l.Y)("a",{className:"link-jbVsqJ",href:r,children:n})]})};var D=n(38305),A=n(49807);let x=e=>{let{bylines:t}=e;return(null==t?void 0:t.length)?(0,l.Y)("div",{className:"meta-XhipYq",children:(0,l.Y)(D.K,{array:t||[],formatter:e=>{let{id:t,name:n}=e;return(0,l.Y)("a",{className:"inheritColor-eP1Bab",href:(0,A.rfn)(t,n),children:n})},limit:3})}):null};var N=n(81249);let T=e=>{let{href:t,size:n,cta:r}=e;return(0,l.FD)(E.ZB,{gap:8,verticalAlign:"middle",children:[(0,l.Y)("div",{className:d()("button-fZfkQf",{"buttonSm-PaaWgJ":"sm"===n,"buttonMd-Lg5kyv":"md"===n}),children:(0,l.Y)("a",{href:t,children:r||"Read full story"})}),(0,l.Y)("a",{href:t,children:(0,l.Y)(N.A,{className:"icon-Nb1wbo",isStatic:!0,stroke:"#f2312c"})})]})},P=e=>{let{href:t,size:n,title:r}=e;return(0,l.Y)("a",{className:"link-AiRTNr",href:t,children:(0,l.Y)("div",{className:"title-RKep04",style:{fontSize:n},children:r})})};var O=n(39891);let B=e=>{let{caption:t,cta:n,post:r,showBylines:i}=e,{publishedBylines:a,title:o,canonical_url:s,cover_image:c,cover_image_alt:d}=r;return(0,l.FD)(E.jJ,{gap:16,style:{width:"100%"},children:[(0,l.Y)(P,{href:s,size:24,title:o}),i&&(0,l.Y)(x,{bylines:a}),c&&(0,l.Y)("a",{href:s,children:(0,l.Y)("img",{alt:null!=d?d:o,src:(0,O.dJ)(c,1100,{quality:"auto:good",smartCrop:!0}),style:{width:"auto",height:"auto",maxWidth:"100%"},width:550})}),(0,l.FD)(E.jJ,{gap:16,children:[(0,l.Y)("div",{children:t}),(0,l.Y)(T,{cta:n,href:s,size:"md"})]})]})},L=e=>{let{post:t,cta:n,showBylines:r}=e,{publishedBylines:i,title:a,canonical_url:o,cover_image:s,cover_image_alt:c}=t;return(0,l.Y)(E.h2,{style:{width:"100%"},children:(0,l.FD)("tr",{children:[s&&(0,l.FD)(l.FK,{children:[(0,l.Y)("td",{style:{verticalAlign:"top"},width:90,children:(0,l.Y)("a",{href:o,children:(0,l.Y)("img",{alt:null!=c?c:a,src:(0,O.dJ)(s,180,{quality:"auto:good",smartCrop:!0,aspect:"1:1"}),style:{width:"auto",height:"auto",maxWidth:"100%"},width:90})})}),(0,l.Y)("td",{style:"min-width: 16px",width:16})]}),(0,l.Y)("td",{style:{verticalAlign:"top"},children:(0,l.FD)(E.jJ,{gap:16,children:[(0,l.Y)(P,{href:o,size:18,title:a}),r&&(0,l.Y)(x,{bylines:i}),(0,l.Y)(T,{cta:n,href:o,size:"sm"})]})})]})})},R=e=>{let{post:t,cta:n,showBylines:r}=e,{publishedBylines:i,title:a,canonical_url:o}=t;return(0,l.FD)(E.jJ,{gap:16,children:[(0,l.Y)(P,{href:o,size:18,title:a}),r&&(0,l.Y)(x,{bylines:i}),(0,l.Y)(T,{cta:n,href:o,size:"sm"})]})};var M=n(41232),H=n(4016),V=n(20004);let U=e=>{var{caption:t,size:n,pub:r,cta:i,showBylines:a}=e,o=(0,y._)(e,["caption","size","pub","cta","showBylines"]);if(!o)return null;let s=(0,H.lu)({pub:r});return(0,l.Y)("div",{className:d()(V.A.digestPostEmbed,M.A.digestPostEmbed),"data-component-name":"DigestPostEmbedStatic",children:j({size:n,post:o,caption:t,isTheFP:s,cta:i,showBylines:a})})},j=e=>{let{size:t,post:n,caption:r,isTheFP:i,cta:a,showBylines:o}=e;switch(t){case"lg":return i?(0,l.Y)(B,{caption:r,cta:a,post:n,showBylines:o}):(0,l.Y)(k.h,{post:n,children:W(r)});case"md":return i?(0,l.Y)(L,{cta:a,post:n,showBylines:o}):(0,l.Y)(S.J,{post:n,children:W(r)});case"sm":return i?(0,l.Y)(R,{cta:a,post:n,showBylines:o}):(0,l.Y)(C.g,{post:n});case"xs":return i?(0,l.Y)(F,{post:n}):(0,l.Y)(C.g,{post:n});default:return console.warn("unrecognized size",t),null}},W=e=>(0,l.Y)("p",{className:V.A.caption,dangerouslySetInnerHTML:{__html:e}});var z=n(79785);function J(e){let{children:t,href:n,className:r}=e;return(0,l.Y)("a",{className:d()("button primary email cta subscribe-btn",r),href:n,children:t})}var K=n(15567);function q(){let e=(0,z._)(["Message ",""]);return q=function(){return e},e}let G=e=>{let{userId:t,userName:n}=e,{iTemplate:r}=(0,b.GO)();return(0,l.Y)("p",{className:"button-wrapper","data-component-name":"DirectMessageStatic",children:(0,l.Y)(J,{href:(0,K.qO)({userId:t,userName:n}),children:r(q(),n)})})};var Z=n(27775),$=n(67078),X=n(97213),Q=n(13950),ee=n(25006),et=n(46271),en=n(86500),er=n(12501),ei=n(35369),ea=n(76977),eo=n(16993),el=n(63136),es=n(19256),ec=n(39318);function ed(){let e=(0,z._)(["Message ",""]);return ed=function(){return e},e}let eu=e=>{let{userId:t,userName:n}=e,{iTemplate:r}=(0,b.GO)(),i=(0,ee.df)(),a=(0,et.Jd)(),[o,s]=(0,u.useState)(!1),[c,d]=(0,u.useState)([]),[p,h]=(0,u.useState)(!1),[m,g]=(0,u.useState)(!1),[f,Y]=(0,u.useState)(!1),_=(0,A.LRz)({userId:t,userName:n}),{result:v}=(0,er.st)({pathname:(0,A.lz6)({userId:t,userName:n}),deps:[t],auto:!0});(0,u.useEffect)(()=>{if(v){var e;s(null!=(e=v.can_dm)&&e),d(v.dm_upgrade_options||[])}},[v]);let w=r(ed(),(null==v?void 0:v.name)||n);return(0,l.Y)(l.FK,{children:(0,l.FD)(Q.DH,{children:[(0,l.FD)(ea.pT,{flex:"grow",style:{marginBottom:"20px"},justifyContent:"center","data-component-name":"DirectMessageWeb",children:[!!o&&(0,l.Y)(ei.$n,{priority:"primary",onClick:()=>(0,en.u4)(en.qY.DIRECT_MESSAGE_WRITER_BUTTON_CLICKED,{locked:!1}),href:(0,K.pV)({urlParams:{user:_,utm_source:"direct-message-writer"}}),newTab:!0,leading:(0,l.Y)(Z.A,{size:20}),children:w}),!o&&(0,l.Y)(ei.$n,{onClick:()=>{(0,en.u4)(en.qY.DIRECT_MESSAGE_WRITER_BUTTON_CLICKED,{locked:!0}),a?a.id===t?Y(!0):h(!0):g(!0)},priority:"secondary",leading:(0,l.Y)($.A,{size:20}),children:w})]}),(0,l.Y)(eh,{isOpen:m,onClose:()=>g(!1),profile:v,pub:i}),(0,l.Y)(ep,{isOpen:f,onClose:()=>Y(!1)}),(0,l.Y)(es._,{isOpen:p,onClose:()=>h(!1),profile:v,dmUpgradeOptions:c,isEditor:!0})]})})},ep=e=>{let{isOpen:t,onClose:n}=e,{iString:r}=(0,b.GO)();return(0,l.Y)(eo.aF,{width:360,isOpen:t,onClose:n,children:(0,l.Y)(eo.cw,{children:(0,l.FD)(ea.I1,{gap:16,children:[(0,l.Y)(ea.pT,{alignSelf:"center",flex:"auto",bg:"secondary",radius:"full",padding:16,children:(0,l.Y)(X.A,{size:24})}),(0,l.Y)(ea.I1,{children:(0,l.Y)(el.EY.B2,{weight:"semibold",align:"center",children:r("You can't message yourself, but others will be able to message you via this button.")})}),(0,l.Y)(ea.I1,{children:(0,l.Y)(ei.$n,{justifyContent:"center",onClick:n,priority:"secondary",children:r("Okay")})})]})})})},eh=e=>{let{isOpen:t,onClose:n,profile:r,pub:i}=e,{iString:a}=(0,b.GO)();return(0,l.Y)(eo.aF,{width:360,isOpen:t,onClose:n,children:(0,l.Y)(eo.cw,{children:(0,l.FD)(ea.I1,{gap:16,children:[(0,l.Y)(ea.pT,{alignSelf:"center",flex:"auto",bg:"secondary",radius:"full",padding:16,children:(0,l.Y)($.A,{size:24})}),(0,l.Y)(ea.I1,{children:(0,l.Y)(el.EY.B2,{weight:"semibold",align:"center",children:a("Sign in to send ".concat(null==r?void 0:r.name," a message"))})}),(0,l.FD)(ea.I1,{gap:8,children:[(0,l.Y)(ei.$n,{justifyContent:"center",href:(0,ec.a7q)({for_pub:null==i?void 0:i.subdomain}),children:a("Sign in")}),(0,l.Y)(ei.$n,{justifyContent:"center",onClick:n,priority:"secondary",children:a("Maybe later")})]})]})})})};var em=n(18999);let eg=e=>{let{href:t,children:n}=e;return t?(0,l.Y)("a",{href:t,target:"_blank",rel:"noopener",style:{textDecoration:"none"},children:n}):n};var ef=n(60177);let eb=e=>{let{src:t,alt:n,title:r,width:i,height:a,align:o,href:s,captionHtml:c}=e,u="100%"===i?ec.oSl:i;return(0,l.Y)("div",{className:d()(ef.A.staticView),"data-component-name":"Image3Static",children:(0,l.Y)(eg,{href:s,children:(0,l.FD)("div",{style:(e=>{let{align:t,width:n}=e,r={};return"center"===t||"100%"===n||n>=ec.oSl||(r["left"===t?"paddingRight":"paddingLeft"]=ec.oSl-n),r})({align:o,width:i}),className:d()(ef.A.staticImageWrap),children:[(0,l.Y)("img",{width:u,height:a,src:(0,ec.dJ9)(t,2*ec.oSl),alt:n}),!c&&r&&(0,l.Y)("div",{className:d()(ef.A.caption,ef.A.static),children:r}),!!c&&(0,l.Y)("div",{className:d()(ef.A.caption,ef.A.static),dangerouslySetInnerHTML:{__html:c}})]})})})};var eY=n(52742),e_=n(72880);let ev=e=>{let{src:t,alt:n,title:r,width:i,size:a,align:o,href:s,captionHtml:c}=e,p=s||null,[h,m]=(0,u.useState)(!1),g=(0,u.useRef)(null);return(0,l.FD)("figure",{className:d()(ef.A.mediaNodeView,o&&ef.A["align-".concat(o)||""]),"data-component-name":"Image3Dynamic",children:[(0,l.Y)(ea.Ye,{className:d()(ef.A.imageContainer,ef.A[a],{[ef.A.pointer]:p,[ef.A.zoom]:!p}),onClick:()=>{s?window.open(s,"_blank"):m(!0)},children:(0,l.FD)(ea.I1,{gap:8,children:[(0,l.Y)(e_.o,{className:ef.A[a],src:t,alt:n,title:r,maxWidth:(()=>{switch(a){case"large":return ec.T$x;case"full":if("undefined"!=typeof window)return window.innerWidth;return ec.YL9;default:if("100%"===i)return ec.EZZ;return i}})(),imageRef:g,useRetinaSizing:!0,imageIsFixedWidth:!1}),!c&&!!r&&(0,l.Y)("figcaption",{"data-component-name":"Image3DynamicTitle",className:ef.A.caption,children:r}),!!c&&(0,l.Y)("figcaption",{"data-component-name":"Image3DynamicCaption",className:ef.A.caption,dangerouslySetInnerHTML:{__html:c}})]})}),(0,l.Y)(eY.V,{isOpen:h,modalContent:[{attrs:{src:t,alt:n,title:r}}],onClose:()=>m(!1),step:0})]})};var ew=n(73653),ey=n(21805),ek=n(21471),eS=n(54515),eC=n(42114),eI=n(41873);let eE=e=>{let{mediaUpload:t,post:n,pub:r}=e;if(!t)return(0,l.Y)("div",{"data-component-name":"video-embed-player-static-missing-media",children:"Did not find video"});let i=(0,A.py2)({pub:r,post:n,mediaUploadId:t.id});return(0,l.Y)(eI.b,{mediaUpload:t,href:i})};var eF=n(95977),eD=n(89490),eA=n(76270);function ex(e){let{equipment:t}=e,{iString:n}=(0,b.GO)();return t?(0,l.FD)(E.jJ,{gap:20,style:{width:"100%"},children:[(0,l.Y)(E.mV,{}),(0,l.FD)(E.jJ,{gap:2,children:[(0,l.Y)(eA.I5,{label:n("Equipment")}),(0,l.Y)(eA.BX,{value:t})]})]}):null}var eN=n(85345),eT=n(53448);function eP(e){let{ingredients:t}=e,{iString:n}=(0,b.GO)();return t&&0!==t.length?(0,l.FD)(E.jJ,{gap:20,style:{width:"100%"},children:[(0,l.Y)(E.mV,{}),(0,l.FD)(E.jJ,{gap:12,children:[(0,l.Y)(eN.bK,{title:n("Ingredients")}),(0,l.Y)(E.h2,{width:"100%",children:t.map((e,n)=>{let{number:r,text:i}=(0,eT.L_)(e),a=n===t.length-1;return(0,l.FD)("tr",{children:[(0,l.Y)("td",{style:{verticalAlign:"top",paddingRight:8,paddingBottom:4*!a,width:"auto"},children:(0,l.Y)(el.EY.B3,{as:"span",weight:"semibold",children:r||""})}),(0,l.Y)("td",{style:{verticalAlign:"top",paddingBottom:4*!a},children:(0,l.Y)(el.EY.B3,{as:"span",children:i})})]},n)})})]})]}):null}function eO(e){let{steps:t}=e,{iString:n}=(0,b.GO)();return t&&0!==t.length?(0,l.FD)(E.jJ,{gap:20,style:{width:"100%"},children:[(0,l.Y)(E.mV,{}),(0,l.FD)(E.jJ,{gap:12,children:[(0,l.Y)(eN.bK,{title:n("Preparation")}),(0,l.Y)(E.jJ,{gap:16,children:t.map((e,t)=>(0,l.FD)(E.jJ,{gap:4,children:[(0,l.FD)(el.EY.B3,{as:"span",weight:"bold",children:[n("Step")," ",t+1]}),(0,l.Y)(el.EY.B3,{as:"span",children:e})]},t))})]})]}):null}function eB(e){let{recipeYield:t}=e,{iString:n}=(0,b.GO)();return t?(0,l.Y)("td",{width:"25%",style:{verticalAlign:"top"},children:(0,l.FD)(E.jJ,{gap:2,children:[(0,l.Y)(eA.I5,{label:n("Serves")}),(0,l.Y)(eA.BX,{value:t})]})}):null}function eL(e){let{values:t,getLabel:n}=e;return t&&0!==t.length?(0,l.Y)(l.FK,{children:t.map(e=>(0,l.Y)(eD.az,{display:"inline-block",paddingRight:12,paddingBottom:12,children:(0,l.Y)(eD.az,{paddingX:4,paddingY:2,bg:"secondary",radius:"xs",children:(0,l.Y)(el.EY.B4,{as:"span",weight:"medium",children:n?n(e):e})},e)},e))}):null}function eR(e){var t;let n,r,{label:i,time:a}=e;if(0===a)return null;let o=(n=Math.floor((t=a)/60),r=t%60,n>0&&r>0?"".concat(n,"h ").concat(r,"m"):n>0?"".concat(n,"h"):"".concat(r,"m"));return(0,l.Y)("td",{width:"25%",style:{verticalAlign:"top",paddingRight:8},children:(0,l.FD)(E.jJ,{gap:2,children:[(0,l.Y)(eA.I5,{label:i}),(0,l.Y)(eA.BX,{value:o})]})})}function eM(e){let{recipe:t}=e,{iString:n}=(0,b.GO)();if(!t)return null;let r=t.metadata,i=r.prepTime||r.cookTime||r.totalTime||r.recipeYield,a=r.category||r.keywords||r.cuisine||r.diet;return(0,l.FD)(eD.az,{border:"detail",radius:"md",overflow:"hidden",children:[(0,l.Y)(eF.A,{src:(0,ec.dJ9)(t.image_url,2*ec.oSl),width:ec.oSl,style:{width:ec.oSl,height:"auto",objectFit:"cover"}}),(0,l.FD)(E.jJ,{gap:20,style:{padding:20,width:"100%"},children:[(0,l.FD)(E.jJ,{gap:12,children:[(0,l.Y)(el.EY.H2,{weight:"heavy",children:t.name}),r.description&&(0,l.Y)(el.EY.B3,{as:"span",children:r.description})]}),i&&(0,l.Y)(E.mV,{}),(0,l.Y)(E.h2,{width:"100%",children:(0,l.FD)("tr",{children:[(0,l.Y)(eR,{label:n("Prep time"),time:r.prepTime}),(0,l.Y)(eR,{label:n("Cook time"),time:r.cookTime}),(0,l.Y)(eR,{label:n("Total time"),time:r.totalTime}),(0,l.Y)(eB,{recipeYield:r.recipeYield})]})}),(0,l.Y)(ex,{equipment:r.tools}),(0,l.Y)(eP,{ingredients:t.ingredients||[]}),(0,l.Y)(eO,{steps:t.steps||[]}),a&&(0,l.Y)(E.mV,{}),(0,l.FD)("div",{style:{display:"block",width:"100%"},children:[(0,l.Y)(eL,{values:r.category,getLabel:eT.F$}),(0,l.Y)(eL,{values:r.keywords}),(0,l.Y)(eL,{values:r.cuisine,getLabel:eT.lX}),(0,l.Y)(eL,{values:r.diet,getLabel:eT.TD})]})]})]})}var eH=n(20956);function eV(e){return(0,l.Y)(E.jJ,{gap:8,style:{width:"100%"},children:(0,l.Y)(eH.Y,(0,o._)((0,a._)({},e),{separator:(0,l.Y)(E.mV,{})}))})}var eU=n(5955);function ej(e){let{username:t,name:n}=e;return(0,l.FD)(E.ZB,{gap:12,verticalAlign:"middle",children:[(0,l.Y)(E.Kb,{src:(0,eU.Wk)(t,40),size:40}),(0,l.FD)(E.jJ,{children:[(0,l.Y)(el.EY.B4,{weight:"semibold",children:n}),(0,l.FD)(el.EY.B4,{color:"secondary",children:["@",t]})]})]})}function eW(e){let{expandedUrl:t}=e,{title:n,domain:r,image:i}=t,a="string"==typeof i?i:null==i?void 0:i.url;return(0,l.FD)(E.ZB,{gap:12,style:{width:"100%",padding:12,backgroundColor:"#f7f7f7",borderRadius:8},children:[(0,l.FD)(E.jJ,{gap:2,children:[r&&(0,l.Y)(el.EY.B4,{color:"secondary",children:r}),n&&(0,l.Y)(el.EY.B3,{weight:"medium",children:n})]}),a&&(0,l.Y)(ez,{src:a,alt:n})]})}function ez(e){let{src:t,alt:n}=e;return(0,l.Y)("td",{style:{width:64},children:(0,l.Y)("img",{src:(0,A.dJ9)(t,128,{aspect:"1:1",crop:"fill"}),alt:n||"Link preview",width:64,height:64,style:{borderRadius:8,objectFit:"cover"}})})}function eJ(e){let{photos:t}=e;return t&&0!==t.length&&t[0]?(0,l.Y)(eF.A,{src:(0,A.dJ9)(t[0].img_url,550),alt:t[0].alt_text||"Image",style:{display:"inline",width:"auto",height:"auto",maxWidth:"100%",maxHeight:420,borderRadius:8}}):null}function eK(e){let{quotedTweet:t}=e;if(!(null==t?void 0:t.full_text))return null;let n=t.full_text.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return(0,l.Y)(E.h2,{width:"100%",style:{border:"1px solid #eeeeee",borderRadius:8,padding:12},children:(0,l.Y)("tr",{children:(0,l.Y)("td",{children:(0,l.FD)(E.jJ,{gap:8,children:[(0,l.FD)(E.ZB,{gap:8,verticalAlign:"middle",children:[t.username&&(0,l.Y)(E.Kb,{src:(0,eU.Wk)(t.username,20),size:20}),(0,l.FD)(el.EY.B4,{children:[(0,l.Y)("span",{style:{fontWeight:600},children:t.name||""})," ",(0,l.FD)("span",{style:{color:"#888888"},children:["@",t.username]})]})]}),(0,l.Y)(el.EY.B3,{children:n})]})})})})}var eq=n(98505);function eG(e){let{fullText:t}=e,n=t.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return(0,l.Y)(el.EY.B3,{style:{whiteSpace:"pre-wrap"},className:eq.A.text,children:n})}function eZ(e){let{attrs:t}=e,{url:n,full_text:r,username:i,name:a,date:o,photos:s,quoted_tweet:c,expanded_url:d,retweet_count:u,like_count:p,reply_count:h,impression_count:m}=t,g=s&&s.length>0,f=c&&Object.keys(c).length>0;return(0,l.Y)(E.h2,{className:"twitter-embed tweet",width:"100%","data-component-name":"TweetToDOMStatic",style:{marginBottom:20,marginTop:20},children:(0,l.Y)("tbody",{children:(0,l.Y)("tr",{children:(0,l.Y)("td",{style:{padding:0},children:(0,l.Y)("a",{href:n,style:{textDecoration:"none",color:"inherit",display:"block"},children:(0,l.FD)(E.jJ,{gap:12,children:[(0,l.Y)(ej,{username:i,name:a}),(0,l.Y)(eG,{fullText:r}),g&&(0,l.Y)(eJ,{photos:s}),!g&&!f&&null!=d&&(0,l.Y)(eW,{expandedUrl:d}),f&&(0,l.Y)(eK,{quotedTweet:c}),(0,l.Y)(eV,{date:o,replyCount:h,retweetCount:u,likeCount:p,impressionCount:m})]})})})})})})}var e$=n(78622),eX=n(65942),eQ=n(64998),e0=n(64099),e1=n(93038),e2=n(81209),e3=n(47970),e4=n(43427);n(15074);let e6=e=>(0,l.FD)(g.A,(0,o._)((0,a._)({},e),{name:"MoreIcon",svgParams:{height:24,width:24,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth},children:[(0,l.Y)("path",{d:"M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z"}),(0,l.Y)("path",{d:"M19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12C18 12.5523 18.4477 13 19 13Z"}),(0,l.Y)("path",{d:"M5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z"})]}));var e7=n(58299),e5=n(85796),e8=n(42686);n(49095),n(14124);var e9=n(16291),te=n(56262);function tt(e){var t,n,r,i,a,o,s,c,d;let{comment:u,utmSource:p,hideUfi:h,commentLinkUrl:m}=e;if(!u)return(0,l.Y)(el.EY.B3,{"data-component-name":"EmailCommentEmbedError",translated:!0,children:"Could not load comment"});let g=null==(t=u.attachments)?void 0:t.find(e=>"image"===e.type),f=null==(n=u.attachments)?void 0:n.find(e=>"post"===e.type),b=null==f?void 0:f.postSelection,_=null==(r=u.attachments)?void 0:r.find(e=>"image"!==e.type),v=_&&(0,e8.hH)(_),w=null==(i=u.attachments)?void 0:i.find(e=>"video"===e.type);return(0,l.Y)(eD.az,{as:"a",href:null!=m?m:(0,A.Zgx)(u,{urlParams:{utm_source:p}}),display:"block",padding:16,radius:"md",border:"detail",color:"primary",className:"note-flsrqQ","data-component-name":"EmailCommentEmbed",children:(0,l.FD)(E.ZB,{style:{width:"100%"},verticalAlign:"top",gap:12,growLastChild:!0,children:[(0,l.Y)(E.Kb,{src:null!=(o=u.photo_url)?o:(0,ec.Ji1)(null!=(a=u.user_id)?a:0),size:48}),(0,l.FD)(E.jJ,{gap:12,style:{lineHeight:1,width:"100%"},children:[(0,l.FD)(eD.az,{children:[(0,l.FD)(el.EY.B3,{children:[(0,l.Y)(el.EY,{as:"span",weight:"semibold",children:u.name})," ",(0,l.Y)(el.EY,{as:"span",color:"secondary",children:(0,e9.A)(u.date).fromNowShort()})]}),(0,l.Y)(el.EY.B3,{children:(0,Y.truncateWords)(u.body,420)})]}),f&&b&&(0,l.Y)(el.EY.B3,{children:(0,l.Y)(ta,{attachment:f,selection:b})}),v&&!f&&(0,l.Y)(el.EY.B4,{color:"highlight",children:v}),w&&(0,l.Y)(tl,{attachment:w}),g&&(0,l.Y)(to,{attachment:g}),!h&&(0,l.Y)(E.h2,{width:"100%",style:{width:"100%"},children:(0,l.FD)("tr",{children:[(0,l.FD)("td",{width:"20%",children:[(0,l.Y)(e4.A,{width:16,height:16,strokeWidth:1.5,stroke:ti,style:tn,fill:"none",isStatic:!0}),(0,l.Y)(tr,{count:null!=(s=u.reaction_count)?s:0})]}),(0,l.FD)("td",{width:"20%",children:[(0,l.Y)(e5.A,{height:16,width:16,strokeWidth:1.5,stroke:ti,style:tn,isStatic:!0}),(0,l.Y)(tr,{count:null!=(c=u.children_count)?c:0})]}),(0,l.FD)("td",{width:"20%",children:[(0,l.Y)(e7.A,{height:16,width:16,strokeWidth:1.5,stroke:ti,style:tn,isStatic:!0}),(0,l.Y)(tr,{count:null!=(d=u.restacks)?d:0})]}),(0,l.Y)("td",{width:"20%",children:(0,l.Y)(e6,{height:16,width:16,strokeWidth:2,stroke:ti,fill:ti,style:tn,isStatic:!0})})]})})]})]})})}let tn={display:"inline-block",verticalAlign:"middle"};function tr(e){let{count:t}=e;return(0,l.Y)(el.EY.B4,{size:12,as:"span",weight:"semibold",color:"secondary",style:{marginLeft:4},children:t>0?(0,Y.numberToRoughShortString)(Math.max(t,1),{plusSignifier:""}):" "})}let ti="#808080";function ta(e){let{attachment:t,selection:n}=e;return(0,l.Y)(eD.az,{padding:12,radius:"md",bg:"secondary",children:(0,l.FD)(el.EY,{color:"secondary",font:"serif",fontStyle:"italic",lineHeight:24,children:[(0,Y.truncateWords)(n.text.replaceAll("â€œ","â€˜").replaceAll("â€","â€™"),180),"â€ â€” ",(0,te.getPostAuthor)(t.publication,t.post).name]})})}function to(e){let{attachment:t}=e;return(0,l.Y)(eD.az,{as:"img",src:(0,A.dJ9)(t.imageUrl,800,{crop:"limit",height:800}),width:400,radius:"md",style:{maxHeight:600,objectFit:"cover",margin:0}})}function tl(e){let{attachment:t}=e,n=t.mediaUpload;return(0,l.Y)(eD.az,{as:"img",src:(0,ec.Pzx)(n,{isStatic:!0}),width:400,radius:"md",style:{maxHeight:600,objectFit:"cover",margin:0}})}var ts=n(68349),tc=n(51131),td=n(30192),tu=n(98111),tp=n(41086),th=n(98949),tm=n(8283);let tg=(e,t)=>(0,l.Y)(b.Pz,{language:t,children:e}),tf=function(e,t){var n,r,i,c,d,g;let{shallow:f}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("A"!==e.nodeName||e.getAttribute("rel")||e.setAttribute("rel","pub"in t&&(null==(r=t.pub)?void 0:r.no_follow)?"nofollow ugc noopener":""),(0,ts.nB)(e,"image2")&&e.classList.add("can-restack"),"pub"in t&&t.pub&&"P"===e.nodeName&&(0,ts.nB)(e,"button-wrapper")){let n=((e,t)=>{try{let n=JSON.parse((0,eX.A)(e.getAttribute("data-attrs")));if(["".concat(t.pub.base_url,"/subscribe?"),"".concat(t.pub.base_url,"/subscribe?plan=founding"),tu.T.CHECKOUT_URL,tu.T.FOUNDING_CHECKOUT_URL].includes(n.url)){let n=JSON.parse((0,eX.A)(e.getAttribute("data-attrs")));return(0,l.Y)(e2.A,(0,a._)({pub:t.pub,subscribeButtonAttrs:n},t.props))}}catch(e){console.error("Failed to parse button:",e)}return null})(e,t);if(n)return n}let b="pub"in t&&(null==(n=t.pub)?void 0:n.language)||"en";return(0,ts.nB)(e,"subscription-widget-wrap-editor")||(0,ts.nB)(e,"subscription-widget-wrap")?tg((0,l.Y)("div",{className:"subscription-widget-wrap",children:(0,l.FD)("div",{className:"subscription-widget show-subscribe",children:[(0,l.Y)("div",{className:"preamble",children:(0,l.Y)("p",{dangerouslySetInnerHTML:{__html:null!=(g=null==(d=e.children[0])||null==(c=d.children[0])||null==(i=c.children[0])?void 0:i.innerHTML)?g:""}})}),(0,l.Y)(e2.A,(0,a._)({pub:t.pub,subscribeButtonAttrs:null,source:"subscribe-widget-preamble"},t.props))]})}),b):(0,ts.nB)(e,"cashtag-wrap")?tg((e=>{try{let t=JSON.parse(e.dataset.attrs).symbol;if(t)return(0,l.Y)(v.A,{symbol:t,prependSymbol:JSON.parse(e.dataset.attrs).prependSymbol,isStatic:JSON.parse(e.dataset.attrs).isStatic});return(0,l.Y)(l.FK,{})}catch(e){return console.error("failed to parse cashtag"),(0,l.Y)(l.FK,{})}})(e),b):(0,ts.nB)(e,"mention-wrap")?tg((e=>{try{let{name:t,id:n,type:r,url:i,photo_url:a,uuid:o,isStatic:s}=JSON.parse(e.dataset.attrs);if(t)return(0,l.Y)(e1.Ay,{name:t,id:n,type:r,url:i,photo_url:a,uuid:o,isStatic:s});return(0,l.Y)(l.FK,{})}catch(e){return(0,l.Y)(l.FK,{})}})(e),b):"pub"in t&&t.pub&&(0,ts.nB)(e,"native-audio-url-embed")?tg(((e,t)=>{let{pub:n,props:{isStatic:r,post:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,eX.A)(t));return r?(0,l.Y)(_,{label:e.label,pub:n,post:i,duration:e.duration}):(0,l.Y)(m.$g,{label:e.label,pub:n,post:i,src:e.url,duration:e.duration,downloadable:e.downloadable,autoPlay:!1})}}catch(e){console.error("Failed to parse audio:",e)}return null})(e,t),b):"pub"in t&&t.pub&&(0,ts.nB)(e,"native-audio-embed")?tg(((e,t)=>{let{pub:n,props:{isStatic:r,post:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,eX.A)(t));return r?(0,l.Y)(_,{label:e.label,pub:n,post:i,duration:e.duration}):(0,l.Y)(m.$g,{label:e.label,pub:n,post:i,src:"/api/v1/audio/upload/".concat(e.mediaUploadId,"/src"),duration:e.duration,downloadable:e.downloadable,autoPlay:!1,mediaUpload:{id:e.mediaUploadId}})}}catch(e){console.error("Failed to parse audio:",e)}return null})(e,t),b):"pub"in t&&t.pub&&(0,ts.nB)(e,"native-video-embed")?tg(((e,t)=>{let{pub:n,props:{isStatic:r,post:i,dataForEmailRender:a}}=t;try{let t=e.getAttribute("data-attrs");if(t){let{mediaUploadId:e}=JSON.parse((0,eX.A)(t));if(r){var o,s;return(0,l.Y)(eE,{pub:n,post:i,mediaUpload:null!=(s=null==(o=a.idToMediaUpload)?void 0:o[e])?s:null})}return(0,l.Y)(eC.i,{pub:n,post:i,mediaUploadId:e})}}catch(e){console.error("Failed to parse video:",e)}return(0,l.Y)(l.FK,{})})(e,t),b):"pub"in t&&t.pub&&(0,ts.nB)(e,"meeting-embed")?tg(((e,t)=>{let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs");if(t){let{name:e,avatarUrl:r,url:i}=JSON.parse((0,eX.A)(t));return n?(0,l.Y)(tc.D,{name:e,avatarUrl:r,url:i}):(0,l.Y)(tc.l,{name:e,avatarUrl:r,url:i})}}catch(e){console.error("Failed to parse audio:",e)}return null})(e,t),b):(0,ts.nB)(e,"poll-embed")?tg(((e,t)=>{try{let i=JSON.parse((0,eX.A)(e.getAttribute("data-attrs")));if(null==i?void 0:i.isEmail){var n,r;return(0,l.Y)("table",{className:"poll-embed poll-email",cellSpacing:"16px",width:"100%",children:(0,l.Y)("tbody",{children:(0,l.Y)("tr",{children:(0,l.Y)("td",{align:"center",children:(0,l.Y)(eQ.a1,{id:i.id,embeddedPolls:null!=(r=null==(n=t.props.dataForEmailRender)?void 0:n.embeddedPolls)?r:[],pub:t.pub})})})})})}return(0,l.Y)("div",{className:"poll-embed",dataAttrs:e.getAttribute("data-attrs"),children:(0,l.Y)(eQ.sP,{id:i.id,isEditor:!1,post:t.props.post,isVersionView:!!t.props.isVersionView})})}catch(e){return console.error("Failed to parse poll:",e),(0,l.Y)(l.FK,{})}})(e,t),b):(0,ts.nB)(e,"recipe-embed")?tg(((e,t)=>{try{let r=JSON.parse((0,eX.A)(e.getAttribute("data-attrs")));if(null==r?void 0:r.isEmail){var n;let e=null==(n=t.props.dataForEmailRender)?void 0:n.recipes[r.id];return(0,l.Y)("table",{className:"recipe-embed",width:"100%",cellPadding:"0",cellSpacing:"0",style:{marginBottom:20},children:(0,l.Y)("tbody",{children:(0,l.Y)("tr",{children:(0,l.Y)("td",{style:{padding:0},children:(0,l.Y)(eM,{recipe:e})})})})})}return(0,l.Y)("div",{"data-attrs":e.getAttribute("data-attrs"),children:(0,l.Y)(eN.h5,{node:{attrs:{id:r.id}},post:t.props.post})})}catch(e){return console.warn("Failed to parse recipe:",e),(0,l.Y)(l.FK,{})}})(e,t),b):(0,ts.nB)(e,"twitter-embed")?tg((e=>{try{let t=e.getAttribute("data-attrs");if(!t)return(0,l.Y)(l.FK,{});let n=JSON.parse((0,eX.A)(t));if(n.isEmail)return(0,l.Y)(eZ,{attrs:n});return(0,l.Y)(e$.K,{attrs:n})}catch(e){return console.warn("Failed to parse tweet:",e),(0,l.Y)(l.FK,{})}})(e),b):(0,ts.nB)(e,"pinterest-embed")?tg((e=>{try{let t=JSON.parse((0,eX.A)(e.getAttribute("data-attrs")));return(0,l.Y)(ew.L,{attrs:t})}catch(e){console.error("Failed to parse pinterest:",e)}return(0,l.Y)(l.FK,{})})(e),b):(0,ts.nB)(e,"sponsorship-campaign-embed")?tg(((e,t)=>{var n,r,i,a,o,s,c,d,u,p,h;let m=null!=(c=null==(r=t.props)||null==(n=r.post)?void 0:n.sponsorshipCampaigns)?c:null==(a=t.props)||null==(i=a.dataForEmailRender)?void 0:i.sponsorshipCampaigns;if(!m)return(0,l.Y)(l.FK,{});let g=e.getAttribute("data-attrs"),f=m[JSON.parse((0,eX.A)(g)).id];if(!f||"archived"===f.status)return(0,l.Y)(l.FK,{});let b=f.exclude_audience_minimum;if("paid"===b&&!1===t.props.is_freemail||"paid"===b&&(null==(o=t.props.user)?void 0:o.is_subscribed)||"founding"===b&&(null==(s=t.props.user)?void 0:s.is_founding))return(0,l.Y)(l.FK,{});try{let n=JSON.parse((0,eX.A)(e.getAttribute("data-attrs")));if(null==n?void 0:n.isEmail)return(0,l.Y)(eS._U,{campaign:f,pub:t.pub,post:null!=(h=null==(u=t.props)?void 0:u.republishingPost)?h:null==(p=t.props)?void 0:p.post});return(0,l.Y)(eS.eF,{dataAttrs:e.getAttribute("data-attrs"),pub:t.pub,campaign:f,post:null==(d=t.props)?void 0:d.post})}catch(e){return console.warn("Failed to parse sponsorship campaign:",e),(0,l.Y)(l.FK,{})}})(e,t),b):(0,ts.nB)(e,"fp-recirc-block")?tg(((e,t)=>{try{let n=JSON.parse((0,eX.A)(e.getAttribute("data-attrs")));if(n.isEmail)return(0,l.Y)(em.O,(0,a._)({pub:t.pub},n));return(0,l.Y)(em.u,(0,a._)({pub:t.pub,isEditor:!1},n))}catch(e){return console.warn("Failed to parse stories section:",e),(0,l.Y)(l.FK,{})}})(e,t),b):(0,ts.nB)(e,"image-gallery-embed")?tg(((e,t)=>{let{pub:n,props:{isStatic:r,post:i,onLike:s}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse(t),c={node:{attrs:(0,o._)((0,a._)({},e),{isEditor:!1})}};return r?(0,l.Y)(ey.a9,(0,a._)({},c)):(0,l.Y)(ey.i_,(0,o._)((0,a._)({},c),{post:i,publication:n,onLike:s}))}}catch(e){console.error("Failed to parse image gallery embed:",e)}return(0,l.Y)(l.FK,{})})(e,t),b):(0,ts.nB)(e,"image3")?tg(((e,t)=>{let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs");if(t){var r;let i=null!=(r=JSON.parse(t))?r:{};return n?(0,l.Y)(eb,(0,o._)((0,a._)({},i),{captionHtml:e.innerHTML})):(0,l.Y)(ev,(0,o._)((0,a._)({},i),{captionHtml:e.innerHTML}))}}catch(e){console.error("Failed to parse image3:",e)}return(0,l.Y)(l.FK,{})})(e,t),b):(0,ts.nB)(e,"directMessage")?tg(((e,t)=>{let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse(t),r=(0,a._)({},e);return n?(0,l.Y)(G,(0,a._)({},r)):(0,l.Y)(eu,(0,a._)({},r))}}catch(e){console.error("Failed to parse direct message embed:",e)}return(0,l.Y)(l.FK,{})})(e,t),b):(0,ts.nB)(e,"latex-rendered")?tg(((e,t)=>{let{pub:n,props:{isStatic:r}}=t,{iString:i}=I18N.i({pub:n});try{if(r){let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,eX.A)(t)),n=null==e?void 0:e.persistentExpression;return n?(0,l.Y)("img",{src:(0,ec.Ojn)(n),style:{transform:"scale(0.5)"},"data-component-name":"LatexImg"}):(0,l.Y)("p",{children:i("Failed to render LaTeX expression â€” no expression found in email")})}return(0,l.Y)("p",{children:i("Failed to render LaTeX expression â€” data attributes not found")})}let t=e.getAttribute("data-attrs"),n=JSON.parse((0,eX.A)(t)),a=null==n?void 0:n.persistentExpression;return a?(0,l.Y)(ea.Ye,{className:"latex-rendered",justifyContent:"center",flex:"grow",paddingBottom:"4px",paddingTop:"4px","data-component-name":"Latex",children:(0,l.Y)(ea.I1,{justifyContent:"center",children:(0,l.Y)(s.A,{inline:!1,children:"\\(".concat(a,"\\)")})})}):(0,l.Y)("p",{children:i("Failed to render LaTeX expression â€” no expression found")})}catch(e){return console.error("failed to render mathjax",e),(0,l.Y)("p",{children:i("Failed to render LaTeX expression â€” error")})}})(e,t),b):(0,ts.nB)(e,"community-chat")?tg(function(e,t){let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs"),r=JSON.parse((0,eX.A)(t));if(!r.pub||!r.subdomain)return console.error("could not deepPrepare communityChat, subdomain or pub missing from node"),(0,l.Y)(u.Fragment,{});return(0,l.Y)("div",{className:"community-chat",dataAttrs:t,children:n?(0,l.Y)(p.$,(0,a._)({},r)):(0,l.Y)(p.b,{pub:r.pub,subdomain:r.subdomain})})}catch(e){return console.error("Failed to parse chat embed:",e),(0,l.Y)(u.Fragment,{})}}(e,t),b):(0,ts.nB)(e,"community-post")?tg(function(e,t){let{props:{isStatic:n,is_freemail:r}}=t;try{let t=e.getAttribute("data-attrs"),i=JSON.parse((0,eX.A)(t));return n?(0,l.Y)(h.T,(0,a._)({is_freemail:r},i)):(0,l.Y)(h.B,(0,a._)({},i))}catch(e){return console.error("Failed to parse chat post embed:",e),(0,l.Y)(u.Fragment,{})}}(e,t),b):(0,ts.nB)(e,"digest-post-embed")?tg(((e,t)=>{let{pub:n,props:{isStatic:r}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,eX.A)(t));return r?(0,l.Y)(U,(0,o._)((0,a._)({},e),{pub:n,isEditor:!1})):(0,l.Y)(w.S,(0,o._)((0,a._)({},e),{pub:n,isEditor:!1}))}}catch(e){console.error("Failed to parse digest post embed:",e)}return(0,l.Y)(l.FK,{})})(e,t),b):(0,ts.nB)(e,"comment")&&!(0,ts.nB)(e,"template-comment")?tg(function(e,t){let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs"),r=JSON.parse((0,eX.A)(t));return n?(0,l.Y)(tt,(0,a._)({},r)):(0,l.Y)(e3.H,(0,a._)({},r))}catch(e){return console.error("Failed to parse chat post embed:",e),(0,l.Y)(u.Fragment,{})}}(e,t),b):(0,ts.nB)(e,"referrals-tier-card")?tg(((e,t)=>{let{pub:n,props:{isStatic:r}}=t;try{let t=e.getAttribute("data-attrs"),i=JSON.parse((0,eX.A)(t));return r?(0,l.Y)(ek.F,(0,o._)((0,a._)({},i),{pub:n})):(0,l.Y)(ek.P,(0,o._)((0,a._)({},i),{pub:n}))}catch(e){console.error("Failed to parse referrals card:",e)}return(0,l.Y)(l.FK,{})})(e,t),b):("undefined"!=typeof window&&(0,ts.nB)(e,"file-embed-button")&&"href"in e&&e.href&&!(0,tp.y)(e.href,"token")&&(e.href=(0,ec.yRP)(e.href,{token:(0,tp.y)(window._preloads.original_url,"token")})),"props"in t&&t.props&&"post"in t.props&&t.props.post&&"object"==typeof t.props.post&&"id"in t.props.post&&t.props.post.id&&(0,ts.nB)(e,"footnote")&&(e.id&&(e.id+="-".concat(t.props.post.id)),"href"in e&&e.href&&(e.href+="-".concat(t.props.post.id))),(0,ts.nB)(e,"footnote-anchor"))?tg(((e,t,n)=>{var r;let[i,,a]=e.id.split("-"),o=null==(r=n.wrapper.querySelector("#".concat(i,"-").concat(a)))?void 0:r.nextElementSibling;return o?((0,th.Fr)()&&(e.href="#_"),(0,l.Y)(td.j,{trigger:tY(e,t,n),children:(0,l.Y)(eD.az,{padding:12,maxWidth:360,sizing:"border-box",className:"markup typography footnote-hovercard",children:tY(o,t,n)})})):tY(e,t,n)})(e,tf,t),b):f?null:tY(e,tf,t)},tb=function(e){let t={};for(let{name:n,value:r}of Array.prototype.slice.call(e))t[n]=r;return t},tY=(i=(e,t,n,r)=>{var i,s,c,p,h;if(!e)throw Error("Empty node, cannot preactify!");let m=3===e.nodeType?"span":8===e.nodeType?"x_preact_compatible_html_comment_x":e.tagName.toLowerCase(),g=1!==e.nodeType?{}:tb(e.attributes),f=e.children&&e.children.length>0?null:e.textContent;if(r||"script"===m&&e.innerHTML===tm.I)return(0,u.createElement)(m,(0,o._)((0,a._)({},g),{dangerouslySetInnerHTML:{__html:e.innerHTML}}));let b=!!(null==(i=e.parentElement)?void 0:i.getAttribute("data-prose-mirror-wrapper"));if(n&&"pub"in n&&b&&["h1","h2","h3","h4"].includes(m)&&!e.className){let t,r;return t=d()("header-anchor-post",g.className),r=e.children.length?Array.prototype.map.call(e.childNodes,e=>tf(e,n)):[e.textContent],(0,u.createElement)(m,(0,o._)((0,a._)({},g),{className:t}),...r,(0,l.Y)(e0.A,{text:null!=(p=e.textContent)?p:"",pub:null==n?void 0:n.pub,post:null==n||null==(s=n.props)?void 0:s.post,offsetTop:!0,isAboutPage:null!=(h=null==n||null==(c=n.props)?void 0:c.isAboutPage)&&h}))}if(f)return(0,u.createElement)(m,g,f);let Y=t(e,n,{shallow:!0});return Y||(0,u.createElement)(m,g,...Array.prototype.map.call(e.childNodes,e=>t(e,n)))},r=0,function(){let e=[].slice.call(arguments,0),t=++r>2500;if(t){var n,a,o;console.error("Too many post nodes to recurse",{postId:null==(o=e[2])||null==(a=o.props)||null==(n=a.post)?void 0:n.id,depth:r})}let l=i.apply(null,[...e,...t?[!0]:[]]);return r--,l});function t_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement("div");return r.setAttribute("data-prose-mirror-wrapper","1"),r.innerHTML=e,Array.prototype.map.call(r.childNodes,e=>tY(e,tf,{wrapper:r,pub:t,props:n}))}function tv(e,t){if("undefined"==typeof window)return[];let n=document.createElement("div");n.innerHTML=e;let r=[];for(let e of n.querySelectorAll(null!=t?t:"h1, h2, h3, h4")){var i,a;let t=e.tagName[1],n=t?parseInt(t):NaN;r.push({level:null!=n?n:0,text:null!=(i=e.textContent)?i:"",id:null!=(a=e.id)?a:""})}return r}},64099:function(e,t,n){"use strict";n.d(t,{A:()=>b});var r=n(10201),i=n(32485),a=n.n(i),o=n(82853),l=n(17402),s=n(13950),c=n(8609),d=n(86500),u=n(72569),p=n(68349),h=n(89490),m=n(35369),g=n(76977),f=n(39318);function b(e){let{text:t,post:n,pub:i,offsetTop:b,isAboutPage:Y}=e,_=(0,l.useContext)(c.a),{isStatic:v}=null!=_?_:{isStatic:!1},w=(0,u.c)(),y=(0,p.HN)(t,(null==n?void 0:n.id)||0);if(!n&&!Y||!i||v)return null;let k=Y?"".concat((0,f.DNs)(i,{addBase:!0}),"#\xa7").concat(y):"".concat((0,f.$_T)(i),"/i/").concat(null==n?void 0:n.id,"/").concat(y);return(0,r.Y)(g.pT,{position:"absolute",alignItems:"center",className:"header-anchor-parent",children:(0,r.FD)(s.DH,{children:[(0,r.Y)(h.az,{className:a()("header-anchor",{"offset-top":b}),id:"\xa7".concat(y)}),(0,r.Y)(m.K0,{priority:"secondary",rounded:!1,size:"sm",onClick:e=>{var t;(null==(t=location)?void 0:t.href)&&(e.preventDefault(),(0,d.u4)(d.qY.HEADER_ANCHOR_WIDGET_CLICKED,{destination:k}),w(k))},href:k,children:(0,r.Y)(o.A,{size:18})})]})})}},17436:function(e,t,n){"use strict";n.d(t,{A:()=>l});var r=n(69277),i=n(70408),a=n(10201),o=n(97731);let l=e=>(0,a.Y)(o.A,(0,i._)((0,r._)({},e),{name:"EmailIcon",svgParams:{height:25,width:25,strokeWidth:0,fill:"#000Z"},children:(0,a.Y)("g",{children:(0,a.Y)("path",{d:"M22.93,7a2.43,2.43,0,0,0-.41-.93A2.61,2.61,0,0,0,20.39,5H4.61A2.61,2.61,0,0,0,2.48,6.1,2.43,2.43,0,0,0,2.07,7h0A2.78,2.78,0,0,0,2,7.61v9.78A2.61,2.61,0,0,0,4.61,20H20.39A2.61,2.61,0,0,0,23,17.39V7.61A2.25,2.25,0,0,0,22.93,7ZM4.61,6H20.39a1.58,1.58,0,0,1,1.26.62l-8.91,5.31a.49.49,0,0,1-.47,0L3.35,6.62A1.58,1.58,0,0,1,4.61,6ZM22,17.39A1.61,1.61,0,0,1,20.39,19H4.61A1.61,1.61,0,0,1,3,17.39V7.58l8.77,5.22a1.48,1.48,0,0,0,1.47,0L22,7.58Z"})})}))},12293:function(e,t,n){"use strict";n.d(t,{A:()=>c});var r=n(69277),i=n(70408),a=n(32641),o=n(10201),l=n(97731),s=n(57753);let c=e=>{var{isHovered:t}=e,n=(0,a._)(e,["isHovered"]);let c=t?s.Q.brightOrange.hex:s.Q.lightGray.hex;return(0,o.FD)(l.A,(0,i._)((0,r._)({},n),{name:"FPCommentIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",stroke:"none",fill:"none"},children:[(0,o.Y)("path",{d:"M22.1538 1V2.83333H24V15.6667H22.1538V17.5H16.6154V19.3333H14.7692V21.1667H12.9231V23H11.0769V21.1667H9.23077V19.3333H7.38462V17.5H1.84615V15.6667H0V2.83333H1.84615V1H22.1538Z",fill:c}),(0,o.Y)("rect",{x:"5",y:"9",width:"2",height:"2",fill:"white"}),(0,o.Y)("rect",{x:"11",y:"9",width:"2",height:"2",fill:"white"}),(0,o.Y)("rect",{x:"17",y:"9",width:"2",height:"2",fill:"white"})]}))}},80703:function(e,t,n){"use strict";n.d(t,{A:()=>c});var r=n(69277),i=n(70408),a=n(32641),o=n(10201),l=n(97731),s=n(57753);let c=e=>{var{isHovered:t}=e,n=(0,a._)(e,["isHovered"]);let c=t?s.Q.brightOrange.hex:s.Q.lightGray.hex;return(0,o.FD)(l.A,(0,i._)((0,r._)({},n),{name:"FPShareIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"none"},children:[(0,o.Y)("path",{d:"M5 10H1V22H3V24H21V22H23V10H19V20H5V10Z",fill:c}),(0,o.Y)("path",{d:"M11 0H13V2H15V4H17V6H19V8H15V17H9V8H5V6H7V4H9V2H11V0Z",fill:c})]}))}},54158:function(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(69277),i=n(70408),a=n(32641),o=n(10201),l=n(97731);let s=e=>{var{color:t="#B6B6B6",height:n=18}=e,s=(0,a._)(e,["color","height"]);return(0,o.FD)(l.A,(0,i._)((0,r._)({},s),{height:n,name:"LockFullIcon",svgParams:{height:18,width:18,viewBox:"0 0 18 18"},children:[(0,o.Y)("rect",{x:"5.5",y:"2.5",width:"7",height:"13",rx:"3.5",stroke:t,fill:"none"}),(0,o.Y)("rect",{x:"3.5",y:"8.5",width:"11",height:"8",rx:"0.5",fill:t,stroke:t})]}))}},78943:function(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(69277),i=n(70408),a=n(10201),o=n(45773),l=n(97731);let s=e=>(0,a.Y)(l.A,(0,i._)((0,r._)({},e),{name:"LucideCheck",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,a.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},59821:function(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(69277),i=n(70408),a=n(10201),o=n(41181),l=n(97731);let s=e=>(0,a.Y)(l.A,(0,i._)((0,r._)({},e),{name:"LucideRecommend",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,a.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},16461:function(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(69277),i=n(70408),a=n(32641),o=n(10201),l=n(97731);let s=e=>{var{stroke:t="black",height:n=19,width:s=19}=e,c=(0,a._)(e,["stroke","height","width"]);return(0,o.FD)(l.A,(0,i._)((0,r._)({},c),{name:"NewsletterIcon",svgParams:{height:n,width:s,viewBox:"0 0 19 19"},children:[(0,o.Y)("path",{d:"M3.5 3.5H15.5",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,o.Y)("path",{d:"M3.5 7.5H15.5",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,o.Y)("path",{d:"M3.5 11.5H15.5",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,o.Y)("path",{d:"M3.5 15.5H12",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"})]}))}},81249:function(e,t,n){"use strict";n.d(t,{A:()=>l});var r=n(69277),i=n(70408),a=n(10201),o=n(97731);let l=e=>(0,a.Y)(o.A,(0,i._)((0,r._)({},e),{name:"RightArrowIcon",svgParams:{height:20,width:20},children:(0,a.Y)("path",{d:"M7.5 15L12.5 10L7.5 5",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"})}))},15052:function(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(69277),i=n(70408),a=n(32641),o=n(10201),l=n(97731);let s=e=>{var{stroke:t="black"}=e,n=(0,a._)(e,["stroke"]);return(0,o.Y)(l.A,(0,i._)((0,r._)({},n),{name:"ThreadIcon",svgParams:{height:19,width:19},children:(0,o.Y)("path",{d:"M10.4286 3H8.57143C5.49441 3 3 5.49441 3 8.57143C3 10.2355 4.16477 12.1934 5.32143 13.2143V16L11.3571 14.1429C14.6071 13.067 16 10.9973 16 8.57143C16 5.49441 13.5056 3 10.4286 3Z",stroke:t,"stroke-linejoin":"round"})}))}},53868:function(e,t,n){"use strict";n.d(t,{A:()=>l});var r=n(69277),i=n(70408),a=n(10201),o=n(97731);let l=e=>(0,a.FD)(o.A,(0,i._)((0,r._)({},e),{name:"UsersIcon",svgParams:{height:14,width:15,stroke:"#B6B6B6"},children:[(0,a.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.91732 12.249V11.0824C9.91732 9.79369 8.87265 8.74902 7.58398 8.74902H2.91732C1.62865 8.74902 0.583984 9.79369 0.583984 11.0824V12.249",fill:"#838383",stroke:"#838383",strokeLinecap:"round","stroke-linejoin":"round"}),(0,a.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.24935 6.41423C6.53801 6.41423 7.58268 5.36956 7.58268 4.08089C7.58268 2.79223 6.53801 1.74756 5.24935 1.74756C3.96068 1.74756 2.91602 2.79223 2.91602 4.08089C2.91602 5.36956 3.96068 6.41423 5.24935 6.41423Z",fill:"#838383",stroke:"#838383",strokeLinecap:"round","stroke-linejoin":"round"}),(0,a.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8118 12.2659H13.563C13.5622 11.2025 14.0005 8.82373 11.666 8.82373",fill:"#838383",stroke:"#838383",strokeLinecap:"round","stroke-linejoin":"round"}),(0,a.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33398 1.82227C10.3664 2.08661 11.0886 3.01693 11.0886 4.08268C11.0886 5.14844 10.3664 6.07875 9.33398 6.3431",fill:"#838383",stroke:"#838383",strokeLinecap:"round","stroke-linejoin":"round"})]}))},65754:function(e,t,n){"use strict";n.d(t,{e:()=>m});var r=n(10201),i=n(90232),a=n(48635),o=n(99862),l=n(13950),s=n(84605),c=n(53989),d=n(86500),u=n(35369),p=n(76977),h=n(11510);let m=e=>{let{post:t}=e,n=(0,c.Pu)().getSettingFor("enable_prev_next_nav"),m=(0,h.Iu)(),{iString:g}=(0,s.GO)();if(!n)return null;let f=t.next_post_slug,b=t.previous_post_slug;return f||b?(0,r.Y)(l.DH,{children:(0,r.FD)(p.pT,{justifyContent:f&&b?"space-between":f?"end":"start",paddingY:16,children:[b&&(0,r.Y)(u.$n,{leading:(0,r.Y)(i.A,{size:20}),priority:m?"tertiary":"secondary",size:m?"sm":"md",onClick:()=>{(0,d.u4)(d.qY.PREVIOUS_POST_LINK_CLICKED,{post_id:t.id}),(0,o.route)("/p/".concat(b))},children:g("Previous")}),f&&(0,r.Y)(u.$n,{trailing:(0,r.Y)(a.A,{size:20}),priority:m?"tertiary":"secondary",size:m?"sm":"md",onClick:()=>{(0,d.u4)(d.qY.NEXT_POST_LINK_CLICKED,{post_id:t.id}),(0,o.route)("/p/".concat(f))},children:g("Next")})]})}):null}},11333:function(e,t,n){"use strict";n.d(t,{_:()=>c});var r=n(10201),i=n(17402),a=n(78330),o=n(58398),l=n(86500),s=n(98111);function c(e){let t,{className:n,linkClassName:c,user:d,pub:u,post:p,reaction_token:h,height:m,onChange:g,isStatic:f,children:b,sharedShareDialog:Y,noIcon:_,position:v}=e,[w,y]=(0,i.useState)(!1);return t=p.share_url_override?p.share_url_override:f?p?s.T.SHARE_URL:s.T.SHARE_PUB_URL:"javascript:void(0)",(0,r.FD)("span",{className:n,children:[(0,r.FD)("a",{href:t,onClick:e=>(e=>{if((0,l.u4)(l.qY.POST_SHARE_BUTTON_CLICKED,{position:v,post_id:p.id}),!f)if(e&&e.stopPropagation(),Y){var t;null==(t=e.target)||t.dispatchEvent(new CustomEvent("share-post",{bubbles:!0}))}else y(!0)})(e),className:c,children:[!_&&(0,r.Y)(a.A,{className:"recommend-icon post-meta-icon",isStatic:f,height:m,alt:"Share",stroke:"#757575",fill:"transparent",strokeWidth:f?1:1.5}),b]}),!f&&!Y&&(0,r.Y)(o.Z,{isOpen:w,onClose:()=>y(!1),user:d,pub:u,post:p,reaction_token:h,onChange:g,medium:"web"})]})}},90177:function(e,t,n){"use strict";n.d(t,{s:()=>I});var r=n(69277),i=n(10201),a=n(32485),o=n.n(a),l=n(36066),s=n(27437),c=n(53868),d=n(41935),u=n(39318);function p(e){var t;let{pub:n,post:r}=e,a=(0,u.dJ9)("".concat((0,u.$_T)(n),"/p/").concat(r.slug,"/authors.svg"),800,{format:"png",crop:"scale"}),{height:o,width:l}={width:((null==r||null==(t=r.publishedBylines)?void 0:t.length)-1)*32+40+4,height:44};return(0,i.Y)("img",{src:a,width:l,height:o})}var h=n(84605),m=n(53989),g=n(13022),f=n(24078),b=n(22057),Y=n(76977),_=n(49095),v=n(16291),w=n(4016),y=n(56262),k=n(19601),S=n(98949),C=n(82776);function I(e){let{post:t,pub:n,user:a,showDate:I,showDatetime:E,isStatic:F,className:D,postReactionToken:A,onChange:x,allowEdit:N,hidePinning:T,showEmailSent:P,allowSendEmail:O,allowMobileFooter:B,onCommentsClick:L,showRestackModal:R,setFooterShown:M}=e,H=(0,S.Fr)({checkFirst4:!0}),V="undefined"==typeof window,U=(0,C.getBylineUsers)(t),{language:j}=(0,h.GO)(),W=E?(0,v.A)(t.post_date).locale(j).standardDatetime():F?(0,v.A)(t.post_date).locale(j).standardDate():(0,v.A)(t.post_date).locale(j).standardDateOrTime(),{getSettingFor:z}=(0,m.Pu)(),J=n.bylines_enabled&&(0,C.getPrintedByline)(n,t)&&"podcast"!==t.type,K=J&&n.byline_images_enabled&&U.some(e=>{let{photo_url:t}=e;return!!t}),q="page"!==t.type,G=H&&K&&U.length>2,Z=(null==n?void 0:n.community_enabled)&&t.slug&&!t.is_draft&&(0,C.showCommentsOnPost)({publication:n,post:t}),$=J&&1===U.length&&U[0].is_guest&&U[0].primaryPublicationSubscribeUrl&&U[0].primaryPublicationId!==n.id&&!t.is_draft&&!(0,g.Ay)("dont_show_guest_byline"),X=(0,C.oxfordComma)(U.map(e=>F?(0,i.Y)("a",{className:"byline-profile-link",href:(0,u.laT)(e,n,{base:F}),onClick:e=>e.stopPropagation(),children:e.name}):(0,i.FD)(Y.Ye,{inline:!0,gap:4,alignItems:"center",children:[(0,i.Y)(s.ProfileHoverCard,{subject:e,utmSource:"byline",trigger:(0,i.Y)("a",{className:"byline-profile-link",href:(0,u.laT)(e,n,{base:F}),onClick:e=>e.stopPropagation(),children:e.name})}),!F&&(0,i.Y)(_.UserStatusSymbols,{status:e.status,size:"sm",userId:e.id})]}))),Q=!t.is_draft&&(0,k.A)(a,{enable_restacking:!!z("enable_restacking")},t,n,F);return(0,i.FD)("div",{className:o()("post-subheader",D),children:[(0,i.FD)("div",{className:o()("left",{vertical:G}),children:[K&&(F?(0,i.Y)(p,{pub:n,post:t}):(0,i.Y)(b.Z,{users:U.map(e=>{let{id:t,name:n,photo_url:r}=e;return{id:t,name:n,photo_url:r}}),max:5,size:36,renderAvatar:e=>(0,i.Y)(f.tp,(0,r._)({},e))})),(0,i.FD)("div",{className:"label-stack",children:[J&&(0,i.Y)("div",{className:"bylines",children:(0,i.Y)("span",{className:"byline-names",children:X})}),$&&(0,i.FD)("div",{className:"guest-author-publication",children:["Writes\xa0",(0,i.Y)("a",{className:"guest-author-publication-name",href:U[0].primaryPublicationUrl,title:U[0].primaryPublicationName,children:U[0].primaryPublicationName}),"\xa0\xb7\xa0",(0,i.Y)("a",{className:"guest-author-publication-subscribe",href:U[0].primaryPublicationSubscribeUrl,children:"Subscribe"})]}),(0,i.FD)("div",{className:"publish-context",children:["adhoc_email"===t.type?(0,i.Y)(c.A,{className:"audience-icon adhoc-email-icon",height:16,isStatic:F}):q&&(0,y.isPaidAudience)(t.audience)&&!(0,w.zM)({post:t})&&(0,i.Y)(l.A,{audience:t.audience,className:"audience-icon audience-lock-icon",size:16,isStatic:F,thin:!0}),(I||E)&&t.post_date&&!t.is_draft&&(0,i.Y)("time",{dateTime:(0,v.A)(t.post_date).toISOString(),children:W}),t.is_draft&&(I||E)&&"Draft"]})]})]}),(0,i.FD)("div",{className:"right",children:[H&&!V&&B&&(0,i.Y)(d.I2,{post:t,pub:n,user:a,isStatic:F,onChange:x,allowEdit:N,hidePinning:T,showEmailSent:P,allowSendEmail:O,hideComments:!Z,onCommentsClick:L,showRestackButton:Q,showRestackModal:R,setFooterShown:M,postReactionToken:A}),!H&&(0,i.Y)(d.xx,{post:t,pub:n,user:a,isStatic:F,style:"button",onChange:x,allowEdit:N,hidePinning:T,showEmailSent:P,allowSendEmail:O,labelStyle:"counts-or-none",hideComments:!Z,onCommentsClick:L,position:"post-header",showRestackButton:Q,showRestackModal:R,showClipping:"podcast"===t.type,editButtonIsLast:!0,postReactionToken:A})]})]})}},15113:function(e,t,n){"use strict";n.d(t,{A:()=>W});var r=n(99851),i=n(69277),a=n(70408),o=n(32641),l=n(10201),s=n(83673),c=n.n(s),d=n(38221),u=n.n(d),p=n(2404),h=n.n(p),m=n(41811),g=n(17402),f=n(52117),b=n(69843),Y=n.n(b),_=n(56265),v=n(23623),w=n(58925),y=n(46271),k=n(86500),S=n(68349),C=n(76977),I=n(63136),E=n(28916),F=n(49807),D=n(7642);function A(e){var t,n,r,a,o;let{nuxModal:s,showRestackNux:c}=(0,E.w)("post");return(0,l.FD)(l.FK,{children:[s,!Y()(null==(t=e.selection)?void 0:t.text)&&(null==(o=e.selection)||null==(a=o.text)||null==(r=a.split)||null==(n=r.call(a," "))?void 0:n.length)>=3&&(0,l.Y)(x,(0,i._)({onShare:c},e))]})}function x(e){let{pub:t,post:n,selection:r,onClose:i,userInteractionDisabled:a}=e,o=(0,y.Jd)(),[s,c]=(0,g.useState)(!1);(0,g.useEffect)(()=>{c(!0)},[]);let d=async()=>{(0,k.u4)(k.qY.VIDEO_QUOTE_TEXT_SELECTED,{post_id:n.id,selection_id:r.id}),(0,S.V2)((0,F.U_V)(t,n.id,{selectionForQuote:r.text}),{local_navigation:!1})};(0,g.useEffect)(()=>(window.addEventListener("scroll",i,{passive:!0,capture:!0,once:!0}),()=>{window.removeEventListener("scroll",i,{capture:!0,once:!0})}),[i]);let u=r.text&&r.text.length>2048;return(0,l.Y)(v.a,{children:(0,l.Y)(C.I1,{style:{top:r.y-48-12,left:r.rect.x+r.rect.width/2,transform:"translateX(-50%)",pointerEvents:a?"none":"auto",maxWidth:240},justifyContent:"center",outline:"detail",shadow:"md",radius:"md",className:"".concat(D.A.popover," ").concat(s?D.A.visible:""," ").concat(a?D.A.disabled:""),padding:4,gap:4,children:(0,l.FD)(w.ut,{onClick:d,disabled:!!(!o||u),children:[(0,l.Y)(_.A,{size:20,stroke:"var(--color-utility-white)"}),(0,l.Y)(I.EY.B4,{color:"vibrance-primary",weight:"medium",children:u?"Selection too long":"Use this text"})]})})})}var N=n(52820),T=n(52742),P=n(94729),O=n(2481),B=n(57324);let L=(0,g.createContext)({action:null,selectedImage:null}),R=async e=>{let{imgSrc:t,post:n,pub:r}=e,i=await (0,P.x6)("/api/v1/post_selection/image",{method:"PUT",json:{post_id:n.id,publication_id:r.id,img_src:t}});if(i instanceof Error)throw i;return i.selection.id},M=async e=>{let{imgSrc:t,pub:n,post:r}=e,i=await R({imgSrc:t,post:r,pub:n});return(0,F.wu9)(n,r,{urlParams:{utm_campaign:B._9.postSelection,utm_medium:B.Jn.web,imgSelection:i}})},H=e=>{var t;let{children:n,imageState:r,selectedImageIndex:i,selectedImageAction:a=null,onClose:o,pub:s,post:c,onLike:d}=e,u=(0,O.NP)(),[p,h]=(0,g.useState)(i&&null!=(t=null==r?void 0:r[i])?t:null);(0,g.useEffect)(()=>{if(null!=i&&r){var e;h(null!=(e=r[i])?e:null)}},[r,i]);let m=(0,g.useCallback)(async()=>{(null==p?void 0:p.src)&&u.open({restackUrl:await M({imgSrc:null==p?void 0:p.src,pub:s,post:c}),onCompose(){h(null),o()},onDismiss(){h(null),o()}})},[u,o,c,s,null==p?void 0:p.src]);(0,g.useEffect)(()=>{p&&"restack"===a&&!u.state.isOpen&&m()},[a,u.state.isOpen,p,m]);let f=null!=c&&"comment_count"in c&&"number"==typeof c.comment_count?c:null;return(0,l.FD)(L.Provider,{value:{action:a,selectedImage:p},children:[n,(0,l.Y)(T.V,{isOpen:"view"===a,modalContent:r,onClose:o,step:null!=i?i:0,post:f,publication:s,onLike:d})]})};var V=n(90292),U=n(82776);let j="\n:is(\n  div.body.markup, .pullquote, blockquote, li, caption, .footnote-content\n) > :is(\n  h1, h2, h3, h4, h5, h6, p:not(.button-wrapper)\n)\n";class W extends g.Component{async componentDidMount(){if(!this.body.current)return;let e=Array.from(this.body.current.querySelectorAll(j));this.originalParagraphState=e.map(e=>({text:e.textContent}));let t=new URL(window.location.href).searchParams.get("img"),n=new URL(window.location.href).searchParams.get("cutoffElementIndex"),r=Array.from(this.body.current.querySelectorAll(".image-link.image2"));r.forEach(e=>{"A"!==e.tagName&&console.warn("while parsing prosemirror doc for images, expected an anchor tag, but got",e.tagName)});let i=c()(r.map(e=>{let t=e.querySelector("img");if(!t)return console.warn("missing img when rendering prosemirror document"),null;let n=t.getAttribute("data-attrs"),r=n?JSON.parse(n):{},i=r.width/r.height,a=r.resizeWidth?r.resizeWidth/i:r.height,o=r.resizeWidth?r.resizeWidth/a:i;return{element:e,image:t,attrs:r,extraAttrs:{imageRatio:i,resizeHeight:a,resizeRatio:o}}})),a=0;if(t){let e=i.find(e=>e.attrs.src===t);e&&(a=e.image.getBoundingClientRect().top-65)}else if(n){let e=this.body.current.querySelector("*:nth-child(".concat(n,")"));e&&e.scrollIntoView()}if(i=(i=i.filter(e=>Number(e.attrs.height)>240&&e.extraAttrs.resizeHeight>240)).filter(e=>e.extraAttrs.imageRatio<4&&e.extraAttrs.resizeRatio<4),this.originalImageState=i.map(e=>{let t=e.image.src,n=null,r=e.element.parentElement;if(r&&"FIGURE"===r.tagName){var i;n=null==(i=r.querySelector(":scope > figcaption"))?void 0:i.textContent}return{src:t,attrs:e.attrs,caption:n}}),t&&this.originalImageState){window.scrollTo({top:a});let e=this.originalImageState.findIndex(e=>e.attrs.src===t);e>=0&&this.setState({selectedImgIndex:e})}"undefined"!=typeof window&&(document.addEventListener("selectionchange",this.onSelectionChange),document.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mouseup",this.onMouseUp))}componentWillUnmount(){"undefined"!=typeof window&&(document.removeEventListener("selectionchange",this.onSelectionChange),document.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mouseup",this.onMouseUp))}shouldComponentUpdate(e,t){return this.props.html!==e.html||this.state.selectedImgIndex!==t.selectedImgIndex||this.state.selection!==t.selection||this.state.selectionUserInteractionDisabled!==t.selectionUserInteractionDisabled||this.state.selectingTextForQuote!==t.selectingTextForQuote}onLinkClick(e){var t,n;if(!e.target||!(null==(t=e.target)?void 0:t.nodeName)||"A"!==e.target.nodeName&&(null==(n=e.target.parentNode)?void 0:n.nodeName)!=="A")return;let r="A"===e.target.nodeName?e.target:e.target.parentNode;if((0,k.u4)(k.qY.POST_LINK_CLICKED,{post_id:this.props.post.id,publication_id:this.props.post.publication_id,url:r.href}),window.location.host===r.host){let t=(0,U.transformDocumentLink)(r.href);t!==r.href&&(0,S.V2)(t,{local_navigation:!1,event:e});return}e.preventDefault(),(0,U.handleDocumentLinkClick)(r.href)}getSelectionState(){if(this.props.trackSelection&&window.getSelection)try{let e=window.getSelection();if(!e||e.isCollapsed||e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset)return;let t=this.findParentParagraph(e.anchorNode);if(!t)return;let n=this.findParentParagraph(e.focusNode);if(!n||!this.body.current)return;let r=Array.from(this.body.current.querySelectorAll(j)),i=r.findIndex(e=>e.isSameNode(t));if(-1===i)return;let a=r.findIndex(e=>e.isSameNode(n));if(-1===a)return;let o=this.getCharacterOffsetParagraph(t,e.anchorNode,e.anchorOffset);if(null===o)return;let l=this.getCharacterOffsetParagraph(n,e.focusNode,e.focusOffset);if(null===l)return;let s=i>a||i===a&&o>l,c=e.getRangeAt(0).getBoundingClientRect();return{startParagraph:s?a:i,endParagraph:s?i:a,startOffset:s?l:o,endOffset:s?o:l,y:c.y,height:c.height,rect:c,text:e.toString()}}catch(e){console.error("Failed to parse selection:",e)}}findParentParagraph(e){return e?["P","H1","H2","H3","H4","H5","H6"].includes(e.nodeName)?e:this.findParentParagraph(e.parentNode):null}isAncestorOf(e,t){return null!==e&&(!!e.isSameNode(t)||this.isAncestorOf(e.parentNode,t))}getCharacterOffsetParagraph(e,t,n){let r=n;for(let n=0;n<e.childNodes.length;n++){let a=e.childNodes[n];if(a){if(this.isAncestorOf(t,a))break;else if(a instanceof HTMLElement){if("BR"===a.tagName)r+=1;else if("footnote-anchor"!==a.className){var i;r+=(null==(i=a.textContent)?void 0:i.length)||0}}}}return r}shouldShowImageViewerModal(){let{selectedImgIndex:e}=this.state;return null!=e}render(){var e;let t=this.props,{pub:n,isAboutPage:r}=t,s=(0,o._)(t,["pub","isAboutPage"]),{children:c,html:d}=this.props,{selection:u,selectedImgIndex:p,shouldUseSelectionV2Popover:h,selectingTextForQuote:m,imgAction:g}=null!=(e=this.state)?e:{};"undefined"==typeof window||m||"true"===new URLSearchParams(window.location.search).get("selectQuote")&&this.setState({selectingTextForQuote:!0}),d&&(c=this.memoizedDeepPrepareDocumentBody(d,n,(0,a._)((0,i._)({},s),{isAboutPage:r})))&&(d=null);let f=!!c&&Array.from(c).some(e=>{var t,n,r,i;return(null==(t=e.props)?void 0:t.className)==="latex-rendered"||(null==(i=e.props)||null==(r=i.children)||null==(n=r.props)?void 0:n.className)==="latex-rendered"}),b=(0,l.Y)(l.FK,{children:(0,l.FD)(H,{imageState:this.originalImageState,selectedImageIndex:p,selectedImageAction:g,onClose:this.onCloseViewer,pub:n,post:this.props.post,onLike:this.props.onLike,children:[(0,l.Y)("div",{className:"body markup",dangerouslySetInnerHTML:d?{__html:d}:null,ref:this.body,onClick:this.onDocumentClick,onMouseDown:this.onBodyMouseDown,onMouseUp:this.onMouseUp,dir:"auto",children:c}),h&&!m?(0,l.Y)(w.YA,{pub:n,post:this.props.post,selection:u,onClose:this.clearActiveSelection,userInteractionDisabled:this.state.selectionUserInteractionDisabled,themeVariables:this.props.themeVariables}):u&&(0,l.Y)(A,{pub:n,post:this.props.post,selection:u,onClose:this.clearActiveSelection,userInteractionDisabled:this.state.selectionUserInteractionDisabled})]})});return f&&!s.isStatic?(0,l.Y)(V.q,{children:b}):b}constructor(e,t){super(e,t),(0,r._)(this,"body",void 0),(0,r._)(this,"originalParagraphState",void 0),(0,r._)(this,"originalImageState",void 0),(0,r._)(this,"state",{selection:null,urlSelection:null,selectedImgIndex:null,selectionUserInteractionDisabled:!1,shouldUseSelectionV2Popover:!1,imgAction:null}),(0,r._)(this,"onBodyMouseDown",()=>{this.setState({selectionUserInteractionDisabled:!0})}),(0,r._)(this,"onMouseUp",()=>{this.setState((e,t)=>e.selectionUserInteractionDisabled?(e.selection&&t.trackSelection&&(0,k.u4)(k.qY.POST_TEXT_SELECTED,{post_id:t.post.id,post_audience:t.post.audience,post_type:t.post.type}),{selectionUserInteractionDisabled:!1}):null)}),(0,r._)(this,"onSelectionChange",u()(()=>{let e=this.getSelectionState();if(e){let t=this.shouldShowShareSelectionPopover();this.setState({selection:e,shouldUseSelectionV2Popover:t})}else this.state.selection&&this.setState({selection:null})},10)),(0,r._)(this,"onDocumentClick",e=>{if(!e.target)return;let t=e.target.closest(".image-link.image2");if(t&&this.originalImageState){var n,r;let i=t.querySelector("img"),a=this.originalImageState.findIndex(e=>e.src===(null==i?void 0:i.src)),o=this.originalImageState[a],l=e.target,s=(null==l?void 0:l.classList.contains("restack-image"))||(null==l||null==(n=l.parentElement)?void 0:n.classList.contains("restack-image")),c=(null==l?void 0:l.classList.contains("view-image"))||(null==l||null==(r=l.parentElement)?void 0:r.classList.contains("view-image")),d=o&&!!o.attrs.href;if(o&&(!d||s||c)){e.preventDefault(),this.setState({selectedImgIndex:a,imgAction:s?"restack":"view"});return}}if(this.props.skipTrackClick)return null;this.onLinkClick(e)}),(0,r._)(this,"onCloseViewer",()=>{this.setState({selectedImgIndex:null,imgAction:null})}),(0,r._)(this,"clearActiveSelection",()=>{this.setState({selection:null})}),(0,r._)(this,"closeImageViewerModal",()=>{this.setState({selectedImgIndex:null})}),(0,r._)(this,"shouldShowShareSelectionPopover",()=>{let e;return"undefined"!=typeof window&&(e="true"===new URLSearchParams(window.location.search).get("selectQuote")),!e}),(0,r._)(this,"memoizedDeepPrepareDocumentBody",(0,m.A)(f.bs,h())),this.body=(0,g.createRef)()}}(0,r._)(W,"contextType",N.qL)},99927:function(e,t,n){"use strict";n.d(t,{V:()=>_});var r=n(69277),i=n(70408),a=n(10201),o=n(17402),l=n(13589),s=n(85688),c=n(63446),d=n(16514),u=n(15894),p=n(76977),h=n(39318),m=n(57324);let g=e=>{let{children:t,isFreeSubscribed:n,isOpen:r,isSubscribed:i,pub:o,onClose:l}=e,s=(0,h.eV6)(o,{utm_source:m.VU.downloadPdfButton,simple:!0,next:(0,h.yRP)(document.location.href,{triggerPDF:!0}),addBase:!0});return(0,a.Y)(d.w,{closeOnOutsideClick:!0,content:(0,a.FD)(p.I1,{gap:4,position:"relative",children:[(0,a.Y)(u.T,{preset:"d4-serif",children:i?"Paid subscribers can now save articles as PDFs, formatted for printing out and enjoying offline.":"Saving articles as PDFs, formatted for printing and reading offline, is a benefit we're proud to offer our\n              paid subscribers. ".concat(n?"Upgrade":"Sign up"," today to unlock this feature.")}),!i&&(0,a.Y)(p.Ye,{children:(0,a.Y)(c.v,{href:s,localNavigation:!1,size:"sm",trailingIcon:"chevron-right",variant:"tertiary",children:n?"Upgrade now":"Subscribe now"})})]}),isOpen:r,onClose:l,children:t})};var f=n(86500),b=n(68349),Y=n(49807);let _=e=>{let{post:t,pub:n,user:c}=e,[d,u]=(0,l.Mk)(),[h,m]=(0,o.useState)(!1),_=!!(null==c?void 0:c.is_subscribed),v=!!(null==c?void 0:c.is_free_subscribed);return(0,o.useEffect)(()=>{let e=new URL(document.location.href);if(e.searchParams.get("triggerPDF")){if(_){var r;(0,b.V2)((0,Y.MGs)(n,t.id,{token:"token"in window._preloads&&null!=(r=window._preloads.token)?r:void 0}),{local_navigation:!1,newTab:!0})}e.searchParams.delete("triggerPDF"),window.history.replaceState({},"",e)}},[_,t.id,n]),(0,a.Y)(g,{isFreeSubscribed:v,isOpen:h,isSubscribed:_,pub:n,onClose:()=>{m(!1)},children:(0,a.Y)(p.pT,(0,i._)((0,r._)({},u),{cursor:"pointer",onClick:()=>{((0,f.u4)(f.qY.POST_PDF_BUTTON_CLICKED,{post_id:t.id}),_)?(0,b.V2)((0,Y.MGs)(n,t.id),{local_navigation:!1,newTab:!0}):m(!h)},children:(0,a.Y)(s.A,{height:24,isHovered:d,width:24})}))})}},65812:function(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(10201),i=n(97432),a=n(68349),o=n(39318);let l="emailInput-VN3GpJ";function s(e){let{pub:t,user:n,post:s,utmSource:c,submitButtonText:d,preset:u="primary",allowEmptyInput:p,onSuccess:h}=e,m="accent"===u?"".concat(l," ").concat("emailInputAccent-tTlqVa"," fp-email-input-accent"):"".concat(l," fp-email-input");return(0,r.Y)(i.A,{allowEmptyInput:p,className:"emailContainer-JfVhvU",inputClassName:m,placeholder:"ENTER YOUR EMAIL",promptClassName:"prompt-j7JgJU",pub:t,source:c,submitButtonText:null!=d?d:"SIGN UP",subscribeButtonClassName:"accent"===u?"".concat("subscribeButtonAccent-pwy2Eg"," fp-subscribe-button-accent"):"".concat("subscribeButton-fDC87J"," fp-subscribe-button"),user:n,onAccentBackground:!0,onSuccess:e=>{if(h)return h(e);(0,a.V2)((0,o.my9)(t,{just_signed_up:!0,autoSubmit:!!e.body.prompt_to_login||void 0,email:e.body.email,next:(0,o.wu9)(t,s)}),{replace:!0,local_navigation:!1})}})}},69656:function(e,t,n){"use strict";n.d(t,{Q:()=>h});var r=n(10201),i=n(48697),a=n(17402),o=n(15894),l=n(46271),s=n(68410),c=n(35369),d=n(39318),u=n(57324);let p={container:"container-fkyH3f",content:"content-UDY69G",link:"link-R3vXCZ",dismissButton:"dismissButton-z1E0Nw"},h=e=>{let{pub:t,onDismiss:n}=e,[h,m]=(0,a.useState)(!1),{isMobile:g}=(0,s.sM)(),f=(0,l.Jd)(),b=(0,a.useCallback)(()=>"undefined"==typeof window?"#":(0,d.eV6)(t,{addBase:!0,next:(0,d.yRP)(window.location.href,{follow:!0}),utm_source:u.VU.fixedFooterPaywall,utm_medium:u.Jn.web}),[t]),Y=(0,a.useCallback)(()=>"undefined"==typeof window?"#":(0,d.eV6)(t,{addBase:!0,isSignInAttempt:!0,next:(0,d.yRP)(window.location.href,{follow:!0}),utm_source:u.VU.fixedFooterPaywall,utm_medium:u.Jn.web}),[t]);return h?null:(0,r.FD)("div",{className:"".concat(p.container," ").concat(p.text),children:[(0,r.FD)(o.T,{preset:"detail-large",children:[g?"To read ":"To read this article, ",f?null:(0,r.FD)(r.FK,{children:[(0,r.Y)("a",{className:p.link,href:Y(),native:!0,children:"sign in"})," ","or"," "]}),(0,r.Y)("a",{className:p.link,href:b(),native:!0,children:"subscribe"})]}),(0,r.Y)(c.Nm,{"aria-label":"Dismiss",className:p.dismissButton,onClick:()=>{m(!0),null==n||n()},children:(0,r.Y)(i.A,{size:20})})]})}},16514:function(e,t,n){"use strict";n.d(t,{w:()=>u});var r=n(69277),i=n(70408),a=n(32641),o=n(10201),l=n(32485),s=n.n(l),c=n(13589),d=n(13950);let u=e=>{let{children:t,closeOnOutsideClick:n,content:l,isOpen:u,onClose:p,onToggle:h}=e,{arrowProps:m,layerProps:g,renderLayer:f,triggerProps:b}=(0,c.Z4)({auto:!0,containerOffset:28,isOpen:u,overflowContainer:!0,placement:"bottom-center",possiblePlacements:["bottom-center"],triggerOffset:16,onOutsideClick:n?p:void 0}),Y=g.style,{style:_}=g,v=(0,a._)(g,["style"]),w="undefined"==typeof window;return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",(0,i._)((0,r._)({},b),{onClick:()=>{null==h||h(!u)},children:t})),u&&!w&&f((0,o.FD)("div",(0,i._)((0,r._)({style:Y},v),{className:s()("popoverContainer-EjJsJc","the-free-press-theme"),children:[(0,o.Y)(d.DH,{children:l}),(0,o.Y)(c.i3,(0,i._)((0,r._)({},m),{borderColor:"var(--color-fg-primary-themed)",borderWidth:2,size:10}))]})))]})}},77921:function(e,t,n){"use strict";n.d(t,{n:()=>I});var r=n(69277),i=n(10201),a=n(32485),o=n.n(a),l=n(17402),s=n(13950),c=n(63446),d=n(65812),u=n(15894),p=n(84565),h=n(85478),m=n(68410),g=n(35369),f=n(76977),b=n(39318),Y=n(57324);let _="wrapper-TFWk0w",v="fade-vBsC3Z",w="signInLink-TZ6ND4",y=[{name:"Annual",price:"$8.33/month",billedAs:"$100 yearly",save:"17%!"},{name:"Monthly",price:"$10/month",billedAs:"$10 monthly"}],k=(0,b.dJ9)("".concat((0,b.Ewe)(),"/img/thefp/save-ribbon.svg"),200),S=e=>{let{onPlanChange:t}=e,[n,r]=(0,l.useState)("Annual"),a=e=>{r(e),null==t||t(e)},{isMobile:s}=(0,m.sM)();return(0,i.Y)(f.pT,{direction:s?"column":"row",gap:0,style:{width:"100%"},children:y.map(e=>(0,i.FD)("div",{className:o()("subPlanContainer-nTA_GR",n===e.name&&"selected-_2BPlx"),onClick:()=>a(e.name),children:[(0,i.Y)("input",{checked:n===e.name,className:"planRadio-wVgJ5P",name:"plan",type:"radio",value:e.name,onChange:()=>a(e.name)}),(0,i.FD)(f.I1,{alignItems:"start",gap:8,children:[(0,i.Y)(u.T,{preset:"lg-preview-byline",children:e.name}),(0,i.Y)(u.T,{color:"blue",preset:"d2-serif-bold",style:{paddingBottom:"2px"},children:e.price}),(0,i.FD)(u.T,{className:"billedAs-aSsRNm",preset:"caption",children:["Billed as ",e.billedAs]}),e.save&&(0,i.FD)("div",{className:"banner-PABwyI",style:{backgroundImage:'url("'.concat(k,'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"right center",display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"4px 8px 4px 16px"},children:[" ",(0,i.FD)(u.T,{color:"white",preset:"detail-small",children:["Save ",e.save]})]})]})]},e.name))})},C=e=>{let{pub:t,post:n,isTextPost:r}=e,{isMobile:a}=(0,m.sM)();return(0,i.FD)(f.pT,{className:o()("thanksgivingPaywall-mcl_bb",{[v]:r}),direction:a?"column":"row",children:[a?(0,i.Y)("img",{className:"thanksgivingPaywallImageMobile-ai8GXm",src:(0,b.dJ9)("/img/thefp/thanksgiving_sale/paywall_mobile2.png",500)}):(0,i.Y)("img",{className:"thanksgivingPaywallImage-ky8DsM",src:(0,b.dJ9)("/img/thefp/thanksgiving_sale/paywall_desktop2.png",500)}),(0,i.FD)(f.I1,{alignItems:"center",justifyContent:"center",padding:16,children:[(0,i.Y)(u.T,{preset:"h5-sans-compressed",style:{marginBottom:"4px"},children:"Limited Time Offer"}),(0,i.FD)(u.T,{preset:"d2-serif",style:{marginBottom:"24px"},children:["Get 25% off an annual subscription to ",(0,i.Y)("em",{children:"The Free Press"}),"."]}),(0,i.Y)(c.v,{href:(0,b.my9)(t,{utm_source:Y.VU.meteredPostPaywall,next:(0,b.wu9)(t,n)}),localNavigation:!1,style:{marginBottom:"24px",width:"100%"},variant:"primary",children:"Get 25% off now!"}),(0,i.FD)(u.T,{preset:"detail-small",children:["Already have an account?","  ",(0,i.Y)("a",{className:w,href:(0,b.my9)(t,{isSignInAttempt:!0,next:(0,b.wu9)(t,n)}),children:"Sign in"})]})]})]})},I=e=>{let{post:t,user:n,pub:a,freeSignupEmail:c}=e,m="newsletter"===t.type,y=!!(c||(null==n?void 0:n.is_free_subscribed)||!t.current_user_post_meter),k=(0,p.NQ)(),[I,E]=(0,l.useState)("Annual"),F=(0,h.mJ)().getConfigFor("thefp_thanksgiving_sale");if(y){if(F)return(0,i.Y)(s.DH,{children:(0,i.Y)(f.I1,{alignItems:"center",gap:24,justifyContent:"center",textAlign:"center",children:(0,i.Y)(C,{isTextPost:m,post:t,pub:a})})});let e="treatment"===k.getExperimentVariant("thefp_paywall_with_plans");return k.exposeExperiment("thefp_paywall_with_plans",{ignoreDownsampling:!0}),(0,i.Y)(s.DH,{children:(0,i.FD)(f.I1,{alignItems:"center",className:o()(_,{[v]:m,"wrapperWithPlans-PEZhOz":e}),gap:24,justifyContent:"center",textAlign:"center",children:[(0,i.FD)(f.I1,{gap:16,children:[(0,i.Y)(u.T,{preset:"h5-sans",children:"Continue Reading The Free Press"}),!!t.current_user_post_meter&&(0,i.Y)(u.T,{preset:"d2-serif",children:"Youâ€™ve reached your monthly article limit"}),(0,i.Y)(u.T,{preset:"d3-serif",children:"To support our journalism, and unlock all of our investigative stories and provocative commentary about the world as it actually is, subscribe below."}),e&&(0,i.Y)(S,{onPlanChange:E})]}),(0,i.Y)(g.Nm,{className:"subscribeButtonLarge-lAytbH",href:(0,b.my9)(a,(0,r._)({utm_source:Y.VU.meteredPostPaywall,next:(0,b.wu9)(a,t)},e&&I&&{plan:I.toLowerCase()})),localNavigation:!1,children:(0,i.Y)(u.T,{color:"white",preset:"detail-large",children:"Subscribe Now"})}),(0,i.FD)(f.Ye,{alignItems:"center",gap:8,justifyContent:"center",children:[(0,i.Y)(u.T,{preset:"detail-small",children:"Already have an account?"}),(0,i.Y)("a",{className:w,href:(0,b.my9)(a,{isSignInAttempt:!0,next:(0,b.wu9)(a,t)}),children:(0,i.Y)(u.T,{color:"accent",preset:"detail-large",children:"Sign In"})})]})]})})}return(0,i.Y)(s.DH,{children:(0,i.FD)(f.I1,{alignItems:"center",className:o()(_,{[v]:m}),gap:24,justifyContent:"center",textAlign:"center",children:[(0,i.FD)(f.I1,{gap:16,children:[(0,i.Y)(u.T,{preset:"h5-sans",children:"Enjoying the story?"}),(0,i.Y)(u.T,{preset:"d2-serif",children:"Enter your email to read this article and receive our daily newsletter."})]}),(0,i.Y)(d.A,{post:t,pub:a,user:n,utmSource:Y.VU.meteredPostRegistrationWall}),(0,i.FD)(f.Ye,{gap:16,children:[(0,i.Y)(u.T,{preset:"caption",children:"Already have an account?"}),(0,i.Y)("a",{className:w,href:(0,b.my9)(a,{isSignInAttempt:!0,next:(0,b.wu9)(a,t)}),children:(0,i.Y)(u.T,{color:"accent",preset:"caption",children:"Sign In"})})]})]})})}},1842:function(e,t,n){"use strict";n.d(t,{_:()=>_});var r=n(10201),i=n(32485),a=n.n(i),o=n(38221),l=n.n(o),s=n(17402),c=n(17988),d=n(12293),u=n(15894),p=n(68349),h=n(76977),m=n(75303),g=n(82776);let f="label-gHN5_J",b="active-label-ndUdOP",Y=e=>{let{postId:t,toc:n,title:i,activeItem:o,wordCount:c,leftMargin:Y,commentCount:_,showComments:v,onItemClick:w}=e,y=(0,s.useRef)(null),[k,S]=(0,s.useState)(!1),[C,I]=(0,s.useState)("0"),[E,F]=(0,s.useState)("0"),D=(0,s.useCallback)(()=>{if(y.current){var e,t,n,r,i,a,o;let l=y.current.getBoundingClientRect(),s=null==(e=y.current.parentElement)?void 0:e.getBoundingClientRect(),c=null==(n=y.current.parentElement)||null==(t=n.parentElement)?void 0:t.getBoundingClientRect(),d=window.innerHeight/2;if(l&&s)if(d+2>s.top+l.height/2){let e=(r=c,i=l.height,document.getElementById("discussion")?Number(null==(o=document.getElementById("discussion"))||null==(a=o.getBoundingClientRect())?void 0:a.top)+i/2+20:Number(null==r?void 0:r.bottom)-i/2);e<=d?(S(!0),I(e.toString())):(S(!0),I("50%")),F(s.left.toString())}else S(!1),I("0"),F("0")}},[k,y,C]),A=(0,s.useMemo)(()=>l()(D,25,{trailing:!0,leading:!0,maxWait:60}),[D]);(0,s.useEffect)(()=>(window.addEventListener("scroll",A,{passive:!0}),()=>{window.removeEventListener("scroll",A)}),[k,A]);let x=Y+Number(E)+"px";return(0,r.Y)("div",{id:"toc",style:{position:"relative"},children:(0,r.Y)("div",{ref:y,className:a()("container-NR9v7N",k&&"fixed-gIIqpc"),style:{top:"50%"===C?"50%":Number(C),left:x},children:(0,r.FD)(h.I1,{flex:"grow",gap:4,children:[i&&(0,r.FD)("div",{className:a()("header-ggAXv9",f),id:"header"===o?b:void 0,onClick:()=>w(document.querySelector(".markup")),children:[(0,r.Y)(u.T,{className:"title-3Yeuyx",color:"header"===o?"primary":"disabled",preset:"detail-large",children:i}),!!c&&(0,r.FD)(u.T,{color:"header"===o?"primary":"disabled",preset:"caption",children:[Math.round(c/g.READ_WORDS_PER_MINUTE)," min read"]})]}),n.map((e,n)=>{let i=(0,p.HN)(e.text,t),a=o===i;return(0,r.Y)(m.AE,{href:"#\xa7".concat(i),onClick:e=>{e.preventDefault(),w(document.getElementById("\xa7".concat(i)))},children:(0,r.Y)(h.Ye,{children:(0,r.Y)(u.T,{className:f,color:a?"primary":"disabled",id:a?b:void 0,preset:"body",children:e.text})})},n)}),v&&(0,r.FD)("div",{className:a()("commentContainer-dmiFCB",f),onClick:()=>w(document.getElementById("discussion")),children:[(0,r.Y)(d.A,{isHovered:"discussion"===o}),_]})]})})})},_=e=>{let{postId:t,toc:n,title:i,wordCount:a,leftMargin:o=0,commentCount:l,showComments:d}=e,u=((e,t)=>{let[n,r]=(0,s.useState)("header"),i=[{text:"header",id:"header",selector:".markup > p:first-of-type"},...e,{text:"discussion",id:"discussion",selector:"#discussion > div"}];return(0,s.useEffect)(()=>{let e=[];return i.forEach(n=>{let i=(0,p.HN)(n.text,t),a=document.getElementById("\xa7".concat(i))||n.selector&&document.querySelector(n.selector);if(a){let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.intersectionRatio>=.3&&r(i)})},{rootMargin:"0% 0px -70% 0px"});t.observe(a),e.push(t)}}),()=>e.forEach(e=>e.disconnect())},[e]),n})(n,t),h=(0,c.useMediaQuery)({maxWidth:1100});return n.length<2||h?null:(0,r.Y)(Y,{activeItem:u,commentCount:l,leftMargin:o,postId:t,showComments:d,title:i,toc:n,wordCount:a,onItemClick:e=>{e&&e.scrollIntoView({behavior:"smooth",block:"start"})}})}},90847:function(e,t,n){"use strict";n.d(t,{Z:()=>p});var r=n(10201),i=n(32485),a=n.n(i),o=n(13950),l=n(49984),s=n(68410),c=n(89490),d=n(49807);let u={thefpPostBodyWrapper:"thefpPostBodyWrapper-Sk9SUV",withEagleWatermark:"withEagleWatermark-SQ7w6N",eagleWatermark:"eagleWatermark-QuTSZR",noPaddingOnMobile:"noPaddingOnMobile-SkPaHP",withDropCap:"withDropCap-izNtyr",withSpaceForMissingDropCap:"withSpaceForMissingDropCap-MMwASG",threadHeadBody:"threadHeadBody-gHFj3E"},p=e=>{var t,n;let{children:i,disabled:p,inThreadHead:h,isCustomPage:m,isShowsPost:g,post:f}=e,b=!!(null==f||null==(t=f.postTheme)?void 0:t.disable_drop_cap),{isMobile:Y}=(0,s.sM)(),_=!!f&&(0,l.o6)(f)&&Y;return p?(0,r.Y)(r.FK,{children:i}):(0,r.Y)(o.DH,{children:(0,r.FD)(c.az,{className:a()(u.thefpPostBodyWrapper,u[null==f||null==(n=f.postTheme)?void 0:n.header_variant],{[u.withDropCap]:!(h||m||b),[u.withSpaceForMissingDropCap]:b,[u.threadHeadBody]:h,[u.noPaddingOnMobile]:g||h||m,[u.withEagleWatermark]:_}),children:[_&&(0,r.Y)("div",{className:u.eagleWatermark,style:{backgroundImage:"url(".concat((0,d.dJ9)("".concat((0,d.Ewe)(),"/img/thefp/eagle_stamp.png"),500,{quality:"auto:good",crop:"limit"}),")")}}),i]})})}},61755:function(e,t,n){"use strict";n.d(t,{xn:()=>E,qS:()=>C,ct:()=>S,wu:()=>I});var r=n(69277),i=n(70408),a=n(10201),o=n(36119),l=n.n(o),s=n(54718),c=n(13589),d=n(12293),u=n(32641),p=n(97731),h=n(57753);let m=e=>{var{isHovered:t,isLiked:n}=e,o=(0,u._)(e,["isHovered","isLiked"]);let l=n?h.Q.mediumRed.hex:t?h.Q.brightOrange.hex:h.Q.lightGray.hex;return(0,a.FD)(p.A,(0,i._)((0,r._)({},o),{name:"FPLikeIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",stroke:"none",fill:"none"},children:[(0,a.Y)("path",{d:"M3.69231 1H9.23077V2.83333H11.0769V4.66667H12.9231V2.83333H14.7692V1H20.3077V2.83333H22.1538V4.66667H24V12H22.1538V13.8333H20.3077V15.6667H18.4615V17.5H16.6154V19.3333H14.7692V21.1667H12.9231V23H11.0769V21.1667H9.23077V19.3333H7.38462V17.5H5.53846V15.6667H3.69231V13.8333H1.84615V12H0V4.66667H1.84615V2.83333H3.69231V1Z",fill:l}),(0,a.Y)("rect",{x:"5",y:"4",width:"2",height:"2",fill:"white"}),(0,a.Y)("rect",{x:"3",y:"6",width:"2",height:"4",fill:"white"})]}))};var g=n(80703),f=n(97683),b=n(41935),Y=n(33460),_=n(15894),v=n(35369),w=n(76977),y=n(49807),k=n(82776);let S=e=>{let{cta:t,post:n,pub:o,showCounts:s=!0,size:d,user:u,onChange:p}=e,[h,g]=(0,c.Mk)(),f=l()(Object.values((null==n?void 0:n.reactions)||{})),Y=(0,k.numberToString)(f||0),v="small"===d?16:24,y="small"===d?"sm-preview-byline":"detail-large";return(0,a.Y)(b.Z4,{isStatic:!1,post:n,pub:o,style:"button",user:u,onChange:p,children:e=>{let{isLiked:n,handleLike:o}=e;return(0,a.FD)(w.Ye,(0,i._)((0,r._)({},g),{alignItems:"center",cursor:"pointer",gap:8,role:"button",onClick:o,children:[(0,a.FD)(w.Ye,{alignItems:"center",gap:"small"===d?4:6,children:[(0,a.Y)(m,{height:v,isHovered:h,isLiked:n,width:v}),s&&f>0&&(0,a.Y)(_.T,{preset:y,children:Y})]}),t&&(0,a.Y)(_.T,{preset:"detail-large",children:t})]}))}})},C=e=>{let t,{post:n,pub:o,showCounts:l=!0,size:s,cta:u}=e,[p,h]=(0,c.Mk)(),m=(0,k.numberToString)(n.comment_count),g="small"===s?16:24;return t=(null==n?void 0:n.comment_url_override)?n.comment_url_override:(0,y.wu9)(o,n,{comments:!0}),(0,a.FD)(w.Ye,(0,i._)((0,r._)({},h),{alignItems:"center",cursor:"pointer",gap:8,role:"button",onClick:e=>{e.stopPropagation(),window.location.href=t},children:[(0,a.FD)(w.Ye,{alignItems:"center",gap:"small"===s?4:6,children:[(0,a.Y)(d.A,{height:g,isHovered:p,width:g}),n.comment_count>0&&l&&(0,a.Y)(_.T,{preset:"small"===s?"sm-preview-byline":"detail-large",children:m})]}),u&&(0,a.Y)(_.T,{preset:"detail-large",children:u})]}))},I=e=>{let{pub:t,post:n,user:o,cta:l}=e,[s,d]=(0,c.Mk)();return(0,a.Y)(Y.$8,{post:n,pub:t,trigger:(0,a.FD)(w.pT,(0,i._)((0,r._)({},d),{alignItems:"center",cursor:"pointer",gap:8,children:[(0,a.Y)(g.A,{height:24,isHovered:s,width:24}),l&&(0,a.Y)(_.T,{preset:"detail-large",children:l})]})),user:o})},E=e=>{let{className:t,context:n,post:o,pub:l,user:d}=e,[u,p]=(0,c.Mk)();if(!d)return null;let m=u?h.Q.brightOrange.hex:h.Q.lightGray.hex,g=(0,a.Y)(v.Nm,(0,i._)((0,r._)({display:"flex",resetCss:!0},p),{onClick:e=>{e.stopPropagation()},children:(0,a.Y)(s.A,{size:"post-preview"===n?16:24,stroke:m})}));return(0,a.Y)("div",{className:t,style:{cursor:"pointer"},children:(0,a.Y)(f.D,{hideDropCapOption:"post-preview"===n,hidePinning:!0,hidePostHeaderOptions:"post-preview"===n,post:o,pub:l,trigger:g,user:d})})}},18835:function(e,t,n){"use strict";n.d(t,{A:()=>I});var r=n(69277),i=n(70408),a=n(32641),o=n(10201),l=n(32485),s=n.n(l),c=n(17402),d=n(99070),u=n(20347),p=n(3849),h=n(97731);let m=e=>{var t=(0,u._)({},(0,p._)(e));return(0,o.Y)(h.A,(0,i._)((0,r._)({},t),{name:"FPPauseIcon",svgParams:{width:25,height:25,viewBox:"0 0 25 24",fill:"none",stroke:"none"},children:(0,o.FD)("g",{id:"play-circle",children:[(0,o.Y)("path",{id:"Icon",d:"M12.5 22C18.0228 22 22.5 17.5228 22.5 12C22.5 6.47715 18.0228 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5228 6.97715 22 12.5 22Z",stroke:"#F2312C",strokeWidth:"2",strokeLinecap:"round"}),(0,o.Y)("rect",{id:"Rectangle 2398",x:"8.5",y:"7.08496",width:"3",height:"10",fill:"#F2312C"}),(0,o.Y)("rect",{id:"Rectangle 2399",x:"13.5",y:"7.08496",width:"3",height:"10",fill:"#F2312C"})]})}))};var g=n(10956),f=n(63446),b=n(16514),Y=n(15894),_=n(86500),v=n(76977),w=n(39318),y=n(82776),k=n(57324);let S="ctaMode-zO5a9a",C=e=>{let{containerRef:t,currentTime:n,remainingTime:r,progress:i,onMouseDown:a,className:l}=e;return(0,o.FD)(v.Ye,{alignItems:"center",className:l,gap:4,children:[(0,o.Y)(Y.T,{preset:"caption",style:{flexShrink:0,minWidth:"28px"},children:n}),(0,o.FD)("div",{ref:t,className:"progressBar-yUZk3A",onMouseDown:a,children:[(0,o.Y)("div",{className:"progressBarBackground-rOIsbW"}),(0,o.Y)("div",{className:"progressBarProgress-EiVcPg",style:{width:"".concat(100*i,"%")}}),(0,o.Y)("div",{className:"progressBarPlayhead-KWfdzC",style:{left:"".concat(100*i,"%")}})]}),(0,o.Y)(Y.T,{preset:"caption",style:{flexShrink:0,paddingLeft:"4px",minWidth:"36px"},children:r})]})},I=e=>{var{mediaUploadId:t,user:n,post:l,pub:u}=e,p=(0,a._)(e,["mediaUploadId","user","post","pub"]);let[h,I]=(0,c.useState)(!0),[E,F]=(0,c.useState)(!1),D=!!(null==n?void 0:n.is_subscribed),A=!!(null==n?void 0:n.is_free_subscribed);return(0,c.useEffect)(()=>{E&&(0,_.u4)(_.qY.TTS_UPGRADE_TO_LISTEN_CLICKED,{post_id:l.id})},[E,l.id]),(0,o.Y)(d.A,(0,i._)((0,r._)({},p),{feature:"Add voiceover",metricsPost:l,post:l,pub:u,render:e=>{let{isPaywalled:t,currentTime:n,isPlaying:r,progress:i,progressBarRef:a,progressBarOnMouseDown:c,remainingTime:d,duration:p,togglePlayback:_}=e,x=()=>{t?F(!0):(h&&I(!1),_())},N=(0,o.FD)(v.Ye,{alignItems:"center",className:s()("wrapper-LdgflB",{[S||""]:h}),gap:16,justifyContent:"space-between",children:[(0,o.FD)(v.Ye,{alignItems:"center",className:s()("innerWrapper-ersGfZ",{[S||""]:h}),gap:16,onClick:h?x:void 0,children:[(0,o.Y)(v.I1,{className:s()("playButton-vLW5qd",{[S||""]:h,"static-tP398S":t}),style:{flexShrink:0},onClick:()=>{x()},children:r?(0,o.Y)(m,{}):(0,o.Y)(g.A,{})}),(0,o.Y)(C,{className:s()("progressBarWrap-vpoiUw",{[S||""]:h}),containerRef:a,currentTime:n,progress:i,remainingTime:d,onMouseDown:c}),(0,o.FD)(v.Ye,{alignItems:"center",className:s()("cta-GdLXe1",{[S||""]:h}),gap:16,children:[(0,o.Y)(Y.T,{preset:"detail-small",children:t?"Upgrade to Listen":"Listen to Article"}),(0,o.Y)(Y.T,{color:"tertiary",preset:"caption",style:{flexShrink:0},children:(0,y.secondsToLargestUnit)(p||300)})]})]}),(0,o.Y)(Y.T,{className:s()("disclaimer-i3yYG0",{[S||""]:h}),color:"tertiary",preset:"caption",children:"Produced by ElevenLabs using AI narration"})]});return t?(0,o.Y)(b.w,{closeOnOutsideClick:!0,content:(0,o.FD)(v.I1,{gap:4,position:"relative",children:[(0,o.Y)(Y.T,{preset:"d4-serif",children:"Listening to articles, is a benefit we're proud to offer our paid subscribers. Sign up today to unlock this feature."}),!D&&(0,o.Y)(v.Ye,{children:(0,o.Y)(f.v,{href:(0,w.my9)(u,{UTM_SOURCE:k.VU.voiceoverPlayer,next:(0,w.wu9)(u,l)}),localNavigation:!1,size:"sm",trailingIcon:"chevron-right",variant:"tertiary",children:A?"Upgrade now":"Subscribe now"})})]}),isOpen:E,onClose:()=>{F(!1)},children:N}):N},src:t?"/api/v1/audio/upload/".concat(t,"/src"):null,trackingProps:{}}))}},81668:function(e,t,n){"use strict";n.d(t,{w:()=>m});var r=n(10201),i=n(17402),a=n(84605),o=n(86500),l=n(35369),s=n(76977),c=n(16993),d=n(63136),u=n(54542),p=n(39318),h=n(57324);function m(e){let{postId:t,onClose:n}=e,{iString:u}=(0,a.GO)();return(0,i.useEffect)(()=>{(0,o.u4)(o.qY.LISTEN_TO_THIS_POST_MODAL_SHOWN,{post_id:t})},[]),(0,r.FD)(c.aF,{isOpen:!0,onClose:n,children:[(0,r.Y)(c.rQ,{showClose:!0,onClose:n}),(0,r.Y)(c.cw,{children:(0,r.FD)(s.I1,{alignItems:"center",gap:24,children:[(0,r.FD)(s.I1,{style:{textAlign:"center"},justifyContent:"center",gap:8,children:[(0,r.Y)(d.EY.H3,{weight:"heavy",children:u("Listen to this post")}),(0,r.Y)(d.EY,{color:"secondary",style:{lineHeight:1.5},children:u("Get the Substack app to hear this article read aloud.")})]}),(0,r.Y)(g,{})]})}),(0,r.Y)(c.jl,{showDivider:!0,direction:"column",primaryButton:(0,r.Y)(l.$n,{priority:"primary",href:(0,p.wHz)({utm_source:h.VU.web,utm_campaign:h._9.ttsModal}),onClick:()=>(0,o.u4)(o.qY.LISTEN_TO_THIS_POST_MODAL_GET_THE_APP_CLICKED,{post_id:t}),children:u("Get the app")})})]})}function g(){let e="/img/main/tts-dialog";return(0,r.FD)("video",{height:220,autoPlay:!0,muted:!0,loop:!0,children:[(0,r.Y)("source",{src:"".concat(e,"/nux.mp4"),type:"video/mp4"}),(0,r.Y)("img",{width:374,height:233,src:"".concat(e,"/1x.png"),srcset:Array.from((0,u.y1)(1,4)).map(t=>"".concat(e,"/").concat(t,"x.png ").concat(t,"x")).join(", ")})]})}},1459:function(e,t,n){"use strict";n.d(t,{e:()=>r});let r=(e,t)=>"enabled"===t.payments_state?e.is_subscribed:e.is_free_subscribed},43998:function(e,t,n){"use strict";n.d(t,{l:()=>Y});var r=n(10201),i=n(48697),a=n(17402),o=n(47963),l=n(72880),s=n(86500),c=n(68410),d=n(35369),u=n(16074),p=n(76977),h=n(16993),m=n(63136),g=n(39318),f=n(57324);let b="appStoreBadgeButton-PoDbV8",Y=e=>{let{onClose:t}=e,{isMobile:n}=(0,c.sM)();return(0,a.useEffect)(()=>{(0,s.u4)(s.qY.SAVE_VIDEO_UPSELL_MODAL_SEEN)},[]),(0,r.Y)(h.aF,{disableCloseOnBackdropClick:!0,isOpen:!0,width:n?void 0:850,onClose:t,children:(0,r.FD)(p.Ye,{position:"relative",padding:20,gap:32,justifyContent:n?"center":void 0,children:[(0,r.Y)(p.Ye,{position:"absolute",style:{top:8,right:8},children:(0,r.Y)(d.mZ,{rounded:!0,priority:"secondary",size:"sm",onClick:t,children:(0,r.Y)(i.A,{size:20})})}),!n&&(0,r.Y)("div",{children:(0,r.Y)(l.o,{src:(0,g.dJ9)("/img/marketing/save-video-upsell.png",762),maxWidth:381,useRetinaSizing:!0,imageIsFixedWidth:!0})}),(0,r.FD)(p.I1,{justifyContent:"center",gap:20,children:[(0,r.FD)(p.I1,{gap:8,children:[(0,r.Y)(m.EY.H3,{align:"center",translated:!0,paddingBottom:8,children:"Video saved to your app"}),(0,r.Y)(m.EY.B3,{align:"center",translated:!0,children:"Download now on iOS or Android to see all saved videos."})]}),(0,r.Y)(o.gF,{hideEmailPrompt:!0,size:160,padding:0}),(0,r.Y)(u.v,{}),(0,r.FD)(p.Ye,{gap:16,justifyContent:"center",paddingTop:8,children:[(0,r.Y)("a",{className:b,href:(0,g.cxW)({utm_campaign:f._9.saveVideoUpsellModal,utm_source:f.VU.post}),onClick:()=>{(0,s.u4)(s.qY.APP_STORE_LINK_CLICKED,{source:"save_video_upsell_modal",app_store:"ios"})},children:(0,r.Y)("img",{src:(0,g.dJ9)("/img/app_page/app-store.png",320),height:40})}),(0,r.Y)("a",{className:b,href:(0,g.zw3)({utm_campaign:f._9.saveVideoUpsellModal,utm_source:f.VU.post}),onClick:()=>{(0,s.u4)(s.qY.APP_STORE_LINK_CLICKED,{source:"save_video_upsell_modal",app_store:"android"})},children:(0,r.Y)("img",{src:(0,g.dJ9)("/img/app_page/google-play.png",320),height:40})})]})]})]})})}},36375:function(e,t,n){"use strict";n.d(t,{A:()=>u});var r=n(10201),i=n(45994),a=n(34746),o=n(52077),l=n(84605),s=n(86500),c=n(56458),d=n(82776);let u=e=>{let{post:t,pub:n,user:u,playerRef:p}=e,h=!(0,d.canSeeTranscription)(u,t),m=(0,c.NJ)(t),{iString:g}=(0,l.GO)();return((0,i.vJ)(()=>{(0,s.u4)(s.qY.TRANSCRIPTION_PAGE_VIEWED,{post_id:t.id})},[t.id]),m)?h?(0,r.Y)(a.pU,{user:u,publication:n,post:t,title:g("Transcriptions on this post are for paid subscribers"),reauthenticationTitle:g("To see the post, please re-authenticate.")}):(0,r.Y)(o.Ay,{transcription:m,player:p,postId:t.id}):null}},19256:function(e,t,n){"use strict";n.d(t,{_:()=>m});var r=n(10201),i=n(67078),a=n(17402),o=n(84605),l=n(86500),s=n(89490),c=n(35369),d=n(76977),u=n(16993),p=n(63136),h=n(49807);let m=e=>{let{isOpen:t,onClose:n,profile:m,dmUpgradeOptions:g,isEditor:f=!1}=e,{iString:b}=(0,o.GO)();(0,a.useEffect)(()=>{(0,l.u4)(l.qY.DIRECT_MESSAGE_WRITER_UPSELL_MODAL_SEEN,{subscribeButtonShown:w})},[]);let Y=null==m?void 0:m.primaryPublication,_=g?g.includes("free_subscribers")?"free_subscribers":g.includes("paid_subscribers")?"paid_subscribers":g.includes("founding_subscribers")?"founding_subscribers":null:null,v=_?(e=>{switch(e){case"free_subscribers":return"Subscribers";case"paid_subscribers":return"Paid subscribers";case"founding_subscribers":return"Founding members"}})(_):null,w=v&&(f||!f&&Y),y="founding_subscribers"===_?{plan:"founding",utm_source:"direct-message-writer"}:void 0,k=!f&&Y?(0,h.eV6)(Y,{addBase:!f,params:y}):(0,h.eV6)({},{addBase:!1,params:y}),S=(0,s.iF)({width:200});return(0,r.Y)(u.aF,{isOpen:t,onClose:n,children:(0,r.Y)(u.cw,{children:(0,r.FD)(d.I1,{gap:16,alignItems:"center",children:[(0,r.Y)(s.az,{bg:"secondary",radius:"full",padding:16,children:(0,r.Y)(i.A,{size:32})}),(0,r.FD)(d.I1,{gap:8,alignItems:"center",padding:8,children:[!!v&&(0,r.FD)(p.EY.B1,{children:[v," only"]}),!!v&&(0,r.Y)(p.EY.B3,{color:"secondary",align:"center",children:b("".concat(null==m?void 0:m.name," only accepts messages from ").concat(null==v?void 0:v.toLowerCase()))}),!v&&(0,r.Y)(p.EY.B3,{color:"secondary",align:"center",children:b("".concat(null==m?void 0:m.name," is not currently accepting message invites"))})]}),(0,r.FD)(d.I1,{gap:8,alignItems:"center",padding:8,children:[w&&(0,r.FD)(r.FK,{children:[(0,r.Y)(c.$n,{className:S,priority:"primary",href:k,newTab:!0,children:b((null==m?void 0:m.isSubscribed)?"Upgrade":"Subscribe")}),(0,r.Y)(c.$n,{className:S,onClick:()=>{(0,l.u4)(l.qY.DIRECT_MESSAGE_WRITER_UPSELL_MODAL_MAYBE_LATER_CLICKED),n()},priority:"secondary",children:b("Maybe later")})]}),!w&&(0,r.Y)(c.$n,{className:S,onClick:()=>{(0,l.u4)(l.qY.DIRECT_MESSAGE_WRITER_UPSELL_MODAL_OKAY_CLICKED),n()},priority:"secondary",children:b("Okay")})]})]})})})}},14124:function(e){e.exports=function(e){if(!e)return 0;let t=(e=e.replace(/<(.|\n)*?>/g," ")).match(/[a-zA-ZÃ€-Ã¿0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g)||e.match(/([\u0600-\u06ff]+|[\u0591-\u05F4]+)/g);if(null===t)return 0;let n=0;for(let e=0;e<t.length;e+=1){let r=t[e];r&&(r.charCodeAt(0)>=19968?n+=r.length:n+=1)}return n}},65942:function(e,t,n){"use strict";function r(e){return(e||"").replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t))}n.d(t,{A:()=>r})}}]);