"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["8678"],{77505:function(e,t,n){n.d(t,{A:()=>i});let i={featuredTopicContainer:"featuredTopicContainer-suyQj1",featuredTopicGradient:"featuredTopicGradient-oYIwRL",trendingTopic:"trendingTopic-eMDv2u"}},40345:function(e,t,n){n.d(t,{A:()=>i});let i={gifPreview:"gifPreview-aspqQH",visible:"visible-LWauZo",image:"image-Aqe6vn",videoPlayerWrapper:"videoPlayerWrapper-cIRA2m",videoPlayerClassName:"videoPlayerClassName-wHpwKj",videoClassName:"videoClassName-F40TTj"}},90017:function(e,t,n){n.d(t,{A:()=>i});let i={root:"root-IyF5Yz",list:"list-UVnyqE",highlight:"highlight-rZ7aQJ"}},54715:function(e,t,n){n.d(t,{A:()=>i});let i={segment:"segment-j4TeZ4"}},79913:function(){},64224:function(e,t,n){n.d(t,{A:()=>i});let i={scrollBox:"scrollBox-zHkQVP",arrowButtonContainer:"arrowButtonContainer-O4uSiH",visible:"visible-JMTC0j",right:"right-i3oWGi",left:"left-Tg8vqp",arrowButtonOffsetContainer:"arrowButtonOffsetContainer-VMYLE4",arrowButtonOverlaidContainer:"arrowButtonOverlaidContainer-t10AyH",overlay:"overlay-zrMCxn",primary:"primary-lv_sOW",secondary:"secondary-pOosZC",arrowButtonOverlaid:"arrowButtonOverlaid-xLyA_z"}},3074:function(e,t,n){n.d(t,{A:()=>i});let i={card:"card-qnekae",cardTop:"cardTop-yLKLMp",cardBottom:"cardBottom-eN66Vc",cardAvatar:"cardAvatar-lmAiQ1",cardOverlay:"cardOverlay-BwDmPh",cardUrl:"cardUrl-Ccl_69",fakeButton:"fakeButton-UNdCaV"}},93375:function(e,t,n){n.d(t,{A:()=>i});let i={jumpButton:"jumpButton-AIaH5l",hidden:"hidden-jcjp2w"}},69715:function(e,t,n){n.d(t,{Ds:()=>k,Jt:()=>F,LO:()=>y,MC:()=>S,OV:()=>w,UQ:()=>x,_K:()=>C,eD:()=>_,sm:()=>b,z3:()=>v});var i=n(69277),r=n(10201),l=n(78659),o=n.n(l),a=n(11741),c=n.n(a),s=n(69843),d=n.n(s),u=n(86241),m=n(80697),p=n(17402),h=n(40410),f=n(86500),g=n(35369),Y=n(76977);let y=5,v=300,b=600,C=60,k=30,_=e=>{let t=o()(e,1,16),n=b-C;return o()(b-(t-1)/15*n,C,b)},w=e=>{for(let t=16;t>=1;t--)if(_(t)>=2*e)return o()(t,1,16);return 1},I=(0,p.createContext)({clipTimes:null,isClipping:!1,setClipEnd:()=>void 0,setClipStart:()=>void 0,setClipTitle:()=>void 0,virtualizedListRef:{current:null},onCancelClipping:()=>void 0,onStartClipping:()=>void 0,clipTitle:null,zoom:0,setZoom:()=>void 0}),x=e=>{let{children:t,postId:n,videoPlayerRef:l,virtualizedListRef:a}=e,[s,u]=(0,p.useState)(!1),[m,h]=(0,p.useState)(),[g,Y]=(0,p.useState)(),[b,C]=(0,p.useState)(null),[_,x]=(0,p.useState)(1),S=(0,p.useRef)(!1),F=(0,p.useMemo)(()=>d()(m)||d()(g)?null:{start:m,end:g},[g,m]);(0,p.useEffect)(()=>{S.current||void 0==m||void 0==g||(x(w(g-m)),S.current=!0)},[m,g]);let D=(0,p.useCallback)(e=>{var t,r,a,s,m,p,g,b,_;let{start:w,end:I,source:x,title:S}=e,F=null!=(g=null==l||null==(r=l.current)||null==(t=r.player)?void 0:t.duration)?g:300;c()(F)&&(F=300);let D=d()(w)||d()(I)?null:{start:w,end:Math.min(I,w+v)},T=null!=D?D:{start:Math.max(0,null!=(b=null==l||null==(s=l.current)||null==(a=s.player)?void 0:a.currentTime)?b:0),end:Math.min(null!=F?F:y,(null!=(_=null==l||null==(p=l.current)||null==(m=p.player)?void 0:m.currentTime)?_:0)+k)};if(D?T.end=Math.max(T.start+y,T.end):(T.start=o()(T.start,0,F-y),T.end=o()(T.end,T.start+y,Math.min(T.start+v,F))),h(T.start),Y(T.end),u(!0),S&&C(S),(0,f.u4)(f.qY.VIDEO_CLIP_INITIATED,(0,i._)({post_id:n,source:x},D)),!D&&!(null==l?void 0:l.current)){let e=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout(()=>{var n,i;(null==l||null==(i=l.current)||null==(n=i.player)?void 0:n.readyState)!==4?t<10&&e(t+1):(h(0),Y(Math.min(l.current.player.duration,k)))},100)};e()}},[n,l]),T=(0,p.useCallback)(e=>{var t,n,i;let r=null!=(i=null==l||null==(n=l.current)||null==(t=n.player)?void 0:t.duration)?i:0,a=o()(e,y,r);Y(a),h(e=>o()(null!=e?e:0,Math.max(a-v,0),a-y))},[l]),A=(0,p.useCallback)(e=>{var t,n,i;let r=null!=(i=null==l||null==(n=l.current)||null==(t=n.player)?void 0:t.duration)?i:0,a=o()(e,0,r-y);h(a),Y(e=>o()(null!=e?e:0,a+y,Math.min(a+v,r)))},[l]),E=(0,p.useCallback)(()=>{u(!1)},[]);return(0,r.Y)(I.Provider,{value:{clipTimes:F,isClipping:s,setClipEnd:T,setClipStart:A,setClipTitle:C,virtualizedListRef:a,onCancelClipping:E,onStartClipping:D,clipTitle:b,zoom:_,setZoom:x},children:t})},S=()=>(0,p.useContext)(I),F=()=>{let{zoom:e,setZoom:t}=S();return(0,r.FD)(Y.Ye,{gap:12,justifyContent:"center",alignItems:"center",children:[(0,r.Y)(g.K0,{priority:"secondary-outline",size:"sm",onClick:()=>t(Math.max(1,e-1)),children:(0,r.Y)(u.A,{size:20})}),(0,r.Y)(h.A,{min:1,max:16,step:1,value:e,onChange:t}),(0,r.Y)(g.K0,{priority:"secondary-outline",size:"sm",onClick:()=>t(Math.min(16,e+1)),children:(0,r.Y)(m.A,{size:20})})]})}},34615:function(e,t,n){n.d(t,{K:()=>v});var i=n(69277),r=n(32641),l=n(10201),o=n(32485),a=n.n(o),c=n(48697),s=n(48686),d=n(84605),u=n(24078),m=n(15040),p=n(35369),h=n(76977),f=n(16993),g=n(63136),Y=n(93718),y=n(15092);function v(e){var{isOpen:t,onClose:n}=e,o=(0,r._)(e,["isOpen","onClose"]);return(0,l.Y)(f.aF,{isOpen:!!t,onClose:n,width:500,children:(0,l.Y)(b,(0,i._)({onClose:n},o))})}function b(e){let{faces:t,modalLabel:n,onClose:i,totalCount:r}=e,{iPlural:o}=(0,d.GO)(),a=(r||0)-t.length;return(0,l.FD)(l.FK,{children:[(0,l.FD)(h.pT,{alignItems:"center",justifyContent:"space-between",paddingX:16,paddingY:12,borderBottom:"detail",flex:"grow",children:[(0,l.Y)(g.EY.H3,{children:n}),i&&(0,l.Y)(p.K0,{priority:"tertiary",onClick:i,children:(0,l.Y)(c.A,{size:20})})]}),(0,l.Y)(h.I1,{overflowY:"auto",className:y.A.column,children:(0,l.FD)(h.I1,{gap:4,padding:8,children:[t.map(e=>(0,l.Y)(C,{face:e},e.id)),a>0&&(0,l.FD)(h.pT,{gap:16,alignItems:"center",padding:8,children:[(0,l.Y)(h.pT,{className:y.A.avatarOther,alignItems:"center",justifyContent:"center",children:(0,l.Y)(s.A,{className:y.A.avatarOtherIcon,size:20})}),(0,l.FD)(g.EY.B4,{color:"secondary",children:["+",o("%1 other reader","%1 other readers",a)]})]})]})})]})}function C(e){let{face:t}=e,{id:n,name:i,primary_publication:r,className:o,noLink:c}=t;return(0,l.Y)(h.pT,{flex:"grow",children:c?(0,l.FD)(h.pT,{gap:12,padding:8,radius:"md",className:y.A.row,alignItems:"center",flex:"grow",children:[(0,l.Y)(m.Ff,{pub:r||void 0,children:(0,l.Y)(u.tp,{user:t,size:40,className:o})}),(0,l.Y)(h.I1,{minWidth:0,flex:"grow",children:(0,l.Y)(g.EY.B3,{decoration:"hover-underline",weight:"semibold",className:(y.A.link,a()({"no-name":!(i||"").trim().length})),children:i})})]}):(0,l.Y)(Y.I,{person:t},n)},n)}},78865:function(e,t,n){n.d(t,{gf:()=>v,mA:()=>k,zt:()=>I});var i=n(69277),r=n(70408),l=n(10201),o=n(32485),a=n.n(o),c=n(17402),s=n(21441),d=n(10278),u=n(42686),m=n(89490),p=n(35369),h=n(76977),f=n(44552),g=n(95187),Y=n(11510),y=n(71305);function v(e){let{className:t,assets:n,readOnly:o,isRestack:s,isPermalink:u,maxHeight:m=420,onClick:p,onSwipe:v,children:_,parent:I,feedItem:x,commentId:S}=e,F=(0,d.Cu)(n),D=(0,Y.Iu)(),T=s?12:u?0:D?64:48,A=s?12:16*!!D,E=T+A,P=(0,c.useRef)(null),O=(0,d.wY)(P,E),N=Math.max(O-20-6,0),B=(0,c.useRef)(!1),R=w(F,m,N),L=I&&""===I.body,[j,z]=(0,c.useState)(null),U=(0,f.h9)(P),K=(0,g.jA)(P,{inset:T,pageSizeAdjust:-.4*(O||0),initialState:{showLeft:!1,showRight:!0}}),{state:{showLeft:M,showRight:V},handleArrowClick:q}=D?{state:{showLeft:!1,showRight:!1},handleArrowClick:()=>()=>{}}:K;return(0,c.useEffect)(()=>{let e=P.current,t=()=>{!B.current&&(B.current=!0,v&&v())};return null==e||e.addEventListener("scroll",t),()=>null==e?void 0:e.removeEventListener("scroll",t)},[v]),(0,l.FD)(h.I1,{className:a()(y.A.imageCarouselContainer,s&&y.A.restack),position:"relative",draggable:!1,paddingTop:L?12:void 0,style:{"--carousel-inset-left":"-".concat(T,"px"),"--carousel-inset-right":"-".concat(A,"px")},children:[(0,l.FD)(h.pT,(0,r._)((0,i._)({},U.props),{ref:P,className:a()(y.A.imageCarousel,s&&y.A.restack,t),overflow:"auto",flex:"auto",style:{"--carousel-height":"".concat(R,"px"),"--carousel-gap":"".concat(6,"px")},children:[(0,l.Y)(b,{width:T}),F.map((e,t)=>{let{src:n,explicit:i,width:r,height:a,id:c}=e;return(0,l.Y)(C,{asset:n,explicit:i,readOnly:o,width:r,height:a,carouselHeight:R,onClick:o?void 0:e=>{e.preventDefault(),p&&p({attachmentId:c,attachmentType:"image"}),z({index:t})},children:_},n)}),(0,l.Y)(d.yx,{assets:F,imageViewer:j,setImageViewer:z,readOnly:o,feedItem:x,commentId:S})]})),!D&&(0,l.FD)(l.FK,{children:[(0,l.Y)(k,{direction:"left",visible:M,onClick:q(-1)}),(0,l.Y)(k,{direction:"right",visible:V,onClick:q(1)})]})," "]})}function b(e){let{width:t}=e;return(0,l.Y)(m.az,{as:"span",className:y.A.carouselSpacer,width:t})}function C(e){let{asset:t,explicit:n,onClick:i,readOnly:r,width:o,height:a,carouselHeight:c,children:s}=e,u=c*(o&&a?o/a:1);return(0,l.Y)(d.Vn,{asset:t,explicit:n,onClick:i,readOnly:r,width:u,height:c,className:y.A.carouselImage,maxWidth:u,children:s})}function k(e){let{direction:t,visible:n,onClick:i}=e;return(0,l.Y)(h.pT,{position:"absolute",className:a()(y.A.arrowContainer,y.A["".concat(t)]),alignItems:"center",justifyContent:"center",children:(0,l.Y)(p.Nm,{onClick:e=>{e.preventDefault(),e.stopPropagation(),null==i||i()},resetCss:!0,className:a()(y.A.arrowButton,!n&&y.A.hidden),display:"flex",alignItems:"center",justifyContent:"center","aria-label":"left"===t?"Previous":"Next",children:(0,l.Y)(s.A,{size:20,className:y.A.arrowIcon})})})}function _(e){return e.filter(e=>"string"!=typeof e&&"number"==typeof e.width&&"number"==typeof e.height&&e.width>0&&e.height>0)}function w(e,t,n){let i=_(e);return 0===i.length?t:Math.min(n/Math.max(...i.map(e=>e.width/e.height)),t)}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:420,i=e.map(u.U8),r=w(i,n,t);return _(i).reduce((e,t)=>e+r*(t.width&&t.height?t.width/t.height:1),0)+6*(i.length-1)}},16008:function(e,t,n){n.d(t,{X:()=>f});var i=n(10201),r=n(72170),l=n(82853),o=n(49031),a=n(34581),c=n(70357),s=n(38685),d=n(9979),u=n(84605),m=n(35369),p=n(88774),h=n(36372);let f=e=>{let{shareName:t,shareUrl:n,trackParams:f,trigger:g,utmCampaign:Y}=e,{iString:y}=(0,u.GO)(),v=(0,h.d)();return(0,i.FD)(p.W1,{trigger:null!=g?g:(0,i.Y)(m.K0,{priority:"quaternary",children:(0,i.Y)(r.A,{size:20})}),"aria-label":y("View share options"),children:[(0,i.Y)(p.Dr,{leading:(0,i.Y)(l.A,{}),onClick:()=>{(0,d.b3)({shareUrl:n,utm_campaign:Y,skipToast:!0,trackParams:f}),v.popToast(()=>(0,i.Y)(h.y,{text:y("Copied link to clipboard")}))},children:y("Copy link")}),(0,i.FD)(p.H9,{children:[(0,i.Y)(p.Dr,{leading:(0,i.Y)(c.A,{}),onClick:()=>{(0,d.HT)({shareUrl:n,utm_campaign:Y,trackParams:f})},children:y("Share to Notes")}),(0,i.Y)(p.Dr,{leading:(0,i.Y)(o.A,{}),onClick:()=>{(0,d.aE)({shareUrl:n,utm_campaign:Y,trackParams:f})},children:y("Share to Facebook")}),(0,i.Y)(p.Dr,{leading:(0,i.Y)(a.A,{}),onClick:()=>{(0,d.Uy)({shareUrl:n,utm_campaign:Y,trackParams:f})},children:y("Share to Linkedin")}),(0,i.Y)(p.Dr,{leading:(0,i.Y)(s.A,{}),onClick:()=>{(0,d.NH)({shareUrl:n,shareName:t,utm_campaign:Y,trackParams:f})},children:y("Share to X")})]})]})}},84713:function(e,t,n){n.d(t,{A:()=>c});var i=n(69277),r=n(70408),l=n(32641),o=n(10201),a=n(97731);let c=e=>{var{size:t=24,fill:n="var(--color-fg-primary)"}=e,c=(0,l._)(e,["size","fill"]);return(0,o.Y)(a.A,(0,r._)((0,i._)({},c),{name:"InstagramIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:n,children:(0,o.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",stroke:"none",d:"M10 1.80078C12.6719 1.80078 12.9883 1.8125 14.0391 1.85937C15.0156 1.90234 15.543 2.06641 15.8945 2.20313C16.3594 2.38281 16.6953 2.60156 17.043 2.94922C17.3945 3.30078 17.6094 3.63281 17.7891 4.09766C17.9258 4.44922 18.0898 4.98047 18.1328 5.95312C18.1797 7.00781 18.1914 7.32422 18.1914 9.99219C18.1914 12.6641 18.1797 12.9805 18.1328 14.0313C18.0898 15.0078 17.9258 15.5352 17.7891 15.8867C17.6094 16.3516 17.3906 16.6875 17.043 17.0352C16.6914 17.3867 16.3594 17.6016 15.8945 17.7813C15.543 17.918 15.0117 18.082 14.0391 18.125C12.9844 18.1719 12.668 18.1836 10 18.1836C7.32813 18.1836 7.01172 18.1719 5.96094 18.125C4.98438 18.082 4.45703 17.918 4.10547 17.7813C3.64063 17.6016 3.30469 17.3828 2.95703 17.0352C2.60547 16.6836 2.39063 16.3516 2.21094 15.8867C2.07422 15.5352 1.91016 15.0039 1.86719 14.0313C1.82031 12.9766 1.80859 12.6602 1.80859 9.99219C1.80859 7.32031 1.82031 7.00391 1.86719 5.95312C1.91016 4.97656 2.07422 4.44922 2.21094 4.09766C2.39063 3.63281 2.60938 3.29688 2.95703 2.94922C3.30859 2.59766 3.64063 2.38281 4.10547 2.20313C4.45703 2.06641 4.98828 1.90234 5.96094 1.85937C7.01172 1.8125 7.32813 1.80078 10 1.80078ZM10 0C7.28516 0 6.94531 0.0117188 5.87891 0.0585938C4.81641 0.105469 4.08594 0.277344 3.45313 0.523438C2.79297 0.78125 2.23438 1.12109 1.67969 1.67969C1.12109 2.23438 0.78125 2.79297 0.523438 3.44922C0.277344 4.08594 0.105469 4.8125 0.0585938 5.875C0.0117188 6.94531 0 7.28516 0 10C0 12.7148 0.0117188 13.0547 0.0585938 14.1211C0.105469 15.1836 0.277344 15.9141 0.523438 16.5469C0.78125 17.207 1.12109 17.7656 1.67969 18.3203C2.23438 18.875 2.79297 19.2188 3.44922 19.4727C4.08594 19.7188 4.8125 19.8906 5.875 19.9375C6.94141 19.9844 7.28125 19.9961 9.99609 19.9961C12.7109 19.9961 13.0508 19.9844 14.1172 19.9375C15.1797 19.8906 15.9102 19.7188 16.543 19.4727C17.1992 19.2188 17.7578 18.875 18.3125 18.3203C18.8672 17.7656 19.2109 17.207 19.4648 16.5508C19.7109 15.9141 19.8828 15.1875 19.9297 14.125C19.9766 13.0586 19.9883 12.7188 19.9883 10.0039C19.9883 7.28906 19.9766 6.94922 19.9297 5.88281C19.8828 4.82031 19.7109 4.08984 19.4648 3.45703C19.2188 2.79297 18.8789 2.23438 18.3203 1.67969C17.7656 1.125 17.207 0.78125 16.5508 0.527344C15.9141 0.28125 15.1875 0.109375 14.125 0.0625C13.0547 0.0117188 12.7148 0 10 0ZM10 4.86328C7.16406 4.86328 4.86328 7.16406 4.86328 10C4.86328 12.8359 7.16406 15.1367 10 15.1367C12.8359 15.1367 15.1367 12.8359 15.1367 10C15.1367 7.16406 12.8359 4.86328 10 4.86328ZM10 13.332C8.16016 13.332 6.66797 11.8398 6.66797 10C6.66797 8.16016 8.16016 6.66797 10 6.66797C11.8398 6.66797 13.332 8.16016 13.332 10C13.332 11.8398 11.8398 13.332 10 13.332ZM15.3398 5.85962C16 5.85962 16.5391 5.32447 16.5391 4.6604C16.5391 4.00025 16 3.46118 15.3398 3.46118C14.6797 3.46118 14.1406 3.99634 14.1406 4.6604C14.1406 5.32056 14.6758 5.85962 15.3398 5.85962Z"})}))}},65217:function(e,t,n){n.d(t,{A:()=>c});var i=n(69277),r=n(70408),l=n(32641),o=n(10201),a=n(97731);let c=e=>{var{size:t=24,fill:n="var(--color-fg-primary)"}=e,c=(0,l._)(e,["size","fill"]);return(0,o.Y)(a.A,(0,r._)((0,i._)({},c),{name:"TikTokIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:n,stroke:"none",children:(0,o.Y)("path",{stroke:"none",d:"M14.2272 0H10.8566V13.6232C10.8566 15.2464 9.56024 16.5797 7.94697 16.5797C6.33369 16.5797 5.03732 15.2464 5.03732 13.6232C5.03732 12.029 6.30489 10.7246 7.86056 10.6667V7.24639C4.43235 7.30433 1.66675 10.1159 1.66675 13.6232C1.66675 17.1594 4.48996 20 7.97579 20C11.4616 20 14.2848 17.1304 14.2848 13.6232V6.63767C15.5524 7.56522 17.108 8.11594 18.7501 8.14495V4.72464C16.215 4.63768 14.2272 2.55072 14.2272 0Z"})}))}},65590:function(e,t,n){n.d(t,{A:()=>c});var i=n(69277),r=n(70408),l=n(32641),o=n(10201),a=n(97731);let c=e=>{var{size:t=24,fill:n="var(--color-fg-primary)"}=e,c=(0,l._)(e,["size","fill"]);return(0,o.Y)(a.A,(0,r._)((0,i._)({},c),{name:"YoutubeIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:n,stroke:"none",children:(0,o.Y)("path",{stroke:"none",d:"M19.8008 5.99976C19.8008 5.99976 19.6055 4.62085 19.0039 4.01538C18.2422 3.21851 17.3906 3.2146 17 3.16772C14.2031 2.9646 10.0039 2.9646 10.0039 2.9646H9.99609C9.99609 2.9646 5.79688 2.9646 3 3.16772C2.60938 3.2146 1.75781 3.21851 0.996094 4.01538C0.394531 4.62085 0.203125 5.99976 0.203125 5.99976C0.203125 5.99976 0 7.62085 0 9.23804V10.7537C0 12.3708 0.199219 13.9919 0.199219 13.9919C0.199219 13.9919 0.394531 15.3709 0.992187 15.9763C1.75391 16.7732 2.75391 16.7459 3.19922 16.8318C4.80078 16.9841 10 17.031 10 17.031C10 17.031 14.2031 17.0232 17 16.824C17.3906 16.7771 18.2422 16.7732 19.0039 15.9763C19.6055 15.3709 19.8008 13.9919 19.8008 13.9919C19.8008 13.9919 20 12.3748 20 10.7537V9.23804C20 7.62085 19.8008 5.99976 19.8008 5.99976ZM7.93359 12.5935V6.97241L13.3359 9.79272L7.93359 12.5935Z"})}))}},94090:function(e,t,n){n.d(t,{Ad:()=>f,a2:()=>Y,uc:()=>g});var i=n(69277),r=n(10201),l=n(37946),o=n(17402),a=n(15667),c=n(84605),s=n(46271),d=n(27332),u=n(94729),m=n(88774),p=n(82776);let h=(0,o.createContext)(()=>void 0);function f(e){let{children:t}=e,[n,i]=(0,o.useState)(null),l=()=>i(null);return(0,r.FD)(h.Provider,{value:i,children:[t,(0,r.Y)(a.H,{isOpen:!!n,onClose:l,pub:null==n?void 0:n.pub,canReportToAdmins:null==n?void 0:n.canReportToAdmins,onSubmit:async function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return l(),null==n?void 0:n.onSubmit(...t)}})]})}function g(){return(0,o.useContext)(h)}function Y(e){let{comment:t,publication:n,post:o,item:a}=e,h=(0,s.Jd)(),f=g(),{iString:Y}=(0,c.GO)();return t&&(0,p.canReportComment)(h,t)?(0,r.Y)(m.Dr,{leading:(0,r.Y)(l.A,{}),priority:"destructive",onClick:()=>{let e=!!t.publication_id;f({pub:null!=n?n:void 0,canReportToAdmins:e,onSubmit:async n=>{let{reportCategory:r,details:l,reportedToSubstack:o}=n;await (0,u.x6)("/api/v1/comment/".concat(t.id,"/report"),{method:"POST",json:(0,i._)({details:l,reportCategory:r,reportedToSubstack:o},e?{publication_id:t.publication_id}:{})})}})},children:Y("Report")}):o&&n&&a&&"context"in a&&d.j6.includes(a.context.type)?(0,r.Y)(m.Dr,{leading:(0,r.Y)(l.A,{}),priority:"destructive",onClick:()=>{f({pub:n,canReportToAdmins:!1,onSubmit:async e=>{let{reportCategory:t,details:i}=e;await (0,u.x6)("/api/v1/publications/".concat(n.id,"/posts/").concat(o.id,"/report"),{method:"POST",json:{details:i,reportCategory:t}})}})},children:Y("Report")}):null}},42686:function(e,t,n){n.d(t,{U8:()=>U,Yw:()=>B,hH:()=>z,ti:()=>N,wR:()=>L});var i=n(69277),r=n(10201),l=n(66443),o=n(10278),a=n(72880),c=n(27749),s=n(7984),d=n(10398),u=n(42509),m=n(95887),p=n(26401),h=n(2675),f=n(8103),g=n(22858),Y=n(77181),y=n(25667),v=n(9079),b=n(46478),C=n(88325),k=n(78479),_=n(94328),w=n(99662),I=n(76977),x=n(3046),S=n(504),F=n(13348),D=n(20437),T=n(50129),A=n(75914),E=n(39318),P=n(49807),O=n(44307);function N(e){let{parent:t,item:n,attachments:i,readOnly:l,isDm:a,isRestack:s,isPermalink:d,isComposing:u,onQuoteThemeChange:m,onAttachmentClick:p,onSavePostClick:h,utm_content:f,commentId:g}=e,Y=(0,c.PK)();if(0===i.length)return null;let y=i.filter(e=>"image"===e.type),v=i.filter(e=>"video"===e.type),b=i.filter(e=>"image"!==e.type&&"video"!==e.type);return(0,r.FD)(r.FK,{children:[y.length>0&&(0,r.Y)(o.xn,{parent:t,readOnly:l||(0,w.y)(),assets:y.map(e=>U(e)),onClick:p,onSwipe:()=>{n&&(0,S.fP)(n,Y)},isRestack:s,isPermalink:d,isDm:a,feedItem:n,commentId:g}),v.map(e=>{var i;return(0,r.Y)(D.R8,{mediaUpload:e.mediaUpload,composing:null!=u&&u,videoPlayerProps:{surface:(0,C.u)(Y),entityType:"comment",entityKey:null!=(i=null==t?void 0:t.id)?i:"unknown",contentType:"comment",feedItemTrackingParameters:null==n?void 0:n.trackingParameters}},e.mediaUpload.id)}),b.map(e=>(0,r.Y)(L,{parent:t,attachment:e,readOnly:l,isDm:a,isRestack:s,isPermalink:d,isComposing:u,onAttachmentClick:p,onSavePostClick:h,onQuoteThemeChange:m,utm_content:f,compactIfPossible:y.length>0||v.length>0||b.length>1,item:null!=n?n:void 0}))]})}function B(e){let{attachments:t}=e;if(0===t.length)return null;let n=t.filter(e=>"image"===e.type),i=t.filter(e=>"video"===e.type);return(0,r.FD)(r.FK,{children:[n.length>0&&(0,r.Y)(l._,{assets:n.map(e=>U(e))}),i.map(e=>(0,r.Y)(R,{mediaUpload:e.mediaUpload}))]})}function R(e){let{mediaUpload:t}=e,n=(0,E.Pzx)(t);return(0,r.FD)(I.pT,{width:72,height:72,radius:"md",overflow:"hidden",sizing:"border-box",border:"detail",position:"relative",alignItems:"center",justifyContent:"center",flex:"auto",children:[(0,r.Y)(a.o,{src:n,maxWidth:72,useRetinaSizing:!0,imageIsFixedWidth:!0,imageProps:{height:72,smartCrop:!0},className:O.A.videoThumbnailImage}),(0,r.Y)(F.ro,{isPlaying:!1,size:40})]})}function L(e){var t,n,l,o,a,w;let{parent:I,attachment:S,readOnly:F,isRestack:E,isDm:P,isPermalink:O,isComposing:N,onAttachmentClick:B,onSavePostClick:R,onQuoteThemeChange:L,utm_content:z,compactIfPossible:U,item:K}=e,M=(0,c.PK)();if((0,T._d)(S))return(0,r.Y)(p.G,{attachment:S,readOnly:F,isRestack:E,onAttachmentClick:B,utm_content:z});if("live_stream"===S.type)return(0,r.Y)(m.G,{activeLiveStream:S.active_live_stream,onAttachmentClick:B,maxWidth:D.di,feedItem:null!=K?K:null,videoPlayerProps:{surface:(0,C.u)(M),entityType:"comment",entityKey:null!=(t=null==I?void 0:I.id)?t:"unknown",contentType:"comment",feedItemTrackingParameters:null==K?void 0:K.trackingParameters}});if("link"===S.type){let{linkMetadata:e}=S,t=(0,x.Ac)(e.url),n=(0,x.b5)(e.url);if(t)return(0,r.Y)(b.H,{videoId:t});if(n)return(0,r.Y)(v.k,{videoId:n});let l=(0,y.x)(e.url);if(l)return(0,r.Y)(y.E,{embedType:l.embedType,resourceId:l.resourceId});let o=(0,s.a)(e.url);if(o)return(0,r.Y)(s.x,{country:o.country,type:o.type,id:o.id});let a=(0,Y.l)(e.url);return a?(0,r.Y)(Y.Y,{url:a.url,type:a.type}):(0,r.Y)(u.i,(0,i._)({readOnly:F,onClick:B},S.linkMetadata))}if("comment"===S.type)return(0,r.Y)(d.Hr,{parent:I,readOnly:F,publication:null!=(n=S.publication)?n:void 0,comment:S.comment,onAttachmentClick:B,utm_content:z,isDm:P,isPermalink:O,commentId:S.comment.id});if("post"===S.type&&S.postSelection)return(0,r.Y)(k.DP,{readOnly:F,attachment:S,onClick:B,onSavePostClick:R,onThemeChange:L,isPermalink:O,isComposing:N,isRestack:E});if("post"===S.type&&S.postImageSelection)return(0,r.Y)(g.h,{parent:I,item:K,attachment:S,onClick:B,readOnly:F,isRestack:E,isPermalink:O,isDm:P});if("post"===S.type){let e=K&&(0,A.tL)(K,S)&&"post"===K.type?(null==(l=K.mediaClip)?void 0:l.clip_info)||(null==(o=S.mediaClip)?void 0:o.clip_info):(null==(a=S.mediaClip)?void 0:a.clip_info)||S.clipInfo,t=S.post.videoUpload;return e&&t?(0,r.Y)(D.R8,{tag:(0,r.Y)(_.b_,{pub:S.publication,post:S.post,onViewEpisodeClick:B}),mediaUpload:t,composing:!1,videoPlayerProps:{surface:(0,C.u)(M)}},S.id):(0,r.Y)(h.Sp,{clipInfo:e,readOnly:F,publication:S.publication,post:S.post,onClick:B,onSavePostClick:R,compact:U,item:K},S.id)}return"publication"===S.type?(0,r.Y)(f.S,{publication:S.publication,readOnly:F,onClick:B}):"video"===S.type?(0,r.Y)(D.R8,{mediaUpload:S.mediaUpload,composing:!1,videoPlayerProps:{surface:(0,C.u)(M),entityType:"comment",entityKey:null!=(w=null==I?void 0:I.id)?w:"unknown",contentType:"comment"}},S.mediaUpload.id):(0,r.Y)(j,{attachment:S})}function j(e){let{}=e;return(0,r.Y)(I.pT,{})}function z(e){switch(e.type){case"post":if(e.postSelection)return(0,P.wu9)(e.publication,e.post,{urlParams:{selection:e.postSelection.id}});return e.post.canonical_url;case"comment":return(0,P.Zgx)(e.comment);case"publication":return e.publication.base_url;case"link":var t;return null!=(t=e.linkMetadata.url)?t:null;default:return null}}function U(e){return{id:e.id,src:e.imageUrl,explicit:e.explicit,width:e.imageWidth,height:e.imageHeight}}},42652:function(e,t,n){n.d(t,{H:()=>y});var i=n(69277),r=n(10201),l=n(17402),o=n(18993),a=n(26683),c=n(27749),s=n(22434),d=n(27332),u=n(75840),m=n(58292),p=n(56804),h=n(76977),f=n(504),g=n(11510),Y=n(49807);function y(e){let{item:t,author:n}=e,i=(0,c.PK)(),o=(0,l.useContext)(u.P),a=()=>(0,f.Qb)(t,i,"profile",{tabId:o}),y=(0,g.Iu)(),b=y?(0,Y.sWz)({postId:t.community_post.id,utm_source:i}):(0,Y.e$6)({pubId:t.community_post.publication_id,postId:t.community_post.id,noBase:!0,params:{backAction:Y.TJD}});return(0,r.FD)(h.I1,{paddingY:16,paddingX:{mobile:16,desktop:0},gap:8,cursor:"pointer",onClick:e=>{e.defaultPrevented||((0,f.Qb)(t,i,"item",{tabId:o}),(0,p.o)(e,b,{native:y}))},children:[(0,r.Y)(s.x,{context:t.context,onClick:()=>(0,f.Qb)(t,i,"context",{tabId:o}),utm_content:t.entity_key}),(0,r.FD)(h.pT,{gap:12,children:[(0,r.Y)(m.NT,{user:n,onClick:a,utm_content:t.entity_key}),(0,r.FD)(h.I1,{gap:8,flex:"grow",children:[(0,r.Y)(d.LY,{author:n,onClick:a,utm_content:t.entity_key,publication:t.publication,item:t,timestamp:t.community_post.created_at,hideSubscribeCta:!0}),(0,r.Y)(v,{communityPost:t.community_post,pub:t.publication,author:n,feedSurface:i,userPubRole:t.user_pub_role,contextType:t.context.type,useClientSideRouting:!y})]})]})]})}function v(e){var t,n;let{communityPost:c,feedSurface:s,author:d,pub:u,userPubRole:m,contextType:p,useClientSideRouting:f}=e,[g,y]=(0,l.useState)({reactions:null!=(t=c.reactions)?t:{},currentReaction:null!=(n=c.reaction)?n:void 0}),v=async e=>{var t,n;let{id:r,reaction:l}=e,o=l===g.currentReaction,c=(0,i._)({},g.reactions);if(c[l]=(null!=(t=g.reactions[l])?t:0)+(o?-1:1),o){let e=await (0,a.jx)(l,r,"posts");!o&&g.currentReaction&&(c[g.currentReaction]=(null!=(n=c[g.currentReaction])?n:0)-1),e instanceof Error||y({currentReaction:void 0,reactions:c})}else await (0,a.YD)(l,r,"posts") instanceof Error||y({reactions:c,currentReaction:l})};return(0,r.FD)(h.I1,{gap:2,alignItems:"start",children:[(0,r.Y)(o.gL,{communityPost:c,hideReply:!1,userBlockStatus:null,isFounding:null==m?void 0:m.is_founding,isPaid:(null==m?void 0:m.membership_state)==="subscribed",isReadOnly:!0,useClientSideRouting:f,utmSource:s,pub:u,truncate:!0,surface:s,author:d,reactionsContext:{type:"chat_subscribed"===p?"feed-subscribed":"feed-recommended",id:c.id},reaction:g.currentReaction,reactions:g.reactions,handleReactionClick:v,backAction:Y.TJD,outline:"detail"}),(0,r.Y)(o.Dx,{direction:"incoming",commenters:c.recent_commenters,count:c.comment_count,hasUnread:!!(c.most_recent_comment_created_at&&c.user_last_viewed_timestamp&&c.user_last_viewed_timestamp<c.most_recent_comment_created_at),outline:"detail"})]})}},31354:function(e,t,n){n.d(t,{O:()=>a,j:()=>o});var i=n(10201),r=n(17402);let l=(0,r.createContext)({});function o(e){let{entityKey:t,children:n}=e;return(0,i.Y)(l.Provider,{value:{entityKey:t},children:n})}function a(){return(0,r.useContext)(l).entityKey}},2192:function(e,t,n){n.d(t,{T:()=>f});var i=n(10201),r=n(58050),l=n(84605),o=n(58292),a=n(86500),c=n(56804),s=n(17028),d=n(75303),u=n(94874),m=n(504),p=n(49095),h=n(49807);let f=e=>{let{item:t}=e,{iString:n}=(0,l.GO)();return(0,i.FD)(s.I1,{gap:8,paddingBottom:12,children:[(0,i.Y)(s.VP,{children:t.results.map((e,n)=>(0,i.Y)(g,{user:e,rank:n,item:t}))}),t.hasMore&&(0,i.Y)(s.$n,{onClick:e=>(0,c.o)(e,t.expansionUrl),priority:"secondary",children:n("See more people")})]})},g=e=>{var t;let{user:n,rank:c,item:f}=e,{isFollowing:g,toggle:Y}=(0,r.cC)(n,"top-search"),y=(0,u.F)({source:"top-search"}),v=()=>{(0,m.Qb)(f,"search","user-result"),(0,a.u4)(a.qY.GLOBAL_SEARCH_RESULT_CLICKED,{search_key:"top-search",result_type:"user",rank:c})},{iString:b}=(0,l.GO)();return(0,i.FD)(s.fI,{padding:8,gap:12,justifyContent:"space-between",children:[(0,i.Y)(s.fI,{gap:12,onClick:v,children:(0,i.FD)(d.AE,{href:(0,h.gYq)(n,{utm_source:"top-search"}),children:[(0,i.Y)(o.NT,{user:n,onClick:v}),(0,i.FD)(s.VP,{children:[(0,i.FD)(s.EY.B3,{weight:"semibold",children:[n.name,"\xa0",(0,i.Y)(p.UserStatusSymbols,{status:n.status,userId:n.id,inline:!0,size:"sm"})]}),(0,i.Y)(s.EY.B4,{color:"secondary",children:"".concat(n.handle?"@".concat(n.handle,"  ∙ "):"").concat(n.primaryPublication?null==(t=n.primaryPublication)?void 0:t.name:"")}),n.bio?(0,i.Y)(s.EY.B4,{clamp:1,children:n.bio}):null]})]})}),g?n.can_dm?(0,i.Y)(s.$n,{priority:"tertiary",onClick:()=>{y.handleStart([n.id]),v()},children:b("Message")}):null:(0,i.Y)(s.$n,{onClick:e=>{e.preventDefault(),Y(),v()},children:b("Follow")})]})}},22434:function(e,t,n){n.d(t,{x:()=>y});var i=n(10201),r=n(32485),l=n.n(r),o=n(17402),a=n(34615),c=n(84605),s=n(25859),d=n(24078),u=n(76977),m=n(63136),p=n(35276),h=n(11510),f=n(49807),g=n(82776);let Y="contextFacepileAvatar-QWZFqt";function y(e){let{context:t,onClick:n,utm_content:r}=e,l=v[t.type];return l?(0,i.Y)(u.pT,{className:"contextRow-x_1iaF",children:(0,i.Y)(m.EY.B4,{color:"secondary",style:{width:"100%"},children:(0,i.Y)(l,{context:t,onClick:n,utm_content:r})})}):null}let v={post_like:function(e){let{context:t,onClick:n,utm_content:r}=e;return(0,i.Y)(x,{context:t,type:"like",label:"Likes",verb:"liked",onClick:n,utm_content:r})},note_like:function(e){let{context:t,onClick:n,utm_content:r}=e;return(0,i.Y)(x,{context:t,type:"like",label:"Likes",verb:"liked",onClick:n,utm_content:r})},post_comment:b,post_restack:function(e){let{context:t,onClick:n,utm_content:r}=e;return(0,i.Y)(x,{context:t,type:"restack",label:"Restacks",verb:"restacked",onClick:n,utm_content:r})},post_subscribed:function(){let{iString:e}=(0,c.GO)();return(0,i.Y)(k,{type:"inbox",children:e("From your subscriptions")})},post_following:function(){let{iString:e}=(0,c.GO)();return(0,i.Y)(k,{type:"follow",children:e("From your follows")})},comment:b,note_reply:b,note_recommend:function(e){let{context:t,onClick:n,utm_content:r}=e;return(0,i.Y)(x,{context:t,type:"recommend",label:"Recommendations",verb:"recommends",onClick:n,utm_content:r})},comment_like:function(e){let{context:t,onClick:n,utm_content:r}=e;return(0,i.Y)(x,{context:t,type:"like",label:"Likes",verb:"liked",onClick:n,utm_content:r})},comment_restack:function(e){let{context:t,onClick:n,utm_content:r}=e;return(0,i.Y)(x,{context:t,type:"restack",label:"Restacks",verb:"restacked",onClick:n,utm_content:r})},chat_subscribed:function(e){let{context:t}=e;return(0,i.Y)(k,{type:"chat",children:t.publication?(0,i.FD)(i.FK,{children:["From the"," ",(0,i.Y)(s.Yq,{href:(0,f.e$6)({pubId:t.publication.id}),children:t.publication.name})," ","chat"]}):"From your chats"})},chat_recommended:function(e){let{context:t}=e;return(0,i.Y)(k,{type:"chat",children:t.publication?(0,i.FD)(i.FK,{children:["Recommended chat:"," ",(0,i.Y)(s.Yq,{href:(0,f.e$6)({pubId:t.publication.id}),children:t.publication.name})]}):"Recommended chat"})},latest_post:function(){let{iString:e}=(0,c.GO)();return(0,i.Y)(k,{type:"latest_post",children:e("Latest post")})},from_archives:function(){let{iString:e}=(0,c.GO)();return(0,i.Y)(k,{type:"from_archives",children:e("From the archives")})},from_saves:function(){let{iString:e}=(0,c.GO)();return(0,i.Y)(k,{type:"from_saves",children:e("You saved")})},generic:function(e){let{context:t}=e;return t.context_label?(0,i.Y)(k,{type:"generic",children:(0,i.Y)(m.EY,{as:"span",children:t.context_label})}):null},post:null,note:null,community_post:null,user_suggestions:null,topic:null,live_stream:null};function b(e){let{context:t,onClick:n,utm_content:r}=e;return(0,i.Y)(x,{context:t,type:"comment",label:"Replies",verb:"replied",onClick:n,utm_content:r})}let C={like:p.Sm,comment:p.sF,recommend:p.Nq,featured:p.vu,trending:p.A2,leaderboard:p.K5,restack:p.A_,inbox:p.RZ,follow:p.IE,chat:p.pL,latest_post:p.Uq,from_archives:p.Yz,from_saves:p.BG,generic:p.vu};function k(e){let{type:t,children:n,photoUrls:r}=e;return(0,i.FD)(u.Ye,{alignItems:"center",gap:4,position:"relative",flex:"grow",children:[(0,i.Y)(u.pT,{width:20,height:20,alignItems:"center",justifyContent:"center",className:"contextIconContainer-jHpRsg",children:(0,i.Y)(_,{type:t,photoUrls:null!=r?r:[]})}),n]})}function _(e){let{type:t,photoUrls:n}=e;return 1===n.length?(0,i.Y)(d.eu,{photoUrl:n[0],size:22}):2===n.length?(0,i.Y)(w,{photoUrls:n}):(0,i.Y)(I,{type:t})}function w(e){let{photoUrls:t}=e;return(0,i.FD)(u.pT,{className:"contextFacepile-JxlURM",children:[(0,i.Y)(d.eu,{photoUrl:t[0],size:22,className:l()(Y,"last-TGVukC")}),(0,i.Y)(d.eu,{photoUrl:t[1],size:22,className:Y})]})}function I(e){let{type:t}=e,n=C[t];return(0,i.Y)(n,{size:18})}function x(e){let t,{context:n,type:r,label:l,verb:c,utm_content:d,onClick:u}=e,p="notes_context",[f,Y]=(0,o.useState)(!1),y=(0,h.Iu)(),v=n.users[0];if(!v)return null;let b=n.users.length-1;return 2===n.users.length?(t=n.users[1],b=0):!y&&n.users.length>2&&(t=n.users[1],b=n.users.length-2),(0,i.Y)(k,{type:r,children:(0,i.FD)(m.EY,{as:"span",children:[(0,i.Y)(s.NY,{user:v,onClick:u,utm_source:p,utm_content:d,color:"secondary",useYou:!0}),t&&(0,i.FD)(i.FK,{children:[b>0?", ":" and ",(0,i.Y)(s.NY,{user:t,onClick:u,utm_source:p,utm_content:d,color:"secondary",useYou:!0})]}),b>0&&(0,i.FD)(i.FK,{children:[t?", and ":" and ",(0,i.Y)(s.Yq,{onClick:()=>{u(),Y(!0)},children:(0,g.pluralize)(b," other")})]})," ".concat(c),(0,i.Y)(a.K,{isOpen:f,modalLabel:l,faces:n.users,totalCount:n.users.length,onClose:()=>Y(!1),utmSource:null})]})})}},40740:function(e,t,n){n.d(t,{k:()=>P});var i=n(79785),r=n(10201),l=n(45773),o=n(27235),a=n(93540),c=n(11749),s=n(16079),d=n(54718),u=n(17402),m=n(94090),p=n(82936),h=n(58050),f=n(84605),g=n(46271),Y=n(27749),y=n(75840),v=n(94729),b=n(68349),C=n(35369),k=n(74715),_=n(16074),w=n(76977),I=n(88774),x=n(63136),S=n(36372),F=n(504),D=n(5180);function T(){let e=(0,i._)(["Snoozed "," for 30 days"]);return T=function(){return e},e}function A(){let e=(0,i._)(["Snooze "," for 30 days"]);return A=function(){return e},e}function E(){let e=(0,i._)(["Unfollow ",""]);return E=function(){return e},e}function P(e){let{user:t,item:n,comment:i,children:l}=e,o=(0,p.Hv)(null==t?void 0:t.id),a=(0,p.hU)(),[c,s]=(0,u.useState)(a),d=(0,D.l$)(n);(0,u.useEffect)(()=>{o&&!a&&s(!1)},[o]);let m=i?"feed"!==i.type||i.ancestor_path?"reply":"note":"post";return o&&!c?(0,r.Y)(O,{userBlockStatus:o,onShow:()=>s(!0),entityType:m}):d&&n&&"entity_key"in n?(0,r.Y)(N,{user:t,entityKey:n.entity_key,item:n}):(0,r.Y)(r.FK,{children:l})}function O(e){let{userBlockStatus:t,onShow:n,entityType:i}=e,{iString:l}=(0,f.GO)(),o="This ".concat(i," is from someone you’ve hidden."),a="This ".concat(i," is from someone you’ve blocked."),c="This ".concat(i," is from someone who has you blocked.");return(0,r.FD)(k.Z,{bg:"primary-hover",direction:"row",justifyContent:"space-between",alignItems:"center",padding:20,gap:12,onClick:e=>{e.preventDefault(),n()},children:[(0,r.Y)(w.fI,{flex:"grow",minWidth:0,children:(0,r.Y)(x.EY.B4,{color:"secondary",children:"muting"===t?o:"blocking"===t?a:c})}),"blocked"!==t&&(0,r.Y)(x.EY.B4,{color:"secondary",weight:"semibold",children:(0,r.Y)(x.Yq,{onClick:()=>n(),children:l("Show anyway")})})]})}function N(e){let{user:t,entityKey:n,item:i}=e,{iString:u,iTemplate:P}=(0,f.GO)(),O=(0,y.T)(),N=(0,g.Jd)(),R=(0,Y.PK)(),{isFollowing:L,toggle:j}=(0,h.cC)(t,"hidden-item"),z=[...(0,p.bd)(t,{surface:"hidden-item",onClick(e){i&&(0,F.Qb)(i,R,e,{tabId:O})}}),(0,m.a2)({comment:i&&"comment"in i?i.comment:null,publication:i&&"publication"in i?i.publication:null,post:i&&"post"in i?i.post:null,item:i})].filter(e=>!!e),U=(0,D.wA)(),K=()=>U({type:"item_dismiss",payload:{entityKey:n}}),M=(0,S.d)(),V=e=>M.popToast(()=>(0,r.Y)(S.y,{text:(0,b.uX)(e)})),q=async()=>{try{U({type:"item_unhide",payload:{entityKey:n}}),await (0,v.x6)("/api/v1/note/".concat(n,"/hide"),{method:"DELETE"})}catch(e){V(e)}},W=async()=>{try{K(),await (0,v.x6)("/api/v1/note/".concat(n,"/dislike"),{method:"POST",json:{tabId:O,surface:R}}),M.popToast(()=>(0,r.Y)(S.y,{Icon:l.A,text:u("We'll show fewer notes like this")}))}catch(e){V(e)}},H=async()=>{try{K(),await (0,v.x6)("/api/v1/blocks/".concat(null==t?void 0:t.id),{method:"POST",json:{type:"mute",surface:"hidden-item",expiryDays:30}}),M.popToast(()=>{var e;return(0,r.Y)(S.y,{Icon:o.A,text:P(T(),null!=(e=null==t?void 0:t.name)?e:"")})})}catch(e){V(e)}},G=async()=>{K(),L&&await j()};return(0,r.FD)(k.Z,{bg:"primary-hover",padding:12,gap:8,cursor:"default",children:[(0,r.FD)(w.fI,{padding:8,alignItems:"start",justifyContent:"space-between",children:[(0,r.FD)(w.fI,{alignItems:"start",gap:12,children:[(0,r.Y)(a.A,{size:20}),(0,r.FD)(w.VP,{flex:"grow",children:[(0,r.Y)(x.EY.B3,{weight:"semibold",children:u("Note hidden")}),("post-page-restacks-list"!==R||!((null==N?void 0:N.is_admin)||(null==N?void 0:N.is_contributor)))&&(0,r.Y)(x.EY.B4,{color:"secondary",children:u("We’ll use this feedback to improve your feed.")})]})]}),(0,r.Y)(C.$n,{size:"sm",priority:"secondary-outline",onClick:q,children:u("Undo")})]}),(0,r.Y)(_.c,{}),(0,r.Y)(B,{leading:(0,r.Y)(c.A,{size:16}),onClick:W,children:u("Show fewer notes like this")}),(null==t?void 0:t.name)&&(0,r.Y)(B,{leading:(0,r.Y)(o.A,{size:16}),onClick:H,children:P(A(),t.name)}),L&&(0,r.Y)(B,{leading:(0,r.Y)(s.A,{size:16}),onClick:G,children:(null==t?void 0:t.name)?P(E(),t.name):u("Unfollow")}),z.length>0&&(0,r.Y)(I.W1,{trigger:(0,r.Y)(C.Nm,{resetCss:!0,children:(0,r.Y)(B,{leading:(0,r.Y)(d.A,{size:16}),children:u("More options")})}),children:z})]})}function B(e){let{children:t,leading:n,onClick:i}=e;return(0,r.FD)(w.fI,{alignItems:"center",gap:12,onClick:i,padding:8,radius:"sm",className:"row-dUWMl7",animate:!0,cursor:"pointer",children:[(0,r.Y)(w.ov,{width:20,height:20,children:n}),(0,r.Y)(x.EY.B4,{weight:"medium",children:t})]})}},13074:function(e,t,n){n.d(t,{lE:()=>b});var i=n(69277),r=n(10201),l=n(82853),o=n(48309),a=n(43954),c=n(74217),s=n(43003),d=n(79146),u=n(86500),m=n(68349),p=n(35369),h=n(76977);n(16993);var f=n(63136),g=n(36372);n(17059);var Y=n(39318);n(70189);var y=n(49807),v=n(79804);function b(e){let{shareUrl:t,shareText:n,shareEventType:i,itemKey:p,shareSource:f,comment:v,onShare:b}=e,I=(0,g.d)(),x=(e,t)=>{(0,u.u4)(u.qY.SHARE_LINK_CLICKED,{name:e,type:i,item_entity_key:p,source:f});let n=t();n&&(n.startsWith("http")?window.open(n,"_blank"):document.location.href=n),null==b||b()};return(0,r.Y)(h.I1,{flex:"grow",justifyContent:"center",children:(0,r.FD)(h.pT,{gap:8,children:[(0,r.FD)(C,{children:[(0,r.Y)(_,{onClick:()=>{x("twitter",()=>(0,Y.gKg)({url:t,text:n}))},children:(0,r.Y)(d.A,{height:48})}),(0,r.Y)(k,{children:"Twitter"})]}),(0,r.FD)(C,{children:[(0,r.Y)(_,{onClick:()=>{x("facebook",()=>(0,Y.yRP)("https://www.facebook.com/sharer/sharer.php",{u:t}))},children:(0,r.Y)(c.A,{height:48})}),(0,r.Y)(k,{children:"Facebook"})]}),(0,r.FD)(C,{children:[(0,r.Y)(_,{onClick:()=>{x("linkedin",()=>(0,Y.yRP)("https://www.linkedin.com/sharing/share-offsite/",{url:t}))},children:(0,r.Y)(s.A,{height:48})}),(0,r.Y)(k,{children:"LinkedIn"})]}),(0,r.FD)(C,{children:[(0,r.Y)(w,{onClick:()=>{x("copy",()=>{(0,m.lW)(t)}),I.popToast(()=>(0,r.Y)(g.y,{text:"Copied link to clipboard",Icon:l.A}))},children:(0,r.Y)(l.A,{size:20,style:{stroke:"var(--color-fg-primary)"}})}),(0,r.Y)(k,{children:"Copy link"})]}),v?(0,r.FD)(C,{children:[(0,r.Y)(w,{onClick:()=>{I.popToast(()=>(0,r.Y)(g.y,{text:"Downloading image...",Icon:o.A}))},href:(0,y.Hr8)(v.id),target:"_blank",download:!0,children:(0,r.Y)(o.A,{size:20,style:{stroke:"var(--color-fg-primary)"}})}),(0,r.Y)(k,{children:"Save image"})]}):(0,r.FD)(C,{children:[(0,r.Y)(w,{onClick:()=>{x("email",()=>(0,Y.yRP)("mailto:",{subject:n,body:t}))},children:(0,r.Y)(a.A,{size:20,style:{stroke:"var(--color-fg-primary)"}})}),(0,r.Y)(k,{children:"Email"})]})]})})}function C(e){return(0,r.Y)(h.I1,(0,i._)({gap:8,alignItems:"center",flex:"grow"},e))}function k(e){return(0,r.Y)(f.EY.B5,(0,i._)({align:"center",color:"primary"},e))}function _(e){return(0,r.Y)(p.Nm,(0,i._)({resetCss:!0,className:v.A.shareImageButton},e))}function w(e){return(0,r.Y)(p.K0,(0,i._)({size:"lg",rounded:!0,priority:"tertiary"},e))}},42765:function(e,t,n){n.d(t,{D:()=>s});var i=n(10201),r=n(44451),l=n(58292),o=n(76977),a=n(22602),c=n(11510);function s(){return(0,i.Y)(o.I1,{className:"lotsOfNotes-hqdxZB",children:Array(8).fill(0).map(()=>(0,i.Y)(d,{}))})}function d(){let e=(0,c.Iu)();return(0,i.Y)(r.XZ,{children:(0,i.Y)(l.CF,{children:(0,i.FD)(o.pT,{gap:12,children:[(0,i.Y)(a.O,{radius:"full",width:e?36:40,height:e?36:40}),(0,i.FD)(o.I1,{gap:12,flex:"grow",children:[(0,i.Y)(a.O,{height:20,width:100}),[,,,].fill(0).map(()=>(0,i.Y)(a.O,{height:20,width:"".concat(30+70*Math.random(),"%")}))]})]})})})}},58292:function(e,t,n){n.d(t,{CF:()=>C,NT:()=>F,Wz:()=>S,bB:()=>x,iE:()=>I});var i=n(69277),r=n(70408),l=n(32641),o=n(10201),a=n(32485),c=n.n(a),s=n(27437),d=n(31354),u=n(24078),m=n(76977),p=n(75303),h=n(63136),f=n(83629),g=n(83357),Y=n(16291),y=n(49807),v=n(57324),b=n(44307);function C(e){let t;var{showGutter:n=!1,hasAvatar:r=!0,hasContext:a=!1,onClick:s,className:u,entityKey:m}=e,p=(0,l._)(e,["showGutter","hasAvatar","hasContext","onClick","className","entityKey"]);let h=s?e=>{let n=window.getSelection();if(n&&!n.isCollapsed&&(null==n?void 0:n.toString())!==t)return;let{target:i}=e;i instanceof Element&&i.closest("button, a")||e.defaultPrevented||s(e)}:void 0;return(0,o.Y)(d.j,{entityKey:m,children:(0,o.Y)("div",(0,i._)({className:c()(k,b.A.feedUnit,n?b.A.showThreadGutter:void 0,a?b.A.hasContext:void 0,r?b.A.hasAvatar:void 0,u),onPointerDown:()=>{var e;t=null==(e=window.getSelection())?void 0:e.toString()},onClick:h,onAuxClick:h},p))})}let k=c()((0,p.iF)({gap:12}),p.VP.styles),_=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),w=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"});function I(e){let t,{timestamp:n}=e,i=(0,Y.A)(),r=(0,Y.A)(n),l=i.diff(r,"day"),a=i.diff(r,"month");return t=!i.isSame(r,"year")&&a>6?w.format(r.toDate()):l>7?_.format(r.toDate()):r.fromNowShort(),(0,o.Y)(h.EY.B4,{as:"span",color:"secondary",children:n&&t})}function x(e){let{user:t,className:n,size:i=36}=e;return(0,o.Y)(u.eu,{size:i,user:t,className:n})}function S(e){let{children:t}=e;return(0,o.Y)(h.EY.B3,{className:b.A.feedCommentBodyInner,color:"primary",children:t})}function F(e){let{user:t,onClick:n,utm_content:l}=e,a=(0,g.g)({href:(0,y.gYq)(t,{noBase:f.Z,utm_source:v.VU.substackFeedItem}),state:{showBack:!0},onClick:n,campaign:{content:l}});return(0,o.Y)(m.pT,(0,r._)((0,i._)({as:"a",flex:"auto",alignSelf:"start",radius:"full",showFocus:!0,animate:!0,draggable:!1},a),{children:(0,o.Y)(s.ProfileHoverCard,{subject:t,utmSource:"feed",trigger:(0,o.Y)(x,{user:t})})}))}},25979:function(e,t,n){n.d(t,{b:()=>h});var i=n(10201),r=n(87677),l=n(86500),o=n(74715),a=n(16074),c=n(76977),s=n(75303),d=n(63136),u=n(9761),m=n(37764),p=n(49807);function h(e){let{item:t}=e,n=(0,p.Rtp)({categoryId:"bestseller"===t.category.id?"bestseller":t.category.id,ranking:"trending",backAction:(0,p.Tkp)({type:"bestseller"===t.category.id?m.j3.Secondary:m.j3.Category,id:t.category.id.toString()})});return 0===t.items.length?null:(0,i.FD)(i.FK,{children:[(0,i.FD)(c.VP,{gap:12,paddingY:{desktop:20,mobile:16},paddingX:{desktop:0,mobile:16},children:[(0,i.Y)(s.AE,{href:n,children:(0,i.FD)(c.fI,{alignItems:"center",gap:8,children:[(0,i.FD)(d.EY.H4,{children:["Rising in ",t.category.name]}),(0,i.Y)(r.A,{size:20})]})}),(0,i.Y)(o.Z,{paddingY:8,children:(0,i.Y)(u.QH,{items:t.items,surface:"feed",onClickItem:e=>{let{publication:t,rank:n}=e;(0,l.u4)(l.qY.LEADERBOARD_ITEM_CLICKED,{publication_id:t.id,rank:n,surface:"feed"})}})})]}),(0,i.Y)(a.c,{})]})}},37120:function(e,t,n){n.d(t,{U:()=>h});var i=n(10201),r=n(72880),l=n(27749),o=n(20482),a=n(56804),c=n(35369),s=n(76977),d=n(63136),u=n(504),m=n(11510),p=n(49807);function h(e){let{item:t}=e,n=(0,m.Iu)(),h=(0,u.KY)(t,{isModuleItem:!0}),f=(0,l.PK)();return(0,i.FD)(o.aW,{item:t,onFirstVisible:()=>(0,u.rX)("seen",t,f,{extraEventProps:{clicked_element:"row"}}),children:[(0,i.Y)(d.EY.H2,{children:t.title}),(0,i.FD)(o.aL,{cursor:"pointer",onClick:e=>{h("collection"),(0,a.o)(e,(0,p.Bss)(t.id,{noBase:!0}))},children:[(0,i.Y)(r.o,{src:t.image_url,maxWidth:560,imageProps:{height:n?194:260,smartCrop:!0},objectFit:"cover"}),(0,i.Y)(s.I1,{padding:20,gap:16,children:(0,i.FD)(s.I1,{gap:6,children:[(0,i.Y)(d.EY.H3,{children:t.card_title}),(0,i.Y)(d.EY.B4,{color:"secondary",children:t.card_subtitle}),(0,i.Y)(c.$n,{priority:"secondary-outline",children:t.button_title})]})})]})]})}},68279:function(e,t,n){n.d(t,{G:()=>E});var i=n(10201),r=n(45773),l=n(80697),o=n(84605),a=n(27749),c=n(20482),s=n(69277),d=n(79785),u=n(11749),m=n(54718),p=n(17402),h=n(94729),f=n(89490),g=n(35369),Y=n(76977),y=n(88774),v=n(45846);function b(){let e=(0,d._)(["We’ll no longer suggest ",""]);return b=function(){return e},e}function C(e){let{onUndo:t}=e,{iString:n}=(0,o.GO)();return(0,i.FD)(Y.I1,{padding:16,alignItems:"center",color:"secondary",children:[(0,i.Y)(f.az,{children:n("We’ll no longer suggest this publication.")}),(0,i.Y)(f.az,{children:(0,i.Y)(g.Nm,{resetCss:!0,style:{textDecoration:"underline"},onClick:e=>{e.preventDefault(),t()},children:n("Undo")})})]})}function k(e){let{iString:t}=(0,o.GO)();return(0,i.Y)(y.W1,(0,s._)({trigger:(0,i.Y)(g.K0,{"aria-label":t("More options"),priority:"quaternary",size:"sm",onClick:e=>{e.stopPropagation()},children:(0,i.Y)(m.A,{size:16})})},e))}var _=n(56804),w=n(81203),I=n(63136),x=n(504),S=n(11510),F=n(32848),D=n(39318),T=n(49807),A=n(57324);function E(e){let{item:t}=e,{iString:n}=(0,o.GO)(),{publication:s}=t,d=s.logo_url,m={utm_source:A.VU.substack,utm_content:A.fL.feedFeaturedPublication},f=(0,S.Iu)(),{isSubscribed:E}=(0,F.NL)(s.id),P=(0,x.KY)(t,{isModuleItem:!0}),O=(0,a.PK)(),N=function(e){let{publication:t,onSelect:n}=e,{iString:r,iTemplate:l}=(0,o.GO)(),a=(0,v.SC)(),[c,s]=(0,p.useState)(!1),d=async()=>{a.isConfirming||await a.confirm()&&(s(!0),(0,h.x6)("/api/v1/reader/interest",{method:"POST",json:{type:"publication",publication_id:t.id,sentiment:"negative"}}),n("not_interested"))};return{handleUndo:()=>{s(!1),(0,h.x6)("/api/v1/reader/interest",{method:"DELETE",json:{type:"publication",publication_id:t.id}}),n("undo_not_interested")},notInterested:c,menu:(0,i.FD)(i.FK,{children:[(0,i.Y)(k,{children:(0,i.Y)(y.Dr,{leading:(0,i.Y)(u.A,{}),onClick:d,children:r("Not interested in publication")})}),(0,i.Y)(v.uo,{modal:a,title:r("Not interested?"),body:l(b(),t.name)})]})}}({publication:s,onSelect:P});return(0,i.FD)(c.aW,{item:t,onFirstVisible:()=>(0,x.rX)("seen",t,O),children:[(0,i.FD)(Y.pT,{alignItems:"center",justifyContent:"space-between",children:[(0,i.Y)(I.EY.H2,{children:t.title}),N.menu]}),(0,i.FD)(c.aL,{cursor:N.notInterested?void 0:"pointer",onClick:N.notInterested?void 0:e=>{e.defaultPrevented||(P("publication"),(0,_.o)(e,(0,D.fOI)(s,{params:m}),{newTab:!0,native:!0}))},children:[(0,i.Y)(c.lr,{imageUrl:d,width:350,children:(0,i.Y)(c.lF,{justifyContent:"center",alignItems:"center",paddingY:32,children:(0,i.Y)(w.Nq,{pub:t.publication,size:f?72:128})})}),(0,i.FD)(Y.I1,{padding:20,gap:20,alignItems:"center",children:[(0,i.FD)(Y.I1,{gap:6,children:[(0,i.Y)(I.EY.H3,{children:t.publication.name}),(0,i.Y)(I.EY.B4,{children:t.card_subtitle}),(0,i.FD)(I.EY.Meta,{ellipsis:!0,children:["by ",t.publication.author_name]})]}),E?(0,i.Y)(g.$n,{priority:"secondary-outline",leading:(0,i.Y)(r.A,{size:20}),children:n("Subscribed")}):(0,i.Y)(g.$n,{leading:(0,i.Y)(l.A,{size:20}),priority:"secondary-accent",onClick:()=>{P("subscribe")},href:(0,T.eV6)(t.publication,{addBase:!0,params:m}),newTab:!0,children:n("Subscribe")})]}),N.notInterested&&(0,i.Y)(Y.pT,{justifyContent:"center",alignItems:"center",bg:"primary",style:{position:"absolute",inset:0},children:(0,i.Y)(C,{onUndo:N.handleUndo})})]})]})}},40144:function(e,t,n){n.d(t,{b:()=>C});var i=n(69277),r=n(10201),l=n(32485),o=n.n(l),a=n(83673),c=n.n(a),s=n(17402),d=n(8853),u=n(20482),m=n(86500),p=n(56804),h=n(24078),f=n(76977),g=n(63136),Y=n(95187),y=n(504),v=n(49095),b=n(49807);function C(e){let{item:t}=e,n=(0,s.useRef)(null),i=new Map(c()(t.items.map(e=>"note"===e.type?[e.note.id,e.note.author]:null)));return(0,s.useEffect)(()=>(0,y.rX)("seen",t,"explore",{extraEventProps:{module:"videoSuggestionsExplore"}}),[]),(0,r.Y)(u.B_,{item:t,children:(0,r.Y)(Y.Z6,{scrollRef:n,paddingX:8,paddingBottom:8,gap:4,children:t.itemPreviews.map(e=>{let n=i.get(e.noteId);if(n)return(0,r.Y)(k,{preview:e,author:n,trackingParameters:t.trackingParameters},e.gifPreviewUrl)})})})}function k(e){var t,n;let{preview:l,author:a,trackingParameters:c}=e,{noteId:u,gifPreviewUrl:Y,liveStreamId:y}=l,C=y?(0,b.UUj)({liveStreamId:y}):(0,b.M$q)(u),k=!!y,[_,w]=(0,s.useState)(!1);return(0,r.FD)(f.I1,{as:"a",href:C,gap:12,className:"suggestion-t9mwKS",radius:"md",padding:4,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),onClick:e=>{(0,m.u4)(m.qY.FEED_MODULE_ITEM_CLICKED,(0,i._)({module:"videoSuggestionsExplore",clicked_element:"attachment",surface:"explore"},c)),(0,p.o)(e,C,{state:{showBack:!0}})},children:[(0,r.Y)(d.c,{className:"suggestionPreview-mx_slc",src:Y,radius:"sm",width:152,height:270,sourceFormats:[_?"webp":"png"],options:{crop:"crop"}}),a&&(0,r.FD)(f.Ye,{className:"suggestionLabel-HDQ2gv",alignItems:"center",gap:4,children:[(0,r.Y)(f.pT,{className:o()("avatarContainer-jqklVk",{"liveAvatar-Q8uKpU":k}),children:(0,r.Y)(h.eu,{user:a,photoUrl:null!=(t=a.photo_url)?t:void 0,size:20})}),k?(0,r.FD)(r.FK,{children:[(0,r.Y)(g.EY.B4,{weight:"semibold",className:"liveTag-g9dLki",children:"Live"})," \xb7 "]}):null,(0,r.Y)(g.EY.B4,{ellipsis:!0,children:a.name}),(null!=(n=a.bestseller_tier)?n:0)>0&&(0,r.Y)(v.UserStatusSymbols,{size:"sm",tier:a.bestseller_tier,userId:a.id})]})]})}},20482:function(e,t,n){n.d(t,{lF:()=>T,B_:()=>k,aL:()=>F,aW:()=>w,lr:()=>D,XZ:()=>_});var i=n(69277),r=n(70408),l=n(32641),o=n(10201),a=n(32485),c=n.n(a),s=n(17402),d=n(78865),u=n(46271),m=n(27749),p=n(75840);n(25859);var h=n(82772),f=n(89490),g=n(76977);n(63136);var Y=n(504),y=n(11510),v=n(49807),b=n(17031),C=n(44307);function k(e){let{item:t,children:n,onFirstVisible:l,className:a,ariaLabel:f}=e,g=(0,s.useRef)(null),v=(0,m.PK)(),k=(0,s.useContext)(p.P),w=(0,y.Iu)(),I=(0,u.Jd)();return(0,h.eZ)(g,()=>{let e;if("comment"===t.type){var n;let{isTruncated:l}=(0,b.D)(t.comment,{isMobile:w});if(e={isTruncated:l},g.current&&(null==(n=t.comment.attachments)?void 0:n.length)){let n=t.comment.attachments.filter(e=>"image"===e.type),l=n.length>2?(0,d.zt)(n,g.current.clientWidth):0;e=(0,r._)((0,i._)({},e),{isMediaTruncated:l>g.current.clientWidth})}}(0,Y.Q$)(t,v,{tabId:k,extraEventProps:e,isLoggedIn:!!I}),l&&l()},e=>{(0,Y.tR)(t,v,e,{tabId:k})}),(0,o.Y)(_,{ref:g,className:c()("userSuggestions"!==t.type?C.A.contain:void 0,a),role:"article","aria-label":f,children:n})}let _=(0,f.I4)({display:"flex",direction:"column",className:C.A.feedItem,position:"relative"});function w(e){let{item:t,children:n,onFirstVisible:i}=e;return(0,o.Y)(k,{item:t,onFirstVisible:i,children:(0,o.Y)(x,{children:n})})}let I=(0,f.I4)({display:"flex",direction:"column",paddingX:{mobile:16,desktop:0}}),x=(0,f.I4)({paddingY:24,gap:16},I),S=(0,f.iF)({cursor:"pointer"}),F=(0,f.I4)({position:"relative",display:"flex",direction:"column",radius:"md",bg:"elevated",border:"detail",shadow:"md",overflow:"hidden"},e=>{var{className:t,cursor:n}=e,r=(0,l._)(e,["className","cursor"]);return(0,o.Y)("div",(0,i._)({className:c()("pointer"===n&&S,t)},r))});function D(e){var{className:t,children:n,imageUrl:a,width:s,height:d}=e,u=(0,l._)(e,["className","children","imageUrl","width","height"]);let m=a&&(0,v.dJ9)(a,s,{height:d,gravity:"auto",format:"jpg"});return(0,o.Y)(g.pT,(0,r._)((0,i._)({},u),{className:c()("blurBg-fkm1Tn",t),style:m?{backgroundImage:"url('".concat(m,"')"),backgroundColor:"transparent"}:void 0,children:n}))}let T=(0,f.yw)({className:"blurFg-BbZZn1",display:"flex",flex:"grow"})},4560:function(e,t,n){n.d(t,{M:()=>o});var i=n(10201),r=n(75189),l=n(97546);function o(e){let{item:t,comment:n}=e;return(0,i.Y)(l.w,{children:(0,i.Y)(r.b,{item:t,comment:n,priority:"secondary"})})}},99289:function(e,t,n){n.d(t,{j:()=>b});var i=n(10201),r=n(27749),l=n(3228),o=n(97546),a=n(69277),c=n(46271),s=n(75840),d=n(504),u=n(46453),m=n(2481),p=n(75914),h=n(22230),f=n(48226),g=n(52347),Y=n(60763),y=n(90554),v=n(82776);function b(e){var t;let{item:n,pub:b,post:C,onLike:k}=e,_=(0,r.PK)(),w=null!=(t=C.child_comment_count)?t:0,I=(0,m.L6)(n),x=(0,h.X)(C),S=!!C.reaction,F=function(e,t,n){var i,l;let o=(0,c.Jd)(),m=(0,r.PK)(),f=(0,s.T)(),{requireLogin:g}=(0,u.eE)(),Y=t&&"mediaClip"in t&&t.mediaClip?t.mediaClip.id:void 0,y=(0,h.$)(e.id,(0,a._)({tabId:f},(null==t?void 0:t.context.type)==="post_restack"&&{restacking_user_id:null==(l=t.context.users)||null==(i=l[0])?void 0:i.id},Y&&{mediaClipId:Y}));return async i=>{if(i.preventDefault(),!o){null==g||g();return}let r=!e.reaction,l=t&&(0,p.tL)(t)&&"post"===t.type&&t.mediaClip?t.mediaClip:void 0;await y(e.id,r,null==l?void 0:l.id)&&(null==n||n(r),t&&(0,d.Qb)(t,m,"like",{tabId:f}))}}(C,n,k),D=function(e,t){let n=(0,c.Jd)(),i=(0,r.PK)(),l=(0,s.T)(),o=(0,m.NP)(),{requireLogin:h}=(0,u.eE)();return r=>{if(null==r||r.preventDefault(),!n){null==h||h();return}let c=t&&(0,p.tL)(t)&&"post"===t.type&&t.mediaClip?t.mediaClip:void 0;o.open((0,a._)({feedItem:t,parentPubId:e.publication_id,parentPostId:e.id,tabId:l,surface:i},c&&{parentMediaClipId:c.id})),t&&(0,d.Qb)(t,i,"comment",{tabId:l})}}(C,n),T=!b.community_enabled,A=!(0,v.commentsEnabledForPost)({publication:b,post:C});return(0,y.y)({name:"post-comment",action:D}),(0,i.FD)(o.w,{children:[(0,i.Y)(f.c,{onClick:F,count:x,active:S,disabled:T}),(0,i.Y)(l.k,{count:w,onClick:D,disabled:A,replyRequirement:I}),(0,i.Y)(g.H,{pub:b,post:C,feedItem:n,disabled:T,surface:_}),(0,i.Y)(Y.f,{publication:b,post:C,item:n,twitterText:(0,v.resolveTwitterShareText)({pub:b,post:C})})]})}},97546:function(e,t,n){n.d(t,{w:()=>l});var i=n(10201),r=n(76977);function l(e){let{children:t}=e;return(0,i.Y)(r.fI,{flex:"grow",gap:8,className:"container-_91AK1",children:t})}},82772:function(e,t,n){n.d(t,{S8:()=>a,eZ:()=>c,ov:()=>s});var i=n(17402),r=n(45611),l=n(68349);function o(e,t){let{root:n,threshold:l=0,rootMargin:o,disabled:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=(0,r._)(e=>{t(e.some(e=>e.isIntersecting),e)});(0,i.useEffect)(()=>{if("undefined"==typeof IntersectionObserver||!e.current||a)return;let t=new IntersectionObserver(c,{root:n,threshold:l,rootMargin:o});return t.observe(e.current),function(){t.disconnect()}},[n,l,o,a])}function a(e,t){let{root:n,threshold:r=0,rootMargin:l,disabled:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=(0,i.useRef)(!1);o(e,e=>{e&&!c.current&&(c.current=!0,t())},{root:n,threshold:r,rootMargin:l,disabled:a||c.current})}function c(e,t,n){let{root:l,rootMargin:a,disabled:c=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=(0,i.useRef)({firstVisibleTime:null,lastVisibleTime:null}),d=()=>{let{current:e}=s;if(null!==e.firstVisibleTime){let t=e.lastVisibleTime?Date.now()-e.lastVisibleTime:0;null!=e.lastVisibleTime&&(n(t),e.lastVisibleTime=null)}},u=(0,r._)(()=>{let{current:e}=s;null==e.firstVisibleTime&&(e.firstVisibleTime=Date.now(),t()),e.lastVisibleTime=Date.now()});return o(e,(0,r._)((e,t)=>{var n;let i=null==(n=window)?void 0:n.innerHeight,r=t.some(e=>{let t=e.intersectionRatio>=.9&&e.isIntersecting,n=i&&e.boundingClientRect.height*e.intersectionRatio>=.5*i;return t||n}),l=t.some(e=>e.intersectionRatio<.3&&!e.isIntersecting);r?u():l&&d()}),{root:l,threshold:[.3,.5,.7,.9],rootMargin:a,disabled:c}),(0,i.useEffect)(()=>{let{current:e}=s;return"undefined"==typeof IntersectionObserver&&u(),()=>{null!==e.lastVisibleTime&&d()}},[]),u}function s(e){let[t,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let t=()=>{let t=(0,l.Tf)();n(t),null==e||e(t)};return(0,l.cH)(t),()=>{(0,l.Gr)(t)}},[e]),t}},22416:function(e,t,n){n.d(t,{s:()=>a});var i=n(10201),r=n(51290),l=n(35369),o=n(17028);function a(e){let{tab:t,children:n,value:o}=e;return(0,i.Y)(r.l9,{asChild:!0,value:o,children:(0,i.FD)(l.Nm,{className:"tab-eCtYfd",display:"flex",flex:"grow",alignItems:"center",justifyContent:"center",position:"relative",sizing:"border-box",radius:"xs",resetCss:!0,minHeight:40,paddingTop:2,paddingX:16,gap:6,showFocus:!0,animate:!0,userSelect:"none",children:[t.leading,(0,i.Y)(c,{children:n}),t.trailing]})})}let c=e=>{let{children:t}=e;return(0,i.Y)(o.EY.B4,{as:"span",weight:"semibold",size:14,ellipsis:!0,animate:!0,children:t})}},81726:function(e,t,n){n.d(t,{F:()=>a});var i=n(10201),r=n(51290),l=n(35369),o=n(54715);function a(e){let{tab:t,flex:n="auto",onClick:a}=e,{leading:c,trailing:s,value:d,label:u}=t;return(0,i.Y)(r.l9,{asChild:!0,value:d,children:(0,i.Y)(l.$n,{className:o.A.segment,leading:c,trailing:s,priority:"quaternary",size:"sm",flex:n,onClick:a,children:u})})}},71518:function(e,t,n){n.d(t,{x:()=>l});var i=n(38221),r=n.n(i);function l(e){let{parentRef:t,highlightRef:n}=e,i=()=>{let e=n.current,i=t.current;if(!i||!e)return;let r=i.querySelector('[data-state="active"]');if(!r)return;let l=r.getBoundingClientRect(),o=i.getBoundingClientRect(),a=parseInt(window.getComputedStyle(i).paddingLeft),c=l.left-o.left-a+i.scrollLeft;requestAnimationFrame(()=>{e.style.setProperty("--highlight-width","".concat(l.width,"px")),e.style.setProperty("--highlight-x","".concat(c,"px"))})};i();let l=t.current,o=new ResizeObserver(r()(i,200));return l&&(o.observe(l),l.addEventListener("scroll",i,{passive:!0})),()=>{o.disconnect(),l&&l.removeEventListener("scroll",i)}}},87370:function(e,t,n){n.d(t,{$:()=>m,b:()=>u});var i=n(69277),r=n(70408),l=n(32641),o=n(10201),a=n(17402),c=n(16993),s=n(21398);let d=(0,a.createContext)({open:()=>void 0});function u(e){var t;let{children:n}=e,[l,c]=(0,a.useState)(null),s=(0,a.useMemo)(()=>({open:e=>c(e)}),[]);return(0,o.FD)(d.Provider,{value:s,children:[n,(0,o.Y)(p,(0,r._)((0,i._)({},l),{source:null!=(t=null==l?void 0:l.source)?t:"substack",isOpen:!!l,onClose:()=>c(null)}))]})}function m(){return(0,a.useContext)(d)}function p(e){var{isOpen:t,onClose:a}=e,d=(0,l._)(e,["isOpen","onClose"]);return(0,o.Y)(c.aF,{isOpen:t,onClose:a,fullscreenMobile:!0,children:(0,o.Y)(s.Ic,(0,r._)((0,i._)({},d),{module:"@/frontend/reader2/chat/DmShareModal",onRequest:()=>n.e("3426").then(n.bind(n,21977)),resolve:e=>e.DmComposerModal,onClose:a}))})}},22230:function(e,t,n){n.d(t,{$:()=>o,X:()=>a});var i=n(41935),r=n(68349),l=n(5180);function o(e){let{tabId:t,restacking_user_id:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,l.wA)(),a=(0,i.N9)();return async(e,i,l)=>{o({type:"post_like",payload:{postId:e,isLiked:i}}),l&&o({type:"post_like",payload:{postId:e,isLiked:i,mediaClipId:l}});try{return await a(e,i,{tabId:t,restacking_user_id:n,media_clip_id:l}),!0}catch(t){return o({type:"post_like",payload:{postId:e,isLiked:!i}}),l&&o({type:"post_like",payload:{postId:e,isLiked:!i,mediaClipId:l}}),alert((0,r.uX)(t)),!1}}}function a(e){var t;return null!=(t=e.reactions["❤"])?t:0}},69553:function(e,t,n){n.d(t,{T:()=>N});var i=n(69277),r=n(10201),l=n(17402),o=n(70408),a=n(32641),c=n(97731);let s=e=>{var{strokeWidth:t=1.5}=e,n=(0,a._)(e,["strokeWidth"]);return(0,r.FD)(c.A,(0,o._)((0,i._)({},n),{strokeWidth:t,name:"SendIcon",svgParams:{height:20,width:20,viewBox:"0 0 20 20"},children:[(0,r.Y)("path",{d:"M18.3332 1.66699L12.4998 18.3337L9.1665 10.8337L1.6665 7.50033L18.3332 1.66699Z",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.Y)("path",{d:"M18.3332 1.66699L9.1665 10.8337",strokeLinecap:"round","stroke-linejoin":"round"})]}))};var d=n(84605),u=n(46271),m=n(85042),p=n(17028),h=n(63136),f=n(65842),g=n(7244),Y=n(88977),y=n(79785),v=n(43954),b=n(5109),C=n(34835),k=n(94729),_=n(68349),w=n(20500),I=n(16993),x=n(84843),S=n(61554),F=n(39318);function D(){let e=(0,y._)(["We've sent an email to ",". Click the magic link inside to continue."]);return D=function(){return e},e}let T=e=>{let{liveStream:t,isOpen:n,setIsOpen:i,subscriptions:o,setSubscriptions:a}=e,[c,s]=(0,l.useState)(""),[d,m]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),{user:f,setUser:g}=(0,u.ur)(),[Y,y]=(0,l.useState)(!1),v=(0,l.useCallback)(async()=>{y(!0);try{let e=await (0,k.x6)("/api/v1/reader/signup/just_email",{method:"POST",json:{email:c}});if(e.userExists)return void h(!0);if(e.emailConfirmationRequired)return void m(!0);f||((0,C.E)({user:e.user}),g(e.user))}catch(e){alert((0,_.uX)(e))}finally{y(!1)}},[c,f,C.E,g]);return(0,r.Y)(I.aF,{isOpen:n,onClose:()=>i(!1),children:d?(0,r.Y)(E,{email:c,setEmailConfirmationRequired:m}):f?(0,r.Y)(P,{user:f,liveStream:t,subscriptions:o,setEntryState:C.E,setUser:g,setSubscriptions:a,setIsOpen:i}):(0,r.Y)(A,{email:c,setEmail:s,onSubmit:v,isLoading:Y,userExistsButIsNotLoggedIn:p,setIsOpen:i})})},A=e=>{let{email:t,setEmail:n,onSubmit:i,isLoading:l,userExistsButIsNotLoggedIn:o,setIsOpen:a}=e,{iString:c}=(0,d.GO)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(I.rQ,{title:c("Sign up to join the chat"),description:(0,r.FD)(r.FK,{children:[c("Already have an account? "),(0,r.Y)(p.Yq,{color:"substack",decoration:"hover-underline",href:(0,F.a7q)({redirect:document.location.href}),cursor:"pointer",children:c("Log in")})]}),showClose:!0,onClose:()=>a(!1),icon:(0,r.Y)(x.Ud,{}),alignItems:"center"}),(0,r.Y)(I.cw,{children:(0,r.FD)(p.VP,{gap:16,children:[(0,r.Y)(f.ks,{flex:"grow",placeholder:c("Your email"),value:t,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&i()}}),o&&(0,r.FD)(w.yn,{align:"center",children:[c("This email is already registered with Substack. "),(0,r.Y)(p.Yq,{decoration:"underline",href:(0,F.a7q)({redirect:document.location.href}),children:c("Sign in")})]}),(0,r.Y)(S.U,{includeCheckbox:!1,addSignupPreamble:!0,color:"secondary",textAlign:"center"})]})}),(0,r.Y)(I.jl,{direction:"column",primaryButton:(0,r.Y)(p.$n,{priority:"primary",type:"submit",loading:l,onClick:()=>{i()},children:c("Sign up")})})]})},E=e=>{let{email:t,setEmailConfirmationRequired:n}=e,{iString:i,iTemplate:l}=(0,d.GO)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(I.rQ,{title:i("Check your email to continue"),showClose:!1,icon:(0,r.Y)(x.qx,{icon:(0,r.Y)(v.A,{size:20})}),alignItems:"center",description:l(D(),null!=t?t:"your email address")}),(0,r.Y)(I.q1,{}),(0,r.Y)(p.VP,{padding:16,borderTop:"detail",children:(0,r.Y)(h.EY.B4,{as:"span",color:"secondary",align:"center",children:(0,r.FD)(r.FK,{children:[i("Didn't get the email? "),(0,r.Y)(p.Yq,{color:"substack",decoration:"hover-underline",onClick:e=>{e.preventDefault(),n(!1)},cursor:"pointer",children:i("Try again")})]})})})]})},P=e=>{let{user:t,liveStream:n,subscriptions:l,setEntryState:a,setUser:c,setSubscriptions:s,setIsOpen:d}=e;return(0,r.Y)(p.az,{padding:20,children:(0,r.Y)(b.dx,{className:"profileUpdater-bXuV5M",user:t,pub:n.pub,noSubscribeCta:Object.values(l).some(e=>{var t;return["free_signup","subscribed"].includes(null!=(t=null==e?void 0:e.membership_state)?t:"unsubscribed")}),onSuccess:e=>{let t=null==e?void 0:e.body;t&&(a({user:t}),c(t)),t.userDidSignUp&&s(e=>{var t,r,l,a;return(0,o._)((0,i._)({},e),{[null!=(l=null==(t=n.pub)?void 0:t.id)?l:0]:(0,o._)((0,i._)({},e[null!=(a=null==(r=n.pub)?void 0:r.id)?a:0]),{membership_state:"free_signup"})})}),d(!1)},complete:!0})})};var O=n(57324);let N=e=>{let{liveStream:t,subscriptions:n,setSubscriptions:o,showShareButton:a=!0}=e,c=(0,l.useRef)(null),{message:s,setMessage:f,loading:y,sendMessage:v}=(0,m.M)({inputRef:c,liveStream:t}),[b,C]=(0,l.useState)(!1),k=(0,u.Jd)(),{iString:_}=(0,d.GO)(),w=!s&&!y,I=!k,x=!(null==k?void 0:k.name),S=t.liveStreamInformation.chatAuthInfo.canSendChat,D=t.liveStreamInformation.chatAuthInfo.acceptableSendChatLevel,A=!1,E=!1;if(!S){let e=t.liveStreamInformation.chatAuthInfo.errorType;"banned"===e?A=!0:"gated"===e&&(E=!0)}let P=(0,F.my9)(t.pub,(0,i._)({utm_source:O.VU.liveStreamChat,next:document.location.href,utm_medium:O.Jn.web},"founding_subscribers"===D&&{plan:"founding"}));return(0,r.FD)(p.fI,{padding:16,borderTop:"detail",children:[(0,r.Y)(T,{liveStream:t,isOpen:b,setIsOpen:C,subscriptions:n,setSubscriptions:o}),I?(0,r.Y)(L,{onClick:()=>{C(!0)}}):E?(0,r.Y)(z,{checkoutUrl:P,chatLevel:D}):x?(0,r.Y)(j,{onClick:()=>{C(!0)}}):A?(0,r.Y)(h.EY.B3,{children:_("You have been banned from commenting on this publication.")}):(0,r.Y)(B,{ref:c,message:s,setMessage:f,loading:y,onSend:v}),w?(0,r.FD)(r.FK,{children:[(0,r.Y)(g.s,{liveStream:t}),a&&(0,r.Y)(Y.m,{activeLiveStream:t})]}):(0,r.Y)(R,{loading:y,disabled:!s,onClick:v})]})},B=(0,l.forwardRef)((e,t)=>{let{message:n,setMessage:i,loading:l,onSend:o}=e,{iString:a}=(0,d.GO)();return(0,r.Y)(f.ks,{ref:t,flex:"grow",placeholder:a("Write message..."),maxLength:256,value:n,disabled:l,onKeyDown:e=>{"Enter"===e.key&&o()},onChange:e=>{e.currentTarget.value.length<=256&&i(e.currentTarget.value)}})}),R=e=>{let{loading:t,disabled:n,onClick:i}=e;return(0,r.Y)(p.K0,{priority:"tertiary",disabled:t||n,onClick:i,children:(0,r.Y)(s,{width:20,height:20})})},L=e=>{let{onClick:t}=e,{iString:n}=(0,d.GO)();return(0,r.Y)(p.$n,{flex:"grow",onClick:t,children:n("Sign up to join chat")})},j=e=>{let{onClick:t}=e,{iString:n}=(0,d.GO)();return(0,r.Y)(p.$n,{flex:"grow",onClick:t,children:n("Set up profile to join the chat")})},z=e=>{let{checkoutUrl:t,chatLevel:n}=e,{iString:i}=(0,d.GO)();return(0,r.Y)(p.$n,{flex:"grow",href:t,children:i("all_subscribers"===n?"Subscribe to join chat":"Upgrade to join chat")})}},46376:function(e,t,n){n.d(t,{K:()=>b,t:()=>I});var i=n(10201),r=n(54718),l=n(17402),o=n(84605),a=n(46271),c=n(94729),s=n(24078),d=n(35369),u=n(17028),m=n(88774),p=n(16993),h=n(94996),f=n(36372),g=n(49095),Y=n(39318),y=n(57324);let v=[{value:1,label:"1 day"},{value:30,label:"30 days"},{value:90,label:"90 days"},{value:365,label:"1 year"},{value:36135,label:"Forever"}],b=e=>{let{message:t,showBlockButton:n,liveStream:r,disableUserLinks:l=!1}=e;return(0,i.FD)(C,{children:[(0,i.Y)(_,{user:t.user,disableLink:l}),(0,i.FD)(u.VP,{gap:4,flex:"grow",children:[(0,i.Y)(u.EY.B3,{as:"span",children:(0,i.Y)(k,{user:t.user,showBlockButton:n,liveStream:r,disableTextLink:l})}),(0,i.Y)(w,{children:t.body})]})]},t.id)},C=e=>{let{children:t,key:n}=e;return(0,i.Y)(u.fI,{gap:12,className:"message-lU6Uj5",children:t},n)},k=e=>{let{user:t,showBlockButton:n,liveStream:s,disableTextLink:b=!1}=e,{iString:C}=(0,o.GO)(),k=(0,a.Jd)(),[_,w]=(0,l.useState)(!1),[I,x]=(0,l.useState)(30),{popToast:S}=(0,f.d)(),F=async()=>{try{let e={surface:"live_stream_chat",expiryDays:I,liveStreamId:null==s?void 0:s.id};await (0,c.x6)("/api/v1/comment_bans/".concat(t.id),{method:"POST",json:e}),S(()=>(0,i.Y)(f.y,{text:C("User banned from commenting")}))}catch(e){console.error("Error banning user from commenting:",JSON.stringify(e)),S(()=>(0,i.Y)(f.y,{text:(e&&"object"==typeof e&&"body"in e&&e.body&&"object"==typeof e.body&&"error"in e.body&&"string"==typeof e.body.error?e.body.error:null)||C("Error banning user from commenting")}))}w(!1)};return n&&k?(0,i.FD)(u.Ye,{alignItems:"center",justifyContent:"space-between",children:[(0,i.FD)(u.EY.B3,{as:"span",fontWeight:"medium",display:"inline-block",children:[b?(0,i.Y)(u.EY.B3,{as:"span",fontWeight:"medium",display:"inline-block",children:I18N.p(t.name)}):(0,i.Y)(u.Yq,{href:(0,Y.gYq)(t,{utm_source:y.VU.liveStreamChat}),target:"_blank",children:I18N.p(t.name)})," ",t.bestseller_tier?(0,i.Y)(g.UserStatusSymbols,{status:t.status,tier:t.bestseller_tier,size:"xs",inline:!0}):null]}),(0,i.FD)(u.ov,{width:20,height:20,children:[(0,i.FD)(m.W1,{trigger:(0,i.Y)(d.K0,{priority:"quaternary",size:"xs",children:(0,i.Y)(r.A,{})}),placement:"bottom-start",children:[(0,i.Y)(m.Dr,{onClick:()=>{window.open((0,Y.gYq)(t,{utm_source:y.VU.liveStreamChat}),"_blank")},children:C("Visit profile")}),(0,i.Y)(m.Dr,{onClick:()=>{w(!0)},children:C("Ban from commenting")})]})," "]}),(0,i.FD)(p.aF,{isOpen:_,onClose:()=>w(!1),children:[(0,i.Y)(p.rQ,{title:C("Ban %1 from commenting?",t.name),showClose:!0,onClose:()=>w(!1)}),(0,i.Y)(p.cw,{children:(0,i.FD)(u.VP,{gap:16,children:[(0,i.Y)(u.EY.B3,{children:C("This user will no longer be able to comment or chat in this publication. This action cannot be undone in the livestream UI.")}),(0,i.FD)(u.VP,{gap:8,children:[(0,i.Y)(u.EY.B3,{fontWeight:"medium",children:C("Ban duration:")}),(0,i.Y)(h.I,{value:I,onChange:e=>x(Number(e.target.value)),children:v.map(e=>(0,i.Y)("option",{value:e.value,children:e.label},e.value))})]})]})}),(0,i.Y)(p.q1,{}),(0,i.Y)(p.jl,{primaryButton:(0,i.Y)(d.$n,{priority:"destructive",onClick:F,children:C("Ban from commenting")}),secondaryButton:(0,i.Y)(d.$n,{priority:"secondary",onClick:()=>w(!1),children:C("Cancel")})})]})]}):(0,i.FD)(u.EY.B3,{as:"span",fontWeight:"medium",display:"inline-block",children:[b?(0,i.Y)(u.EY.B3,{as:"span",fontWeight:"medium",display:"inline-block",children:I18N.p(t.name)}):(0,i.Y)(u.Yq,{href:(0,Y.gYq)(t,{utm_source:y.VU.liveStreamChat}),target:"_blank",children:I18N.p(t.name)})," ",(0,i.Y)(g.UserStatusSymbols,{tier:t.bestseller_tier,status:t.status,size:"xs",inline:!0,noRelationshipBadge:!0})]})},_=e=>{let{user:t,disableLink:n=!1}=e;return n?(0,i.Y)(s.eu,{size:24,user:t}):(0,i.Y)(s.dm,{size:24,user:t,utmSource:y.VU.liveStreamChat,linkProps:{target:"_blank"}})},w=e=>{let{children:t}=e;return(0,i.Y)(u.EY.B3,{as:"span",opacity:90,children:t})},I=e=>{let{message:t,disableUserLinks:n=!1}=e,{iPlural:r}=(0,o.GO)(),l=t.users_to_display.length,a=t.users_to_display[0],c=t.users_to_display[1];return l?(0,i.FD)(C,{children:[a?(0,i.Y)(_,{disableLink:n,user:a}):null,(0,i.Y)(u.EY.B3,{as:"span",lineHeight:24,display:"inline-block",className:"joinedText-pllHZH",children:1===l&&a&&(null==a?void 0:a.name)?(0,i.FD)(i.FK,{children:[(0,i.Y)(k,{user:a,disableTextLink:n}),(0,i.Y)(w,{children:"joined"})]}):2===l&&a&&(null==a?void 0:a.name)&&c&&(null==c?void 0:c.name)?(0,i.FD)(i.FK,{children:[(0,i.Y)(k,{user:a,disableTextLink:n}),(0,i.Y)(w,{children:"and"}),(0,i.Y)(k,{user:c,disableTextLink:n}),(0,i.Y)(w,{children:"joined"})]}):l>2&&a&&(null==a?void 0:a.name)?(0,i.FD)(i.FK,{children:[(0,i.Y)(k,{user:a,disableTextLink:n}),(0,i.Y)(w,{children:"and"}),(0,i.FD)(w,{children:[I18N.p(t.num_viewers_joined-1)," others joined"]})]}):l>=1?(0,i.FD)(w,{children:[r("%1 person","%1 people",t.num_viewers_joined)," ","joined"]}):null})]},t.id):null}},70577:function(e,t,n){n.d(t,{S:()=>a});var i=n(10201),r=n(17028),l=n(22602),o=n(83804);let a=()=>(0,i.Y)(r.I1,{overflow:"hidden",flex:"grow",justifyContent:"end",children:(0,i.Y)(o.Kd,{children:Array.from({length:16}).map((e,t)=>(0,i.Y)(c,{index:t},t))})}),c=e=>{let{index:t}=e;return(0,i.FD)(r.fI,{gap:12,children:[(0,i.Y)(l.O,{radius:"full",bg:"secondary",width:32,height:32}),(0,i.Y)(l.O,{radius:"md",bg:"secondary",flex:"grow",height:[40,120,72,64,40,72,40,72,64,120,40,64,40,120,72,64].at(t)})]})}},7244:function(e,t,n){n.d(t,{s:()=>m});var i=n(10201),r=n(23345),l=n(17402),o=n(46271),a=n(94729),c=n(68349),s=n(17028),d=n(43296),u=n(55714);let m=e=>{let{liveStream:t}=e,[n,m]=(0,l.useState)(new Set),[p,h]=(0,l.useState)(new Set),f=(0,l.useRef)(new Set),g=(0,o.Jd)(),Y=(0,d.XW)(),y=(0,l.useCallback)(e=>{m(t=>{let n=new Set(t);return n.add(e),f.current=n,n}),setTimeout(()=>{m(t=>{let n=new Set(t);return n.delete(e),f.current=n,n}),h(t=>{let n=new Set(t);return n.delete(e),n})},2750)},[]),v=(0,l.useCallback)(async()=>{await (0,a.x6)("/api/v1/live_stream/".concat(t.liveStream.id,"/reaction"),{method:"POST",json:{reaction:"❤️"}})},[t.liveStream.id]);(0,l.useEffect)(()=>null==Y?void 0:Y.listen({[(0,u.sl)({streamId:t.liveStream.id})]:e=>{var t;let{data:n}=e;(null==n||null==(t=n.message)?void 0:t.type)==="live-stream:reaction"&&n.message.user.id!==(null==g?void 0:g.id)&&y(n.message.id)}}),[Y]),(0,l.useEffect)(()=>{n.forEach(e=>{p.has(e)||setTimeout(()=>{h(t=>{let n=new Set(t);return n.add(e),n})},0)})},[n]);let b=(e,t)=>parseInt(e,16)/parseInt(t,16);return(0,i.Y)(s.K0,{priority:"quaternary",onClick:()=>{y((0,c.QT)()),v().catch(console.error)},children:(0,i.FD)(s.pT,{position:"relative",children:[Array.from(f.current).map(e=>{let t,n,l;return(0,i.Y)(r.A,{className:"heart-v8Jdcb",style:{transform:p.has(e)?(t=b(e.substring(0,8),"ffffffff"),n=b(e.substring(9,13),"ffff"),l=b(e.substring(28,32),"ffff"),"translate(".concat(50*t-25,"px, -").concat(125*n+200,"px) rotate(").concat(30*l-15,"deg)")):void 0},size:20},e)}),(0,i.Y)(r.A,{size:20})]})})}},88977:function(e,t,n){n.d(t,{m:()=>s});var i=n(10201),r=n(72170),l=n(16008),o=n(35369),a=n(49807),c=n(57324);let s=e=>{let{activeLiveStream:t,priority:n="quaternary"}=e,s=(0,a.Xrv)({liveStreamId:t.liveStream.id,utm_source:c.VU.liveStreamShareButton}),d=t.liveStream.title;return(0,i.Y)(l.X,{shareName:d,shareUrl:s,trackParams:{live_stream_id:t.liveStream.id},trigger:(0,i.Y)(o.K0,{priority:n,children:(0,i.Y)(r.A,{size:20})}),utmCampaign:c._9.liveStreamPermalink})}},73030:function(e,t,n){n.d(t,{Ew:()=>i,kN:()=>r});let i=25,r=e=>"paid"===e.ranking?"#".concat(e.rank," in ").concat(e.category_name):"bestseller"===e.category_id?"#".concat(e.rank," New bestseller"):"#".concat(e.rank," Rising in ").concat(e.category_name)},83660:function(e,t,n){n.d(t,{A:()=>i});function i(e){var t;return"twitter"===e.source?"From Twitter":"facebook"===e.source?"From Facebook":"contacts_email"===e.source||"contacts_phone"===e.source?"From your contacts":e.publication?"".concat(e.publication.name):null!=(t=e.user.handle)?t:"Suggested"}},74588:function(e,t,n){n.d(t,{j:()=>l});var i=n(52711),r=n(23246);function l(e){let{category:t,language:n="en"}=e,{iString:i}=I18N.i(n);switch(t){case"hate":return i("Hate");case"private_information":return i("Private information");case"plagiarism":return i("Plagiarism");case"impersonation":return i("Impersonation");case"illegal_activity":return i("Illegal activity");case"spam":return i("Spam");case"pornography":return i("Pornography");case"other":return i("Other");default:return console.error("unrecognized category",t),i("Other")}}let o=i.Ik({name:i.Yj().meta({title:"Name",description:"The name of the content policy"}),description:i.Yj().min(1).max(1e3).meta({title:"Description",description:"A short description of the policy"}),category:i.k5(r.Z5).meta({title:"Category",description:"The category of the content policy"}),violation_examples:i.YO(i.Yj().min(1).max(500)).meta({title:"Violation Examples",description:"Examples of content that violate the policy"}),non_violation_examples:i.YO(i.Yj().min(1).max(500)).meta({title:"Non-Violation Examples",description:"Examples of content that do not violate the policy"})}),a=i.Ik({content_policies:i.YO(o).meta({title:"Specifications",description:"Each of the policies below will be included in LLM prompts to help guide the model when evaluating content."})});i.Ik({main:a.meta({description:"Warning! Updates to this config will be applied in production immediately."}),test:a.meta({description:"Test changes to the content policies before applying them to the main config."})}).meta({$id:"moderation-config/content_policies/v2",title:"Content Policies",description:"The content policies to include in LLM prompts"})},35666:function(e,t,n){function i(e,t){let n=new Set(e);return n.add(t),n}function r(e,t){let n=new Set(e);return n.delete(t),n}function l(e,t){return new Set([...e].filter(e=>!t.has(e)))}n.d(t,{FF:()=>r,iv:()=>l,mp:()=>i})}}]);