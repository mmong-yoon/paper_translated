"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3858"],{37749:function(e,n,t){t.d(n,{A:()=>i});let i={chrome:"chrome-_LLvs8",hidden:"hidden-wHbbPQ",spinner:"spinner-Ti9Gdl",button:"button-aOzqXG",left:"left-YVRGou",right:"right-pvXhar",top:"top-deZX1P",bottom:"bottom-D60oFA",middle:"middle-DqhMOs",img:"img-nwpk1x",loading:"loading-UuPN_c"}},12791:function(e,n,t){t.d(n,{W:()=>m});var i=t(10201),r=t(63950),l=t.n(r),o=t(76977);function u(e){let{children:n}=e;return(0,i.Y)(o.fI,{justifyContent:"center",alignItems:"center",onClick:e=>e.stopPropagation(),paddingBottom:{desktop:12,mobile:0},className:"container-H9iqVx",children:n})}var a=t(75189),c=t(94010);function d(e){let{item:n,comment:t}=e;return(0,i.Y)(u,{children:(0,i.Y)(c.q,{children:(0,i.Y)(a.b,{item:n,comment:t,priority:"primary"})})})}var s=t(59339);function p(e){let{isLoading:n=!1,publication:t,post:r,onLike:l}=e;return(0,i.Y)(u,{children:(0,i.Y)(c.q,{children:(0,i.Y)(s.u,{isLoading:n,publication:t,post:r,onLike:l})})})}function m(e){let{post:n,publication:t,feedItem:r,onLike:o}=e;if(r&&"comment"===r.type)return(0,i.Y)(d,{item:r,comment:r.comment});if(n&&t){var u,a;return(0,i.Y)(p,{publication:null!=(u=null==r?void 0:r.publication)?u:t,post:null!=(a=null==r?void 0:r.post)?a:n,onLike:null!=o?o:l()})}return null}},92825:function(e,n,t){t.d(n,{f:()=>D,S:()=>S});var i=t(10201),r=t(17402),l=t(89490),o=t(63136);function u(e){let{pub:n}=e,t=n.hero_text,r=n.rankingDetailFreeSubscriberCount;return t||r?(0,i.FD)(a,{children:[t&&(0,i.Y)(o.EY.B4,{clamp:3,children:t}),r&&(0,i.Y)(o.EY.B4,{color:"secondary",children:r})]}):null}let a=(0,l.I4)({display:"flex",direction:"column",gap:2});var c=t(84605),d=t(46271),s=t(35369),p=t(85050),m=t(39318),f=t(57324);function h(e){let{pub:n,isContributor:t,isSubscribed:r,utmSource:l}=e,{iString:o}=(0,c.GO)(),u=(0,d.Jd)(),a=(0,p.s)({surface:"profile"}),h=(0,m.eV6)(n,{user:u,addBase:!0,utm_source:l||f.VU.pubHoverCard,utm_medium:f.Jn.web,utm_campaign:f._9.profilePage});return t?null:(0,i.Y)(b,{children:r?(0,i.Y)(s.$n,{priority:"secondary-outline",href:h,size:"sm",children:o("Subscribed")}):(0,i.Y)(s.$n,{priority:"primary",href:h,onClick:a(n),size:"sm",children:o("Subscribe")})})}let b=(0,l.I4)({display:"flex",direction:"column",paddingTop:4});var Y=t(81203);function v(e){var n;let{pub:t}=e,r=(0,m.fOI)(t),l=t.name||"",u=null!=(n=t.subdomain)?n:"";return(0,i.FD)(y,{children:[(0,i.FD)(g,{children:[(0,i.Y)(o.EY.B2,{weight:"medium",children:(0,i.Y)(o.Yq,{href:r,children:l})}),(0,i.Y)(o.EY.B4,{color:"secondary",children:(0,i.Y)(o.Yq,{href:r,children:u})})]}),(0,i.Y)(Y.wg,{pub:t,size:48})]})}let y=(0,l.I4)({display:"flex",direction:"row",gap:12}),g=(0,l.I4)({display:"flex",direction:"column",flex:"grow",gap:2});var k=t(57820);function w(){return(0,i.Y)(D,{children:(0,i.Y)(k.y$,{flex:"grow",padding:40})})}var C=t(86500),_=t(76528);function S(e){var n;let{pubId:t,utmSource:l,trackOnShow:o}=e,{data:a}=(0,_.OU)("/api/v1/publication/public/".concat(t),{shouldRevalidate:!1});return((0,r.useEffect)(()=>{o&&a&&(0,C.u4)(C.qY.PUBLICATION_HOVER_CARD_SHOWN,{publication_id:t})},[o,null==a||null==(n=a.pub)?void 0:n.id]),a)?(0,i.FD)(D,{children:[(0,i.Y)(v,{pub:a.pub}),(0,i.Y)(u,{pub:a.pub}),(0,i.Y)(h,{isContributor:a.isContributor,isSubscribed:a.isSubscribed,pub:a.pub,utmSource:l})]}):(0,i.Y)(w,{})}let D=(0,l.I4)({display:"flex",direction:"column",sizing:"border-box",width:320,gap:12,padding:12})},19008:function(e,n,t){t.d(n,{h:()=>Y});var i=t(10201),r=t(35426),l=t(38390),o=t(23623),u=t(90460);function a(e){let{onClose:n}=e;return(0,i.Y)(l.hJ,{forceMount:!0,className:"backdrop-SPBUoO",onClick:()=>n()})}var c=t(17402);let d=(0,c.forwardRef)((e,n)=>{let{children:t}=e;return(0,i.Y)(l.UC,{forceMount:!0,ref:n,className:"panel-vMauWo",onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),onPointerDownOutside:e=>{e.preventDefault()},children:t})}),s="transition-Dki0wq",p="from-b7KIRm",m="to-np0fky",f=e=>{let{children:n}=e;return(0,i.Y)(r.e.Child,{as:c.Fragment,enter:s,enterFrom:p,enterTo:m,leave:s,leaveFrom:m,leaveTo:p,children:n})};var h=t(80988),b=t(45346);function Y(e){let{isOpen:n,onClose:t=()=>void 0,children:c}=e;return(0,u.h)(n),(0,i.Y)(l.bL,{open:n,onOpenChange:e=>{e||t()},children:(0,i.Y)(l.ZL,{forceMount:!0,children:(0,i.Y)(r.e.Root,{show:n,children:(0,i.FD)(h.k,{children:[(0,i.Y)(b.B,{children:(0,i.Y)(a,{onClose:t})}),(0,i.Y)(o.a,{children:(0,i.Y)(f,{children:(0,i.Y)(d,{children:c})})})]})})})})}},94010:function(e,n,t){t.d(n,{q:()=>l});var i=t(10201),r=t(76977);function l(e){let{children:n}=e;return(0,i.Y)(r.fI,{justifyContent:"space-between",alignItems:"center",gap:32,className:"container-TZIh8Q",children:n})}},59339:function(e,n,t){t.d(n,{u:()=>v});var i=t(10201),r=t(17402),l=t(58398),o=t(46271),u=t(3228),a=t(48226),c=t(52347),d=t(99978),s=t(69277),p=t(70408),m=t(82634);function f(){return(0,i.FD)(i.FK,{children:[(0,i.Y)(a.c,{disabled:!1,priority:"primary"}),(0,i.Y)(u.k,{disabled:!1,priority:"primary"}),(0,i.Y)(m.Q,{disabled:!1,priority:"primary"}),(0,i.Y)(d.w,{disabled:!1,priority:"primary"})]})}var h=t(49807),b=t(82776),Y=t(57324);function v(e){let{isLoading:n=!1,publication:t,post:m,onLike:v}=e,y=(0,o.Jd)(),[g,k]=(0,r.useState)(!1),{isLiked:w,likeCount:C,handleLike:_}=function(e,n){let[t,i]=(0,r.useState)(()=>!!(null==e?void 0:e.reaction)),[l,o]=(0,r.useState)(()=>{var n;return null!=(n=null==e?void 0:e.reactions["❤"])?n:0});(0,r.useEffect)(()=>{if(e){var n;i(!!e.reaction),o(null!=(n=e.reactions["❤"])?n:0)}},[e]);let u=(0,r.useCallback)(()=>{if(!e)return;let r=!t;i(r),o(e=>e+(r?1:-1)),n(e.id,r)},[n,e,t]);return{isLiked:t,likeCount:l,handleLike:u}}(m,v),{handleRestack:S,postWithRestackState:D}=function(e){let[n,t]=(0,r.useState)(()=>!!(null==e?void 0:e.restacked)),[i,l]=(0,r.useState)(()=>{var n;return null!=(n=null==e?void 0:e.restacks)?n:0});return(0,r.useEffect)(()=>{if(e){var n;t(!!e.restacked),l(null!=(n=e.restacks)?n:0)}},[null==e?void 0:e.id]),{handleRestack:(0,r.useCallback)(e=>{t(n=>n!==e?(l(n=>n+(e?1:-1)),e):n)},[]),postWithRestackState:(0,r.useMemo)(()=>e?(0,p._)((0,s._)({},e),{restacked:n,restacks:i}):null,[e,n,i])}}(m);if(n)return(0,i.Y)(f,{});if(!t||!m)return null;let F=!y||!t.community_enabled,I=(0,b.showCommentsOnPost)({publication:t,post:m}),O="profile"===t.homepage_type?(0,h.q$n)(t,m):(0,h.wu9)(t,m,{comments:!0,urlParams:{utm_source:Y.VU.substack,utm_medium:Y.Jn.web,utm_campaign:Y._9.postViewer}});return(0,i.FD)(i.FK,{children:[(0,i.Y)(a.c,{onClick:_,count:C,active:w,disabled:F,priority:"primary"}),(0,i.Y)(u.k,{href:O,count:m.comment_count,newTab:"profile"!==t.homepage_type,disabled:F||!I,priority:"primary"}),(0,i.Y)(c.H,{pub:t,post:D,priority:"primary",onRestack:S}),(0,i.Y)(d.w,{priority:"primary",onClick:()=>{k(!0)}}),(0,i.Y)(l.Z,{isOpen:g,onClose:()=>k(!1),medium:"post viewer",utm_campaign:"post-expanded-share",user:y,post:m,pub:t})]})}},70568:function(e,n,t){function i(e){var n,t,i,r,l,o,u,a,c;let d=null==(n=e.attachments)?void 0:n.find(e=>["post","comment","link","publication"].includes(e.type)),s=null!=(o=null==(t=e.attachments)?void 0:t.filter(e=>"image"===e.type))?o:[],p=null!=(u=null==(i=e.attachments)?void 0:i.filter(e=>"video"===e.type))?u:[];return{linkAttachment:d,imageAttachments:s,videoAttachments:p,quoteAttachments:null!=(a=null==(r=e.attachments)?void 0:r.filter(e=>"post"===e.type&&!!e.postSelection))?a:[],imageRestackAttachments:null!=(c=null==(l=e.attachments)?void 0:l.filter(e=>"post"===e.type&&!!e.postImageSelection))?c:[]}}t.d(n,{B:()=>i}),t(10201),t(10278),t(42686),t(2675),t(8103),t(22858),t(78479),t(89490),t(93812),t(39318)}}]);