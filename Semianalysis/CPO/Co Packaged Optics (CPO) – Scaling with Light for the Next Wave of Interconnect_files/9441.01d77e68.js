"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["9441"],{16722:function(e,r,n){n.d(r,{A:()=>t});let t={checkbox:"checkbox-jbvy_H",tosCheckboxContainer:"tosCheckboxContainer-vfMi_Y"}},22674:function(e,r,n){n.d(r,{A:()=>t});let t={searchInput:"searchInput-fUS3Nw"}},51637:function(e,r,n){n.d(r,{A:()=>t});let t={toast:"toast-IVcFeu",open:"open-wKtjtc",close:"close-IvWMAm",closeSwipe:"closeSwipe-BIL6rc"}},87544:function(e,r,n){n.d(r,{W:()=>s,v:()=>c});var t=n(10201),i=n(84605),o=n(85478),l=n(74827),a=n(35369);function c(e){var r;let{content:n,onVerificationComplete:o,source:c="post"}=e,{iString:s}=(0,i.GO)(),{launchFlow:d,isLoading:u}=(0,l.K)(o,c),f=(null==(r=n.age_verification)?void 0:r.declined)===!0;return(0,t.Y)(a.$n,{priority:"primary-mono",onClick:()=>{d(n)},size:"sm",loading:u,disabled:f,children:s("Verify age")})}function s(){let{iString:e}=(0,i.GO)(),{getConfigFor:r}=(0,o.mJ)(),n=r("mobile_age_verification_learn_more_link");return n?(0,t.Y)(a.$n,{priority:"secondary-outline",href:n,newTab:!0,size:"sm",children:e("Learn more")}):null}},45516:function(e,r,n){n.d(r,{U:()=>y});var t=n(69277),i=n(70408),o=n(10201),l=n(69843),a=n.n(l),c=n(71464),s=n(17402),d=n(84605),u=n(45378);async function f(e){return(0,u.i)(e,{imageCropAspectRatio:1,cropSelectPresetOptions:void 0,willRenderCanvas:(e,r)=>{let{utilVisibility:n,selectionRect:o,lineColor:l,backgroundColor:a}=r;if(n.crop<=0)return e;let{x:c,y:s,width:d,height:u}=o;return(0,i._)((0,t._)({},e),{interfaceShapes:[{x:c+.5*d,y:s+.5*u,rx:.5*d,ry:.5*u,opacity:n.crop,inverted:!0,backgroundColor:[...a,.5],strokeWidth:1,strokeColor:[...l]},...e.interfaceShapes]})}})}var p=n(68349),h=n(24078),v=n(89490),C=n(35369),g=n(76977),m=n(23168),_=n(46058);function y(e){let{user:r,onChangePhoto:n}=e,{iString:l}=(0,d.GO)(),[u,y]=(0,s.useState)(null),[I,Y]=(0,s.useState)(null),[{isDragging:w},{openFileDialog:b,getInputProps:k,getDragProps:A}]=(0,m.l)({accept:"image/*",multiple:!1,onFilesAdded:async e=>{let r=e[0];if(r)try{let e=r.file instanceof File?r.file:null;if(!e)return;let t=await (0,p.Sd)(e);if(!t||a()(t.url))return;let i=await f(t.url),o=await (0,p.Sd)(i);if(!o)return;let{url:l,orientation:c}=o;y(null!=c?c:null),l&&(Y(l),n({photo_url:l}))}catch(e){console.error("Error processing image:",e)}}}),x=(0,s.useMemo)(()=>({transform:(0,p.FK)(u)}),[u]),E=I||(0,_.pI)(r);return(0,o.Y)(v.az,(0,i._)((0,t._)({alignSelf:"start"},A()),{children:(0,o.FD)(C.Nm,{resetCss:!0,onClick:b,"aria-label":l("Edit profile photo"),children:[(0,o.FD)(g.ov,{style:x,position:"relative",width:120,height:120,border:"detail",radius:"full",bg:w?"secondary":"primary",overflow:"hidden",children:[E?(0,o.Y)(h.eu,{photoUrl:E,size:120}):(0,o.Y)(c.A,{size:24}),w&&(0,o.Y)(g.ov,{position:"absolute",inset:0,style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},children:(0,o.Y)(c.A,{size:24})})]}),(0,o.Y)("input",(0,t._)({},k()))]})}))}},96790:function(e,r,n){n.d(r,{A:()=>c});var t=n(69277),i=n(70408),o=n(32641),l=n(10201),a=n(97731);let c=e=>{var{size:r=24,color:n="var(--color-fg-primary)"}=e,c=(0,o._)(e,["size","color"]);return(0,l.Y)(a.A,(0,i._)((0,t._)({},c),{name:"BigQuoteIcon",svgParams:{viewBox:"0 0 27 17"},stroke:"none",width:r,height:r,fill:n,children:(0,l.Y)("path",{d:"M11.7188 10.6172C11.7188 7.5 9.41016 5.01562 6.43359 5.01562C5.03906 5.01562 3.71484 5.56641 2.74219 6.64453H2.42578C3.10547 4.42969 5.16797 2.57812 7.73438 1.81641C8.09766 1.69922 8.36719 1.59375 8.53125 1.45312C8.71875 1.30078 8.82422 1.11328 8.82422 0.84375C8.82422 0.351562 8.44922 0.0117188 7.89844 0.0117188C7.53516 0.0117188 7.25391 0.0820312 6.75 0.246094C5.13281 0.773438 3.67969 1.69922 2.55469 2.88281C0.972656 4.52344 0 6.71484 0 9.31641C0 13.7109 2.78906 16.2539 6.05859 16.2539C9.28125 16.2539 11.7188 13.793 11.7188 10.6172ZM25.793 10.6172C25.793 7.5 23.4727 5.01562 20.5078 5.01562C19.1133 5.01562 17.7773 5.56641 16.8164 6.64453H16.5C17.1797 4.42969 19.2422 2.57812 21.7969 1.81641C22.1602 1.69922 22.4414 1.59375 22.6055 1.45312C22.793 1.30078 22.8867 1.11328 22.8867 0.84375C22.8867 0.351562 22.5234 0.0117188 21.9727 0.0117188C21.5977 0.0117188 21.3281 0.0820312 20.8125 0.246094C19.207 0.773438 17.7422 1.69922 16.6172 2.88281C15.0469 4.52344 14.0742 6.71484 14.0742 9.31641C14.0742 13.7109 16.8633 16.2539 20.1328 16.2539C23.3555 16.2539 25.793 13.793 25.793 10.6172Z"})}))}},37767:function(e,r,n){n.d(r,{A:()=>a});var t=n(69277),i=n(70408),o=n(32641),l=n(10201);let a=e=>{var{children:r,href:n,onClick:a,newTab:c}=e,s=(0,o._)(e,["children","href","onClick","newTab"]);return(0,l.Y)("a",(0,i._)((0,t._)({role:"button",tabIndex:0,href:null!=n?n:"javascript:void(0)"},c&&{target:"_blank",rel:"noopener noreferrer"},a&&{onClick:e=>{e.stopPropagation(),a(e)}},s),{children:r}))}},74827:function(e,r,n){n.d(r,{K:()=>d});var t=n(10201),i=n(17402),o=n(84605),l=n(46271),a=n(44803),c=n(36372),s=n(18189);function d(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post",{iString:n}=(0,o.GO)(),{popToast:d}=(0,c.d)(),u=(0,l.Jd)(),[f,p]=(0,i.useState)(!1),h=function(e){let{iString:r}=(0,o.GO)(),{popToast:n}=(0,c.d)();return()=>{n(()=>(0,t.Y)(c.y,{text:r("Verification submitted. Refreshing...")})),e&&e(),setTimeout(()=>{window.location.reload()},3e3)}}(e);return{launchFlow:e=>{var i;if(!(null==(i=e.age_verification)?void 0:i.template_id))return void console.error("No Persona template ID found");if(!(null==u?void 0:u.id)){console.error("User must be logged in for age verification"),d(()=>(0,t.Y)(c.y,{text:n("Please log in to verify your age.")}));return}if("undefined"==typeof window)return void console.error("Persona SDK not loaded");let o=window.Persona;if(!o)return void console.error("Persona SDK not loaded");p(!0),(0,a.u4)(s.q.AGE_VERIFICATION_FLOW_STARTED,{source:r});let l={templateId:e.age_verification.template_id,environment:"production",environmentId:window._preloads.persona_environment_id||"",referenceId:u.id.toString(),onReady:()=>{p(!1),f.open()},onComplete:()=>{p(!1),(0,a.u4)(s.q.AGE_VERIFICATION_FLOW_ENDED,{status:"complete",source:r}),h()},onCancel:()=>{p(!1),(0,a.u4)(s.q.AGE_VERIFICATION_FLOW_ENDED,{status:"cancel",source:r})},onError:()=>{p(!1),(0,a.u4)(s.q.AGE_VERIFICATION_FLOW_ENDED,{status:"error",source:r}),d(()=>(0,t.Y)(c.y,{text:n("Age verification failed. Please try again.")}))}},f=new o.Client(l)},isLoading:f}}},40612:function(e,r,n){n.d(r,{i:()=>f});var t=n(69277),i=n(70408),o=n(10201),l=n(28001),a=n(48697),c=n(89490),s=n(35369),d=n(63136),u=n(88419);function f(e){let{text:r,description:n,cta:t,Icon:i,href:l,localNavigation:a,onAccept:c}=e,s=n?Y:w,d=n?y:_;return(0,o.FD)(s,{children:[i&&(0,o.Y)(p,{Icon:i}),(0,o.FD)(d,{children:[(0,o.FD)(m,{children:[(0,o.Y)(h,{children:r}),n&&(0,o.Y)(v,{children:n})]}),t&&(0,o.Y)(C,{href:l,onAccept:c,localNavigation:a,cta:t})]}),(0,o.Y)(g,{})]})}function p(e){let{Icon:r}=e;return(0,o.Y)(r,{size:20,stroke:"var(--vibrance-dark-primary)"})}function h(e){let{children:r}=e;return(0,o.Y)(l.hE,{asChild:!0,children:(0,o.Y)(d.EY.B3,{weight:"regular",color:"vibrance-primary",children:r})})}function v(e){let{children:r}=e;return(0,o.Y)(l.VY,{asChild:!0,children:(0,o.Y)(d.EY.B3,{color:"vibrance-secondary",children:r})})}function C(e){let{cta:r,href:n,onAccept:t,localNavigation:i}=e;return(0,o.Y)(l.rc,{asChild:!0,altText:r,children:(0,o.Y)(s.$n,{priority:"secondary-outline",size:"sm",onClick:()=>{null==t||t()},href:n,localNavigation:i,children:r})})}function g(){return(0,o.Y)(l.bm,{asChild:!0,children:(0,o.Y)(s.K0,{priority:"quaternary",size:"xs","aria-label":"Close",children:(0,o.Y)(a.A,{size:20,stroke:"var(--vibrance-dark-secondary)"})})})}let m=(0,c.I4)({display:"flex",flex:"grow",direction:"column",gap:4}),_=(0,c.I4)({display:"flex",direction:"row",alignItems:"center",flex:"grow",gap:32}),y=(0,c.I4)({display:"flex",direction:"column",alignItems:"start",flex:"grow",gap:12}),I={display:"flex",direction:"row",gap:12,paddingX:16,paddingY:12,className:u.A.content},Y=(0,c.I4)((0,i._)((0,t._)({},I),{alignItems:"start"})),w=(0,c.I4)((0,i._)((0,t._)({},I),{alignItems:"center"}))},58526:function(e,r,n){n.d(r,{U:()=>s});var t=n(10201),i=n(28001),o=n(32485),l=n.n(o),a=n(10238),c=n(11510);function s(e){let{offset:r}=e,n=(0,c.Iu)();return(0,t.Y)(i.LM,{className:l()("viewport-_BM4Bg",n&&"mobile-NByTHz"),style:{"--offset":"".concat(r,"px"),zIndex:a.GJ}})}}}]);