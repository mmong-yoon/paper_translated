"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["353"],{39625:function(e,t,i){i.d(t,{A:()=>n});let n={textInput:"textInput-kYr7wC"}},72032:function(e,t,i){i.d(t,{A:()=>n});let n={header:"header-m3czQu",headerWithJustTitle:"headerWithJustTitle-AWuTLu",noImage:"noImage-VVe5Lh",actions:"actions-mMxsK2",thickRule:"thickRule-c8r1qH",bodyWrapperTwoMiddleColumns:"bodyWrapperTwoMiddleColumns-EOoshF",notifyButton:"notifyButton-wkevVH",hoverText:"hoverText-OtXqlP",notifyButtonInternal:"notifyButtonInternal-wv0x02",titleNotifyButton:"titleNotifyButton-bWyjlY",caret:"caret-vNjCU3",collapsed:"collapsed-KQpXLZ"}},45663:function(e,t,i){i.d(t,{A:()=>n});let n={specialFeatureHeaderContainer:"specialFeatureHeaderContainer-Skrlng",thickRule:"thickRule-oguYhe",threeColumnContainer:"threeColumnContainer-ziuSvf",mediumRule:"mediumRule-wQbBfo",headerButtonMobile:"headerButtonMobile-DURJFG",america250HomepageHeader:"america250HomepageHeader-Gp7Pmn",a250Rule:"a250Rule-oAzvtB",a250Logo:"a250Logo-sb3SfS"}},78918:function(e,t,i){i.d(t,{A:()=>n});let n={container:"container-xlqXTa",containerHoverLight:"containerHoverLight-pv1hHj"}},60996:function(e,t,i){i.d(t,{k:()=>g});var n=i(79785),r=i(10201),l=i(17402),o=i(84605),a=i(45064),s=i(76977),d=i(16993),c=i(57820),u=i(18947),p=i(49807),h=i(81675);function m(){let e=(0,n._)([""," by ",""]);return m=function(){return e},e}function g(e){let{onClose:t,post:i,pub:n,comment:g}=e,{iString:v,iTemplate:Y,language:f}=(0,o.GO)(),[b,y]=(0,l.useState)({width:400,height:400}),[_,w]=(0,l.useState)(!1),C=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(!g&&!i)return;let e=e=>{e.data.iframeHeight&&(y({width:500,height:e.data.iframeHeight}),w(!0))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[g,i]);let I=g?'<div class="substack-post-embed"><p lang="'.concat(f,'">').concat("".concat(g.body||""),"</p>").concat(g.name?"<p> - ".concat(g.name,"</p>"):g.handle?"<p> - @".concat(g.handle,"</p>"):"",'<a data-comment-link href="').concat((0,p.Zgx)(g),'">').concat(v("Read on Substack"),'</a></div><script async src="').concat((0,p.Ewe)(),'/embedjs/embed.js" charset="utf-8"><\/script>'):n&&i?'<div class="substack-post-embed"><p lang="'.concat(f,'">').concat(Y(m(),i.title,n.author_name),"</p><p>").concat(i.subtitle,'</p><a data-post-link href="').concat((0,u.st)(n,i.slug),'">').concat(v("Read on Substack"),'</a></div><script async src="').concat((0,p.Ewe)(),'/embedjs/embed.js" charset="utf-8"><\/script>'):"",{width:k,height:S,scaler:D}=(e=>{let{width:t,height:i}=e,n="undefined"!=typeof window?window.innerHeight:1/0,r=1;return n<700?r=.7:n<800?r=.75:n<900&&(r=.8),{width:t*r,height:i*r,scaler:r}})(b);return(0,r.FD)(r.FK,{children:[(0,r.Y)(d.rQ,{title:v("Embed note"),showDivider:!0,showClose:!0,onClose:t}),(0,r.Y)(d.cw,{gap:20,children:(0,r.FD)(s.VP,{style:{width:_?k:void 0,height:S},minHeight:_?void 0:220,bg:"secondary",radius:"md",overflow:"hidden",border:"detail",children:[(0,r.Y)("iframe",{ref:C,style:{transform:"scale(".concat(D,")"),width:b.width,height:b.height,display:_?"block":"none"},className:h.A.iframe,src:g?(0,p.RYA)(g,{isPreview:!0}):n&&i?(0,u.ti)(n,i.slug,{isPreview:!0}):"",onLoad:()=>{w(!0)}}),!_&&(0,r.Y)(s.ov,{flex:"grow",children:(0,r.Y)(c.y$,{})})]})}),(0,r.Y)(d.jl,{direction:"column",primaryButton:(0,r.Y)(a.c,{value:I,confirmationText:v("Copied code to clipboard")})})]})}},30796:function(e,t,i){i.d(t,{h:()=>c});var n=i(10201),r=i(32485),l=i.n(r),o=i(17402),a=i(10278),s=i(76977),d=i(71305);function c(e){let{className:t,assets:i,readOnly:r,onClick:c,maxHeight:p=420,children:h,feedItem:m,commentId:g}=e,v=(0,a.Cu)(i),[Y,f]=(0,o.useState)(null),b=(0,o.useRef)(null),y=(0,a.wY)(b,0),[_,w]=v;if(!_||!w)return null;let C=_.width&&_.height?_.width/_.height:1,I=w.width&&w.height?w.width/w.height:1,k=C+I,S=y-6,D=Math.min(p,S/k),F=[S*C/k,S*I/k];return(0,n.FD)(s.pT,{ref:b,className:l()(d.A.imageDiptych,t),gap:6,overflow:"hidden",children:[v.map((e,t)=>(0,n.Y)(u,{asset:e.src,explicit:e.explicit,readOnly:r,width:F[t],height:D,index:t,onClick:r?void 0:i=>{i.preventDefault(),c&&c({attachmentId:e.id,attachmentType:"image"}),f({index:t})},children:h},e.src)),!r&&(0,n.Y)(a.yx,{assets:v,imageViewer:Y,setImageViewer:f,readOnly:r,feedItem:m,commentId:g})]})}function u(e){let{asset:t,explicit:i,onClick:r,readOnly:o,width:s=500,height:c,children:u,index:p}=e;return(0,n.Y)(a.Vn,{asset:t,explicit:i,onClick:r,readOnly:o,width:s,height:c,className:l()(d.A.diptychImage,d.A["index-".concat(p+1)]),children:u})}},30653:function(e,t,i){i.d(t,{M:()=>P});var n=i(79785),r=i(10201),l=i(32485),o=i.n(l),a=i(17402),s=i(8853),d=i(71900),c=i(9599),u=i(2538),p=i(84605),h=i(86500),m=i(68349),g=i(24078),v=i(89490),Y=i(35369),f=i(16993),b=i(84843),y=i(81203),_=i(46453),w=i(11510),C=i(39318),I=i(57324),k=i(82130);function S(){let e=(0,n._)(["Tell "," you appreciate their post"]);return S=function(){return e},e}function D(){let e=(0,n._)(["Join the discussion for ","'s post"]);return D=function(){return e},e}function F(){let e=(0,n._)(["Quickly share posts with your followers"]);return F=function(){return e},e}let T=[{angle:-25,rotation:5,scale:1,flip:!1},{angle:135,rotation:-5,scale:.66,flip:!0}];function P(e){let{isOpen:t,setOpen:i,author:n,pub:l,action:o,postId:s,postSlug:d}=e,c=(0,w.Iu)(),{iString:u,iTemplate:g}=(0,p.GO)(),{requireLogin:v}=(0,_.eE)();if((0,a.useEffect)(()=>{t&&(0,h.u4)(h.qY.POST_UFI_APP_UPSELL_SHOWN,{action:o,author_id:null==n?void 0:n.id,post_id:s})},[t,o,n,s]),!n||!l)return null;let y=()=>{(0,h.u4)(h.qY.POST_UFI_APP_UPSELL_DISMISSED,{action:o,author_id:null==n?void 0:n.id,post_id:s}),i(!1)},k={like:u("Like this in the app"),comment:u("Comment in the app"),restack:u("Restack this in the app")},T={like:g(S(),n.name),comment:g(D(),n.name),restack:g(F())},P=k[o],A=T[o];return(0,r.FD)(f.aF,{isOpen:t,onClose:y,children:[(0,r.Y)(b.rQ,{icon:(0,r.Y)(x,{action:o,author:n,pub:l}),alignItems:"center",title:P,description:A,showClose:!0,onClose:y}),(0,r.Y)(f.q1,{}),(0,r.Y)(f.jl,{direction:"column",primaryButton:(0,r.Y)(Y.$n,{priority:"primary",onClick:()=>{if((0,h.u4)(h.qY.POST_UFI_APP_UPSELL_GET_APP_CLICKED,{action:o,author_id:null==n?void 0:n.id,post_id:s,is_mobile:c}),c){let e=(0,C.XV8)(l.subdomain,d,{redirect:"app-store",source:I.VU.postUfiModal});(0,m.V2)(e,{newTab:!0}),i(!1)}},children:u(c?"Open Substack":"Get the app")}),secondaryButton:(0,r.Y)(Y.$n,{priority:"secondary",onClick:()=>{(0,h.u4)(h.qY.POST_UFI_APP_UPSELL_SIGN_IN_CLICKED,{action:o,author_id:null==n?void 0:n.id,post_id:s}),i(!1),null==v||v()},children:u("Sign in")})})]})}function x(e){let{action:t,author:i,pub:n}=e,l=i.photo_url?(0,r.Y)(g.eu,{photoUrl:i.photo_url,size:88,className:k.A.avatar}):n.logo_url?(0,r.Y)(y.Nq,{pub:n,size:88,className:k.A.avatar}):(0,r.Y)(s.c,{src:"/img/substack-app-icon.png",width:88,height:88});return(0,r.FD)(v.az,{position:"relative",width:84,height:84,children:[l,T.map((e,i)=>(0,r.Y)(A,{config:e,action:t},i))]})}function A(e){let{config:t,action:i}=e,n=t.angle*Math.PI/180,l=46*Math.cos(n),o=46*Math.sin(n);return(0,r.Y)(v.az,{className:k.A.stickerContainer,style:{"--sticker-x":"".concat(l,"px"),"--sticker-y":"".concat(o,"px"),"--sticker-scale":t.scale,"--sticker-rotation":"".concat(t.rotation,"deg"),"--sticker-flip":t.flip?"-1":"1"},children:(0,r.Y)(E,{action:i})})}function E(e){let{action:t}=e;return"like"===t?(0,r.Y)(c.A,{size:32,className:o()(k.A.sticker,k.A.like)}):"comment"===t?(0,r.Y)(d.A,{size:32,className:o()(k.A.sticker,k.A.comment)}):"restack"===t?(0,r.Y)(u.A,{size:32,className:o()(k.A.sticker,k.A.restack)}):null}},13950:function(e,t,i){i.d(t,{DH:()=>d,xF:()=>u});var n=i(10201),r=i(32485),l=i.n(r),o=i(17402),a=i(10996),s=i(6045);function d(e){let{prefix:t,children:i}=e;if(t){let e="header"===t?s.A.headerTheme:"footer"===t?s.A.footerTheme:s.A.footerSecondaryTheme;return(0,n.Y)(c.Provider,{value:t,children:(0,n.Y)("div",{className:l()(s.A.pubTheme,e),children:i})})}return(0,n.Y)(a.NP,{theme:s.A.pubTheme,children:i})}let c=(0,o.createContext)(null);function u(){let e=(0,o.useContext)(c);return{onOpen:o.default.useCallback(()=>{let t=document.getElementById("menu-portal");if(!t||!e)return;let i="header"===e?s.A.headerTheme:"footer"===e?s.A.footerTheme:s.A.footerSecondaryTheme;t.className=l()(s.A.pubTheme,i)},[e]),onClose:o.default.useCallback(()=>{let e=document.getElementById("menu-portal");e&&(e.className="")},[])}}},7e4:function(e,t,i){i.d(t,{b:()=>k});var n=i(79785),r=i(10201),l=i(17402),o=i(15734),a=i.n(o),s=i(84605),d=i(35369),c=i(74715),u=i(60322),p=i(76977),h=i(16993),m=i(81203),g=i(63136),v=i(36372),Y=i(39318),f=i(82776);function b(){let e=(0,n._)(["Recommend ","?"]);return b=function(){return e},e}function y(){let e=(0,n._)(["Recommend "," and "," other Substacks?"]);return y=function(){return e},e}function _(){let e=(0,n._)(["Since you embedded "," in your post, we thought you might like to recommend them to your subscribers."]);return _=function(){return e},e}function w(){let e=(0,n._)(["Since you embedded these Substacks in your post, we thought you might like to recommend them to your subscribers."]);return w=function(){return e},e}function C(){let e=(0,n._)(["Recommend "," Substack"]);return C=function(){return e},e}function I(){let e=(0,n._)(["Recommend "," Substacks"]);return I=function(){return e},e}function k(e){var t,i;let{pub:n,pubsToRecommend:o}=e,{iString:c,iTemplate:u,iPlural:m}=(0,s.GO)(),g=(0,v.d)(),[Y,f]=(0,l.useState)(!0),[k,D]=(0,l.useState)(!1),[F,T]=(0,l.useState)(new Set((o||[]).map(e=>e.id)));if(0===o.length||!o[0])return null;let P=()=>{f(!1)},x=async()=>{try{D(!0);let e=Array.from(F);await a().put("/api/v1/recommendations/multiple").send({recommending_publication_id:n.id,recommended_publication_ids:e,source:"post_publish_cta",suggested:e.map(()=>!0)}),e.length&&g.popToast(()=>(0,r.Y)(v.y,{text:m("Added %1 recommendation","Added %1 recommendations",e.length)})),P()}catch(e){console.error("Failed to add recommendations: ",e),g.popToast(()=>(0,r.Y)(v.y,{text:c("Failed to add recommendations")})),P()}finally{D(!1)}},A=F.size,E=1===o.length?u(b(),o[0].name):u(y(),o[0].name,o.length-1),N=1===o.length?u(_(),null!=(i=null==(t=o[0])?void 0:t.name)?i:""):u(w());return(0,r.Y)(r.FK,{children:Y?(0,r.FD)(h.aF,{isOpen:Y,onClose:P,children:[(0,r.Y)(h.rQ,{title:E,description:N,onClose:P,showClose:!0,showDivider:!0}),(0,r.Y)(h.cw,{children:(0,r.Y)(p.VP,{gap:16,children:o.map(e=>(0,r.Y)(S,{pub:e,checked:F.has(e.id),onChange:()=>{var t;let i;return t=e.id,void((i=new Set(F)).has(t)?i.delete(t):i.add(t),T(i))}},e.id))})}),(0,r.Y)(h.jl,{showDivider:!0,primaryButton:(0,r.Y)(d.$n,{onClick:x,disabled:0===A,loading:k,children:0===A?c("Recommend"):u(1===A?C():I(),A)}),secondaryButton:(0,r.Y)(d.$n,{onClick:P,priority:"secondary",children:c("Cancel")})})]}):null})}function S(e){let{pub:t,checked:i,onChange:n}=e;return(0,r.Y)("label",{children:(0,r.FD)(c.Z,{padding:12,gap:12,direction:"row",alignItems:"center",cursor:"pointer",children:[(0,r.Y)(m.wg,{pub:t,size:40,openInNewTab:!0}),(0,r.FD)(p.VP,{gap:2,flex:"grow",children:[(0,r.Y)(g.EY.B3,{children:(0,r.Y)(g.Yq,{href:(0,Y.$_T)(t),target:"_blank",children:t.name})}),(0,r.Y)(g.EY.B4,{color:"secondary",children:(0,f.getByLine)(t)})]}),(0,r.Y)(u.S,{name:"pub-".concat(t.id),checked:i,onChange:n,size:"sm"})]})})}},84236:function(e,t,i){i.d(t,{Jq:()=>u,pJ:()=>p});var n=i(69277),r=i(70408),l=i(10201),o=i(76977),a=i(63136),s=i(39318),d=i(49807);let c=(e,t)=>{var i;return null==(i=e.sponsorship_campaigns)?void 0:i.find(e=>{let i="podcast"===e.campaign_type,n=e.section_id&&t&&e.section_id===t.id,r=!e.section_id&&!t;return i&&(n||r)})},u=(e,t)=>!!c(e,t),p=e=>{var t;let{align:i="left",direction:u="row",gap:p=16,pub:h,post:m=null,section:g=null,textField:v="short_text",imageHeight:Y=16,paddingY:f,paddingX:b}=e,y=c(h,g);if(!y)return null;let _="episode_short_text"===v?y.episode_short_text:y.short_text;if(!_)return null;let w=(0,s.qCG)({campaignId:y.id,medium:"podcast",pubId:h.id,url:y.link_url,postId:null==m?void 0:m.id,referrer:"undefined"!=typeof window?window.location.href:void 0}),C=(0,l.FD)(l.FK,{children:[(0,l.Y)(a.EY.Digit,{color:"pub-secondary-text",weight:"regular",children:_}),y.image_url&&(0,l.Y)("img",{alt:null!=(t=y.image_alt_text)?t:"",src:(0,d.dJ9)(y.image_url,250),style:{width:"auto",height:Y}})]}),I=(0,n._)({alignItems:"center",as:"a",gap:p,href:w,target:"_blank",justifyContent:(()=>{switch(i){case"center":return"center";case"right":return"end";default:return}})()},f&&{paddingY:f},b&&{paddingX:b});return"column"===u?(0,l.Y)(o.I1,(0,r._)((0,n._)({},I),{children:C})):(0,l.Y)(o.Ye,(0,r._)((0,n._)({},I),{children:C}))}},15625:function(e,t,i){i.d(t,{q:()=>s});var n=i(69277),r=i(70408),l=i(32641),o=i(10201),a=i(97731);function s(e){var{fill:t="#10BC4C",size:i=24}=e,s=(0,l._)(e,["fill","size"]);return(0,o.FD)(a.A,(0,r._)((0,n._)({name:"SpotifyIcon",svgParams:{viewBox:"0 0 24 24"},width:i,height:i,fill:"none",stroke:"none"},s),{children:[(0,o.Y)("circle",{cx:"12",cy:"12",r:"12",fill:t}),(0,o.Y)("path",{d:"M17.4551 16.8197C17.2501 17.145 16.8127 17.2361 16.471 17.0409C13.7785 15.4795 10.4025 15.1281 6.41156 15.9869C6.02886 16.065 5.64617 15.8438 5.56416 15.4795C5.48215 15.1151 5.7145 14.7508 6.0972 14.6727C10.4572 13.7228 14.2022 14.1262 17.2091 15.8828C17.5508 16.078 17.6601 16.4944 17.4551 16.8197ZM18.8492 13.8529C18.5895 14.2563 18.0428 14.3734 17.6191 14.1392C14.5439 12.3305 9.85583 11.81 6.22021 12.864C5.74184 12.9941 5.2498 12.7469 5.11313 12.3045C4.97645 11.8491 5.23613 11.3806 5.7145 11.2505C9.86949 10.0534 15.0359 10.6259 18.5758 12.6949C18.9722 12.9291 19.1089 13.4496 18.8492 13.8529ZM18.9722 10.756C15.2819 8.6741 9.19978 8.47892 5.6735 9.49387C5.11313 9.66303 4.51175 9.36375 4.33406 8.81724C4.15638 8.28374 4.48441 7.7112 5.04479 7.54205C9.09043 6.37095 15.815 6.60517 20.052 8.99941C20.5577 9.28568 20.7217 9.91026 20.421 10.3917C20.134 10.8862 19.4779 11.0553 18.9722 10.756Z",fill:"white"})]}))}},44309:function(e,t,i){i.d(t,{w:()=>l});var n=i(10201),r=i(10996);function l(e){let{children:t}=e;return(0,n.Y)(r.NP,{theme:"substack-theme",children:t})}},4013:function(e,t,i){i.d(t,{A:()=>d});var n=i(69277),r=i(70408),l=i(10201),o=i(32641),a=i(97731);let s=e=>{var{name:t,children:i}=e,s=(0,o._)(e,["name","children"]);return(0,l.Y)(a.A,(0,r._)((0,n._)({},s),{name:t,svgParams:{viewBox:"0 0 24 24",height:24,width:24,stroke:"#1C110B"},children:i}))},d=e=>(0,l.FD)(s,(0,r._)((0,n._)({},e),{name:"ActivationUsersIcon",children:[(0,l.Y)("path",{d:"M17 21V19C17 16.7909 15.2091 15 13 15H5C2.79086 15 1 16.7909 1 19V21",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 11C11.2091 11 13 9.20917 13 7.00003C13 4.79089 11.2091 3.00003 9 3.00003C6.79086 3.00003 5 4.79089 5 7.00003C5 9.20917 6.79086 11 9 11Z",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.Y)("path",{d:"M23 21V19C22.9986 17.1772 21.765 15.5858 20 15.13",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.Y)("path",{d:"M16 3.13004C17.7699 3.58321 19.0078 5.17803 19.0078 7.00504C19.0078 8.83204 17.7699 10.4269 16 10.88",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"})]}))},32999:function(e,t,i){i.d(t,{A:()=>s});var n=i(69277),r=i(70408),l=i(32641),o=i(10201),a=i(97731);let s=e=>{var{size:t=24,color:i="var(--color-utility-white)",className:s}=e,d=(0,l._)(e,["size","color","className"]);return(0,o.Y)(a.A,(0,r._)((0,n._)({},d),{name:"EyeIconFilled",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:i,className:s,children:(0,o.Y)("path",{d:"M11.869 18.1925C17.6987 18.1925 21.7307 13.4687 21.7307 11.9962C21.7307 10.5163 17.6914 5.7998 11.869 5.7998C6.11209 5.7998 2 10.5163 2 11.9962C2 13.4687 6.11209 18.1925 11.869 18.1925ZM11.869 16.0566C9.59825 16.0566 7.79331 14.2123 7.79331 11.9962C7.79331 9.72174 9.59825 7.93573 11.869 7.93573C14.1179 7.93573 15.9374 9.72174 15.9374 11.9962C15.9374 14.2123 14.1179 16.0566 11.869 16.0566ZM11.869 13.4614C12.6769 13.4614 13.3464 12.7981 13.3464 11.9962C13.3464 11.187 12.6769 10.5236 11.869 10.5236C11.0538 10.5236 10.3843 11.187 10.3843 11.9962C10.3843 12.7981 11.0538 13.4614 11.869 13.4614Z"})}))}},46137:function(e,t,i){i.d(t,{A:()=>a});var n=i(69277),r=i(70408),l=i(10201),o=i(97731);let a=e=>(0,l.FD)(o.A,(0,r._)((0,n._)({},e),{name:"FoundingBadgeIcon",svgParams:{height:14,width:14,viewBox:"0 0 14 14"},children:[(0,l.Y)("circle",{cx:"3.93749",cy:"5.97916",r:"3.4375"}),(0,l.Y)("path",{d:"M8.39583 9.49273C8.39583 11.3912 6.85681 12.9302 4.95833 12.9302C3.05985 12.9302 1.52083 11.3912 1.52083 9.49273C1.52083 7.59425 3.05985 6.05523 4.95833 6.05523C6.85681 6.05523 8.39583 7.59425 8.39583 9.49273Z"}),(0,l.Y)("path",{d:"M12.4792 9.49273C12.4792 11.3912 10.9402 12.9302 9.04172 12.9302C7.14324 12.9302 5.60422 11.3912 5.60422 9.49273C5.60422 7.59425 7.14324 6.05523 9.04172 6.05523C10.9402 6.05523 12.4792 7.59425 12.4792 9.49273Z"}),(0,l.Y)("circle",{cx:"6.99999",cy:"3.9375",r:"3.4375"}),(0,l.Y)("circle",{cx:"10.0625",cy:"5.97916",r:"3.4375"})]}))},3364:function(e,t,i){i.d(t,{A:()=>s});var n=i(69277),r=i(70408),l=i(32641),o=i(10201),a=i(97731);let s=e=>{var{color:t="#262626"}=e,i=(0,l._)(e,["color"]);return(0,o.FD)(a.A,(0,r._)((0,n._)({},i),{name:"LockThinIcon",svgParams:{height:16,width:16},children:[(0,o.Y)("path",{className:"lock-shackle",d:"M5 6L5 3.9C5 2.57452 6.11929 1.5 7.5 1.5C8.88071 1.5 10 2.57452 10 3.9V6",stroke:t}),(0,o.Y)("path",{className:"lock-body",d:"M2 7.5C2 6.94772 2.44772 6.5 3 6.5H12C12.5523 6.5 13 6.94772 13 7.5V12.5C13 13.0523 12.5523 13.5 12 13.5H3C2.44771 13.5 2 13.0523 2 12.5V7.5Z",fill:t,stroke:t})]}))}},20297:function(e,t,i){i.d(t,{A:()=>s});var n=i(69277),r=i(70408),l=i(10201),o=i(33167),a=i(97731);let s=e=>(0,l.Y)(a.A,(0,r._)((0,n._)({},e),{name:"LucideArrowUpRight",svgParams:{height:24,width:24},children:(0,l.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},89839:function(e,t,i){i.d(t,{A:()=>s});var n=i(69277),r=i(70408),l=i(10201),o=i(57157),a=i(97731);let s=function(e){return(0,l.Y)(a.A,(0,r._)((0,n._)({},e),{name:"LucideBookmark",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,l.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))}},18325:function(e,t,i){i.d(t,{A:()=>s});var n=i(69277),r=i(70408),l=i(10201),o=i(54687),a=i(97731);let s=e=>(0,l.Y)(a.A,(0,r._)((0,n._)({},e),{name:"LucideComments",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,l.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},43427:function(e,t,i){i.d(t,{A:()=>s});var n=i(69277),r=i(70408),l=i(10201),o=i(23345),a=i(97731);let s=e=>(0,l.Y)(a.A,(0,r._)((0,n._)({},e),{name:"LucideHeart",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,l.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},14394:function(e,t,i){i.d(t,{A:()=>s});var n=i(69277),r=i(70408),l=i(10201),o=i(60927),a=i(97731);let s=e=>(0,l.Y)(a.A,(0,r._)((0,n._)({},e),{name:"LucideArrowLeftRight",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,l.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},78330:function(e,t,i){i.d(t,{A:()=>a});var n=i(69277),r=i(70408),l=i(10201),o=i(97731);let a=e=>(0,l.Y)(o.A,(0,r._)((0,n._)({},e),{name:"LucideShare",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,l.Y)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.Y)("path",{d:"M12.4376 15.6C4.77778 15.6 2 20.3999 2 20.3999C2 12.5999 5.88889 8.4 12.4376 8.4V3L22 11.9812L12.4376 21V15.6Z",strokeWidth:e.strokeWidth,fill:e.fill,className:"lucide",strokeLinecap:"round",strokeLinejoin:"round"})})}))},58299:function(e,t,i){i.d(t,{A:()=>a});var n=i(69277),r=i(70408),l=i(10201),o=i(97731);let a=e=>(0,l.Y)(o.A,(0,r._)((0,n._)({},e),{name:"NoteForwardIcon",svgParams:{height:24,width:24,stroke:e.stroke,strokeWidth:e.strokeWidth},children:(0,l.Y)("path",{d:"M21 3V8M21 8H16M21 8L18 5.29962C16.7056 4.14183 15.1038 3.38328 13.3879 3.11547C11.6719 2.84766 9.9152 3.08203 8.32951 3.79031C6.74382 4.49858 5.39691 5.65051 4.45125 7.10715C3.5056 8.5638 3.00158 10.2629 3 11.9996M3 21V16M3 16H8M3 16L6 18.7C7.29445 19.8578 8.89623 20.6163 10.6121 20.8841C12.3281 21.152 14.0848 20.9176 15.6705 20.2093C17.2562 19.501 18.6031 18.3491 19.5487 16.8925C20.4944 15.4358 20.9984 13.7367 21 12",strokeLinecap:"round","stroke-linejoin":"round"})}))},71941:function(e,t,i){i.d(t,{A:()=>s});var n=i(69277),r=i(70408),l=i(32641),o=i(10201),a=i(97731);let s=e=>{var{size:t=24,color:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","color"]);return(0,o.Y)(a.A,(0,r._)((0,n._)({},s),{name:"NoteQuoteForwardIcon",svgParams:{viewBox:"0 0 24 24"},width:t,height:t,stroke:i,strokeWidth:2,fill:"none",children:(0,o.Y)("path",{d:"M13.4147 2.09993C10.4072 1.67249 7.2423 2.61548 4.92891 4.92887C1.02366 8.83411 1.02366 15.1658 4.92891 19.071C8.83415 22.9762 15.1658 22.9762 19.071 19.071C21.3844 16.7576 22.3274 13.5927 21.9 10.5852M18.5 2.62126C18.8978 2.22343 19.4374 1.99994 20 1.99994C20.5626 1.99994 21.1021 2.22343 21.5 2.62126C21.8978 3.01908 22.1213 3.55865 22.1213 4.12126C22.1213 4.68387 21.8978 5.22343 21.5 5.62126L13 14.1213L8.99998 15.1213L9.99998 11.1213L18.5 2.62126Z",strokeLinecap:"round","stroke-linejoin":"round"})}))}},26184:function(e,t,i){i.d(t,{A:()=>a});var n=i(69277),r=i(70408),l=i(10201),o=i(97731);let a=e=>(0,l.FD)(o.A,(0,r._)((0,n._)({},e),{name:"PinIconSmall",svgParams:{height:16,width:14},children:[(0,l.Y)("path",{d:"M7 1.00006L10 1.00006C10.5523 1.00006 11.0846 1.47946 10.8452 1.97714C10.6681 2.3451 10.2927 2.75194 9.5 3.17301L10 7.51891C10.7819 7.7681 11.949 8.31222 12.9204 9.21856C13.4827 9.74324 13.0402 10.561 12.2711 10.561H7"}),(0,l.Y)("path",{d:"M7 1.00006L4 1.00006C3.44772 1.00006 2.91538 1.47946 3.15482 1.97714C3.33185 2.3451 3.70727 2.75194 4.5 3.17301L4 7.51891C3.2181 7.7681 2.05103 8.31222 1.07961 9.21856C0.517263 9.74324 0.959808 10.561 1.72891 10.561H7"}),(0,l.Y)("path",{d:"M7 10.561L7 15","stroke-linecap":"round","stroke-linejoin":"round"})]}))},23747:function(e,t,i){i.d(t,{A:()=>a});var n=i(69277),r=i(70408),l=i(10201),o=i(97731);let a=e=>(0,l.Y)(o.A,(0,r._)((0,n._)({},e),{name:"YoutubeIcon",svgParams:{height:24,width:24},children:(0,l.Y)("path",{d:"M21.582 6.07467C21.352 5.21467 20.674 4.53667 19.814 4.30667C18.254 3.88867 12 3.88867 12 3.88867C12 3.88867 5.746 3.88867 4.186 4.30667C3.326 4.53667 2.648 5.21467 2.418 6.07467C2 7.63467 2 11.8887 2 11.8887C2 11.8887 2 16.1427 2.418 17.7027C2.648 18.5627 3.326 19.2407 4.186 19.4707C5.746 19.8887 12 19.8887 12 19.8887C12 19.8887 18.254 19.8887 19.814 19.4707C20.675 19.2407 21.352 18.5627 21.582 17.7027C22 16.1427 22 11.8887 22 11.8887C22 11.8887 22 7.63467 21.582 6.07467ZM10 15.3527V8.42467L16 11.8887L10 15.3527Z"})}))},9292:function(e,t,i){i.d(t,{Sb:()=>o});var n=i(69277),r=i(70408),l=i(10201);function o(e){return(0,l.Y)("svg",(0,r._)((0,n._)({width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},e),{children:(0,l.Y)("path",{d:"M5.67709 10C6.02484 10 6.28151 9.73617 6.28151 9.37872V7.91489H6.37259C7.82981 7.91489 8.69917 8.39574 9.30773 9.54894C9.48574 9.88085 9.69273 9.97021 9.93698 9.97021C10.2682 9.97021 10.5 9.64255 10.5 9.00426C10.5 5.94894 9.16283 4.10638 6.37259 4.10638H6.28151V2.64255C6.28151 2.28511 6.02484 2 5.66881 2C5.43698 2 5.27139 2.09787 5.01886 2.33617L1.73183 5.4766C1.56624 5.6383 1.5 5.82553 1.5 6C1.5 6.16596 1.57038 6.36596 1.73183 6.5234L5.01886 9.68511C5.24655 9.90213 5.43698 10 5.67709 10Z"})}))}i(97731)},97683:function(e,t,i){i.d(t,{B:()=>ee,D:()=>$});var n=i(79785),r=i(10201),l=i(38376),o=i(49436),a=i(70010),s=i(12723),d=i(25005),c=i(27775),u=i(35404),p=i(14520),h=i(44435),m=i(3549),g=i(56195),v=i(12203),Y=i(80827),f=i(61250),b=i(27786),y=i(3160),_=i(93540),w=i(50180),C=i(33167),I=i(54718),k=i(17402),S=i(15734),D=i.n(S),F=i(37767),T=i(41935),P=i(69277),x=i(70408),A=i(68349),E=i(35369),N=i(76977),B=i(67211),M=i(84270),R=i(16993),L=i(36372);function O(e){var t,i;let{isOpen:n,onClose:l,post:o}=e,a=(0,L.d)(),[s,d]=(0,k.useState)(!1),c=null==(i=o.postTheme)||null==(t=i.variant_config)?void 0:t.fullWidthImage,u={hideOverlay:(null==c?void 0:c.hideOverlay)||!1,hideSectionLink:(null==c?void 0:c.hideSectionLink)||!1,textColor:(null==c?void 0:c.textColor)||"black"},[p,h]=(0,k.useState)(u),m=async()=>{d(!0);try{var e;let t=(0,x._)((0,P._)({},null==(e=o.postTheme)?void 0:e.variant_config),{fullWidthImage:p});await D().patch("/api/v1/post/".concat(o.id,"/theme")).send({variant_config:t}),location.reload()}catch(e){a.popToast(()=>(0,r.Y)(L.y,{text:(0,A.uX)(e)}))}finally{d(!1)}},g=()=>{h(u),l()};return(0,r.FD)(R.aF,{isOpen:n,onClose:g,children:[(0,r.Y)(R.rQ,{showClose:!0,title:"Full Width Image Options",onClose:g}),(0,r.Y)(R.cw,{children:(0,r.FD)(N.I1,{gap:12,children:[(0,r.Y)(M.z,{label:"Text Color",options:[{value:"black",label:"Black"},{value:"red",label:"Red"},{value:"white",label:"White"}],value:p.textColor,onChange:e=>h((0,x._)((0,P._)({},p),{textColor:e}))}),(0,r.Y)(B.Y,{label:"Hide overlay",value:p.hideOverlay,onChange:e=>h((0,x._)((0,P._)({},p),{hideOverlay:e}))}),(0,r.Y)(B.Y,{label:"Hide section link",value:p.hideSectionLink,onChange:e=>h((0,x._)((0,P._)({},p),{hideSectionLink:e}))})]})}),(0,r.Y)(R.jl,{primaryButton:(0,r.Y)(E.$n,{disabled:s,priority:"primary",onClick:m,children:"Save"}),secondaryButton:(0,r.Y)(E.$n,{disabled:s,priority:"secondary",onClick:g,children:"Cancel"})})]})}var z=i(84605),U=i(86500),q=i(94729),H=i(13022),W=i(28528),K=i(88774),G=i(52145),V=i(16291),j=i(4016),X=i(39318),J=i(49807),Z=i(82776);function Q(){let e=(0,n._)([""," top posts"]);return Q=function(){return e},e}function $(e){var t,i,n,I;let{pub:S,post:F,hideDropCapOption:P,hidePinning:x,hidePostHeaderOptions:E,user:N,emailSent:B,allowSendEmail:M,handleCrossPost:R,onToggleMenu:U,onSummaryOpen:$,trigger:ee,disabled:et}=e,ei=(0,k.useContext)(W.wZ),en=(0,L.d)(),{iString:er,iTemplate:el}=(0,z.GO)(),[eo,ea]=(0,k.useState)(!1),[es,ed]=(0,k.useState)(!1),[ec,eu]=(0,k.useState)(!1),[ep,eh]=(0,k.useState)(!1),[em,eg]=(0,k.useState)(!1),[ev,eY]=(0,k.useState)(null),[ef,eb]=(0,k.useState)(null),[ey,e_]=(0,k.useState)(null),[ew,eC]=(0,k.useState)(!1);(0,k.useEffect)(()=>{(async()=>{eg(!!await (0,q.x6)("/api/v1/notification_settings/post/".concat(F.id,"/mute"),{method:"GET"}))})()},[F.id]);let eI=async e=>{let t;switch(e){case"1hour":t=1;break;case"8hours":t=8;break;case"24hours":t=24}let i=t?{expires_at:(0,V.A)().add(t,"hour").toISOString()}:{};await (0,q.x6)("/api/v1/notification_settings/post/".concat(F.id,"/mute"),{method:"POST",json:i}),eg(!0),en.popToast(()=>(0,r.Y)(L.y,{text:er("Paused notifications"),Icon:l.A}))},ek=async()=>{await (0,q.x6)("/api/v1/notification_settings/post/".concat(F.id,"/mute"),{method:"DELETE"}),eg(!1),en.popToast(()=>(0,r.Y)(L.y,{text:er("Unpaused notifications"),Icon:o.A}))},eS=async()=>{let e={everyone:"everyone",only_free:"free subscribers",only_paid:"paid subscribers",founding:"founding members"}[F.audience];if(confirm("Send this published post as an email to ".concat(e,"?")))try{await D().post("/api/v1/drafts/".concat(F.id,"/publish")).send({send:!0,only_send:!0}),location.reload()}catch(e){alert((0,A.uX)(e))}},eD=async()=>{try{await D().put("/api/v1/posts/".concat(F.id,"/clear_cache")),location.reload()}catch(e){alert((0,A.uX)(e))}},eF=async()=>{ea(!0);try{let e=await D().post("/api/v1/posts/".concat(F.id,"/duplicate"));(0,A.V2)((0,X.I_S)(S,e.body.id),{local_navigation:!1})}catch(e){alert((0,A.uX)(e)),ea(!1)}},eT=async e=>{eu(!0),await D().patch("/api/v1/post/".concat(F.id,"/theme")).send({post_preview_crop_gravity:e}),location.reload()},eP=async e=>{eh(!0),await D().patch("/api/v1/post/".concat(F.id,"/theme")).send({disable_drop_cap:e}),location.reload()},ex=async()=>{if(ev)return;eY(S.id);let e=F.pins.includes(S.id),t="/api/v1/publication/".concat(S.id,"/pin/").concat(F.id);try{e?(await D().del(t),F.pins=F.pins.filter(e=>e!==S.id)):(await D().post(t),S.multiple_pins||(F.pins=[]),F.pins.push(S.id)),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,A.uX)(e))}finally{eY(null)}},eA=async()=>{if(ef)return;let e=F.section_id;if(!e)return;eb(e);let t="/api/v1/publication/".concat(S.id,"/section/").concat(e,"/pin/").concat(F.id);try{F.is_section_pinned?(await D().del(t),F.is_section_pinned=!1):(await D().post(t),F.is_section_pinned=!0),(["/","/beta","/publish"].includes(location.pathname)||location.pathname.startsWith("/s/"))&&location.reload()}catch(e){alert((0,A.uX)(e))}finally{eb(null)}},eE=async()=>{if(ey)return;e_(S.id);let e=F.top_exclusions.includes(S.id),t="/api/v1/publication/".concat(S.id,"/exclusion/").concat(F.id);try{e?(await D().del(t),F.top_exclusions=[]):(await D().post(t),F.top_exclusions=[S.id]),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,A.uX)(e))}finally{e_(null)}},eN=(null==(t=F.postTheme)?void 0:t.post_preview_crop_gravity)||ei.cropGravity,eB=!(null==(i=F.postTheme)?void 0:i.disable_drop_cap),eM=null==(n=S.sections)?void 0:n.find(e=>e.id===F.section_id),eR="undefined"!=typeof window?window.location.pathname:"",eL=!!(0,H.Ay)("enable_post_summarization"),eO=(0,j.lu)({pub:S}),ez=F.is_section_pinned!==(ef===F.section_id),eU=F.pins.includes(S.id)!==(ev===S.id),eq=F.top_exclusions.includes(S.id)!==(ey===S.id),eH=eO&&!E&&(null==(I=F.postTheme)?void 0:I.header_variant)==="full-width-image";return(0,r.FD)(r.FK,{children:[(0,r.Y)(T.Cg,{isOpen:es,setIsOpen:ed}),(0,r.Y)(O,{isOpen:ew,onClose:()=>eC(!1),post:F}),(0,r.FD)(K.W1,{trigger:ee,onOpen:()=>{null==U||U({active:!0})},onClose:()=>{null==U||U({active:!1})},disabled:et,children:[(0,r.FD)(K.H9,{isFirst:!0,children:[(0,r.Y)(K.Dr,{leading:(0,r.Y)(a.A,{}),href:(0,J.PuM)(S,F.id,{referrer:eR}),native:!0,children:er("View stats")}),(0,r.Y)(K.Dr,{leading:(0,r.Y)(s.A,{}),href:(0,J.U_V)(S,F.id,{referrer:eR}),native:!0,children:er("Share assets")})]}),(0,r.FD)(K.H9,{children:[(0,r.Y)(K.Dr,{leading:(0,r.Y)(d.A,{}),href:(0,X.wu9)(S,F,{edit:!0}),children:er("Edit")}),!B&&M&&F.is_published&&(0,r.Y)(K.Dr,{leading:(0,r.Y)(c.A,{}),onClick:eS,children:er("Send as email")}),(0,r.Y)(K.Dr,{leading:(0,r.Y)(u.A,{}),disabled:eo,onClick:eF,children:eo?"Duplicating...":"Duplicate"}),R&&(0,r.Y)(K.Dr,{leading:(0,r.Y)(p.A,{}),onClick:R,children:er("Cross post")}),eO&&(0,r.Y)(K.Dr,{disabled:ec,leading:(0,r.Y)(h.A,{}),onClick:()=>eT("auto"===eN?"center":"auto"),children:ec?"Updating...":"auto"===eN?"Disable smart cropping":"Enable smart cropping"}),eO&&!P&&(0,r.Y)(K.Dr,{disabled:ep,leading:(0,r.Y)(m.A,{}),onClick:()=>eP(eB),children:ep?"Updating...":eB?"Disable drop cap":"Enable drop cap"}),eH&&(0,r.Y)(K.Dr,{leading:(0,r.Y)(g.A,{}),onClick:()=>eC(!0),children:er("Edit full width image options")}),eL&&$&&(0,r.Y)(K.Dr,{leading:(0,r.Y)(v.A,{}),onClick:$,children:er("Reader guide")}),(0,H.Ay)("show_open_post_as_pdf_button")&&(0,r.Y)(K.Dr,{leading:(0,r.Y)(Y.A,{}),onClick:()=>{ed(!0),(0,A.V2)((0,J.MGs)(S,F.id),{local_navigation:!1})},children:er("Open as PDF")})]}),(0,r.FD)(K.H9,{children:[!x&&F.slug&&(0,r.FD)(r.FK,{children:[(0,Z.isPinnable)(S)&&F.section_id&&(F.section_name||(null==eM?void 0:eM.name))&&(0,r.FD)(K.Dr,{leading:ez?(0,r.Y)(f.A,{}):(0,r.Y)(b.A,{}),onClick:eA,children:[ez?"Unpin from":"Pin to"," ",F.section_name||(null==eM?void 0:eM.name)]}),(0,Z.isPinnable)(S)&&(0,r.Y)(K.Dr,{leading:eU?(0,r.Y)(f.A,{}):(0,r.Y)(b.A,{}),onClick:ex,children:eU?"Unpin from homepage":"Pin to homepage"})]}),F.slug&&"adhoc_email"!==F.type&&(0,r.Y)(K.Dr,{leading:eq?(0,r.Y)(y.A,{}):(0,r.Y)(_.A,{}),onClick:eE,children:el(Q(),eq?"Include in":"Hide from")}),em?(0,r.Y)(G.MI,{onClick:ek,customLabel:er("Unpause notifications")}):(0,r.Y)(G.DE,{onMute:e=>eI(e),customLabel:er("Pause notifications")})]}),(null==N?void 0:N.is_global_admin)&&(0,r.FD)(K.H9,{children:[(0,r.Y)(K.Dr,{priority:"secondary",onClick:eD,leading:(0,r.Y)(w.A,{}),children:er("Clear from cache")}),(0,r.Y)(K.Dr,{priority:"secondary",href:"".concat((0,X.$_T)({subdomain:"admin"}),"/posts/").concat(F.id),leading:(0,r.Y)(C.A,{}),children:er("Open in Underground")})]})]})]})}function ee(e){let{pub:t,post:i,iconHeight:n,hidePinning:l,user:o,emailSent:a,allowSendEmail:s,iconClassName:d}=e,c=(0,r.Y)(F.A,{onClick:()=>{(0,U.u4)(U.qY.EDIT_POST_DROPDOWN_MENU_OPENED)},children:(0,r.Y)(I.A,{stroke:"var(--color-fg-secondary)",size:n,className:d})});return(0,r.Y)($,{trigger:c,pub:t,post:i,hidePinning:l,user:o,emailSent:a,allowSendEmail:s})}},50883:function(e,t,i){i.d(t,{T:()=>x});var n=i(69277),r=i(10201),l=i(17402),o=i(15734),a=i.n(o),s=i(84605),d=i(86500),c=i(69618),u=i(68349),p=i(35369),h=i(8149),m=i(48535),g=i(76977),v=i(67211),Y=i(20500),f=i(76171),b=i(16993),y=i(81203),_=i(94996),w=i(63136),C=i(11587),I=i(65842),k=i(36372),S=i(16291),D=i(98111),F=i(56262),T=i(39318);let P={everyone:"Everyone",only_paid:"Paid subscribers",founding:"Founding members"},x=e=>{let{pub:t,post:i,user:o,open:y,setOpen:D,placeholderText:x=""}=e,E=(0,S.A)().add(2,"minutes"),[N,B]=(0,l.useState)(null),[M,R]=(0,l.useState)(x),[L,O]=(0,l.useState)(!1),[z,U]=(0,l.useState)(!0),[q,H]=(0,l.useState)("PREAMBLE"),[W,K]=(0,l.useState)(null),[G,V]=(0,l.useState)(void 0),[j,X]=(0,l.useState)(!0),[J,Z]=(0,l.useState)(!0),[Q,$]=(0,l.useState)(!1),[ee,et]=(0,l.useState)((0,S.A)().add(1,"day").toDate()),[ei,en]=(0,l.useState)(""),{iString:er}=(0,s.GO)(),el={everyone:"to everyone",founding:"to founding members",only_paid:"to paid subscribers"}[null!=G?G:"null"],eo=j?"Send":"Publish",ea=Q&&ee?(0,S.A)(ee).max(E).fromNow():"",es=j?el:"",ed="".concat(eo," cross-post ").concat(es," ").concat(ea),ec=null==N?void 0:N.find(e=>e.id===W),eu=(0,k.d)();(0,l.useEffect)(()=>{let e=async()=>{try{var e;let t=await a().get("/api/v1/restack/restackable-pubs"),i=(null==t||null==(e=t.body)?void 0:e.publications)||[];B(i),U(!1),i.length>0&&(K(i[0].id),V("everyone"))}catch(e){console.error("Failed to load user profile for restacking: ",e)}};y&&!N&&z&&e()},[y,o,z,U,N,B]),(0,l.useEffect)(()=>{y&&N&&0===N.length&&!z&&(0,u.V2)((0,T.f5H)())},[y,N,z]);let ep=(e,n)=>{D(!y,n),H("PREAMBLE"),en(null),U(!1),n&&(R(""),(0,d.u4)(d.qY.RESTACK_POST_SUBMITTED,{restacked_publication_id:t.id,restacked_post_id:i.id,restacking_user_id:o.id,restacking_publication_id:null==ec?void 0:ec.id,restacking_blurb:M}),eu.popToast(()=>(0,r.Y)(k.y,{text:Q?"This post is scheduled to cross-post ".concat(ea):"This post was cross-posted to your subscribers"}))),(0,d.u4)(d.qY.CROSS_POST_MODAL_CLOSED,{didRestack:n})},eh=async()=>{(0,d.u4)(d.qY.CROSS_POST_MODAL_SUBMIT_CLICKED),U(!0);try{if(Q){let e=(0,S.A)(ee).max(E).toDate();if(!ec)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(i.id,"/schedule")).send({audience:G,restackingPubId:ec.id,introText:M,sendEmail:j,publishToWeb:J,scheduledAt:e})}else{if(!ec)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(i.id)).send({audience:G,restackingPubId:ec.id,introText:M,sendEmail:j,publishToWeb:J})}(0,d.u4)(d.qY.CROSS_POST_MODAL_SUBMITTED),ep({},!0);return}catch(e){if((0,d.u4)(d.qY.CROSS_POST_MODAL_SUBMIT_FAILED,{error:(0,u.uX)(e,"Could not retrieve error message")}),console.error("Failed to restack post:",e),e instanceof TypeError)throw en("An unknown error ocurred. This post was not recommended."),U(!1),e;en((0,u.uX)(e,"This post could not be recommended.")),U(!1)}};return(0,r.FD)(b.aF,{isOpen:y,onClose:ep,children:[(0,r.Y)(b.rQ,{showClose:!0,onClose:ep,title:er("Cross-post to your Substack"),showDivider:!0}),"PREAMBLE"===q?(0,r.FD)(r.FK,{children:[(0,r.Y)(b.cw,{children:(0,r.FD)(g.I1,{gap:20,children:[(0,r.Y)(A,{post:i,pub:t}),(0,r.Y)(C.T,(0,n._)({placeholder:er("Say why this post is worth reading..."),onChange:e=>{L||(O(!0),(0,d.u4)(d.qY.CROSS_POST_MODAL_TYPING_STARTED)),R(e.target.value)},value:M,maxLength:800,rows:5},c.b)),ei&&(0,r.Y)(Y.yn,{children:ei})]})}),(0,r.Y)(b.jl,{direction:"column",primaryButton:(0,r.Y)(p.$n,{priority:"primary",onClick:()=>{if((0,d.u4)(d.qY.CROSS_POST_MODAL_CONTINUE_CLICKED),!M){en("Please write something to your subscribers to continue"),(0,d.u4)(d.qY.CROSS_POST_MODAL_CONTINUE_FAILED);return}en(""),H("AUDIENCE_SELECTION"),(0,d.u4)(d.qY.CROSS_POST_MODAL_CONTINUED)},disabled:!M,loading:z,children:er("Continue")})})]}):(0,r.FD)(r.FK,{children:[(0,r.Y)(b.cw,{children:(0,r.FD)(g.I1,{gap:20,children:[(0,r.FD)(I.A0,{children:[(0,r.Y)(f.JU,{children:er("Post to")}),(0,r.Y)(_.I,{value:null==ec?void 0:ec.id,onChange:e=>{let t=e.currentTarget.value;V("everyone"),K(Number(t))},children:null==N?void 0:N.map(e=>(0,r.Y)("option",{value:e.id,children:e.name}))})]}),(0,r.FD)(I.A0,{children:[(0,r.Y)(f.JU,{children:er("Send to")}),(0,r.Y)(_.I,{value:G,onChange:e=>V(e.target.value),children:((null==ec?void 0:ec.payments_state)==="enabled"?(0,F.getAudiencesForPublicListing)():["everyone"]).map(e=>(0,r.Y)("option",{value:e,children:P[e]}))})]}),(0,r.FD)(g.I1,{gap:12,children:[(0,r.Y)(f.JU,{children:er("Delivery")}),(0,r.Y)(v.Y,{value:j,label:er("Send cross-post via email"),onChange:e=>X(e)}),(0,r.Y)(v.Y,{value:J,label:er("Publish cross-post to web"),onChange:e=>Z(e)}),(0,r.Y)(v.Y,{value:Q,label:er("Schedule time to publish cross-post"),onChange:e=>$(e),contentBelow:(0,r.Y)(h.N,{open:Q,children:(0,r.Y)(g.I1,{paddingTop:8,children:(0,r.Y)(m.ZZ,{value:null!=ee?ee:new Date,max:(0,S.A)().add(92,"days").toDate(),onChange:e=>{et(new Date(e.currentTarget.value))}})})})})]}),ei&&(0,r.Y)(w.EY.B4,{color:"error",children:ei})]})}),(0,r.Y)(b.jl,{direction:"column",primaryButton:(0,r.Y)(p.$n,{priority:j||J?"primary":"secondary",onClick:eh,disabled:z||!j&&!J,children:ed})})]})]})},A=e=>{let{post:t,pub:i}=e;return(0,r.FD)(g.I1,{gap:12,border:"detail",radius:"md",shadow:"xs",bg:"secondary",padding:12,children:[(0,r.FD)(g.Ye,{alignItems:"center",gap:8,children:[(0,r.Y)(y.Nq,{pub:i,size:18}),(0,r.Y)(w.EY.Meta,{weight:"medium",children:i.name})]}),(0,r.FD)(g.I1,{gap:2,children:[(0,r.Y)(w.EY.B3,{weight:"semibold",clamp:2,children:t.title}),(0,r.Y)(w.EY.B4,{color:"secondary",clamp:2,children:t.truncated_body_text?(t.truncated_body_text||"").replace(D.T.PUBLICATION_NAME,i.name):t.subtitle||""})]})]})}},73869:function(e,t,i){i.d(t,{m:()=>Q});var n=i(10201),r=i(65892),l=i(17402),o=i(69277),a=i(70408),s=i(90179),d=i.n(s),c=i(15871),u=i(43627),p=i(74979),h=i(83673),m=i.n(h),g=i(38970),v=i.n(g),Y=i(33031),f=i.n(Y),b=i(48697),y=i(84605),_=i(35369),w=i(76977),C=i(25318),I=i(94996),k=i(63136),S=i(46009);let D=e=>{let{addLabel:t,hideAdd:i,isValidSection:r,metadata:o,pub:a,renderEditMetadata:s,renderMetadata:d,selectedIds:p,selectedLabel:h,validateMetadata:g,onChangeMetadata:Y,onChangeSelectedIds:f}=e,[b,y]=(0,l.useState)(null),_=(0,c.FR)((0,c.MS)(c.AN,{activationConstraint:{distance:5}})),I=v()(a.sections,"id"),D=(0,S.j_)({pub:a}),x=m()(p.map(e=>{var t;return -1===e?{id:-1,name:null!=(t=D.title)?t:""}:I[e]})),A=e=>{f(p.filter(t=>t!==e))},E=e=>{y(e)};return(0,n.FD)(w.I1,{gap:16,children:[(0,n.Y)(C.D,{label:h,children:(0,n.Y)(w.I1,{gap:8,children:p.length?(0,n.Y)(c.Mp,{collisionDetection:c.fp,sensors:_,onDragEnd:e=>{let{active:t,over:i}=e;if(t.id!==i.id){let e=p.findIndex(e=>e===t.id),n=p.findIndex(e=>e===i.id);f((0,u.be)(p,e,n))}},children:(0,n.Y)(u.gB,{items:x,strategy:u.kL,children:x.map(e=>{var t;return(0,n.Y)(T,{disableDrag:!!b,id:e.id,children:(0,n.Y)(P,{isEditing:b===e.id,renderEditMetadata:s,renderMetadata:d,sectionId:e.id,sectionMetadata:null!=(t=null==o?void 0:o[e.id])?t:null,sectionName:e.name,validateMetadata:g,onChangeMetadata:Y,onEdit:E,onRemove:A},e.id)},e.id)})})}):(0,n.Y)(k.EY.B3,{color:"pub-secondary-text",children:"No sections selected"})})}),!i&&(0,n.Y)(C.D,{label:null!=t?t:"Add section",children:(0,n.Y)(F,{excludedSectionIds:[...x.map(e=>e.id),...r?a.sections.filter(e=>!r(e)).map(e=>e.id):[]],pub:a,onSelect:e=>{f([...p,e])}})})]})},F=e=>{let{excludedSectionIds:t,pub:i,onSelect:r}=e,{iString:l}=(0,y.GO)(),o=i.sections.filter(e=>!(null==t?void 0:t.includes(e.id)));return(0,n.FD)(I.I,{value:"",onChange:e=>{let t=e.target.value;t&&r(parseInt(t))},children:[(0,n.Y)(I.K,{children:l("Select a section")}),f()(o,"name").map(e=>(0,n.Y)("option",{value:e.id,children:e.name}))]})},T=e=>{let{children:t,disableDrag:i,id:r}=e,{attributes:l,isDragging:s,listeners:d,setNodeRef:c,transform:h,transition:m}=(0,u.gl)({id:r}),g={transform:p.Ks.Translate.toString(h),transition:m,zIndex:+!!s,cursor:s?"grabbing":"grab"};return i?(0,n.Y)("div",{children:t}):(0,n.Y)("div",(0,a._)((0,o._)({ref:c},l,d),{role:"button",style:g,children:t}))},P=e=>{let{isEditing:t,renderEditMetadata:i,renderMetadata:o,sectionId:a,sectionName:s,sectionMetadata:d,validateMetadata:c,onChangeMetadata:u,onEdit:p,onRemove:h}=e,[m,g]=(0,l.useState)(d),[v,Y]=(0,l.useState)(null);return(0,n.FD)(w.Ye,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,n.FD)(w.I1,{children:[(0,n.Y)(k.EY.B4,{weight:"semibold",children:s}),!t&&o&&(0,n.Y)("div",{children:o(d)}),t&&i&&(0,n.FD)(w.I1,{alignItems:"start",gap:12,paddingTop:12,children:[i({errors:v,value:m,onChange:g}),u&&(0,n.FD)(w.Ye,{gap:8,children:[(0,n.Y)(_.$n,{size:"sm",onClick:()=>{if(u){if(c){let{isValid:e,message:t}=c(m);if(!e&&t)return void Y([t]);Y(null)}u({sectionId:a,value:m}),p(null)}},children:"Done"}),(0,n.Y)(_.$n,{priority:"secondary",size:"sm",onClick:()=>{p(null)},children:"Cancel"})]})]})]}),!t&&(0,n.FD)(w.Ye,{alignItems:"center",gap:8,children:[!!i&&(0,n.Y)(_.K0,{size:"xs",onClick:()=>{p(a)},children:(0,n.Y)(r.A,{size:14})}),(0,n.Y)(_.K0,{size:"xs",onClick:()=>{h(a)},children:(0,n.Y)(b.A,{size:14})})]})]})},x=e=>{let{emptyText:t,label:i,value:r}=e;return(0,n.FD)(w.Ye,{alignItems:"baseline",gap:4,children:[(0,n.FD)(k.EY.B4,{fontWeight:"semibold",children:[i,":"]}),(0,n.Y)(k.EY.B4,{color:r?"primary":"secondary",children:r||t})]})};var A=i(89160),E=i(79796),N=i(60141),B=i(16993);let M=e=>{let{pub:t,onClose:i}=e,{isSaving:r,metadata:l,ids:s,onChangeMetadata:c,onChangeOrder:u,onSave:p}=(0,E.i)({pub:t}),{isSaving:h,metadata:m,ids:g,onChangeMetadata:v,onChangeOrder:Y,onSave:f}=(0,E.i)({pub:t,pubSetting:"fp_primary_column_section_ids"}),{ids:b,isSaving:y,onChange:C,onSave:I}=(0,A.G)({pub:t}),k=async()=>{await p(),await f(),await I(),window.location.reload()};return(0,n.FD)(B.aF,{isOpen:!0,onClose:i,children:[(0,n.Y)(B.rQ,{showClose:!0,title:"Edit featured and archived sections",onClose:i}),(0,n.Y)(B.cw,{children:(0,n.FD)(w.I1,{gap:36,children:[(0,n.Y)(D,{addLabel:"Add From the Free Press section",metadata:m,pub:t,renderEditMetadata:e=>{var t,i;let{value:r,onChange:l}=e;return(0,n.FD)(w.I1,{gap:8,children:[(0,n.Y)(N.A,{label:"Tagline",value:null!=(t=null==r?void 0:r.tagline)?t:"",width:260,onChange:e=>{var t;l({frequency:null!=(t=null==r?void 0:r.frequency)?t:"",tagline:e})}}),(0,n.Y)(N.A,{label:"Frequency",value:null!=(i=null==r?void 0:r.frequency)?i:"",width:260,onChange:e=>{l((0,a._)((0,o._)({},r),{frequency:e}))}})]})},renderMetadata:e=>{var t,i;return(0,n.FD)(w.I1,{children:[(0,n.Y)(x,{emptyText:"no tagline set",label:"Tagline",value:null!=(t=null==e?void 0:e.tagline)?t:""}),(0,n.Y)(x,{emptyText:"no frequency set",label:"Frequency",value:null!=(i=null==e?void 0:e.frequency)?i:""})]})},selectedIds:g,selectedLabel:"From The Free Press sections",onChangeMetadata:e=>{var t;let{sectionId:i,value:n}=e;v({metadata:n?(0,a._)((0,o._)({},l),{[i]:(0,a._)((0,o._)({},n),{frequency:null!=(t=null==n?void 0:n.frequency)?t:""})}):d()(l,i)})},onChangeSelectedIds:e=>{Y({ids:e})}}),(0,n.Y)(D,{addLabel:"Add featured section",metadata:l,pub:t,renderEditMetadata:e=>{var t,i;let{value:r,onChange:l}=e;return(0,n.FD)(w.I1,{gap:8,children:[(0,n.Y)(N.A,{label:"Tagline",value:null!=(t=null==r?void 0:r.tagline)?t:"",width:260,onChange:e=>{var t;l({frequency:null!=(t=null==r?void 0:r.frequency)?t:"",tagline:e})}}),(0,n.Y)(N.A,{label:"Frequency",value:null!=(i=null==r?void 0:r.frequency)?i:"",width:260,onChange:e=>{l((0,a._)((0,o._)({},r),{frequency:e}))}})]})},renderMetadata:e=>{var t,i;return(0,n.FD)(w.I1,{children:[(0,n.Y)(x,{emptyText:"no tagline set",label:"Tagline",value:null!=(t=null==e?void 0:e.tagline)?t:""}),(0,n.Y)(x,{emptyText:"no frequency set",label:"Frequency",value:null!=(i=null==e?void 0:e.frequency)?i:""})]})},selectedIds:s,selectedLabel:"Featured sections",onChangeMetadata:e=>{var t;let{sectionId:i,value:n}=e;c({metadata:n?(0,a._)((0,o._)({},l),{[i]:(0,a._)((0,o._)({},n),{frequency:null!=(t=null==n?void 0:n.frequency)?t:""})}):d()(l,i)})},onChangeSelectedIds:e=>{u({ids:e})}}),(0,n.Y)(D,{addLabel:"Add archived section",pub:t,selectedIds:b,selectedLabel:"Archived sections",onChangeSelectedIds:e=>{C({ids:e})}})]})}),(0,n.Y)(B.jl,{primaryButton:(0,n.Y)(_.$n,{disabled:r||y||h,onClick:k,children:"Save"}),secondaryButton:(0,n.Y)(_.$n,{disabled:r||y||h,priority:"secondary",onClick:i,children:"Cancel"})})]})};var R=i(27428);let L=e=>{let{pub:t,onClose:i}=e,{isSaving:r,ids:l,onSave:o,onChange:a}=(0,R.M)({pub:t}),s=async()=>{await o(),window.location.reload()};return(0,n.FD)(B.aF,{isOpen:!0,onClose:i,children:[(0,n.Y)(B.rQ,{showClose:!0,title:"Edit event sections",onClose:i}),(0,n.Y)(B.cw,{children:(0,n.Y)(D,{addLabel:"Add event section",pub:t,selectedIds:l,selectedLabel:"Event sections",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,n.Y)(B.jl,{primaryButton:(0,n.Y)(_.$n,{disabled:r,onClick:s,children:"Save"}),secondaryButton:(0,n.Y)(_.$n,{disabled:r,priority:"secondary",onClick:i,children:"Cancel"})})]})};var O=i(77124),z=i(57753),U=i(84270);let q=e=>{let{pub:t,onClose:i}=e,{ids:r,metadata:s,onChangeOrder:d,onChangeMetadata:c,onSave:u}=(0,O.q)({pub:t}),[p,h]=(0,l.useState)(!1),m=async()=>{h(!0),await u(),window.location.reload()};return(0,n.FD)(B.aF,{isOpen:!0,onClose:i,children:[(0,n.Y)(B.rQ,{title:"Edit podcast sections",onClose:i}),(0,n.Y)(B.cw,{children:(0,n.Y)(D,{addLabel:"Add podcast section",isValidSection:e=>e.is_podcast,metadata:s,pub:t,renderEditMetadata:e=>{var t;let{value:i,onChange:r}=e;return(0,n.Y)(w.I1,{gap:12,children:(0,n.Y)(U.z,{label:"Carousel color",options:z.e.map(e=>({label:e,value:e})),value:null!=(t=null==i?void 0:i.carouselColor)?t:"black",onChange:e=>{r({carouselColor:e})}})})},renderMetadata:e=>{var t;return(0,n.Y)(w.Ye,{height:20,radius:"xs",style:{backgroundColor:z.Q[null!=(t=null==e?void 0:e.carouselColor)?t:"black"].hex},width:20})},selectedIds:r,selectedLabel:"Podcast sections",onChangeMetadata:e=>{let{sectionId:t,value:i}=e;c({metadata:(0,a._)((0,o._)({},s),{[t]:i})})},onChangeSelectedIds:e=>{d({ids:e})}})}),(0,n.Y)(B.jl,{primaryButton:(0,n.Y)(_.$n,{disabled:p,onClick:m,children:"Save"}),secondaryButton:(0,n.Y)(_.$n,{disabled:p,priority:"secondary",onClick:i,children:"Cancel"})})]})};var H=i(95691),W=i(7755);let K=e=>{let{pub:t,onClose:i}=e,{isSaving:r,metadata:l,ids:s,onChangeMetadata:d,onChangeOrder:c,onSave:u}=(0,H.P)({pub:t}),p=async()=>{await u(),window.location.reload()};return(0,n.FD)(B.aF,{isOpen:!0,onClose:i,children:[(0,n.Y)(B.rQ,{showClose:!0,title:"Edit video sections",onClose:i}),(0,n.Y)(B.cw,{children:(0,n.Y)(D,{addLabel:"Add video section",metadata:l,pub:t,renderEditMetadata:e=>{var t,i;let{errors:r,value:l,onChange:o}=e;return(0,n.FD)(w.I1,{gap:12,children:[(0,n.Y)(U.z,{label:"Carousel color",options:z.e.map(e=>({label:e,value:e})),value:null!=(t=null==l?void 0:l.carouselColor)?t:"black",onChange:e=>{var t;o({carouselColor:e,youtubeUrl:null!=(t=null==l?void 0:l.youtubeUrl)?t:""})}}),(0,n.Y)(N.A,{errors:r,label:"YouTube URL",value:null!=(i=null==l?void 0:l.youtubeUrl)?i:"",width:260,onChange:e=>{var t;o({carouselColor:null!=(t=null==l?void 0:l.carouselColor)?t:"black",youtubeUrl:e})}})]})},renderMetadata:e=>{var t;return(0,n.FD)(w.Ye,{alignItems:"center",gap:8,children:[(0,n.Y)(w.Ye,{height:20,radius:"xs",style:{backgroundColor:z.Q[null!=(t=null==e?void 0:e.carouselColor)?t:"black"].hex},width:20}),(null==e?void 0:e.youtubeUrl)?(0,n.Y)(k.EY.B4,{children:(0,n.Y)("a",{href:null==e?void 0:e.youtubeUrl,rel:"noopener noreferrer",target:"_blank",children:"YouTube link"})}):(0,n.Y)(k.EY.B4,{color:"pub-secondary-text",children:"No YouTube link set"})]})},selectedIds:s,selectedLabel:"Video sections",validateMetadata:e=>{var t;let i=(null!=(t=null==e?void 0:e.youtubeUrl)?t:"").trim();if(!i)return{isValid:!0,message:null};let{isValid:n,message:r}=(0,W.Hx)({platform:"youtube",url:i,language:"en"});return{isValid:n,message:r}},onChangeMetadata:e=>{var t,i;let{sectionId:n,value:r}=e;d({metadata:(0,a._)((0,o._)({},l),{[n]:(0,a._)((0,o._)({},r),{carouselColor:null!=(t=null==r?void 0:r.carouselColor)?t:"black",youtubeUrl:null!=(i=null==r?void 0:r.youtubeUrl)?i:""})})})},onChangeSelectedIds:e=>{c({ids:e})}})}),(0,n.Y)(B.jl,{primaryButton:(0,n.Y)(_.$n,{disabled:r,onClick:p,children:"Save"}),secondaryButton:(0,n.Y)(_.$n,{disabled:r,priority:"secondary",onClick:i,children:"Cancel"})})]})},G=e=>{let{pub:t,selectedIds:i,selectedLabel:r,onChangeSelectedIds:l}=e,s=(0,c.FR)((0,c.MS)(c.AN,{activationConstraint:{distance:5}})),d=v()(t.authorPagesInfo,"user_id"),p=m()(i.map(e=>d[e]?(0,a._)((0,o._)({},d[e]),{id:e}):null)),h=e=>{l(i.filter(t=>t!==e))};return(0,n.FD)(w.I1,{gap:16,children:[(0,n.Y)(C.D,{label:r,children:(0,n.Y)(w.I1,{gap:8,children:i.length?(0,n.Y)(c.Mp,{collisionDetection:c.fp,sensors:s,onDragEnd:e=>{let{active:t,over:n}=e;if(t.id!==n.id){let e=i.findIndex(e=>e===t.id),r=i.findIndex(e=>e===n.id);l((0,u.be)(i,e,r))}},children:(0,n.Y)(u.gB,{items:p,strategy:u.kL,children:p.map(e=>(0,n.Y)(j,{id:e.user_id,children:(0,n.Y)(X,{authorId:e.user_id,authorName:e.name,onRemove:h})},e.user_id))})}):(0,n.Y)(k.EY.B3,{color:"pub-secondary-text",children:"No authors selected"})})}),(0,n.Y)(C.D,{label:"Add an author",children:(0,n.Y)(V,{excludedAuthorIds:p.map(e=>e.id),pub:t,onSelect:e=>{l([...i,e])}})})]})},V=e=>{var t,i;let{excludedAuthorIds:r,pub:l,onSelect:o}=e,{iString:a}=(0,y.GO)(),s=null!=(i=null==(t=l.authorPagesInfo)?void 0:t.filter(e=>!!e.name&&!!e.bio&&!!e.photo_url).filter(e=>!(null==r?void 0:r.includes(e.user_id))))?i:[];return(0,n.FD)(I.I,{value:"",onChange:e=>{let t=e.target.value;t&&o(parseInt(t))},children:[(0,n.Y)(I.K,{children:a("Select a section")}),f()(s,"name").map(e=>(0,n.Y)("option",{value:e.user_id,children:e.name}))]})},j=e=>{let{children:t,disableDrag:i,id:r}=e,{attributes:l,isDragging:s,listeners:d,setNodeRef:c,transform:h,transition:m}=(0,u.gl)({id:r}),g={transform:p.Ks.Translate.toString(h),transition:m,zIndex:+!!s,cursor:s?"grabbing":"grab"};return i?(0,n.Y)("div",{children:t}):(0,n.Y)("div",(0,a._)((0,o._)({ref:c},l,d),{role:"button",style:g,children:t}))},X=e=>{let{authorId:t,authorName:i,onRemove:r}=e;return(0,n.FD)(w.Ye,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,n.Y)(w.I1,{children:(0,n.Y)(k.EY.B4,{weight:"semibold",children:i})}),(0,n.Y)(_.K0,{size:"xs",onClick:()=>{r(t)},children:(0,n.Y)(b.A,{size:14})})]})};var J=i(1918);let Z=e=>{let{pub:t,onClose:i}=e,{ids:r,onSave:o,onChange:a}=(0,J.i)({pub:t}),[s,d]=(0,l.useState)(!1),c=async()=>{d(!0),await o(),window.location.reload()};return(0,n.FD)(B.aF,{isOpen:!0,onClose:i,children:[(0,n.Y)(B.rQ,{showClose:!0,title:"Edit authors",onClose:i}),(0,n.Y)(B.cw,{children:(0,n.Y)(G,{pub:t,selectedIds:r,selectedLabel:"Authors to show",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,n.Y)(B.jl,{primaryButton:(0,n.Y)(_.$n,{disabled:s,onClick:c,children:"Save"}),secondaryButton:(0,n.Y)(_.$n,{disabled:s,priority:"secondary",onClick:i,children:"Cancel"})})]})},Q=e=>{let{pub:t,sectionType:i,user:o}=e,[a,s]=(0,l.useState)(!1);return(null==o?void 0:o.is_admin)?(0,n.FD)(n.FK,{children:[(0,n.Y)(_.K0,{priority:"primary-mono",size:"sm",onClick:()=>{s(!0)},children:(0,n.Y)(r.A,{size:16})}),a&&"columns"===i&&(0,n.Y)(M,{pub:t,onClose:()=>{s(!1)}}),a&&"event"===i&&(0,n.Y)(L,{pub:t,onClose:()=>{s(!1)}}),a&&"podcast"===i&&(0,n.Y)(q,{pub:t,onClose:()=>{s(!1)}}),a&&"video"===i&&(0,n.Y)(K,{pub:t,onClose:()=>{s(!1)}}),a&&"who-we-are"===i&&(0,n.Y)(Z,{pub:t,onClose:()=>{s(!1)}})]}):null}},22076:function(e,t,i){i.d(t,{n:()=>s});var n=i(10201),r=i(25006),l=i(86500),o=i(38914),a=i(49807);let s=e=>{var t;let{trigger:i,liveStream:s,trackingSurface:d}=e,c=(0,r.df)();if(!c)return null;let u=null==s||null==(t=s.id)?void 0:t.toString(),p={title:s.title,description:s.description||"",location:(0,a.QMq)({pub:c,utm_campaign:u,utm_source:"add_to_calendar_button",utm_medium:"web"}),start:s.scheduled_at||new Date,duration:[1,"hour"],allDay:!1,busy:!0};return(0,n.Y)(o.L,{event:p,handleClick:e=>{(0,l.u4)(l.qY.ADD_TO_CALENDAR_CLICKED,{liveStreamId:s.id,surface:d,type:e})},menuProps:{trigger:i}})}},82528:function(e,t,i){i.d(t,{y:()=>v});var n=i(69277),r=i(70408),l=i(10201),o=i(32485),a=i.n(o),s=i(79909),d=i(13950),c=i(53696),u=i(15894),p=i(17306),h=i(68410),m=i(76977),g=i(72032);let v=e=>{let{actions:t,aboveTitle:i,belowDescription:o,bodyWrapperVariant:v,children:Y,description:f,image:b,isLoading:y,metadata:_,title:w,pageCTA:C,hideDivider:I=!1}=e,{isMobile:k}=(0,h.sM)(),S=!!(w&&!f&&!i&&!o&&!t&&!b),{markdownProps:D}=(0,p.$)(f);return(0,l.FD)(d.DH,{children:[_&&(0,l.Y)(s.Metadata,(0,n._)({},_)),(0,l.Y)(c.r,{paddingTop:k?40:64,children:!y&&(0,l.FD)(m.I1,{gap:k?24:40,paddingBottom:64,children:[(0,l.Y)("div",{className:a()(g.A.header,{[g.A.noImage]:!b,[g.A.headerWithJustTitle]:S}),children:k?(0,l.FD)(m.I1,{gap:24,children:[i&&(0,l.Y)(m.Ye,{alignSelf:"start",children:i}),(0,l.Y)(u.T,{preset:"h1-serif",children:w}),b&&(0,l.Y)(m.Ye,{children:b}),f&&(0,l.Y)(u.T,(0,r._)((0,n._)({},D),{preset:"d1-sans-regular"})),o]}):(0,l.FD)(l.FK,{children:[(0,l.FD)(m.I1,{children:[i&&(0,l.Y)(m.Ye,{alignSelf:"start",children:i}),(0,l.Y)(u.T,{preset:"h1-serif",children:w}),(0,l.FD)(m.I1,{gap:24,children:[f&&(0,l.Y)(u.T,(0,r._)((0,n._)({},D),{preset:"d1-sans-regular"})),o]})]}),b&&(0,l.Y)(m.Ye,{justifyContent:"end",children:b}),t&&(0,l.Y)("div",{className:g.A.actions,children:t})]})}),!I&&(0,l.Y)("div",{className:g.A.thickRule,children:C}),(0,l.Y)("div",{className:a()({[g.A.bodyWrapperTwoMiddleColumns]:"two-middle-columns"===v}),children:Y})]})})]})}},53696:function(e,t,i){i.d(t,{r:()=>l});var n=i(10201),r=i(76977);let l=e=>{let{children:t,paddingTop:i}=e;return(0,n.Y)(r.I1,{className:"container-Y7VoFt",paddingTop:i,children:t})}},82180:function(e,t,i){i.d(t,{Z:()=>b});var n=i(69277),r=i(70408),l=i(10201),o=i(85353),a=i(18409),s=i(13589),d=i(15625),c=i(15894),u=i(57753),p=i(84605),h=i(74894),m=i(68349),g=i(76977),v=i(36372),Y=i(59294),f=i(7755);let b=e=>{let{pub:t,section:i,user:b}=e,{iString:y}=(0,p.GO)(),[_,w]=(0,s.Mk)(),[C,I]=(0,s.Mk)(),[k,S]=(0,s.Mk)(),D=(0,v.d)(),{feedUrl:F}=(0,Y.Zq)({pub:t,user:null!=b?b:null,section:i}),T=(0,f.Em)({pub:t,section:i,spotifySettings:(0,h.Om)({pub:t,section:null!=i?i:null})}),P={as:"a",cursor:"pointer",rel:"noreferrer noopener",target:"_blank"};return(0,l.FD)(g.Ye,{alignItems:"center",gap:12,children:[(0,l.Y)(c.T,{preset:"d1-sans-medium",children:"Listen On:"}),(0,l.FD)(g.Ye,{alignItems:"center",gap:16,children:[T.spotify_url&&(0,l.Y)(g.Ye,(0,r._)((0,n._)({},w,P),{href:T.spotify_url,children:(0,l.Y)(d.q,{fill:_?void 0:u.Q.black.hex})})),T.apple_podcasts_url&&(0,l.Y)(g.Ye,(0,r._)((0,n._)({},I,P),{href:T.apple_podcasts_url,children:(0,l.Y)(o.A,{size:24,stroke:C?"#B53CD9":u.Q.black.hex})})),(0,l.Y)(g.Ye,(0,r._)((0,n._)({},S),{cursor:"pointer",onClick:()=>{D.popToast(()=>(0,l.Y)(v.y,{text:y("RSS feed URL copied")})),(0,m.lW)(F)},children:(0,l.Y)(a.A,{size:24,stroke:k?"#F88800":u.Q.black.hex})}))]})]})}},22240:function(e,t,i){i.d(t,{L:()=>o});var n=i(10201),r=i(15894),l=i(76977);let o=e=>{let{children:t}=e;return(0,n.Y)(l.Ye,{children:(0,n.Y)(l.Ye,{className:"container-f0oiU0",paddingBottom:8,children:(0,n.Y)(r.T,{preset:"detail-large",children:t})})})}},70103:function(e,t,i){i.d(t,{Z:()=>r});var n=i(10201);let r=e=>{let{children:t}=e;return(0,n.Y)("div",{className:"container-mcXs8_",children:t})}},73062:function(e,t,i){i.d(t,{i:()=>u});var n=i(10201),r=i(32485),l=i.n(r),o=i(45773),a=i(49436),s=i(63446),d=i(76977);let c="hoverText-TwVQuR",u=e=>{let{isSubscribed:t,onClick:i,className:r,minimize:u,subscribedText:p="Notified",unsubscribedText:h="Get Notified",visible:m=!0}=e;return(0,n.Y)(s.v,{className:l()("notifyButton-lmtipU",u?"minimize-yxTwzX":void 0,t&&"subscribed-oEC2qb",r),"data-subscribed":t,size:"sm",style:{visibility:m?"visible":"hidden"},variant:"outline",onClick:i,onMouseOver:e=>{e.stopPropagation()},children:(0,n.Y)(d.Ye,{alignItems:"center",className:"notifyButtonInternal-e4KibS",gap:8*!u,justifyContent:"space-between",position:"relative",children:t?(0,n.FD)(n.FK,{children:[(0,n.Y)("div",{className:l()(u?c:null),children:p}),(0,n.Y)(o.A,{size:16})]}):(0,n.FD)(n.FK,{children:[(0,n.Y)("div",{className:l()(u?c:null),children:h}),(0,n.Y)(a.A,{size:16})]})})})}},78956:function(e,t,i){i.d(t,{A:()=>d});var n=i(10201),r=i(83673),l=i.n(r),o=i(17402),a=i(16074),s=i(76977);let d=e=>{let{children:t,gap:i=32,includeBottomDivider:r,includeTopDivider:d,paddingTop:c=0}=e,u=o.Children.toArray(t),p=l()(u).flatMap((e,t)=>0!==t||d?[(0,n.Y)(a.c,{flex:"auto"}),e]:[e]);return(0,n.FD)(s.I1,{gap:i,paddingTop:c,children:[p,r&&(0,n.Y)(a.c,{flex:"auto"})]})}},86227:function(e,t,i){i.d(t,{u:()=>a});var n=i(10201),r=i(61755),l=i(68410),o=i(76977);let a=e=>{let{post:t,pub:i,user:a}=e,{isMobile:s}=(0,l.sM)();return(0,n.FD)(o.Ye,{gap:s?16:40,justifyContent:"center",children:[(0,n.Y)(r.qS,{cta:s?"Comment":"Make a comment",post:t,pub:i,showCounts:!1,size:"large"}),(0,n.Y)(r.ct,{cta:s?"Like":"Like article",post:t,pub:i,showCounts:!1,size:"large",user:a}),(0,n.Y)(r.wu,{cta:s?"Share":"Share article",post:t,pub:i,user:a})]})}},36027:function(e,t,i){i.d(t,{E:()=>h});var n=i(10201),r=i(15894),l=i(68410),o=i(28528),a=i(84032),s=i(47173),d=i(76977),c=i(56262),u=i(82776);let p="verticalDivider-JbC7L1",h=e=>{let{post:t}=e,{isMobile:i}=(0,l.sM)(),{pub:h}=(0,o.np)(),m=(0,c.getDurationForPostPreview)({post:t});return(0,n.Y)(r.T,{color:"tertiary",preset:"caption",style:{lineHeight:1},children:(0,n.FD)(d.Ye,{gap:16,children:[(0,n.Y)(a.aR,{customFormat:"MMMM D, YYYY",post:t}),(0,n.Y)("div",{className:p}),(0,n.Y)(s.q,{clamp:1,post:t,pub:h}),!!m&&!i&&(0,n.FD)(n.FK,{children:[(0,n.Y)("div",{className:p}),(0,u.formatPodcastDuration)(m)]})]})})}},64703:function(e,t,i){i.d(t,{k:()=>d});var n=i(10201),r=i(22076),l=i(63446),o=i(15894),a=i(76977),s=i(16291);let d=e=>{let{liveStream:t,trackingSurface:i}=e,d=(0,s.A)(t.scheduled_at).format("dddd MMMM D, YYYY"),c=(0,s.A)(t.scheduled_at).format("h:mm A");return(0,n.FD)(a.I1,{gap:24,children:[(0,n.FD)(a.I1,{gap:8,children:[(0,n.Y)(o.T,{preset:"h5-serif",children:t.title}),(0,n.Y)(o.T,{preset:"d3-serif",children:t.description}),(0,n.Y)(o.T,{preset:"timestamp",children:d}),(0,n.Y)(o.T,{preset:"timestamp",children:c})]}),(0,n.Y)(a.Ye,{children:(0,n.Y)(r.n,{liveStream:t,trackingSurface:i,trigger:(0,n.Y)("div",{children:(0,n.Y)(l.v,{size:"sm",trailingIcon:"plus",variant:"outline",children:"Add to calendar"})})})})]})}},72987:function(e,t,i){i.d(t,{N:()=>I});var n=i(10201),r=i(17402),l=i(72880),o=i(82528),a=i(82180),s=i(73090),d=i(22240),c=i(64703),u=i(16074),p=i(76977);let h=e=>{let{scheduledLiveStreams:t}=e;return(0,n.FD)(p.I1,{gap:40,children:[(0,n.Y)(d.L,{children:"Upcoming livestreams"}),(0,n.Y)(p.I1,{gap:24,children:t.map((e,t)=>(0,n.FD)(n.FK,{children:[0!==t&&(0,n.Y)(u.c,{}),(0,n.Y)(c.k,{liveStream:e,trackingSurface:"section-page"})]}))})]})};var m=i(7903),g=i(98695),v=i(37659),Y=i(27428),f=i(95691),b=i(79454),y=i(16447),_=i(68410),w=i(46009),C=i(22092);let I=e=>{let t,i,d,{freeSignup:c,freeSignupEmail:I,isPodcast:k,isTagPage:S=!1,newPosts:D,pub:F,scheduledLiveStreams:T,section:P,tag:x,user:A,utm:E}=e,{isMobile:N}=(0,_.sM)(),[B,M]=(0,r.useState)(null!=T?T:null),{ids:R}=(0,Y.M)({pub:F}),{ids:L}=(0,f.P)({pub:F}),O=(0,C.E)({pub:F,section:P});if((0,r.useEffect)(()=>{let e=async()=>{M(await (0,b.f7)())};O&&!B&&e()},[O,B]),!P&&!S&&!k)return console.warn("Needs to be a section, tag, or pub-level podcast"),null;let z=!!P&&L.includes(P.id),U=!!P&&R.includes(P.id);if(k){let e=P?(0,w.lL)({pub:F,section:P}):(0,w.j_)({pub:F});t=e.title,i=e.description,d=e.artUrl}else z?(t=null==P?void 0:P.name,i=null==P?void 0:P.description,d=null==P?void 0:P.logo_url):S?(t=(null==x?void 0:x.name)||"Page not found",i=null):(t=null==P?void 0:P.name,i=null==P?void 0:P.description);return(0,n.Y)(o.y,{belowDescription:(0,n.FD)(p.pT,{direction:N?"column":"row",justifyContent:"space-between",children:[k?(0,n.Y)(a.Z,{pub:F,section:P,user:A}):z?(0,n.Y)(v.m,{pub:F,section:P}):void 0,P&&(k||z)&&(0,n.Y)(m.S,{freeSignup:c,freeSignupEmail:I,isPodcastOrVideo:!0,pub:F,section:P,user:A})]}),bodyWrapperVariant:"two-middle-columns",description:i,image:d?(0,n.Y)(l.o,{className:"sectionImage-AFt6TD",imageIsFixedWidth:!1,maxWidth:540,src:d,useRetinaSizing:!0}):void 0,pageCTA:!P||S||k||z?void 0:(0,n.Y)(m.S,{freeSignup:c,freeSignupEmail:I,isPodcastOrVideo:!1,pub:F,section:P,user:A}),title:t,children:(0,n.FD)(p.I1,{gap:40,children:[B&&B.length>0&&(0,n.FD)(n.FK,{children:[(0,n.Y)(h,{scheduledLiveStreams:B}),(0,n.Y)(u.c,{})]}),(0,n.Y)(y.M,{hideCommunity:!0,hideTop:S,isPodcast:k&&!P,newPosts:D,postTagId:null==x?void 0:x.id,pub:F,renderLoading:()=>null,renderTabs:e=>{let{activeTabId:t,tabs:i,onClick:r}=e;return i.length<=1||k?null:(0,n.Y)(p.I1,{alignItems:"center",className:"tabsContainer-P8p3c9",paddingBottom:N?40:64,children:(0,n.Y)(g.p,{activeTabId:t,tabs:i,onClick:r})})},sectionId:null==P?void 0:P.id,source:S?"tag-archive":void 0,user:A,utm:E,children:e=>{let{posts:t}=e;return(0,n.Y)(s.R,{isEvents:U,posts:t})}})]})})}},7903:function(e,t,i){i.d(t,{S:()=>m});var n=i(10201),r=i(45773),l=i(17402),o=i(63446),a=i(73062),s=i(84605),d=i(12501),c=i(76977),u=i(36372),p=i(39318),h=i(22092);let m=e=>{let{pub:t,section:i,isPodcastOrVideo:m,user:g,minimize:v,freeSignup:Y,freeSignupEmail:f}=e,{iString:b}=(0,s.GO)(),{popToast:y}=(0,u.d)(),[_,w]=(0,l.useState)(!1),[C,I]=(0,l.useState)(!1),k=!!g||!!f&&!!Y,{refetch:S}=(0,d.st)({pathname:"/api/v1/subscription/sections/email",auto:!1,method:"PATCH"}),{result:D,refetch:F}=(0,d.st)({pathname:"/api/v1/subscription",auto:!1});(0,l.useEffect)(()=>{(async()=>{let e=(0,p.Dlv)(window.location.href);if((null==e?void 0:e.searchParams.get("subscribe"))==="true"&&k){await S({json:{[i.id]:{setting:"individual"}}});let e=new URL(window.location.href);e.searchParams.delete("subscribe"),window.history.replaceState({},"",e.toString())}k&&await F(),I(!0)})()},[k]),(0,l.useEffect)(()=>{(null==D?void 0:D.email_settings)&&w("individual"===D.email_settings[i.id])},[D,i.id]);let T=async()=>{if(!k){let e=(0,h._)(t,{sectionSlug:i.slug,next:(0,p.yRP)(window.location.href,{subscribe:!0})});window.location.href=e;return}let e=!_;await S({json:{[i.id]:{setting:e?"individual":"disabled"}}}).then(()=>{w(e),y(()=>(0,n.Y)(u.y,{Icon:r.A,text:e?"Subscription updated!":"Unsubscribed!"}))})};return(0,n.Y)(c.Ye,{justifyContent:m?void 0:"end",children:m?(0,n.Y)(a.i,{isSubscribed:_,minimize:v,visible:C,onClick:T}):(0,n.Y)(o.v,{style:{visibility:C?"visible":"hidden"},variant:"tertiary",onClick:T,children:_?"".concat(b("Subscribed")," "):"".concat(b("Subscribe")," +")})})}},37659:function(e,t,i){i.d(t,{m:()=>d});var n=i(10201),r=i(23747),l=i(15894),o=i(95691),a=i(57753),s=i(76977);let d=e=>{var t;let{pub:i,section:d}=e,{metadata:c}=(0,o.P)({pub:i}),u=null==(t=c[d.id])?void 0:t.youtubeUrl;return u?(0,n.FD)(s.Ye,{alignItems:"center",as:"a",gap:8,href:u,rel:"noopener noreferrer",target:"_blank",children:[(0,n.Y)(l.T,{preset:"d1-sans-medium",children:"Watch on YouTube"}),(0,n.Y)(r.A,{fill:a.Q.black.hex,height:30,stroke:"none"})]}):null}},1918:function(e,t,i){i.d(t,{i:()=>a});var n=i(38970),r=i.n(n),l=i(17402),o=i(13770);let a=e=>{let{pub:t}=e,i=r()(t.authorPagesInfo,"user_id"),{setting:n,save:a}=(0,o.E)({key:"about_us_author_ids",fallback:[]}),[s,d]=(0,l.useState)(n),c=async()=>{await a({setting:s})};return{ids:s,onChange:e=>{let{ids:t}=e;d(t.filter(e=>i[e]))},onSave:c}}},57753:function(e,t,i){i.d(t,{Q:()=>r,e:()=>n});let n=["black","brightOrange","brightBlue","darkGreen","darkOrange","lightGray","mediumBlue","mediumGreen","mediumOrange","mediumPurple","mediumRed","mediumYellow","offWhite"],r={black:{hex:"#161613",invertTextColors:!0},brightOrange:{hex:"#f74701",invertTextColors:!1},brightBlue:{hex:"#0366F3",invertTextColors:!0},darkGreen:{hex:"#3A564B",invertTextColors:!0},darkOrange:{hex:"#d37735",invertTextColors:!1},lightGray:{hex:"#bebdb8",invertTextColors:!1},mediumBlue:{hex:"#005591",invertTextColors:!0},mediumGreen:{hex:"#2db750",invertTextColors:!0},mediumOrange:{hex:"#f69227",invertTextColors:!1},mediumPurple:{hex:"#5358C8",invertTextColors:!0},mediumRed:{hex:"#f2312c",invertTextColors:!0},mediumYellow:{hex:"#F3C82E",invertTextColors:!1},offWhite:{hex:"#f6f4ef",invertTextColors:!1}}},79454:function(e,t,i){i.d(t,{Cr:()=>l,IZ:()=>a,N7:()=>o,c:()=>s,f7:()=>c,zG:()=>d});var n=i(15734),r=i.n(n);let l=async e=>{let{extraText:t,extraLink:i}=e;await r().put("/api/v1/publication_settings").send({homepage_message_text:t,homepage_message_link:i})},o=async e=>{let{slug:t}=e;try{var i;return null!=(i=(await r().get("/api/v1/posts/".concat(t))).body)?i:null}catch(e){return null}},a=async e=>{let{postIds:t,pub:i}=e;await r().post("/api/v1/publication/".concat(i.id,"/pin")).send({post_ids:t})},s=async e=>{let{contentBlockId:t,contentBlockPins:i}=e;await r().post("/api/v1/content_block/".concat(t,"/pins")).send({pins:i})},d=async e=>{let{pub:t}=e;try{var i;return null!=(i=(await r().get("/api/v1/live_streams/active/pub/".concat(t.id))).body.activeLiveStream)?i:null}catch(e){return null}},c=async()=>{try{var e;return null!=(e=(await r().get("/api/v1/live_streams/scheduled")).body.scheduledLiveStreams)?e:[]}catch(e){return[]}}},29098:function(e,t,i){i.d(t,{A:()=>r});var n=i(17402);function r(){let{root:e=null,threshold:t=0,rootMargin:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"==typeof window||"undefined"==typeof IntersectionObserver)return[null,null];let[r,l]=(0,n.useState)(null),[o,a]=(0,n.useState)(null),s=(0,n.useRef)(new IntersectionObserver(e=>{let[t]=e;return l(t)},{root:e,threshold:t,rootMargin:i}));return(0,n.useEffect)(()=>{var e;let t=(null==o||null==(e=o.base)?void 0:e.addEventListener)?o.base:(null==o?void 0:o.addEventListener)?o:null,{current:i}=s;return i.disconnect(),t&&i.observe(t),()=>i.disconnect()},[o]),[a,r]}},99145:function(e,t,i){i.d(t,{BR:()=>c,bf:()=>d,v9:()=>s});var n=i(10201),r=i(6411),l=i.n(r),o=i(17402),a=i(21398);function s(){return(0,o.useContext)(d)}let d=(0,o.createContext)({open:()=>void 0});function c(e){let{children:t,load:r,pub:s,enableShortcuts:c=!0}=e,[u,p]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!1),[g,v]=(0,o.useState)(),[Y,f]=(0,o.useState)();(0,o.useEffect)(()=>{if(!r||!s)return;let e=()=>p(!0);if(c)return l().bind(["/","command+k"],e),()=>{l().unbind(["/"],e),l().unbind(["command+k"],e)}},[]);let b=(0,o.useMemo)(()=>({open:e=>{m(!!(null==e?void 0:e.postsOnly)),v(()=>null==e?void 0:e.onSelectResult),f(()=>null==e?void 0:e.onClose),p(!0)}}),[]);return r&&s?(0,n.FD)(d.Provider,{value:b,children:[t,(0,n.Y)(a.Ic,{module:"@/frontend/substack/search/PublicationSearch",resolve:e=>e.PublicationSearch,isOpen:u,postsOnly:h,pub:s,onClose:()=>{null==Y||Y(),p(!1)},onRequest:()=>Promise.all([i.e("3307"),i.e("4921"),i.e("3357")]).then(i.bind(i,43288)),onSelectResult:g})]}):(0,n.Y)(n.FK,{children:t})}},95282:function(e,t,i){i.d(t,{MT:()=>U,YU:()=>R,qN:()=>M});var n=i(69277),r=i(70408),l=i(79785),o=i(10201),a=i(17402),s=i(43262),d=i(27437);i(84777);var c=i(84605),u=i(42686),p=i(89607),h=i(27749),m=i(22434),g=i(27332),v=i(40740),Y=i(75840),f=i(25859),b=i(4560),y=i(58292),_=i(60897),w=i(86500),C=i(56804),I=i(12501),k=i(68349),S=i(76977),D=i(63136),F=i(504),T=i(5180),P=i(83629),x=i(56262),A=i(83873),E=i(49807),N=i(44307);function B(){let e=(0,l._)(["This comment is only visible to paid subscribers of ",""]);return B=function(){return e},e}function M(e){var t,i,l,a,s;let{comment:d,item:c,isParent:p,showReplyingTo:f,showContext:_,utm_content:D,parentCommentUserId:A,hideable:N=!1}=e,B=(0,h.PK)(),M=(0,Y.T)(),L=(0,T.l$)(c),O=()=>(0,F.Qb)(c,B,"profile",{tabId:M}),U=!d.ancestor_path,q=c.publication&&c.post&&(0,x.getPostAuthor)(c.publication,c.post),H=(0,I.st)({pathname:"/api/v1/trending-topics/toggle",method:"POST"}),W=null;if(!U){let e=null==(t=d.ancestor_path)?void 0:t.split(".").pop(),n=e&&Number(e);W=null!=(l=null==(i=c.parentComments)?void 0:i.find(e=>(null==e?void 0:e.id)===n))?l:null}let K=f&&(U&&q||!U&&W),G=(0,F.KY)(c,{isModuleItem:!0}),V=async()=>{var e,t,i,n,r;(0,F.Qb)(c,B,"context",{tabId:M}),(0,w.u4)(w.qY.SEE_MORE_NOTES_IN_CATEGORY_CLICKED,{tagId:null==(e=c.context.tag)?void 0:e.id,noteId:null==(t=c.comment)?void 0:t.id}),await H.refetch({method:"POST",json:{enable:!0,categoryID:null==(n=c.context)||null==(i=n.tag)?void 0:i.id}}),(0,k.V2)("/home/category/".concat(null==(r=c.context.tag)?void 0:r.id),{local_navigation:!1})},j=(0,x.getCommentAuthor)(d),X=!p&&["comment_like","comment_restack","note_like","generic"].includes(c.context.type);return(0,o.Y)(y.CF,{showGutter:p,hasContext:_,onClick:e=>{if(!e.defaultPrevented&&!L){(0,F.Qb)(c,B,"item",{tabId:M});let t="search"===B&&"undefined"!=typeof location?location.pathname:null,i=(0,E.Zgx)(d,{noBase:!d.hidden&&P.Z,urlParams:{utmSource:t}});(0,C.o)(e,d.hidden&&c.publication?(0,E.eV6)(c.publication,{addBase:!0,params:{next:i}}):i,{newTab:!!d.hidden,native:d.hidden,state:{showBack:!0}})}},entityKey:c.entity_key,children:(0,o.FD)(v.k,{user:j,item:c,comment:d,children:[_||X?(0,o.Y)(m.x,{context:c.context,onClick:()=>(0,F.Qb)(c,B,"context",{tabId:M}),utm_content:D}):null,c.context.tag?(0,o.Y)(m.x,{context:(0,r._)((0,n._)({},c.context),{type:"topic"}),onClick:V,utm_content:D}):null,(0,o.FD)(S.Ye,{gap:12,alignItems:"start",children:[(0,o.Y)(y.NT,{user:j,onClick:O,utm_content:D}),(0,o.FD)(S.I1,{gap:8,flex:"grow",minWidth:0,children:[(0,o.FD)(S.I1,{gap:12,children:[(0,o.FD)(S.I1,{gap:4,children:[(0,o.Y)(g.LY,{author:j,post:null!=(a=c.post)?a:void 0,comment:d,onClick:O,utm_content:D,publication:null!=(s=c.publication)?s:void 0,item:c,allowHide:N,parentCommentUserId:A}),K&&(0,o.Y)(z,{isTopLevel:U,postAuthor:q,parentComment:W,item:c}),d.body&&(0,o.Y)(R,{comment:d,item:c})]}),d.attachments&&(0,o.Y)(u.ti,{parent:d,attachments:d.attachments,onAttachmentClick:function(){let{commentId:e,attachmentType:t,attachmentId:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,F.Qb)(c,B,"attachment",{tabId:M,extraEventProps:{commentId:e,clicked_attachment_type:t,clicked_attachment_id:i}})},onSavePostClick:G,utm_content:D,item:c})]}),!d.hidden&&(0,o.Y)(b.M,{item:c,comment:d})]})]})]})})}function R(e){let{comment:t,item:i,large:n,paddingRight:r}=e,l=(0,h.PK)(),d=(0,Y.T)(),{bodyJson:c,truncatedBodyJson:u,isTruncated:m,shouldExpandInline:g}=(0,_.A)(t),[v,f]=(0,a.useState)(!1),b=n||!m||v,w=b?c:u;return t.age_verification&&t.age_verification.status!==A.Y.CompletedAdult?(0,o.Y)(S.VP,{paddingTop:8,children:(0,o.Y)(s.T,{content:t,description:t.body,source:"feed"})}):(0,o.FD)(S.I1,{className:N.A.feedCommentBody,paddingRight:r,children:[(0,o.Y)(y.Wz,{children:t.hidden&&i?(0,o.Y)(L,{pub:null==i?void 0:i.publication}):w&&(0,o.Y)(p.w,{content:w,onLinkClicked:()=>{i&&(0,F.Qb)(i,l,"link",{tabId:d,extraEventProps:{commentId:t.id}})},attachedLinks:U(t)},b)}),!b&&(0,o.Y)(O,{onClick:e=>{i&&(0,F.Qb)(i,l,"see_more",{tabId:d,extraEventProps:{commentId:t.id}}),g?(e.preventDefault(),f(!0)):(0,k.V2)((0,E.Zgx)(t,{noBase:P.Z,urlParams:{utmSource:"search"===l&&"undefined"!=typeof location?location.pathname:null}}),{event:e,state:{showBack:!0}})}})]})}function L(e){let{pub:t}=e,{iString:i,iTemplate:n}=(0,c.GO)(),r=(null==t?void 0:t.name)||"";return(0,o.FD)(o.FK,{children:[(0,o.Y)("i",{children:n(B(),r)}),(0,o.Y)("br",{}),(0,o.Y)("b",{children:i("Subscribe to view ")})]})}function O(e){let{iString:t}=(0,c.GO)();return(0,o.FD)(S.pT,{className:N.A.seeMore,children:[(0,o.Y)(S.pT,{className:N.A.seeMoreFade}),(0,o.Y)(D.EY.B3,{color:"secondary",weight:"medium",className:N.A.seeMoreText,children:(0,o.Y)(f.Yq,(0,r._)((0,n._)({},e),{children:t("See more")}))})]})}function z(e){var t;let{isTopLevel:i,postAuthor:n,parentComment:r,item:l}=e,a=i?n:r?{id:r.user_id,user_id:r.user_id,name:r.name,photo_url:r.photo_url}:n,s=i?(0,E.q$n)(l.publication,l.post,{noBase:P.Z}):(0,E.Zgx)(r,{noBase:P.Z}),c=(null==(t=i?n:r)?void 0:t.name)||"";return a?(0,o.FD)(D.EY.B5,{color:"secondary",translated:!0,children:["Replying to"," ",(0,o.Y)(d.ProfileHoverCard,{subject:a,utmSource:"feed",trigger:(0,o.Y)(f.Yq,{href:s,children:I18N.p(c)})})]}):null}function U(e){return e.attachments?e.attachments.map(e=>"link"===e.type?e.linkMetadata.url:"post"===e.type?(0,E.wu9)(e.publication,e.post):"publication"===e.type?(0,E.$_T)(e.publication):"comment"===e.type?(0,E.Zgx)(e.comment):"").filter(Boolean):[]}},44451:function(e,t,i){i.d(t,{GJ:()=>Q,XZ:()=>y.XZ});var n=i(69277),r=i(70408),l=i(10201),o=i(32485),a=i.n(o),s=i(3213),d=i(17402),c=i(84605),u=i(46271),p=i(95282),h=i(27749),m=i(2675),g=i(42652),v=i(2192),Y=i(53906),f=i(25979),b=i(37120),y=i(20482),_=i(68279),w=i(60346),C=i(40144),I=i(22434),k=i(27332),S=i(40740),D=i(75840),F=i(25859),T=i(99289),P=i(58292),x=i(94328),A=i(58418),E=i(56804),N=i(82772),B=i(17028),M=i(44552),R=i(75303),L=i(95187),O=i(504),z=i(5180),U=i(60281),q=i(83629),H=i(42588),W=i(2548),K=i(11510),G=i(20437),V=i(56262),j=i(75914),X=i(70189),J=i(49807),Z=i(44307);let Q=(0,d.memo)(function(e){let{item:t,className:i,showLoginPrompt:n}=e,r=$[t.type];return r?(0,l.Y)(r,{item:t,className:i,children:n&&(0,l.Y)(w.H,{version:"login"})}):null}),$={post:function(e){let{item:t,className:i,children:n}=e,r=(0,h.PK)(),o=(0,d.useContext)(D.P),{iString:a}=(0,c.GO)();return(0,l.FD)(y.B_,{item:t,className:i,ariaLabel:a("Post"),children:[n,(0,l.Y)(ee,{item:t,context:(0,l.Y)(I.x,{context:t.context,onClick:()=>(0,O.Qb)(t,r,"context",{tabId:o}),utm_content:t.entity_key}),hideable:!0})]})},comment:function(e){var t,i;let{item:n,className:r,children:o}=e,{iString:a}=(0,c.GO)(),{publication:s,post:u,comment:m,parentComments:g}=n,v=s||u||!g||1===g.length?void 0:g[0],Y=null!=(i=g&&g[g.length-1])?i:null,f=s&&u&&(0,V.getPostAuthor)(s,u),b=(0,h.PK)(),_="comment_restack"!==n.context.type&&"comment_like"!==n.context.type&&"post-discussion"!==b,w=(0,d.useContext)(D.P),C="comment_restack"===n.context.type||"comment_like"===n.context.type?"user/".concat(null==(t=n.context.users[0])?void 0:t.id):n.entity_key;return(0,l.Y)(y.B_,{item:n,className:r,ariaLabel:a("Note"),children:(0,l.FD)(l.FK,{children:[o,(0,l.FD)(et,{children:[_&&(0,l.Y)(ei,{author:f,rootFeedComment:v,parentComments:g,parentComment:Y,item:n,utm_content:C,feedSurface:b,tabId:w}),(0,l.Y)(p.qN,{comment:m,item:n,showReplyingTo:!_,utm_content:C,hideable:!0})]})]})})},userSuggestions:function(e){let{item:t}=e,i=(0,K.Iu)(),o=(0,d.useRef)(null),a=(0,M.h9)(o),{state:s,handleArrowClick:c}=(0,W.jA)(o,{scrollFullPage:!0}),p=(0,u.ur)(),h=(0,X.st)();return(0,N.S8)(o,()=>{p.changeSetting("suggestions_feed_item_last_shown_at",new Date().toISOString())},{threshold:.2}),(0,l.Y)(y.B_,{item:t,children:(0,l.FD)(B.I1,{paddingTop:16,children:[(0,l.FD)(B.pT,{alignItems:"center",justifyContent:"space-between",paddingLeft:{mobile:16,desktop:0},children:[(0,l.Y)(B.EY.H4,{translated:!0,children:(0,l.Y)(F.Yq,{onClick:e=>(0,E.o)(e,h),children:"Suggestions"})}),(0,l.Y)(B.$n,{size:"sm",priority:"tertiary",onClick:e=>(0,E.o)(e,h),children:"See all"})]}),(0,l.FD)(B.pT,{className:Z.A.peopleYouMayKnowContainer,alignItems:"center",flex:"grow",position:"relative",children:[(0,l.Y)(B.pT,{flex:"grow",overflow:"hidden",children:(0,l.FD)(B.pT,(0,r._)((0,n._)({},a.props),{ref:o,className:Z.A.peopleYouMayKnow,alignItems:"center",gap:8,paddingX:{desktop:0,mobile:16},paddingBottom:16,paddingTop:12,children:[!1,t.userSuggestions.map(e=>(0,l.Y)(U.pp,{feedUserSuggestion:e,surface:"feed"},e.user.id))]}))}),!i&&(0,l.FD)(l.FK,{children:[(0,l.Y)(L.p_,{direction:"left",isVisible:s.showLeft,onClick:c(-1)}),(0,l.Y)(L.p_,{direction:"right",isVisible:s.showRight,onClick:c(1)})]})]})]})})},facebookConnect:function(e){let{item:t}=e;return(0,l.Y)(y.B_,{item:t,children:(0,l.Y)(B.pT,{paddingY:20,children:(0,l.Y)(U.h8,{})})})},inviteFriends:function(e){let{item:t}=e,[i]=(0,A.A)(U.Ft);return i?null:(0,l.Y)(y.B_,{item:t,children:(0,l.Y)(B.pT,{paddingY:20,paddingX:20,children:(0,l.Y)(U.pS,{utmSource:"feed_item"})})})},featuredPublication:_.G,featuredCollection:b.U,chat:function(e){let{item:t}=e,{iString:i}=(0,c.GO)();return t.community_post.user&&(0,l.Y)(y.B_,{item:t,ariaLabel:i("Chat"),children:(0,l.Y)(g.H,{item:t,author:t.community_post.user})})},profileSearchResults:function(e){let{item:t}=e;return(0,l.Y)(y.B_,{item:t,children:(0,l.Y)(v.T,{item:t})})},categoryLeaderboard:f.b,trendingTopicsExplore:function(e){let{item:t}=e;return(0,l.Y)(y.B_,{item:t,children:(0,l.Y)(Y.q,{item:t})})},videoSuggestionsExplore:C.b};function ee(e){var t,i;let{item:n,showGutter:r,context:o,hideable:a=!1}=e,{publication:s,post:c}=n,u=s&&c?(0,V.getPostAuthor)(s,c):void 0,p=(0,h.PK)(),g=(0,d.useContext)(D.P),v=(0,z.l$)(n),Y=()=>(0,O.Qb)(n,p,"profile",{tabId:g}),f="post"===n.type&&n.mediaClip?n.mediaClip.clip_info:null;return s&&c&&u?(0,l.Y)(P.CF,{onClick:e=>{e.defaultPrevented||v||((0,O.Qb)(n,p,"item",{tabId:g}),(0,E.o)(e,(0,J.q$n)(s,c,{noBase:q.Z,mediaClip:"post"===n.type&&n.mediaClip||void 0})))},showGutter:r,hasContext:!!o,entityKey:n.entity_key,children:(0,l.FD)(S.k,{user:u,item:n,children:[o,(0,l.FD)(B.pT,{gap:12,alignItems:"start",children:[(0,l.Y)(P.NT,{user:u,onClick:Y,utm_content:n.entity_key}),(0,l.FD)(B.I1,{gap:8,flex:"grow",minWidth:0,children:[(0,l.FD)(B.I1,{gap:12,children:[(0,l.Y)(k.LY,{author:u,post:c,onClick:Y,utm_content:n.entity_key,publication:s,item:n,allowHide:a}),c&&(null==(i=c.liveStream)||null==(t=i.liveStream)?void 0:t.status)&&["scheduled","pending","active"].includes(c.liveStream.liveStream.status)?(0,l.Y)(H.S,{liveStream:c.liveStream,post:c,feedItem:n}):(0,j.tL)(n)&&c.videoUpload?(0,l.Y)(G.R8,{tag:(0,l.Y)(x.b_,{item:n,pub:s,post:c}),composing:!1,mediaUpload:c.videoUpload,videoPlayerProps:(0,m.g2)({post:c,item:n,clipInfo:f})}):(0,l.Y)(m.Sp,{item:n,publication:s,post:c,onClick:()=>(0,O.Qb)(n,p,"attachment",{tabId:g}),clipInfo:f})]}),(0,l.Y)(T.j,{item:n,pub:s,post:c})]})]})]})}):null}let et=(0,R.I4)({gap:8},R.VP);function ei(e){var t,i;let{author:n,rootFeedComment:r,parentComments:o,parentComment:a,item:s,utm_content:d,feedSurface:c,tabId:u}=e,h="note_reply"===s.context.type&&s.comment.user_id!==(null!=(i=null==n?void 0:n.id)?i:null==o||null==(t=o[0])?void 0:t.user_id);return(0,l.FD)(l.FK,{children:[n?(0,l.FD)(l.FK,{children:[(0,l.Y)(ee,{item:s,showGutter:!0,context:h?(0,l.Y)(I.x,{context:s.context,onClick:()=>(0,O.Qb)(s,c,"context",{tabId:u}),utm_content:d}):void 0}),o&&o.length>1&&a&&(0,l.Y)(en,{url:(0,J.Zgx)(a,{noBase:q.Z}),showGutter:!0})]}):r?(0,l.FD)(l.FK,{children:[(0,l.Y)(p.qN,{isParent:!0,comment:r,item:s,showContext:h,utm_content:d}),o&&o.length>2&&a&&(0,l.Y)(en,{url:(0,J.Zgx)(a,{noBase:q.Z}),showGutter:!0})]}):null,a&&o&&o.length>0&&(0,l.Y)(p.qN,{showReplyingTo:o.length>2,isParent:!0,comment:a,item:s,showContext:h&&!(n||r),utm_content:d})]})}function en(e){let{url:t,showGutter:i}=e;return(0,l.Y)(P.CF,{onClick:e=>(0,E.o)(e,t),showGutter:i,hasAvatar:!1,children:(0,l.FD)(B.Ye,{children:[(0,l.FD)(B.I1,{alignItems:"center",justifyContent:"center",className:Z.A.seeMoreThread,children:[(0,l.Y)(B.I1,{className:a()(Z.A.seeMoreThreadSegment,Z.A.top)}),(0,l.Y)(s.A,{size:16,stroke:"var(--color-utility-detail)"}),(0,l.Y)(B.I1,{className:Z.A.seeMoreThreadSegment,flex:"grow"})]}),(0,l.Y)(B.I1,{className:Z.A.seeMoreReplies,flex:"grow",minWidth:0,children:(0,l.Y)(B.EY.B4,{color:"highlight",children:(0,l.Y)(F.Yq,{href:t,children:"See more replies"})})})]})})}},92538:function(e,t,i){i.d(t,{n:()=>r});var n=i(84605);let r=()=>{let{iString:e}=(0,n.GO)();return[["1d",e("For 1 day")],["30d",e("For 30 days")],["90d",e("For 90 days")],["1y",e("For 1 year")],["1000y",e("Forever")]]}},7292:function(e,t,i){i.d(t,{t:()=>r});var n=i(84605);let r=()=>{let{iString:e}=(0,n.GO)();return{list:{id:"list",label:e("List"),description:e("A list of posts"),postCount:{desktop:7,tablet:7,mobile:7}},grid:{id:"grid",label:e("Grid"),description:e("A grid of nine posts"),postCount:{desktop:9,tablet:9,mobile:7}},"grid-groups":{id:"grid-groups",label:e("Groups (sections or tags)"),description:e("A grid of nine posts, grouped by section or tag"),postCount:{desktop:9,tablet:9,mobile:7}},custom:{id:"custom",label:e("Advanced"),description:e("Advanced layout options"),postCount:{desktop:0,tablet:0,mobile:0}}}}},5646:function(e,t,i){i.d(t,{T:()=>r});var n=i(84605);let r=()=>{let{iString:e}=(0,n.GO)();return[["visible",e("Do not delete comments")],["delete_this_comment",e("Delete this comment")],["delete_all_comments",e("Also delete all comments")]]}},70107:function(e,t,i){i.d(t,{f:()=>r});var n=i(17402);let r=e=>{let{key:t,initialValue:i}=e,[r,l]=(0,n.useState)(i);return(0,n.useEffect)(()=>{let e=localStorage.getItem(t);null!=e&&l("true"===e)},[t]),[r,e=>{l(e),e?localStorage.setItem(t,"true"):localStorage.removeItem(t)}]}},40075:function(e,t,i){i.d(t,{Y:()=>l});var n=i(17402),r=i(94729);let l=e=>{let{pub:t,user:i,preloadedActiveLiveStream:l}=e,[o,a]=(0,n.useState)(null!=l?l:null);return(0,n.useEffect)(()=>{i||(0,r.x6)("/api/v1/live_streams/active/pub/".concat(t.id)).then(e=>{let{activeLiveStream:t}=e;return a(t)})},[t,i]),{activeLiveStream:o}}},26289:function(e,t,i){i.d(t,{By:()=>l,sY:()=>o,yr:()=>r});var n=i(17402);let r=e=>{var t,i;let r=null==e||null==(t=e.current)?void 0:t.player,[l,o]=(0,n.useState)("number"==typeof(null==r?void 0:r.currentTime)?r.currentTime:0),[a,s]=(0,n.useState)(!!r&&!r.paused);return(0,n.useEffect)(()=>{var t;let i=null==(t=e.current)?void 0:t.player;if(i){let e=e=>{"number"==typeof e.target.currentTime&&o(e.target.currentTime)},t=()=>s(!0),n=()=>s(!1),r=()=>s(!1);return i.addEventListener("timeupdate",e),i.addEventListener("play",t),i.addEventListener("pause",n),i.addEventListener("ended",r),i.paused||a||s(!0),()=>{i.removeEventListener("timeupdate",e),i.removeEventListener("play",t),i.removeEventListener("pause",n),i.removeEventListener("ended",r)}}},[null==e||null==(i=e.current)?void 0:i.player]),{currentTime:l,isPlaying:a}},l=e=>o(e.current),o=e=>{let t=null==e?void 0:e.player,[i,r]=(0,n.useState)(!!t&&!t.paused);return(0,n.useEffect)(()=>{let t=null==e?void 0:e.player;if(t){let e=()=>r(!0),n=()=>r(!1),l=()=>r(!1);return t.addEventListener("play",e),t.addEventListener("pause",n),t.addEventListener("ended",l),t.paused||i||r(!0),()=>{t.removeEventListener("play",e),t.removeEventListener("pause",n),t.removeEventListener("ended",l)}}},[null==e?void 0:e.player]),i}},60285:function(e,t,i){i.d(t,{k:()=>s});var n=i(76703),r=i.n(n),l=i(17402),o=i(39318),a=i(41086);let s=e=>{let{alwaysPersistQuery:t,initialValue:i,key:n,type:s,isArray:d,disable:c}=e,u=(0,a.y)(n),p=i;u&&!c&&(p=d?u.split(",").map(e=>"number"===s?parseInt(e):e):"number"===s?parseInt(u):u);let[h,m]=(0,l.useState)(p),g=h&&(h!==i||t)?r()(h).join(","):"";return(0,l.useEffect)(()=>{if(!c)if(g)window.history.replaceState({},"",(0,o.oRR)({[n]:g}));else{let e=new URL(document.location.href);e.searchParams.delete(n),window.history.replaceState({},"",e.toString())}},[c,n,g]),[h,m]}},72569:function(e,t,i){i.d(t,{c:()=>a});var n=i(10201),r=i(82853),l=i(68349),o=i(36372);function a(){let e=(0,o.d)();return function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"link";(0,l.lW)(t),e.popToast(()=>(0,n.Y)(o.y,{text:"Copied ".concat(i," to clipboard"),Icon:r.A}))}}},73331:function(e,t,i){i.d(t,{A:()=>F});var n=i(99851),r=i(10201),l=i(17402),o=i(15734),a=i.n(o),s=i(9266),d=i(6212),c=i(58398),u=i(58997),p=i(36233),h=i(56778),m=i(85478),g=i(86500),v=i(13022),Y=i(68349),f=i(24782),b=i(76977),y=i(47639),_=i(27747);let w=e=>{var t;let{post:i,pub:n,user:o,freeSignup:a}=e,s=i.section_id&&n.sections&&null!=(t=n.sections.find(e=>e.id===i.section_id))?t:null,c=(0,l.useRef)(null);return(0,r.FD)(b.I1,{className:"post",paddingY:32,children:[(0,r.Y)(d.I0,{allowEdit:!0,hideAudience:"page"===i.type,hideDate:"page"===i.type,isOnPostPage:!0,post:i,pub:n,showCommentRestack:!n.hide_post_restacks,showLabel:!0,showPhoto:!0,showShare:!0,showSubtitle:!0,user:o}),i.videoUpload&&(0,r.Y)(y.U,{contentType:"post",disableAutoPlay:!0,entityKey:String(i.id),entityType:"post",isFreeSubscribed:!!((null==o?void 0:o.is_free_subscribed)||a),isSubscribed:!!(null==o?void 0:o.is_subscribed),mediaUpload:i.videoUpload,post:i,pub:n,surface:"publication",variant:"inbox",videoPlayerRef:c,videoType:"post"}),i.podcastUpload&&!i.videoUpload&&(0,r.Y)(_.KQ,{isFreeSubscribed:!!((null==o?void 0:o.is_free_subscribed)||a),isSubscribed:!!(null==o?void 0:o.is_subscribed),post:i,pub:n,section:s,trackingProps:{surface:"media_feed",entityKey:i.id,entityType:"post",contentType:"post"},variant:"notes-full"})]})};var C=i(56262),I=i(39318),k=i(41086),S=i(9036),D=i(57324);class F extends l.Component{async componentDidMount(){this.triggerShareOnLoad(),await this.loadMore()}getBatchSize(){return 5}async loadMore(){!this.state.hasMore||await (0,Y.vL)(this,"loading",async e=>{let{hasMore:t,posts:i}=e;if(t){i=i||[];try{let e=(await a().get("/api/v1/posts").query({limit:this.getBatchSize(),offset:i.length})).body;i=i.concat(e),t=e.length>=this.getBatchSize(),this.makeSureIosCookiesArentBroken(e),this.setState({posts:i,hasMore:t})}catch(e){console.error(e)}return t}})&&this.loader&&this.loader.checkVisibility()}triggerShareOnLoad(){"share"===(0,k.y)("action")&&(window.history.replaceState({},document.title,(0,I.oRR)({action:null})),this.setState({share_on_load:!0,shareModalOpen:!0}))}makeSureIosCookiesArentBroken(e){if(!/iPad|iPhone|iPod/.test(navigator.userAgent)||this.props.user&&this.props.user.is_subscribed||!e||0===e.filter(e=>(0,C.isPaidAudience)(e.audience)&&!e.hidden).length)return;let t="__cookie_checked",i=(0,S.m)(window.location.search);i[t]||(i[t]="true",window.location.search="?".concat((0,I.BpC)(i)))}onChange(e){let{post:t}=e||{};if(t){var i;let e=(this.state.posts||[]).map(e=>e.id).indexOf(t&&t.id);-1!==e&&(null==(i=this.state.posts)?void 0:i[e])&&(this.state.posts[e]=t,this.setState({posts:this.state.posts}))}}render(){var e;let{user:t,pub:i,freeSignup:n,freeSignupEmail:l,preloadedPosts:o,hide_intro_popup:a,children:d,blurbs:u,launchWelcomePage:p,skipIntroPopupRender:m,activeLiveStream:g}=this.props,{posts:v,hasMore:Y,share_on_load:b}=null!=(e=this.state)?e:{},y=[];for(let e of v||o||[]){let t=y[y.length-1];e.hidden?Array.isArray(t)?t.push(e):y.push([e]):y.push(e)}return(0,r.FD)("div",{className:"classic-home-page",children:[!!(null==g?void 0:g.liveStream.id)&&(0,r.Y)(f.A,{activeLiveStream:g}),(0,r.Y)(c.Z,{isOpen:!!this.state.shareModalOpen,onClose:()=>this.setState({shareModalOpen:!1}),user:t,pub:i,medium:"web"}),m?null:(0,r.Y)(s.Ay,{freeSignup:n,freeSignupEmail:l,user:t,post:null,publication:i,hidden:a||b,blurbs:u,launchWelcomePage:p}),(0,r.FD)("div",{className:"post-list",children:[0===y.length&&!Y&&(0,r.Y)("div",{className:"container-border coming-soon",children:(0,r.Y)("div",{className:"container",children:(0,r.Y)("p",{children:"Coming soon"})})}),y.map((e,t)=>Array.isArray(e)?this.renderHiddenPosts(e,t):this.renderPost(e)),Y?(0,r.Y)("div",{className:"post-loader",children:(0,r.Y)("div",{className:"container",children:(0,r.Y)(h.A,{ref:this.assignLoader,noDedupe:!0,threshold:1280,onVisible:()=>this.loadMore(),children:(0,r.Y)("p",{children:"Loading more posts"})})})}):i.has_posts&&v&&v.length>0&&(0,r.Y)("div",{className:"container",children:(0,r.Y)("a",{className:"archive-link button invis",href:(0,I.Xt9)(i),children:"View archive"})})]}),d]})}renderPost(e){return(0,r.Y)("div",{className:"container-border post-list-post",children:(0,r.Y)("div",{className:"container",children:"thread"===e.type?(0,r.Y)(u.X,{post:e,user:this.props.user,pub:this.props.pub,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,invisible:!this.props.hide_intro_popup,showCta:!0,showReactions:!!this.likesEnabled}):"podcast"===e.type||"video"===e.type?(0,r.Y)(w,{post:e,pub:this.props.pub,user:this.props.user,freeSignup:this.props.freeSignup}):(0,r.Y)(d.L4,{post:e,user:this.props.user,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,pub:this.props.pub,invisible:!this.props.hide_intro_popup,truncateAt:1e4,truncateTo:8e3,onChange:e=>this.onChange(e),noTitleLink:!!this.props.disableInteractive,disableSubscribePrompt:!0})})})}renderHiddenPosts(e,t){let i,n;return 0===t?(i=e.slice(0,1),n=e.slice(1)):e.length<=3?(i=e,n=[]):(i=e.slice(0,2),n=e.slice(2)),(0,r.Y)(T,{user:this.props.user,pub:this.props.pub,posts:i,collapsedPosts:n,onChange:e=>this.onChange(e)})}constructor(e,t){super(e,t),(0,n._)(this,"loader",void 0),(0,n._)(this,"assignLoader",e=>{this.loader=e}),(0,n._)(this,"likesEnabled",(0,v.Ay)("like_posts_enabled")),this.state={posts:null,hasMore:!0,loading:!1,shareModalOpen:!1},this.props.notify_user&&"undefined"!=typeof window&&(0,p.Ay)(this.props.notify_user)}}(0,n._)(F,"contextType",m.W8);class T extends l.Component{toggle(){this.state.showing?this.setState({showing:!1}):(this.state.toggled||(0,g.u4)(g.qY.COLLAPSED_POSTS_SHOWN,{num_visible_posts:this.props.posts.length,num_collapsed_posts:this.props.collapsedPosts.length}),this.setState({showing:!0,toggled:!0}))}render(){var e;let{user:t,pub:i,posts:n,collapsedPosts:l,onChange:o}=this.props,{showing:a}=null!=(e=this.state)?e:{};return(0,r.Y)("div",{className:"container-border post-list-hidden-posts ".concat(a?"showing":""),children:(0,r.FD)("div",{className:"container",children:[n.map(e=>(0,r.Y)(d.I0,{user:t,pub:i,post:e,onChange:o})),l.length>0&&(0,r.Y)("div",{className:"collapse-toggle",onClick:()=>this.toggle(),children:a?"hide":"+".concat(l.length," more")}),l.map(e=>(0,r.Y)(d.I0,{className:"collapsed",user:t,pub:i,post:e,utm_source:D.VU.home,onChange:o}))]})})}}},16447:function(e,t,i){i.d(t,{M:()=>q});var n=i(69277),r=i(70408),l=i(10201),o=i(48697),a=i(98445),s=i(99851),d=i(79785),c=i(32485),u=i.n(c),p=i(17402),h=i(15734),m=i.n(h),g=i(81249),v=i(56778),Y=i(84605),f=i(99145),b=i(85478),y=i(86500),_=i(68349),w=i(16291),C=i(39318),I=i(49807),k=i(82776);function S(){let e=(0,d._)(["Search ",""]);return S=function(){return e},e}class D extends p.Component{componentDidMount(){this.loadTab(this.state.tab.id)}componentWillUnmount(){"search"===this.state.tab.id&&this.searchInput&&this.searchInput.blur()}componentDidUpdate(e){(e.hideTop!==this.props.hideTop||e.newPosts!==this.props.newPosts)&&this.setState(this.getTabs())}getTabs(){var e,t,i;let n=[],{iString:r}=this.props,l={id:"new",title:r("Latest"),posts:this.props.newPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.newPosts)};n.push(l),(!this.props.newPosts||this.props.newPosts.length>=this.getFetchLimit())&&(this.props.hideTop||n.push({id:"top",title:r("Top"),posts:this.props.topPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.topPosts)}),(null==(e=this.props.pub)?void 0:e.community_enabled)&&(null==(t=this.props.pub)?void 0:t.has_community_content)&&!this.props.hideCommunity&&n.push({id:"community",title:r("Discussions"),posts:this.props.communityPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.communityPosts)})),this.props.postId&&n.push({id:"related",title:r("Related"),posts:this.props.relatedPosts,fullyLoaded:!!this.props.relatedPosts}),n=this.props.sortTabs&&this.props.sortTabs(n)||n,"search"!==this.props.sort&&this.props.newPosts&&this.props.newPosts.length<this.getFetchLimit()||n.push({id:"search",title:r("Search"),posts:this.props.searchPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.searchPosts),query:this.props.search||"",hidden:!0});let o=null!=(i=n.find(e=>e.id===this.props.sort)||this.props.search&&n.find(e=>"search"===e.id)||n[0])?i:l;return{tabs:n,tab:o}}getFetchLimit(){return this.props.maxPosts||12}render(){var e,t,i;let{className:n,filterPostsPredicate:r,hideSearchTab:o,isPodcast:a,maxPosts:s,pinnedPosts:d,pub:c,renderLoading:p,renderPosts:h,renderTabs:m,renderSeeAll:Y,sectionId:y,showMonthDividers:_,user:w,iString:D,iTemplate:F}=this.props,{emptyMessage:P}=this.props,{tabs:x,tab:A}=null!=(e=this.state)?e:{};P=P||D("No posts");let E=_&&(null==A?void 0:A.id)==="new",N=x.find(e=>"search"===e.id),B=x.find(e=>"community"===e.id),M=Array.isArray(A.posts)?A.posts.filter(e=>!(c&&"top"===A.id&&e.top_exclusions.includes(c.id))).filter(e=>null==c||!c.section||null==d||!d.length||!d.find(t=>t.id===e.id)).filter(e=>!k.hidePaidPostsFor.includes(null==c?void 0:c.subdomain)||"everyone"===e.audience||(null==w?void 0:w.is_subscribed)).filter(r||(()=>!0)):[];(null==c?void 0:c.section)&&(null==d?void 0:d.length)&&["new","top"].includes(null!=(t=A.id)?t:"")&&(M=[...d,...M]);let R=0===M.length,L=!M&&!A.loadingError,O=s?M.slice(0,s):M,z=h?h({posts:O,linkToComments:A===B,onClickPost:e=>{let{event:t,post:i,index:n,source:r}=e;return this.onPostClicked(t,i.id,n,r)},postGroups:E?T(O,c.language):null}):[],U=y&&null!=(i=null==c?void 0:c.sections.find(e=>e.id===y))?i:null,q=a?(0,I.erJ)({pub:c,section:U,params:{sort:A.id,search:A.query}}):(0,C.qy7)(c,{section:U,params:{sort:A.id,search:A.query}}),H=Y?Y({url:q}):(0,l.FD)("a",{className:"portable-archive-all",href:q,native:!0,children:[D("See all")," ",(0,l.Y)(g.A,{height:12,width:12})]}),W=p?p():null;return(0,l.Y)(b.W8.Consumer,{children:e=>{let{getConfigFor:t}=e;return(0,l.Y)(f.bf.Consumer,{children:e=>{let{open:i}=e;return(0,l.FD)("div",{className:u()("portable-archive",n,{"empty-list":R}),children:[m&&m({activeTabId:A.id,isSearching:A===N,showSearch:!!(N&&!o),searchInputProps:{value:null==N?void 0:N.query,onKeyDown:this.onSearchKeyDown,onChange:e=>{"search"===this.state.tab.id&&this.loadTab("search",e)},onBlur:this.onSearchBlur},searchRef:e=>{this.searchInput=e},tabs:x.filter(e=>!e.hidden),onClick:e=>{this.loadTab(e)},onClickSearch:()=>{t("fallback_to_archive_search_on_section_pages")&&y?this.loadTab("search"):i()},onClickSearchClose:()=>{var e;this.loadTab(null==(e=x[0])?void 0:e.id)}}),(0,l.FD)("div",{className:"portable-archive-list",children:[A.loadingError?(0,l.Y)("p",{className:"portable-archive-empty",children:D("Failed to load posts")}):0!==M.length||A.loading?(0,l.FD)(l.FK,{children:[z,!s&&!L&&!A.loading&&!A.fullyLoaded&&(0,l.Y)(v.A,{threshold:640,onVisible:()=>this.loadTab(A.id,A.query)})]}):(0,l.Y)("p",{className:"portable-archive-empty",children:"search"!==A.id?P:A.query?D("No results"):F(S(),U?U.name:c?c.name:"")}),A.loading||L?W:s&&M.length>=s&&H]})]})}})}})}constructor(e,t){if(super(e,t),(0,s._)(this,"searchInput",void 0),(0,s._)(this,"onTabClick",e=>t=>{t.preventDefault(),this.loadTab(e)}),(0,s._)(this,"onSearchInput",e=>{"search"===this.state.tab.id&&this.loadTab("search",e.currentTarget.value)}),(0,s._)(this,"onSearchKeyDown",e=>{if("search"===this.state.tab.id&&"Escape"===e.key){var t,i,n;null==(i=e.target)||null==(t=i.blur)||t.call(i),this.loadTab(null==(n=this.state.tabs[0])?void 0:n.id)}}),(0,s._)(this,"onPostClicked",(e,t,i,n)=>{(0,y.u4)(y.qY.ARCHIVE_PAGE_POST_CLICKED,{post_id:t,tab:this.state.tab.id,rank_in_feed:i,source:null!=n?n:this.props.source})}),(0,s._)(this,"onSearchBlur",e=>{if("search"===this.state.tab.id&&!e.target.value){var t;if(!this.state.tab.fullyLoaded)return void setTimeout(()=>{var e;null==(e=this.searchInput)||e.focus()},0);this.loadTab(null==(t=this.state.tabs[0])?void 0:t.id,"")}}),(0,s._)(this,"loadTab",async(e,t)=>{let i=this.state.tabs.find(t=>t.id===e);if(!i)return void console.error("couldnot find tab with id [".concat(e,"]"));let r=!1;if("search"===i.id&&"string"==typeof t&&i.query!==t&&(r=!0,i.query=t,i.posts=null,i.fullyLoaded=!1,i.loading=!1,i.loadingError=null),i.id!==this.state.tab.id?(this.setState({tab:i},()=>{"search"===i.id&&this.searchInput&&(this.searchInput.focus(),this.searchInput.select())}),this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,C.oRR)({sort:i.id,search:i.query||null}))):r&&this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,C.oRR)({search:i.query||null})),i.loading)return;if(i.fullyLoaded){this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:i.posts});return}if("search"===i.id&&!i.query){i.posts=[],i.fullyLoaded=!0,this.setState({tabs:this.state.tabs});return}let l=(0,k.randomString)();if(i.loading=l,i.loadingError=null,this.setState({tabs:this.state.tabs}),"search"===i.id&&i.query&&(await new Promise(e=>setTimeout(e,300)),i.loading!==l))return;!this.state.tabs.find(e=>e.posts||e.fullyLoaded||e.loading||e.loadingError)&&this.props.delayFirstLoad&&await new Promise(e=>setTimeout(e,this.props.delayFirstLoad));let o=this.props.pub?"/api/v1/archive":this.props.profile?"/api/v1/profile-archive":"";try{let e,t,r=this.props.maxPosts?2*this.props.maxPosts:this.getFetchLimit();if("related"===i.id)e=(await m().get("/api/v1/posts/".concat(this.props.postId,"/related")).query({limit:r,offset:(i.posts||[]).length})).body;else{let l=(0,n._)({type:this.props.isPodcast?"podcast":void 0,rss_episodes_only:!!this.props.isPodcast&&!this.props.sectionId||void 0},this.props.authorId&&{author_id:this.props.authorId},this.props.postTagId&&{post_tag_id:this.props.postTagId},this.props.sectionId&&{section_id:this.props.sectionId},this.props.profile&&{profile_user_id:this.props.profile.id});"new"===i.id&&this.props.includePins&&!i.posts&&(t=(await m().get(o).query((0,n._)({sort:"pinned",offset:0,limit:1},l))).body),e=(await m().get(o).query((0,n._)({sort:"search"===i.id?"new":i.id,search:"search"===i.id?i.query:"",offset:(i.posts||[]).length,limit:r},l))).body,e=[...t||[],...e.filter(e=>!(null==t?void 0:t.find(t=>t.id===e.id)))]}if(this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:e}),i.loading!==l)return;i.posts=i.posts?i.posts.concat(e):e,i.fullyLoaded=e.length<r||!!(this.props.maxPosts&&i.posts&&i.posts.length>=this.props.maxPosts)}catch(e){console.error("Failed to load tab:",e),i.loadingError=e}i.loading=!1,this.setState({tabs:this.state.tabs.map(e=>e.id===i.id?i:e),tab:i})}),(0,s._)(this,"onChange",e=>{let{post:t}=e;t&&((0,_.qr)(this,e=>{let i=!1;for(let n of e.tabs.map(e=>e.posts).filter(e=>Array.isArray(e))){let e=null==n?void 0:n.findIndex(e=>e.id===t.id);-1!==e&&n&&(n[null!=e?e:""]=t,i=!0)}i&&this.setState({tabs:e.tabs})}),this.props.onChange&&this.props.onChange(t))}),!(this.props.pub||this.props.profile))throw Error("Archive must be loaded for a publication or a profile");this.loadTab=this.loadTab.bind(this),this.state=this.getTabs()}}let F=(0,Y.wr)(D),T=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=[];return e.forEach((e,r)=>{let l=(0,w.A)(e.post_date).locale(i).format("MMMM YYYY");if(l!==t)0===r?n.push({label:"",posts:[e]}):n.push({label:l,posts:[e]}),t=l;else{let t=n[n.length-1];t&&t.posts.push(e)}}),n};var P=i(53989),x=i(10939),A=i(68410),E=i(28528),N=i(24634),B=i(72692),M=i(35369),R=i(76977),L=i(40837),O=i(21356),z=i(63136),U=i(4016);let q=e=>{var t;let{authorId:i,children:s,communityPosts:d,delayFirstLoad:c,filterPostsPredicate:u,hideCommunity:p,hideTop:h,includePins:m,isBelowTheFold:g,isPodcast:v,maxPosts:f,newPosts:y,pinnedPosts:_,postTagId:w,pub:C,renderLoading:I,renderTabs:S,search:D,searchPosts:T,postId:q,sectionId:H,showMonthDividers:W,sort:K,sortTabs:G,source:V,topPosts:j,user:X,utm:J,variant:Z="list",onPostsLoaded:Q}=e,{iString:$}=(0,Y.GO)(),{isMobile:ee}=(0,A.sM)(),{getSettingFor:et}=(0,P.Pu)(),ei=(0,b.mJ)(),en=(0,k.ensureInList)(et("post_preview_crop_gravity"),["center","auto"]),er=(0,U.lu)({pub:C}),el=null!=(t=ei.getConfigFor("related_posts_enabled"))&&t;return(0,l.Y)(E.XL,{authorPagesEnabled:!!ei.getConfigFor("enable_author_pages"),cropGravity:en,highlightByline:!!ei.getConfigFor("post_preview_highlight_byline"),pub:C,user:X,utm:J,children:(0,l.Y)(F,{authorId:i,communityPosts:d,delayFirstLoad:c,filterPostsPredicate:u,hideCommunity:p,hideTop:h,includePins:m,isBelowTheFold:g,isPodcast:v,maxPosts:f,newPosts:y,pinnedPosts:_,postId:el?q:void 0,postTagId:w,pub:C,renderLoading:null!=I?I:()=>(0,l.Y)(N.t,{postCount:null!=f?f:7,variant:Z}),renderPosts:e=>{let{posts:t,linkToComments:i,onClickPost:n,postGroups:r}=e;return r?r.map(e=>{let{label:t,posts:r}=e;return(0,l.FD)(l.FK,{children:[t&&(0,l.FD)(l.FK,{children:[(0,l.Y)(x.r,{paddingBottom:8,paddingTop:8}),(0,l.Y)(z.EY.Meta,{as:"h3",className:"monthHeader-nt8KgE",color:"accent",paddingBottom:24,children:t})]}),s({posts:r,linkToComments:i,onClickPost:n})]})}):s({posts:t,linkToComments:i,onClickPost:n})},renderSeeAll:e=>{let{url:t}=e;return"grid-groups"===Z||er?null:(0,l.Y)(B.k,{url:t})},renderTabs:null!=S?S:e=>{let{activeTabId:t,isSearching:i,tabs:s,searchInputProps:d,searchRef:c,showSearch:u,onClick:p,onClickSearch:h,onClickSearchClose:m}=e;if("grid-groups"===Z||er)return null;if(i)return(0,l.FD)(R.Ye,{alignItems:"center",gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!ee,children:[(0,l.Y)(L.D,(0,r._)((0,n._)({},d),{ref:c,autoFocus:!0,flex:"grow",placeholder:$("Search..."),showClear:!1})),(0,l.Y)(M.K0,{priority:"tertiary",onClick:m,children:(0,l.Y)(o.A,{size:20})})]});if(u||s.length>1){var g,v;return(0,l.FD)(R.Ye,{alignItems:"center","aria-label":$("Archive sort tabs"),gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!ee,role:"navigation",children:[(0,l.Y)(O.T,{tabs:s.map(e=>({value:e.id,label:e.title})),value:null!=(v=null!=t?t:null==(g=s[0])?void 0:g.id)?v:"",onChange:e=>p(e||void 0)}),u&&(0,l.Y)(M.K0,{priority:"tertiary",onClick:h,children:(0,l.Y)(a.A,{size:20})})]})}return null},search:D,searchPosts:T,sectionId:H,showMonthDividers:W,sort:K,sortTabs:G,source:V,stateInUrl:!0,topPosts:j,user:X,onPostsLoaded:Q})})}},10939:function(e,t,i){i.d(t,{r:()=>o});var n=i(10201),r=i(80098),l=i(76977);let o=e=>{let{numColumns:t=4,paddingBottom:i=24,paddingTop:o=24}=e;return(0,n.Y)(r.P,{variant:4===t?"full-width":3===t?"three-column-width":"two-column-width",children:(0,n.Y)(l.I1,{paddingBottom:i,paddingTop:o,paddingX:8,children:(0,n.Y)(l.pT,{borderBottom:"detail-themed"})})})}},70081:function(e,t,i){i.d(t,{Z:()=>nC});var n=i(69277),r=i(70408),l=i(32641),o=i(10201),a=i(83673),s=i.n(a),d=i(90179),c=i.n(d),u=i(17402),p=i(36233),h=i(68410),m=i(32485),g=i.n(m),v=i(79785),Y=i(48697),f=i(47963),b=i(23725),y=i(13950),_=i(81209),w=i(85048),C=i(84605),I=i(46271),k=i(86500),S=i(94729),D=i(68349);let F=(0,u.createContext)({activeLiveStream:void 0,latestPostByContributorId:void 0,latestPodcastPosts:void 0,latestPostFromSections:void 0,contributors:void 0,freeSignup:void 0,freeSignupEmail:void 0,homepageLinks:void 0,numRecommendations:void 0,recommendations:void 0,topPosts:void 0});var T=i(24078),P=i(35369),x=i(76977),A=i(16993),E=i(81203),N=i(63136),B=i(11510),M=i(41086),R=i(49807),L=i(57324);let O="giftBackground-I9xH3b";var z=i(27569);function U(){let e=(0,v._)(["All of ","'s gifts have been claimed."]);return U=function(){return e},e}function q(){let e=(0,v._)(["Get your free guest pass to ",""]);return q=function(){return e},e}function H(){let e=(0,v._)([""," gifted you "," free days of ","."]);return H=function(){return e},e}function W(){let e=(0,v._)(["Gift from ",""]);return W=function(){return e},e}function K(){let e=(0,v._)(["Gift from someone"]);return K=function(){return e},e}function G(){let e=(0,v._)(["","-Day Guest Pass ("," value)"]);return G=function(){return e},e}function V(){let e=(0,v._)(["","-Day Guest Pass"]);return V=function(){return e},e}function j(){let e=(0,v._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return j=function(){return e},e}function X(){let e=(0,v._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return X=function(){return e},e}function J(){let e=(0,v._)(["Accept ","'s gift"]);return J=function(){return e},e}function Z(){let e=(0,v._)(["Accept gift"]);return Z=function(){return e},e}function Q(){let e=(0,v._)(["Accept ","'s gift"]);return Q=function(){return e},e}let $=e=>{var t,i,r;let{isOpen:l,onClose:a,pub:s,giftCard:d,abTestingId:c}=e,{iString:p,iTemplate:h}=(0,C.GO)(),m=(0,B.Iu)(),v=(0,I.Jd)(),{freeSignup:$,freeSignupEmail:ee}=(0,u.useContext)(F),[et,ei]=(0,u.useState)((null==v?void 0:v.email)||ee||""),[en,er]=(0,u.useState)(!1),[el,eo]=(0,u.useState)(!1),[ea,es]=(0,u.useState)(null),[ed,ec]=(0,u.useState)(null),eu=(null==v?void 0:v.is_free_subscribed)||$,ep=s.author_photo_url||s.logo_url;if(null==d?void 0:d.expired)return(0,o.Y)(A.aF,{isOpen:l,onClose:a,width:500,children:(0,o.FD)(x.I1,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!eu,paddingBottom:24*!eu,children:[(0,o.Y)(P.K0,{rounded:!0,onClick:a,"aria-label":p("Close"),priority:"tertiary",tabIndex:-1,style:{position:"absolute",top:"12px",right:"12px"},children:(0,o.Y)(Y.A,{size:20})}),(0,o.FD)(x.I1,{alignItems:"center",gap:16,children:[ep&&(0,o.Y)(T.eu,{size:80,photoUrl:ep}),(0,o.Y)(x.I1,{alignItems:"center",gap:2,children:(0,o.Y)(N.EY.B2,{textAlign:"center",translated:!0,children:"Sorry, this gift has already expired."})})]}),(0,o.FD)(x.I1,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,o.Y)(_.A,{pub:s,user:v,freeSignup:$,freeSignupEmail:ee,isStatic:!1,source:"viral-gift-fallback"}),!eu&&(0,o.Y)(w.qd,{publication:s})]})]})});if(null==v?void 0:v.is_subscribed){let e=(0,R.eV6)(s,{params:{utm_source:L.VU.viralGiftModal,gift:!0}});return(0,o.Y)(A.aF,{isOpen:l,onClose:a,width:500,children:(0,o.Y)(x.I1,{alignItems:"center",padding:24,gap:24,children:(0,o.FD)(x.I1,{alignItems:"center",gap:16,children:[ep&&(0,o.Y)(T.eu,{size:80,photoUrl:ep}),(0,o.FD)(x.I1,{alignItems:"center",gap:2,children:[(0,o.FD)(N.EY.H4,{textAlign:"center",translated:!0,children:["Give a gift to ",I18N.p(s.name)]}),(0,o.FD)(N.EY.B3,{textAlign:"center",translated:!0,children:["You currently have an active paid subscription to ",I18N.p(s.name),", so you're not able to accept a gift. Would you like to give a gift instead?"]})]}),(0,o.Y)(P.$n,{href:e,localNavigation:!1,children:p("Give a gift")})]})})})}if(!d||!(null==d?void 0:d.days)){if(null==d?void 0:d.gifter){let e=d.gifter.name||d.gifter.handle&&"@".concat(d.gifter.handle);return(0,o.Y)(A.aF,{isOpen:l,onClose:a,width:500,children:(0,o.FD)(x.I1,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!eu,paddingBottom:24*!eu,children:[(0,o.FD)(x.I1,{alignItems:"center",gap:16,children:[ep&&(0,o.Y)(T.eu,{size:80,photoUrl:ep}),(0,o.FD)(x.I1,{alignItems:"center",gap:2,children:[(0,o.FD)(N.EY.H4,{textAlign:"center",translated:!0,children:["Subscribe to ",I18N.p(s.name)]}),(0,o.Y)(N.EY.B3,{textAlign:"center",children:e?h(U(),e):p("All of your friend's gifts have been claimed.")})]})]}),(0,o.FD)(x.I1,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,o.Y)(_.A,{pub:s,user:v,freeSignup:$,freeSignupEmail:ee,isStatic:!1,source:"viral-gift-fallback"}),!eu&&(0,o.Y)(w.qd,{publication:s})]})]})})}return null}let eh=d.gifter&&d.gifter.id!==s.author_id,em=(null==(t=d.gifter)?void 0:t.name)||(null==(i=d.gifter)?void 0:i.handle)&&"@".concat(null==(r=d.gifter)?void 0:r.handle),eg=async()=>{if(!et)return void es("Please enter your email");eo(!0);try{var e,t;(0,k.u4)(k.qY.ACCEPT_GIFT_MODAL_CTA_CLICKED,{gifter_user_id:null==(e=d.gifter)?void 0:e.id,has_sender_token:!!(0,M.y)(window._preloads.original_url,"senderToken")});let i=await (0,S.x6)("/api/v1/viral_gifts/create_for_email",{method:"POST",json:(0,n._)({email:et},eh&&(0,M.y)(window._preloads.original_url,"senderToken")&&{senderToken:(0,M.y)(window._preloads.original_url,"senderToken")})}),r=null==i||null==(t=i.gift)?void 0:t.id;if(r)ec(r),er(!0),es(null),m&&setTimeout(()=>{window.location.href=(0,R.xdH)({giftId:r}),a()},1e3);else throw Error()}catch(e){(0,D.uX)(e)?es((0,D.uX)(e)):es("Something went wrong. Please try again.")}eo(!1)},ev=en?p("Finish activating your guest pass in the Substack app"):eh?h(q(),s.name):h(H(),s.author_name,d.days,s.name),eY=(0,o.FD)(o.FK,{children:[eh?(0,o.Y)(T.eu,{user:d.gifter,size:80}):(0,o.Y)(E.Nq,{logoUrl:s.logo_url,size:64,radius:"sm"}),(0,o.Y)(N.EY.H3,{textAlign:"center",fontWeight:"heavy",color:"white",paddingTop:12,children:eh?em?h(W(),em):h(K()):s.name}),(0,o.Y)(N.EY.B3,{className:"guestPassText-_ibww7",children:d.value?h(G(),d.days,d.value):h(V(),d.days)})]});return(0,o.Y)(A.aF,{isOpen:l,onClose:a,width:500,children:(0,o.FD)(x.I1,{alignItems:"stretch",paddingBottom:48*!m,children:[!m&&(0,o.Y)(x.I1,{className:g()(O,"giftBackgroundHeader-tb4ks8"),children:(0,o.FD)(x.I1,{justifyContent:"center",alignItems:"center",gap:4,children:[eY,(0,o.Y)(P.K0,{rounded:!0,onClick:a,"aria-label":p("Close"),priority:"tertiary",className:"headerCloseButton-m0sKZi",children:(0,o.Y)(Y.A,{size:20})})]})}),(0,o.Y)(x.I1,{alignItems:"stretch",maxWidth:m?void 0:400,style:{margin:"auto"},children:(0,o.FD)(x.I1,{paddingTop:24,paddingX:{mobile:24,desktop:0},paddingBottom:{mobile:24,desktop:0},gap:8,children:[m&&(0,o.Y)(x.I1,{className:O,justifyContent:"center",alignItems:"center",gap:4,children:eY}),(0,o.Y)(N.EY.H4,{weight:"semibold",fontStyle:"normal",textAlign:"center",children:ev}),(0,o.Y)(N.EY.B3,{color:"secondary",align:"center",paddingBottom:16,children:m?eu?p("Download the Substack app to claim your guest pass"):eh?h(j(),d.days):p("Subscribe and download the Substack app to claim your guest pass"):en?p("Available for iOS and Android"):eh?h(X(),d.days):p("Subscribe free to claim your guest pass")}),eu||en?!m&&en&&ed?(0,o.Y)(x.I1,{alignItems:"center",gap:16,children:(0,o.Y)(x.pT,{className:"qrCode-MxgyfH",padding:20,children:(0,o.Y)(f.hj,{size:142,utm_campaign:"accept_gift",utm_source:"accept_gift_modal",abTestingId:c,openUrl:(0,R.xdH)({giftId:ed})})})}):en?(0,o.FD)(x.Ye,{gap:8,alignItems:"center",justifyContent:"center",children:[(0,o.Y)(b.A,{isStatic:!0,height:24,fill:"#187F22",stroke:"#187F22"}),(0,o.Y)(N.EY.B3,{color:"secondary",align:"center",translated:!0,children:"Subscribed"})]}):(0,o.Y)(y.DH,{children:(0,o.Y)(P.$n,{priority:"primary",onClick:eg,disabled:el,children:eh?em?h(J(),em):h(Z()):h(Q(),s.author_name)})}):(0,o.FD)(x.I1,{gap:24,className:"emailInputWrapper-SzmWNd",children:[(0,o.FD)(x.Ye,{justifyContent:"center",alignItems:"center",gap:0,style:{borderRadius:8},children:[(0,o.Y)("input",{className:g()("pencraft",z.A.emailInput,"emailInput-JqukPr"),style:{border:"1px solid var(--color-utility-detail)"},type:"text",value:et,onInput:e=>ei(e.currentTarget.value),placeholder:p("Your email"),tabIndex:-1}),(0,o.Y)(P.$n,{disabled:el,className:"acceptButton-TrYdu7",priority:"primary",onClick:eg,children:p("Accept gift")})]}),(0,o.Y)(w.qd,{className:"tos-RHY2Hj",publication:s})]}),ea&&(0,o.Y)(N.EY.B4,{align:"center",style:{color:"red"},children:ea})]})})]})})};var ee=i(64843),et=i(56195),ei=i(65892),en=i(75107),er=i(15734),el=i.n(er),eo=i(63446),ea=i(6641),es=i(15894),ed=i(25006),ec=i(85478),eu=i(17306),ep=i(12501),eh=i(67211),em=i(60141),eg=i(39318);let ev=e=>{var t;let{isOpen:i,onClose:n,onSave:r,currentValues:l}=e,[a,s]=(0,u.useState)(l.hedDesktop),[d,c]=(0,u.useState)(l.dekDesktop),[p,h]=(0,u.useState)(l.collapsedHedDesktop),[m,g]=(0,u.useState)(l.collapsedHedMobile),[v,Y]=(0,u.useState)(l.hedMobile),[f,b]=(0,u.useState)(l.dekMobile),[y,_]=(0,u.useState)(l.isBlueTheme),[w,C]=(0,u.useState)(l.isThanksgivingSale),[I,k]=(0,u.useState)(l.ctaCopy),[S,D]=(0,u.useState)(l.ctaLink),[F,T]=(0,u.useState)(null==(t=l.enabledForNonPaid)||t),[A,E]=(0,u.useState)(!1),N=(0,u.useRef)(null),B=async e=>{e.preventDefault(),E(!0);try{await el().put("/api/v1/islands/client/config?key=toaster_data").send({value:{hedDesktop:a,hedMobile:v,dekDesktop:d,dekMobile:f,collapsedHedDesktop:p,collapsedHedMobile:m,ctaCopy:I,ctaLink:S,isBlueTheme:y,isThanksgivingSale:w,enabledForNonPaid:F}}),r(),n()}catch(e){console.error("Failed to save toaster config:",e),alert("Failed to save changes. Please try again.")}finally{E(!1)}};return(0,u.useEffect)(()=>{var e;s(l.hedDesktop),c(l.dekDesktop),h(l.collapsedHedDesktop),g(l.collapsedHedMobile),Y(l.hedMobile),b(l.dekMobile),_(l.isBlueTheme),C(l.isThanksgivingSale),k(l.ctaCopy),D(l.ctaLink),T(null==(e=l.enabledForNonPaid)||e)},[l]),(0,o.Y)(ea.S,{initialFocus:N,isOpen:i,width:500,onClose:n,children:(0,o.FD)(x.I1,{gap:24,padding:32,children:[(0,o.Y)(x.Ye,{alignItems:"center",justifyContent:"space-between",children:(0,o.Y)(es.T,{preset:"h4-serif",children:"Edit Footer Banner"})}),(0,o.Y)("form",{onSubmit:B,children:(0,o.FD)(x.I1,{gap:20,children:[(0,o.Y)(em.A,{inputRef:N,label:"Heading",placeHolder:"Support independent journalism",value:a,onChange:s}),(0,o.Y)(em.A,{label:"Heading (collapsed)",placeHolder:"Support independent journalism",value:p,onChange:h}),(0,o.Y)(em.A,{label:"Description",placeHolder:"Join *The Free Press* today for unlimited access",value:d,onChange:c}),(0,o.Y)(em.A,{label:"Heading (mobile)",placeHolder:"Support independent journalism",value:v,onChange:Y}),(0,o.Y)(em.A,{label:"Heading (collapsed mobile)",placeHolder:"Support independent journalism",value:m,onChange:g}),(0,o.Y)(em.A,{label:"Description (mobile)",placeHolder:"Join *The Free Press* today for unlimited access",value:f,onChange:b}),(0,o.Y)(em.A,{label:"Button Text",placeHolder:"Subscribe now",value:I,onChange:k}),(0,o.Y)(em.A,{label:"Button Link",placeHolder:"/subscribe",value:S,onChange:D}),(0,o.Y)(eh.Y,{label:"Blue Theme",value:y,onChange:_}),(0,o.Y)(eh.Y,{label:"Thanksgiving Sale",value:w,onChange:C}),(0,o.Y)(eh.Y,{label:"Enable for non-paid users",value:F,onChange:T}),(0,o.FD)(x.Ye,{gap:12,justifyContent:"end",children:[(0,o.Y)(P.$n,{disabled:A,priority:"secondary",onClick:n,children:"Cancel"}),(0,o.Y)(P.$n,{disabled:A,priority:"primary",type:"submit",children:A?"Saving...":"Save Changes"})]})]})})]})})},eY=()=>{let[e,t]=(0,u.useState)(!0),[i,r]=(0,u.useState)(!1),[l,a]=(0,u.useState)(!1),{hedDesktop:s,dekDesktop:d,isBlueTheme:c,isThanksgivingSale:p,collapsedHedMobile:m,collapsedHedDesktop:g,hedMobile:v,dekMobile:Y,ctaCopy:f,ctaLink:b,enabledForNonPaid:y,refetch:_,isLoading:w}=(()=>{let[e,t]=(0,u.useState)({hedDesktop:"Support independent journalism",hedMobile:"Support independent journalism",collapsedHedMobile:"Support independent journalism",collapsedHedDesktop:"Support independent journalism",dekDesktop:"Join *The Free Press* today for unlimited access",dekMobile:"Join *The Free Press* today for unlimited access",ctaCopy:"Subscribe now",ctaLink:"/subscribe",isBlueTheme:!1,isThanksgivingSale:!1,enabledForNonPaid:!0}),[i,n]=(0,u.useState)(!0),{result:r,refetch:l}=(0,ep.st)({pathname:"/api/v1/islands/client/config",query:{key:"toaster_data"},auto:!0});return(0,u.useEffect)(()=>{var e;(null==r||null==(e=r.config)?void 0:e.value)&&(t(r.config.value),n(!1))},[r]),{hedDesktop:e.hedDesktop,hedMobile:e.hedMobile,collapsedHedMobile:e.collapsedHedMobile,collapsedHedDesktop:e.collapsedHedDesktop,dekDesktop:e.dekDesktop,dekMobile:e.dekMobile,ctaCopy:e.ctaCopy,ctaLink:e.ctaLink,isBlueTheme:e.isBlueTheme,isThanksgivingSale:e.isThanksgivingSale,enabledForNonPaid:e.enabledForNonPaid,refetch:l,isLoading:i}})(),C=(0,I.Jd)(),k=(0,ed.df)(),{isMobile:S}=(0,h.sM)(),{getConfigFor:D}=(0,ec.mJ)(),F=D("thefp_enable_dynamic_toaster"),T=S?v:s,A=S?m:g,{markdownProps:E}=(0,eu.$)(S?Y:d),N=(null==C?void 0:C.is_admin)&&!l,B=!(null==C?void 0:C.is_subscribed),M=null==C?void 0:C.is_admin;if(!(y&&B&&(!w||M))&&!(null==C?void 0:C.is_admin)||!F)return null;let R=()=>(0,o.Y)(P.K0,{priority:"tertiary",size:"sm",style:{position:"fixed",left:16,bottom:16,zIndex:10,backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border-light)"},title:"Preview toaster",onClick:()=>a(!l),children:(0,o.Y)(et.A,{size:20})});if(N)return(0,o.Y)(R,{});let O=!e,z="h5-sans";e||(z="lg-preview-byline");let U=c?"white":p?"var(--color-fg-primary-themed)":"var(--color-accent-themed)",q=k&&"undefined"!=typeof window?(0,eg.eV6)(k,{addBase:!0,next:(0,eg.yRP)(window.location.href,{follow:!0}),utm_source:L.VU.fixedFooterPaywall,utm_medium:L.Jn.web}):"/subscribe";return(0,o.FD)(o.FK,{children:[(null==C?void 0:C.is_admin)&&(0,o.Y)(R,{}),(0,o.FD)("div",{className:"".concat("container-liQ2Od"," ").concat(e?"open-NsIljP":""),style:{backgroundColor:c?"var(--color-blue)":p?"#F2DF01":"white"},children:[(0,o.FD)(x.pT,{alignItems:"center",direction:S?"column":"row",gap:S?8:24,justifyContent:"center",style:{width:S?"100%":"auto"},children:[(0,o.FD)(x.Ye,{alignItems:"center",gap:0,children:[p&&e&&(0,o.Y)("img",{alt:"Thanksgiving Sale",className:"thanksgivingSaleImage-LX4BHr",src:(0,eg.dJ9)("/img/thefp/thanksgiving_sale/turkey.png",500)}),(0,o.FD)(x.I1,{gap:8*!!S,children:[(0,o.Y)(es.T,{align:S&&!p?"center":"left",color:c?"white":"primary",preset:z,children:e?T:A}),e&&(0,o.Y)(es.T,(0,n._)({align:S&&!p?"center":"left",color:c?"white":"primary",preset:"d3-serif"},E))]})]}),(0,o.Y)(eo.v,{className:"subscribeButton-KC1zy_",href:"/subscribe"===b?q:b,native:!0,size:"md",style:{width:S?"100%":"auto",textDecoration:O?"underline":"none",color:O?U:void 0,padding:O?"0":void 0,border:p&&e?"1px solid var(--color-fg-primary-themed)":void 0,minWidth:p&&e?"258px":void 0},variant:O?"tertiary":"primary-accent",children:f})]}),(null==C?void 0:C.is_admin)&&(0,o.Y)(P.K0,{priority:"tertiary",size:"sm",style:{position:"absolute",right:0,bottom:0},title:"Edit footer banner",onClick:()=>r(!0),children:(0,o.Y)(ei.A,{size:20,style:{color:c?"white":"var(--color-primary)"}})}),(0,o.Y)(P.Nm,{className:"chevronButton-xCmt1F",onClick:()=>t(!e),children:(0,o.Y)(en.A,{style:{transform:e?"rotate(0deg)":"rotate(180deg)",color:c?"white":"var(--color-primary)"}})})]}),(null==C?void 0:C.is_admin)&&(0,o.Y)(ev,{currentValues:{hedDesktop:s,dekDesktop:d,hedMobile:v,dekMobile:Y,collapsedHedMobile:m,collapsedHedDesktop:g,ctaCopy:f,ctaLink:b,isBlueTheme:c,isThanksgivingSale:p,enabledForNonPaid:y},isOpen:i,onClose:()=>r(!1),onSave:()=>{_()}})]})};var ef=i(60355),eb=i(92636),ey=i(39891);let e_=e=>{let{posts:t}=e,{isMobile:i,isTablet:l}=(0,h.sM)();return(0,o.FD)("div",{className:g()("container-d4zBPi",{"containerTablet-tpTBc6":l,"containerMobile-VpmHH6":i}),children:[(0,o.FD)(x.Ye,{paddingLeft:20,position:"relative",children:[(0,o.Y)("div",{className:"latestArrowEndContainer-gx613b",children:(0,o.Y)("img",{className:"latestArrowEnd-kWO5qL",src:(0,ey.dJ)("".concat((0,eb.Ew)(),"/img/thefp/more-arrow-end-3.svg"),430)})}),(0,o.Y)("img",{className:"latestArrow-Z7Zn2b",src:(0,ey.dJ)("".concat((0,eb.Ew)(),"/img/thefp/more-arrow.svg"),430)})]}),t.map((e,t)=>(0,o.Y)(x.Ye,(0,r._)((0,n._)({},i?{borderTop:0===t?void 0:"detail-themed"}:{borderLeft:"detail-themed"}),{paddingX:20,paddingY:i?16:24,children:(0,o.Y)(ef.R,{hideUfi:!0,post:e,variant:"mini"})})))]})};var ew=i(70103),eC=i(78956),eI=i(84565),ek=i(80098),eS=i(28528),eD=i(21398);let eF="fullWidthRow-lUGCvS",eT=e=>{let{posts:t,showIntroModule:n=!1,isPortraitLayout:r=!1}=e,{isMobile:l,isTablet:a}=(0,h.sM)(),[s,d]=(0,u.useState)(!1),{pub:c,user:p}=(0,eS.np)(),m=t.slice(6,6+(a?3:5)),g="top-layout-container";return l?(0,o.Y)(eA,{isPortraitLayout:r,posts:t,showIntroModule:n}):(0,o.FD)(x.I1,{className:"container-8llGPE",gap:64,paddingBottom:a?40:64,children:[(null==p?void 0:p.is_admin)&&(0,o.Y)("div",{className:"editButtonContainer-PKbNaQ",children:(0,o.Y)(P.K0,{priority:"primary-mono",size:"sm",onClick:()=>{d(!0)},children:(0,o.Y)(ei.A,{size:16})})}),(0,o.Y)("div",{id:g,children:(0,o.Y)(ex,{isPortraitLayout:r,posts:t,showIntroModule:n})}),(0,o.Y)(e_,{posts:m}),s&&(0,o.Y)(eD.Ic,{module:"@/frontend/components/thefp/EditPinsModal",posts:t.slice(0,6),pub:c,renderPreview:e=>{let{posts:t,showIntroModule:i,isPortraitLayout:n}=e;return(0,o.Y)(ex,{isPortraitLayout:n,posts:t,showIntroModule:i})},resolve:e=>e.EditPinsForHomepageHeroModal,topLayoutContainerId:g,whileLoading:(0,o.Y)("div",{}),onClose:()=>{d(!1)},onRequest:()=>i.e("937").then(i.bind(i,93936))})]})},eP=()=>(0,o.FD)("a",{className:"introModule-WDoR9y",href:"/intro-to-tfp",native:!0,children:[(0,o.Y)("img",{alt:"The Free Press",className:"introModuleImage-b5tjpb",src:(0,eg.dJ9)("".concat((0,eb.Ew)(),"/img/thefp/fp-flag-red.png"))}),(0,o.Y)(es.T,{align:"center",className:"introModuleText-tL6vMV",preset:"h7-serif",children:"An\xa0Introduction\xa0to The\xa0Free\xa0Press"})]}),ex=e=>{let{isPortraitLayout:t=!1,posts:i,showIntroModule:l=!1}=e,{isTablet:a,isDesktop:s}=(0,h.sM)(),d=(0,eI.NQ)(),c={align:"center"},u=d.getConfigFor("thefp_homepage_portrait_layout");return t&&s&&u?(0,o.FD)(ek.P,{variant:"three-column-one-column-one-column",children:[(0,o.Y)(eC.A,{children:[i[0]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{align:"left",post:i[0],variant:"portrait"}))]}),(0,o.Y)(eC.A,{paddingTop:40,children:[i[1]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,hideImage:!0,post:i[1],variant:"square"})),i[2]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,hideImage:!0,post:i[2],variant:"square"})),l?(0,o.Y)(eP,{}):i[3]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideImage:!0,post:i[3],variant:"square"}))]}),(0,o.Y)(eC.A,{paddingTop:40,children:[i[4]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,post:i[4],variant:"square"})),i[5]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{post:i[5],variant:"square"}))]})]}):t&&a&&u?(0,o.FD)("div",{className:"tabletPortraitLayout-eMAKhD",children:[i[0]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{align:"left",post:i[0],variant:"portrait"})),(0,o.Y)("hr",{}),(0,o.FD)(x.Ye,{alignItems:"center",className:eF,justifyContent:"space-between",children:[i[1]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,hideImage:!0,post:i[1],variant:"square"})),i[2]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,hideImage:!0,post:i[2],variant:"square"})),i[3]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,hideImage:!0,post:i[3],variant:"square"}))]}),(0,o.Y)("hr",{}),(0,o.FD)(x.Ye,{className:eF,justifyContent:"space-between",children:[(0,o.Y)("div",{className:"wideContent-tdvs4B",children:i[4]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{post:i[4],titlePreset:"h4-sans-condensed",variant:"content-block-listing"}))}),(0,o.Y)("div",{className:"narrowContent-CJLDbf",children:i[5]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,post:i[5],variant:"square"}))})]})]}):(0,o.FD)(ek.P,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[i[0]&&(0,o.FD)(eC.A,{children:[(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{align:"center",post:i[0],showImageLast:!!u,variant:"large"})),a&&(0,o.FD)(x.Ye,{gap:40,children:[i[1]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideImage:!0,post:i[1],variant:"square"})),i[3]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideImage:!0,post:i[3],variant:"square"}))]})]}),a&&(0,o.FD)(eC.A,{children:[l?(0,o.Y)(eP,{}):i[2]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,post:i[2],variant:"square"})),i[4]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,post:i[4],variant:"square"})),i[5]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,post:i[5],variant:"square"}))]}),s&&(0,o.FD)(eC.A,{paddingTop:40,children:[i[1]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,hideImage:!0,post:i[1],variant:"square"})),l?(0,o.Y)(eP,{}):i[2]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideDescription:!0,post:i[2],variant:"square"})),i[3]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{hideImage:!0,post:i[3],variant:"square"}))]}),s&&(0,o.FD)(eC.A,{paddingTop:40,children:[i[4]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{post:i[4],variant:"square"})),i[5]&&(0,o.Y)(ef.R,(0,r._)((0,n._)({},c),{post:i[5],variant:"square"}))]})]})},eA=e=>{let{posts:t,showIntroModule:i=!1,isPortraitLayout:n=!1}=e,r=t.slice(6,11);return(0,o.FD)(x.I1,{gap:32,paddingBottom:64,children:[n?t[0]&&(0,o.Y)(ef.R,{align:"left",imageAspectRatio:"portrait",post:t[0],variant:"large"}):t[0]&&(0,o.Y)(ef.R,{align:"left",post:t[0],variant:"large"}),i?(0,o.Y)(eP,{}):t[2]&&(0,o.Y)(ef.R,{post:t[2],variant:"square"}),(0,o.FD)(ew.Z,{children:[t[1]&&(0,o.Y)(ef.R,{hideDescription:!0,post:t[1],variant:"square"}),t[3]&&(0,o.Y)(ef.R,{hideDescription:!0,post:t[3],variant:"square"}),t[4]&&(0,o.Y)(ef.R,{post:t[4],variant:"mini"}),t[5]&&(0,o.Y)(ef.R,{post:t[5],variant:"mini"})]}),(0,o.Y)(e_,{posts:r})]})};var eE=i(53989),eN=i(40075);let eB=e=>{let{children:t}=e;return(0,o.Y)("div",{className:"contentContainer-S5kWYp",children:(0,o.Y)("div",{className:"contentContainerInner-aojz59",children:t})})};var eM=i(60745),eR=i(49031),eL=i(84713),eO=i(34581),ez=i(65217),eU=i(65590),eq=i(89490);let eH=e=>{let{customFooterTheme:t,isPreview:i,pub:r,socialMediaLinks:l}=e,{isMobile:a,isTablet:s}=(0,h.sM)(),{showPublicationName:d,publicationNamePosition:c}=t,u=64;s?u=48:a&&(u=24);let p={customFooterTheme:t,paddingY:u,pub:r},m={customFooterTheme:t,isPreview:i,paddingY:u,pub:r,socialMediaLinks:l};return(0,o.Y)(x.VP,{style:{marginTop:24},children:d&&"top"===c?(0,o.FD)(o.FK,{children:[(0,o.Y)(eK,(0,n._)({},p)),(0,o.Y)(eW,(0,n._)({},m))]}):d&&"bottom"===c?(0,o.FD)(o.FK,{children:[(0,o.Y)(eW,(0,n._)({},m)),(0,o.Y)(eK,(0,n._)({},p))]}):(0,o.Y)(eW,(0,n._)({},m))})},eW=e=>{let{customFooterTheme:t,isPreview:i,paddingY:n,pub:r,socialMediaLinks:l}=e,{iString:a}=(0,C.GO)(),{isMobile:s}=(0,h.sM)(),{layout:d}=t,c=(0,o.Y)(ej,{isPreview:i,socialMediaLinks:l}),u=t.showPublicationName,p=null;return"centered"===d&&(p=(0,o.FD)(x.VP,{alignItems:"center",gap:20,children:[(0,o.FD)(x.VP,{alignItems:"center",gap:8,children:[(0,o.Y)(N.EY.H2,{color:"primary",font:"pub-headings",children:u?a("Subscribe"):r.name}),(0,o.Y)(N.EY.B2,{color:"primary",font:"text",maxWidth:540,textAlign:"center",children:r.hero_text})]}),(0,o.Y)(eG,{}),(0,o.Y)(eV,{pub:r}),c]})),"two-column"===d&&(p=(0,o.FD)("div",{className:"twoColumnGrid-NSUThY",children:[(0,o.FD)(x.VP,{gap:16,children:[(0,o.FD)(x.VP,{gap:4,children:[(0,o.Y)(N.EY.H2,{color:"primary",font:"pub-headings",children:r.name}),(0,o.Y)(N.EY.B2,{color:"primary",font:"text",children:r.hero_text})]}),(0,o.Y)(eV,{pub:r})]}),(0,o.FD)(x.VP,{alignItems:s?"center":"end",gap:24,children:[(0,o.Y)(eG,{align:"left"}),c]})]})),"three-column"===d&&(p=(0,o.FD)("div",{className:"threeColumnGrid-nUueeH",children:[(0,o.Y)(x.VP,{alignItems:s?"center":"start",justifyContent:"center",style:s?{order:3}:void 0,children:c}),(0,o.FD)(x.VP,{alignItems:"center",gap:16,justifyContent:"center",children:[(0,o.FD)(x.VP,{alignItems:"center",gap:8,children:[(0,o.Y)(N.EY.H3,{color:"primary",font:"pub-headings",children:u?a("Subscribe"):r.name}),(0,o.Y)(N.EY.B2,{color:"primary",font:"text",children:r.hero_text})]}),(0,o.Y)(eG,{})]}),(0,o.Y)(x.VP,{alignItems:s?"center":"end",justifyContent:"center",children:(0,o.Y)(eV,{pub:r})})]})),(0,o.Y)(y.DH,{prefix:"footer",children:(0,o.Y)(eq.az,{borderTop:"detail",paddingY:n,children:(0,o.Y)(eB,{children:p})})})},eK=e=>{let{customFooterTheme:t,paddingY:i,pub:n}=e,{publicationNameStyle:r,publicationNameSize:l}=t,a="wordmark"===r&&n.logo_url_wide,s=20+l/100*100;return(0,o.Y)(y.DH,{prefix:"footer_secondary",children:(0,o.Y)(x.fI,{borderTop:"detail",justifyContent:"center",paddingY:i,children:a?(0,o.Y)("img",{alt:n.name,src:(0,R.dJ9)(n.logo_url_wide,null,{height:Math.round(2*s),crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"]}),style:{display:"block",height:s,objectFit:"contain",width:"100%"}}):(0,o.Y)(N.EY.H2,{color:"primary",font:"pub-headings",style:{fontSize:"".concat(1+l/100*5,"rem"),lineHeight:1},children:n.name})})})},eG=e=>{let{align:t="center"}=e,{freeSignup:i,freeSignupEmail:n}=(0,u.useContext)(F),{pub:r,user:l}=(0,eS.np)();return(0,o.Y)(_.A,{align:t,freeSignup:i,freeSignupEmail:n,noMargin:!0,pub:r,source:"custom-footer",user:l})},eV=e=>{let{pub:t}=e,{iString:i}=(0,C.GO)();return(0,o.FD)(x.fI,{gap:12,children:[(0,o.Y)(N.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,eg.DNs)(t),children:i("About")}),(0,o.Y)(N.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,eg.Xt9)(t),children:i("Archive")}),t.has_recommendations&&(0,o.Y)(N.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,eg.nUM)(t),native:!0,children:i("Recommendations")}),t.can_have_sitemap&&(0,o.Y)(N.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,eg.bGb)(t),native:!0,children:i("Sitemap")})]})},ej=e=>{let{isPreview:t,socialMediaLinks:i}=e,n=t&&(!i||Object.values(i).every(e=>!e)),r=[{platform:"instagram",icon:eL.A,value:n?"#":null==i?void 0:i.instagram},{platform:"tiktok",icon:ez.A,value:n?"#":null==i?void 0:i.tiktok},{platform:"youtube",icon:eU.A,value:n?"#":null==i?void 0:i.youtube},{platform:"facebook",icon:eR.A,value:n?"#":null==i?void 0:i.facebook},{platform:"linkedin",icon:eO.A,value:n?"#":null==i?void 0:i.linkedin},{platform:"bluesky",icon:eM.A,value:n?"#":null==i?void 0:i.bluesky}].filter(e=>e.value);return 0===r.length?null:(0,o.Y)(x.fI,{alignItems:"center",gap:16,children:r.map(e=>{let{platform:t,icon:i,value:r}=e;if(!r)return null;let l=((e,t)=>{if(t.startsWith("http://")||t.startsWith("https://"))return t;let i=t.startsWith("@")?t.slice(1):t;switch(e){case"instagram":if(i.startsWith("instagram.com"))return"https://".concat(i);return"https://instagram.com/".concat(i);case"tiktok":if(i.startsWith("tiktok.com"))return"https://".concat(i);return"https://tiktok.com/@".concat(i);case"youtube":if(i.startsWith("youtube.com"))return"https://".concat(i);return"https://youtube.com/@".concat(i);case"facebook":if(i.startsWith("facebook.com"))return"https://".concat(i);return"https://facebook.com/".concat(i);case"linkedin":return"https://".concat(i);case"bluesky":if(i.startsWith("bsky.app/profile"))return"https://".concat(i);return"https://bsky.app/profile/".concat(i);default:return"https://".concat(t)}})(t,r);return(0,o.Y)("a",{href:l,rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",color:"inherit",opacity:n?.2:1},target:"_blank",children:(0,o.Y)(i,{"aria-label":t,size:20})},t)})})},eX="column-HNiwn6",eJ=e=>{let{leftContent:t,rightContent:i,mobileContent:n}=e,{isMobile:r}=(0,h.sM)();return r&&n?n:(0,o.FD)("div",{className:"container-dOq2Em",children:[(0,o.Y)("div",{className:g()(eX,"left-jXwsmK"),children:t}),(0,o.Y)(x.Ye,{borderRight:"detail",style:{margin:"8px 0"}}),(0,o.Y)("div",{className:g()(eX,"right-koj6uE"),children:i})]})};var eZ=i(56897),eQ=i(93800),e$=i(86898);let e0=e$.O.feature.postCount.desktop,e1=e=>{let{noFirstImage:t,posts:i,pub:l,user:a,utm:s,onChange:d}=e;return(0,o.Y)(eQ.m,(0,r._)((0,n._)({},{pub:l,user:a,utm:s,onChange:d}),{hideHorizontalDividers:!0,posts:i,variant:t?"two-three-two":"five-up"}))},e2=e=>(0,o.Y)(e1,(0,r._)((0,n._)({},e),{noFirstImage:!0})),e4=e=>{let{children:t,href:i,testid:n,onClick:r}=e;return(0,o.Y)(N.EY.Meta,{as:"a",className:"link-dTkJzr",color:"pub-primary-text","data-testid":n,href:i,native:!0,onClick:r?e=>{e.preventDefault(),r()}:void 0,children:t})};var e7=i(88218),e6=i(4016);let e8=e=>{let{isLatestPosts:t,pub:i}=e,{iString:n}=(0,C.GO)(),r=(0,e6.S2)({pub:i}),l=n(t?"Latest":"Most Popular");return(0,o.FD)(x.Ye,{alignItems:"baseline",justifyContent:"space-between",paddingX:8,children:[r?(0,o.Y)("div",{className:"pillarTitle-JAEuZo",children:l}):(0,o.Y)(e7.F,{children:l}),!t&&(0,o.Y)(e4,{href:(0,eg.qy7)(i,t?void 0:{params:{sort:"top"}}),children:n("View all")})]})};var e3=i(7761);let e9=e=>{let{noFirstImage:t,posts:i,replaceTopPostsWithLatest:n,topPosts:r}=e,{isTablet:l,isMobile:a}=(0,h.sM)(),{pub:s}=(0,eS.np)();if(a)return null;let d=t?5:3,c=n?i.slice(0,d):i,u=n?i.slice(d):r;return(0,o.FD)(ek.P,{showContentBelowOnMobile:!0,variant:"full-width-with-border-and-sidebar",children:[(0,o.Y)(eQ.m,{flex:"grow",hideHorizontalDividers:!0,posts:c,variant:t?"two-small-three-medium":"two-small-one-large"}),u&&(0,o.Y)(e3.WO,{pub:s,showPubPins:!1,showSectionPins:!1,children:(0,o.FD)(x.I1,{gap:12,paddingTop:8,children:[(0,o.Y)(e8,{isLatestPosts:n,pub:s}),(0,o.Y)(eQ.m,{hideHorizontalDividers:!0,posts:u.slice(0,l?3:6),variant:l?"mini-row":(0,e6.S2)({pub:s})?"one-column-list-flex":"one-column-list"})]})})]})},e5=e=>(0,o.Y)(e9,(0,r._)((0,n._)({},e),{noFirstImage:!0}));var te=i(16074);let tt=e=>{let{posts:t}=e;return t.length?(0,o.FD)(x.I1,{gap:12,children:[t[0]&&(0,o.Y)(eZ.z,{post:t[0],variant:"mobile-hero"}),t.length>1&&(0,o.FD)(x.I1,{paddingX:16,children:[(0,o.Y)(te.c,{paddingY:4}),(0,o.Y)(eQ.m,{posts:t.slice(1),variant:"two-column-list"})]})]}):null},ti=e=>{let{isSmall:t,posts:i}=e;return i.length&&i[0]?(0,o.Y)(ek.P,{variant:t?"three-column-width":"full-width",children:(0,o.Y)(eZ.z,{post:i[0],variant:t?"jumbo-small":"jumbo"})}):null},tn=e=>(0,o.Y)(ti,(0,r._)((0,n._)({},e),{isSmall:!0}));var tr=i(64648),tl=i(64232),to=i(13790);let ta={magaziney:e9,"magazine-5":e1,newspaper:ti,feature:e=>{let{posts:t}=e,{isTablet:i}=(0,h.sM)();return(0,o.Y)(eJ,{leftContent:t[0]?(0,o.Y)(eZ.z,{imageAspectRatio:"wide",post:t[0],variant:"large"}):(0,o.Y)("div",{}),mobileContent:(0,o.Y)(eQ.m,{posts:t.slice(0,e0),variant:"two-column-list"}),rightContent:(0,o.Y)(eQ.m,{hideHorizontalDividers:!0,posts:t.slice(1,e0),variant:i?"one-column-list":"two-column-list"})})},podcast:e=>{var t,i,n;let{columns:r,hasMiniPostsRowUnderneath:l,heroAlignment:a,posts:s,showPodcastLinks:d,user:c}=e,{isMobile:u}=(0,h.sM)(),{pub:p}=(0,eS.np)(),m=p.podcast_description,g=p.podcast_art_url,v=p.podcast_title,Y=l?24:40;return u?(0,o.Y)(x.I1,{paddingBottom:24,children:(0,o.Y)(to._,{description:m,imageUrl:g,name:v,post:null!=(t=s[0])?t:null,pub:p,section:null,showPodcastLinks:d,user:c})}):"center"===a?(0,o.Y)(x.I1,{paddingBottom:Y,children:(0,o.Y)(tl.i,{description:m,imageUrl:g,name:v,post:null!=(i=s[0])?i:null,pub:p,section:null,showPodcastLinks:d,user:c})}):(0,o.Y)(x.I1,{paddingBottom:Y,children:(0,o.Y)(tr.S,{columns:r,description:m,imageUrl:g,name:v,post:null!=(n=s[0])?n:null,pub:p,section:null,showPodcastLinks:d,user:c})})}},ts=e=>{var{firstPostMissingImage:t,bodyVariant:i,isMobile:r,variant:a}=e,s=(0,l._)(e,["firstPostMissingImage","bodyVariant","isMobile","variant"]);let d=ta[a],c={};return(r&&"podcast"!==a?d=tt:"newspaper"===a&&"list"===i?d=tn:"magaziney"===a&&t?d=e5:"magazine-5"===a&&t?d=e2:"podcast"===a&&(c.columns="list"===i?3:4),d)?(0,o.Y)(d,(0,n._)({},s,c)):(console.error("Component not found, add one to HomeHero"),null)};var td=i(7292),tc=i(19945),tu=i(16447),tp=i(94394),th=i.n(tp),tm=i(33031),tg=i.n(tm),tv=i(98188);let tY=e=>{let{homepageLinks:t,pub:i,renderGroup:n,renderLink:r}=e,l=th()(t,"group"),a=tg()(Object.keys(l),e=>l[e][0].rank);return(0,o.Y)(o.FK,{children:a.map(e=>(0,o.Y)(tf,{group:e,items:l[e],newTab:!0,pub:i,renderGroup:n,renderLink:r}))})},tf=e=>{let{group:t,items:i,newTab:l,pub:a,renderGroup:s,renderLink:d}=e,c=[],u=null;l&&(u="_blank",c.push("noopener")),(!a||(null==a?void 0:a.no_follow))&&c.push("ugc nofollow");let p={rel:c.join(" "),target:u},h=(0,o.Y)(o.FK,{children:i.map(e=>{let{title:t,url:i,subtitle:l,subtitleUrl:a,edit:s,className:c}=e;return d?d({title:t,url:i,subtitle:l,linkProps:p}):(0,o.FD)("div",{className:g()("home-right-col",c),children:[s?(0,o.FD)("div",{className:"home-right-col-editable",children:[(0,o.Y)("a",{className:"home-right-col-title",href:i,native:!0,children:t}),(0,o.Y)(P.K0,{href:s,priority:"quaternary",size:"sm",title:"edit",children:(0,o.Y)(tv.A,{size:20})})]}):(0,o.Y)("a",(0,r._)((0,n._)({className:"home-right-col-title",href:i,native:!0},p),{children:t})),l&&(0,o.Y)("a",(0,r._)((0,n._)({className:"home-right-col-sub",href:a||i,native:!0},p),{children:l}))]})})});return s?s({title:t,links:h}):(0,o.FD)("div",{className:"home-right-group",children:[(0,o.Y)("div",{className:"home-right-group-title",children:t}),h]})};var tb=i(91704),ty=i(14085);let t_=e=>{var{body:t,clampTitle:i,image:a,linkProps:s,pub:d,subtitle:c,title:u,url:p}=e,h=(0,l._)(e,["body","clampTitle","image","linkProps","pub","subtitle","title","url"]);let{size:m,lineHeight:g}=(0,tb.i)({preset:"sm",pub:d}),v="undefined"==typeof window,Y=(0,o.Y)(ty.u,{hoverBackground:"light",padding:8,radius:"sm",children:(0,o.FD)(x.Ye,(0,r._)((0,n._)({},h),{gap:16,children:[a&&(0,o.Y)(eq.az,{alignSelf:"start",children:a}),(0,o.FD)(x.I1,{alignSelf:"stretch",gap:8,justifyContent:"center",children:[(0,o.FD)(x.I1,{gap:2,style:{wordBreak:"break-word"},children:[(0,o.Y)(N.EY,{clamp:i,color:"pub-primary-text",font:"pub-headings",style:{fontSize:m,lineHeight:"".concat(g,"px")},children:v?(0,o.Y)("a",(0,r._)((0,n._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:u})):u}),c&&(0,o.Y)(N.EY.B4,{clamp:3,color:"pub-secondary-text",size:12,children:c})]}),t&&(0,o.Y)("div",{children:t})]})]}))});return v?Y:(0,o.Y)("a",(0,r._)((0,n._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:Y}))},tw=e=>{let{linkProps:t,pub:i,subtitle:l,title:a,url:s}=e,{isMobile:d}=(0,h.sM)(),{size:c,lineHeight:u}=(0,tb.i)({preset:"sm",pub:i});return(0,o.Y)("a",(0,r._)((0,n._)({className:"homepageLink-cE_DZ1",href:s},t),{children:(0,o.Y)(x.I1,{gap:8,paddingX:8*!d,children:(0,o.FD)(x.I1,{style:{wordBreak:"break-word"},children:[(0,o.Y)(N.EY,{className:"title-QddVTB",color:"pub-primary-text",font:"pub-body",style:{fontSize:c,lineHeight:"".concat(u,"px")},children:a}),l&&(0,o.Y)(N.EY.B4,{clamp:3,color:"pub-secondary-text",size:12,children:l})]})})}))},tC=e=>{let{hideHeaderBorder:t}=e,{homepageLinks:i}=(0,u.useContext)(F),{pub:n}=(0,eS.np)(),{isMobile:r}=(0,h.sM)();return i&&0!==i.length?(0,o.Y)(x.I1,{"data-testid":"homepage-links",gap:24,children:(0,o.Y)(tY,{homepageLinks:i,pub:n,renderGroup:e=>{let{title:i,links:n}=e;return(0,o.FD)(x.I1,{gap:16,children:[(0,o.Y)(x.Ye,{alignItems:"center",paddingX:8*!r,children:(0,o.Y)(x.Ye,{borderBottom:t?void 0:"detail-themed",flex:"grow",paddingBottom:t?void 0:8,children:(0,o.Y)(e7.F,{children:i})})}),(0,o.Y)(x.I1,{gap:12,children:n})]})},renderLink:e=>{let{linkProps:t,subtitle:i,title:r,url:l}=e;return(0,o.Y)(tw,{linkProps:t,pub:n,subtitle:i,title:r,url:l})}})}):null},tI=()=>{let{iString:e}=(0,C.GO)();return(0,o.Y)(eq.az,{className:"container-bP27QM",flex:"grow",paddingX:16,paddingY:20,radius:"sm",children:(0,o.Y)(N.EY.B4,{color:"pub-secondary-text",children:e("Coming soon")})})};var tk=i(41167);function tS(){let e=(0,v._)(["View all ",""]);return tS=function(){return e},e}let tD=e=>{let{showEmptyState:t,hideHeaderBorder:i}=e,{iString:l,iTemplate:a}=(0,C.GO)(),{numRecommendations:s,recommendations:d}=(0,u.useContext)(F),{pub:c,user:p}=(0,eS.np)(),{isMobile:m}=(0,h.sM)();return d&&(0!==d.length||t)?(0,o.Y)(tk.A,{numRecommendations:s,pub:c,recommendations:d,render:e=>{let{recommendations:t,canManage:n,manageUrl:r,hasMore:d,hasMoreUrl:c,recommendationsCount:u}=e;return(0,o.FD)(x.I1,{gap:16,children:[(0,o.Y)(x.Ye,{paddingX:8*!m,children:(0,o.FD)(x.Ye,{alignItems:"baseline",borderBottom:i?void 0:"detail-themed",flex:"grow",justifyContent:"space-between",paddingBottom:i?void 0:8,children:[(0,o.Y)(e7.F,{children:l("Recommendations")}),n?(0,o.Y)(e4,{href:r,children:l("Manage")}):d?(0,o.Y)(e4,{href:c,testid:"homepage-recommendations-view-all",children:a(tS(),null!=u?u:0)}):null]})}),(0,o.Y)(x.I1,{"data-testid":"homepage-recommendations",gap:4,children:0===s?(0,o.Y)(x.Ye,{paddingX:8,children:(0,o.Y)(tI,{})}):t})]})},renderRecommendation:e=>{let{url:t,onClick:i,pubAvatarProps:l,pubName:a,pubAuthor:s}=e;return(0,o.Y)(t_,{"data-testid":"homepage-recommendation",image:(0,o.Y)(E.wg,(0,r._)((0,n._)({},l),{size:40})),linkProps:{onClick:i,target:"_blank",rel:"noopener"},pub:c,subtitle:s,title:a,url:t})},user:p}):null},tF=()=>{let{freeSignup:e,freeSignupEmail:t}=(0,u.useContext)(F),{pub:i,user:n}=(0,eS.np)(),{isMobile:r}=(0,h.sM)();return(0,o.FD)(x.I1,{className:"container-rEYFE5",gap:24,paddingX:8*!r,children:[(0,o.FD)(x.I1,{gap:8,children:[i.logo_url&&(0,o.Y)("img",{alt:i.name,className:"pubLogo-DpnXOb","data-testid":"homepage-sidebar-pub-logo",src:(0,eg.dJ9)(i.logo_url,88)}),(0,o.FD)(x.I1,{gap:2,children:[(0,o.Y)(e7.F,{children:i.name}),i.hero_text&&(0,o.Y)(N.EY,{color:"pub-secondary-text",font:"text",lineHeight:20,size:12,children:i.hero_text})]})]}),(0,o.Y)(_.A,{align:"left",expectTruncation:!0,freeSignup:e,freeSignupEmail:t,isStatic:!1,pub:i,source:"magaziney-home-page",user:n})]})},tT=()=>{let{pub:e}=(0,eS.np)(),{isMobile:t}=(0,h.sM)();return(0,o.FD)(x.I1,{gap:40,children:[!t&&(0,o.Y)(tF,{}),e.show_recs_on_homepage&&(0,o.Y)(tD,{}),(0,o.Y)(tC,{})]})};var tP=i(2404),tx=i.n(tP),tA=i(83128),tE=i(29098),tN=i(24634);let tB="homePageGroupsGrid-dfyTM6",tM=e=>"email_from_name"in e,tR=e=>{var t;let[i,a]=(0,u.useState)(null!=(t=e.postsByGroupId)?t:{}),[s,d]=(0,u.useState)(!1),{posts:c,bodyPostGroups:p,hasEmptyGroupOptions:h,setHasInvalidGroupSelection:m}=e,g=(0,l._)(e,["posts","bodyPostGroups","hasEmptyGroupOptions","setHasInvalidGroupSelection"]);(0,u.useEffect)(()=>{let e=async e=>{let t=(0,n._)({},i);for(let i of e){let e={limit:6};if(tM(i)?e.section_id=i.id:e.post_tag_id=i.id,!t[i.id]){let{body:n}=await el().get("/api/v1/archive").query(e);t[i.id]=n}}tx()(t,i)||(a(t),d(!1))};0===Object.keys(i).length&&p&&(null==p?void 0:p.length)>0&&(d(!0),e(p))},[p,a,i]);let v=(0,u.useCallback)(e=>{var t;let l=null!=(t=e.post_tag_id)?t:e.section_id;if(!l)throw Error("Must supply section_id or post_tag_id");i&&i[l]||el().get("/api/v1/archive").query((0,n._)({limit:3},e)).then(e=>{let{body:t}=e;a((0,r._)((0,n._)({},i),{[l]:t}))})},[i,a]),Y=(0,u.useCallback)(e=>{var t;return i&&(!i||0!==Object.keys(i).length)&&i[e]?null==(t=i[e])?void 0:t.slice(0,3):null},[i]);return h||!p||(null==p?void 0:p.length)===0?m?(m(!0),(0,o.Y)(tL,{message:"No groups selected"})):(0,o.FD)(x.I1,{children:[(0,o.Y)(tO,{pub:e.pub}),(0,o.Y)(eQ.m,(0,r._)((0,n._)({},g),{posts:c.slice(0,3),variant:"three-column-grid"}))]}):(0,o.FD)("div",{className:tB,children:[p.map(t=>{let i=Y(t.id);return(0,o.FD)(x.I1,{paddingBottom:24,children:[(0,o.Y)(tO,{pub:e.pub,row:t}),(0,o.Y)(tz,(0,r._)((0,n._)({},g),{groupModel:t,loadingSync:s,posts:c,postsForId:i,setHasInvalidGroupSelection:m,onIntersectCallback:()=>{v(tM(t)?{section_id:t.id}:{post_tag_id:t.id})}}))]})}),p.length<3?(0,o.FD)(x.I1,{children:[(0,o.Y)(tO,{pub:e.pub}),(0,o.Y)(eQ.m,(0,r._)((0,n._)({},g),{posts:c.slice(0,3),variant:"three-column-grid"}))]}):null]})},tL=e=>{let{groupModel:t,message:i}=e;return(0,o.Y)(eq.az,{paddingBottom:40,paddingTop:8,children:(0,o.FD)(x.I1,{alignItems:"center",className:g()(tB,t?"emptyGroupView-kLS4e3":"emptyRowsView-Yo2IhI"),justifyContent:"center",children:[(0,o.Y)(tA.A,{className:"emptyContentIcon-mKbS2t"}),i&&(0,o.Y)(N.EY.B4,{color:"pub-secondary-text",paddingTop:20,weight:"semibold",children:i}),t&&(0,o.FD)(N.EY.B4,{color:"pub-secondary-text",paddingTop:4,children:["Add posts to this ",tM(t)?"section":"tag"," to include it on your homepage."]})]})})},tO=e=>{var t;let{row:i,pub:n}=e,{isMobile:r}=(0,h.sM)(),l="/archive";return i&&(l=tM(i)?(0,R.Dor)(n,{section:i}):(0,R.ii9)(n,i)),(0,o.Y)(x.I1,{paddingBottom:12,paddingX:8*!r,children:(0,o.FD)(x.Ye,{alignItems:"center",justifyContent:"space-between",children:[(0,o.Y)(N.EY.H2,{color:"pub-primary-text",font:"pub-headings",children:null!=(t=null==i?void 0:i.name)?t:"Recent posts"}),(0,o.Y)(e4,{href:l,children:"See all"})]})})},tz=e=>{let{onIntersectCallback:t,groupModel:i,loadingSync:a,postsForId:s,setHasInvalidGroupSelection:d}=e,c=(0,l._)(e,["onIntersectCallback","groupModel","loadingSync","postsForId","setHasInvalidGroupSelection"]),[p,h]=(0,tE.A)();return((0,u.useEffect)(()=>{(null==h?void 0:h.isIntersecting)&&!a&&t()},[null==h?void 0:h.isIntersecting,t,a]),s)?0===s.length?d?(d(!0),(0,o.Y)(tL,{groupModel:i})):(0,o.Y)(eQ.m,(0,r._)((0,n._)({},c),{posts:c.posts.slice(0,3),variant:"three-column-grid"})):(0,o.Y)(eQ.m,(0,r._)((0,n._)({},c),{posts:s,variant:"three-column-grid"})):(0,o.Y)(tN.t,{ref:p,postCount:3,variant:"grid-groups"})};var tU=i(97432),tq=i(82776);function tH(e){let{className:t=""}=e,{iString:i,language:l}=(0,C.GO)(),{freeSignup:a,freeSignupEmail:s}=(0,u.useContext)(F),{pub:d,user:c}=(0,eS.np)();return(0,o.FD)("div",{className:g()("home-sitemap",t),children:[(0,o.Y)("h4",{className:"home-sitemap-title",children:d.name}),a||c&&c.is_free_subscribed?!(c&&c.is_subscribed)&&d.plans?(0,o.Y)("a",{className:"button primary home-sitemap-subscribe subscribe-btn",href:(0,eg.eV6)(d,{utm_source:L.VU.homeSitemap}),native:!0,children:(0,tq.getSubscribeText)(d,{language:l})}):null:(0,o.Y)(eq.az,{paddingTop:20,children:(0,o.Y)(tU.A,{className:"home-sitemap-signup-form",freeSignup:a,freeSignupEmail:s,pub:d,source:"home-sitemap",user:c,onSuccess:e=>{e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,eg.yRP)("/account/login",{redirect:document.location.href,email:e.body.email})},30):d.plans?document.location.href=(0,eg.yRP)("/subscribe",(0,r._)((0,n._)({next:document.location.href,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":""})):document.location.reload()},onConfirmationRequired:(null==d?void 0:d.payments_state)==="enabled"?()=>null:void 0})}),(0,o.FD)("div",{className:"home-sitemap-links",children:[(0,o.Y)("a",{href:(0,eg.DNs)(d),native:!1,children:i("About")}),(0,o.Y)("a",{href:(0,eg.Xt9)(d),children:i("Archive")}),d.has_recommendations&&(0,o.Y)("a",{href:(0,eg.nUM)(d),native:!0,children:i("Recommendations")}),d.can_have_sitemap&&(0,o.Y)("a",{href:(0,eg.bGb)(d),native:!0,children:i("Sitemap")})]})]})}let tW={grid:"full-width-with-sidebar","grid-groups":"full-width-with-sidebar",list:"three-column-width-with-sidebar"},tK={grid:"three-column-grid",list:"two-column-list"},tG={grid:"full-width","grid-groups":"full-width",list:"three-column-width"},tV=e=>{let t;var{hasCustomFooter:i,hideImagesFromList:a,posts:s,pub:d,showSiteMap:c,source:u,user:p,variant:m,bodyPostGroups:g,postsByGroupId:v}=e,Y=(0,l._)(e,["hasCustomFooter","hideImagesFromList","posts","pub","showSiteMap","source","user","variant","bodyPostGroups","postsByGroupId"]);let{isMobile:f,isTablet:b,breakpoint:y}=(0,h.sM)(),_=(t=(0,td.t)(),tc.pQ.reduce((e,i)=>(0,r._)((0,n._)({},e),{[i]:t[i].postCount}),{}))[m][y],w="list"===m&&(a||s.slice(0,_).every(e=>!e.cover_image));return(0,o.FD)(e3.WO,{pub:d,showPubPins:!0,showSectionPins:!1,children:[s.length>0&&(0,o.FD)(ek.P,{showContentBelowOnMobile:!0,variant:tW[m],children:[(0,o.Y)(tu.M,(0,r._)((0,n._)({},Y),{maxPosts:_,newPosts:s,pub:d,user:p,variant:m,children:e=>{let{posts:t,linkToComments:i,onClickPost:l}=e,a={hideImages:w,linkToComments:i,posts:t,pub:d,source:u,user:p,onClickPost:l};return"grid-groups"===m?(0,o.Y)(tR,(0,r._)((0,n._)({},a),{bodyPostGroups:g,hasEmptyGroupOptions:Y.hasEmptyGroupOptions,postsByGroupId:v,setHasInvalidGroupSelection:Y.setHasInvalidGroupSelection})):(0,o.Y)(eQ.m,(0,r._)((0,n._)({},a),{variant:tK[m]}))}})),(!f&&!b||!i)&&(0,o.Y)(tT,{})]}),c&&!i&&(0,o.Y)(ek.P,{variant:tG[m],children:(0,o.Y)(x.I1,{paddingX:8*!f,children:(0,o.Y)(tH,{})})})]})};var tj=i(73869);let tX=()=>(0,o.Y)(eq.az,{className:"container-eQ3i2p",paddingX:16,paddingY:48,radius:"sm",children:(0,o.Y)(N.EY.B4,{align:"center",color:"pub-secondary-text",children:"No posts found"})});var tJ=i(98445),tZ=i(99145);let tQ=e=>{let{pub:t,showSearch:i,title:n,viewAllUrl:r}=e,l=(0,e6.S2)({pub:t}),{isMobile:a}=(0,h.sM)(),{iString:s}=(0,C.GO)(),{open:d}=(0,tZ.v9)();return(0,o.FD)(x.Ye,{alignItems:"center",borderBottom:l?"detail-themed":void 0,className:g()({"pillarHeader-EpU7EL":l}),justifyContent:"space-between",paddingBottom:a?12:16,paddingX:8*!a,children:[l?(0,o.Y)("div",{className:"pillarTitle-Eyi3Nu",children:n}):a?(0,o.Y)(e7.F,{children:n}):(0,o.Y)(N.EY.H3,{color:"pub-primary-text",font:"pub-headings",children:n}),r&&(0,o.FD)(x.Ye,{alignItems:"center",gap:16,children:[i&&(0,o.Y)(y.DH,{children:(0,o.Y)(P.K0,{priority:"tertiary",onClick:e=>{e.preventDefault(),d()},children:(0,o.Y)(tJ.A,{size:20})})}),(0,o.Y)(e4,{href:r,children:s("View all")})]})]})},t$=e$.O.feature.postCount.desktop,t0=e=>{let{posts:t,pub:i,showEmptyState:n,showSearch:r,title:l,viewAllUrl:a,variant:s="focus-left-list"}=e;return 0===t.length?n?(0,o.Y)(tX,{}):null:(0,o.FD)(o.FK,{children:[l&&(0,o.Y)(tQ,{pub:i,showSearch:r,title:l,viewAllUrl:a}),(0,o.Y)(t1,{posts:t,variant:s})]})},t1=e=>{let{posts:t,variant:i}=e,{isMobile:n,isTablet:r}=(0,h.sM)(),l=t[0],a=t.slice(1,t$);if(!l)return null;if(n)return(0,o.Y)(eQ.m,{posts:t.slice(0,t$),variant:"two-column-list"});if(r)return(0,o.FD)(ek.P,{variant:"one-column-two-column-one-column",children:[(0,o.Y)(eZ.z,{post:l,variant:"large"}),(0,o.Y)(eQ.m,{flex:"grow",hideHorizontalDividers:!0,posts:a,variant:"one-column-list"})]});if(i.startsWith("focus-left")){let e="focus-left-list"===i?(0,o.Y)(eQ.m,{posts:a,variant:"two-column-list"}):(0,o.Y)(eQ.m,{hideHorizontalDividers:!0,posts:a,variant:"two-column-grid"});return(0,o.Y)(eJ,{leftContent:(0,o.Y)(eZ.z,{post:l,variant:"large"}),rightContent:e})}if(i.startsWith("focus-center")){let e=a.slice(0,Math.ceil(a.length/2)),t=a.slice(Math.ceil(a.length/2));return(0,o.FD)(ek.P,{variant:"one-column-two-column-one-column",children:[(0,o.Y)(eZ.z,{post:l,variant:"large"}),(0,o.Y)(eQ.m,{flex:"grow",hideHorizontalDividers:!0,posts:e,variant:"square-square-column"}),(0,o.Y)(eQ.m,{flex:"grow",hideHorizontalDividers:!0,posts:t,variant:"square-square-column"})]})}if(i.startsWith("focus-right")){let e="focus-right-list"===i?(0,o.Y)(eQ.m,{posts:a,variant:"two-column-list"}):(0,o.Y)(eQ.m,{hideHorizontalDividers:!0,posts:a,variant:"two-column-grid"});return(0,o.Y)(eJ,{leftContent:e,rightContent:(0,o.Y)(eZ.z,{post:l,variant:"large"})})}return null};var t2=i(9757),t4=i(72692),t7=i(85965),t6=i(10939),t8=i(71834);let t3=e=>{var t;let{contributor:i,latestPost:n}=e;return n?(0,o.Y)(ty.u,{hoverBackground:"light",href:n.canonical_url,padding:8,radius:"sm",children:(0,o.FD)(x.Ye,{alignItems:"center",gap:16,children:[(0,o.FD)(x.I1,{flex:"grow",children:[(0,o.Y)(N.EY.Meta,{color:"accent",children:i.name}),(0,o.Y)(t8.Z,{post:n,preset:"sm"})]}),(0,o.Y)(x.pT,{flex:"auto",children:(0,o.Y)(T.eu,{photoUrl:null!=(t=i.photo_url)?t:void 0,size:48})})]})}):null};var t9=i(8149);function t5(){let e=(0,v._)(["Show less"]);return t5=function(){return e},e}function ie(){let e=(0,v._)(["Show "," more"]);return ie=function(){return e},e}let it=()=>{let{iString:e,iTemplate:t}=(0,C.GO)(),{contributors:i,latestPostByContributorId:n}=(0,u.useContext)(F),[r,l]=(0,u.useState)(!1);if(!i)return null;let a=i.filter(e=>e.name&&(null==n?void 0:n[e.id])),s=a.slice(0,10),d=a.slice(10);return(0,o.FD)(x.I1,{gap:16,children:[(0,o.Y)(x.Ye,{paddingX:8,children:(0,o.Y)(e7.F,{children:e("The latest from")})}),(0,o.FD)(x.I1,{gap:4,children:[s.length?s.map(e=>(0,o.Y)(t3,{contributor:e,latestPost:null==n?void 0:n[e.id]})):(0,o.Y)(tI,{}),(0,o.Y)(t9.N,{open:r,children:(0,o.Y)(x.I1,{gap:4,children:d.map(e=>(0,o.Y)(t3,{contributor:e,latestPost:null==n?void 0:n[e.id]}))})}),d.length>0&&(0,o.Y)(x.Ye,{paddingX:8,paddingY:4,children:(0,o.Y)(e4,{onClick:()=>{l(!r)},children:r?t(t5()):t(ie(),d.length)})})]})]})},ii="logo-ulupBr",ir="logo-64-VEaVRL",il="logo-72-fFbpYn",io="logo-auto-l6jK_D",ia=e=>{let{altText:t="Section logo",size:i=64,url:n,showPlaceholder:r}=e;return n?(0,o.Y)("img",{alt:t,className:g()(ii,{[ir]:64===i,[il]:72===i,[io]:"auto"===i}),src:(0,eg.dJ9)(n,"auto"===i?200:2*i)}):r?(0,o.Y)("div",{className:g()(ii,"logoPlaceholder-RbJEuS",{[ir]:64===i,[il]:72===i,[io]:"auto"===i})}):null},is=()=>{let{iString:e}=(0,C.GO)(),{pub:t}=(0,eS.np)(),i=t.sections.filter(e=>(0,tq.sectionIsSpecificallyMarkedAsNewsletter)({section:e,pub:t})||!e.is_podcast),n=i.some(e=>e.logo_url);return(0,o.FD)(x.I1,{gap:16,children:[(0,o.Y)(x.Ye,{paddingX:8,children:(0,o.Y)(e7.F,{children:e("Newsletters")})}),(0,o.Y)(x.I1,{gap:4,children:i.length?i.map(e=>(0,o.Y)(t_,{image:e.logo_url||n?(0,o.Y)(ia,{altText:"Logo for ".concat(e.name),showPlaceholder:!0,size:64,url:e.logo_url}):null,pub:t,subtitle:e.description,title:e.name,url:(0,R.Dor)(t,{section:e,addBase:!0})})):(0,o.Y)(tI,{})})]})};var id=i(24713),ic=i.n(id);function iu(){let e=(0,v._)(["Logo for ",""]);return iu=function(){return e},e}let ip=e=>{let{latestPost:t,podcastArtUrl:i,podcastTitle:n,podcastUrl:r,showPlaceholder:l}=e,{iString:a,iTemplate:s}=(0,C.GO)();return(0,o.Y)(ty.u,{hoverBackground:"light",href:t?t.canonical_url:r,padding:8,radius:"sm",children:(0,o.FD)(x.Ye,{alignItems:"start",gap:16,children:[(i||l)&&(0,o.Y)(x.pT,{flex:"auto",children:(0,o.Y)(ia,{altText:s(iu(),n),showPlaceholder:!0,size:64,url:i})}),(0,o.FD)(x.I1,{flex:"grow",children:[(0,o.Y)(N.EY.Meta,{color:"accent",children:n}),t?(0,o.Y)(t8.Z,{noIcons:!0,post:t,preset:"sm"}):(0,o.Y)(N.EY.B4,{color:"pub-secondary-text",paddingTop:8,style:{fontStyle:"italic"},children:a("Coming soon")})]})]})})};var ih=i(9740);let im=()=>{let{iString:e}=(0,C.GO)(),{pub:t}=(0,eS.np)(),{latestPodcastPosts:i}=(0,u.useContext)(F),n=tg()((0,ih.YD)(t),e=>{var i;return e.section_id?null!=(i=ic()(t.navigationBarItems,t=>t.section_id===e.section_id))?i:999:-1}),r=n.some(e=>e.podcast_art_url);return(0,o.FD)(x.I1,{gap:16,children:[(0,o.Y)(x.Ye,{paddingX:8,children:(0,o.Y)(e7.F,{children:e("Podcasts")})}),(0,o.Y)(x.I1,{gap:4,children:n.length?n.map(e=>{var t,n;let l=e.section_id?null!=(t=null==i?void 0:i.sectionPodcasts[e.section_id])?t:null:null!=(n=null==i?void 0:i.pubPodcast)?n:null;return(0,o.Y)(ip,{latestPost:l,podcastArtUrl:e.podcast_art_url,podcastSubtitle:e.subtitle,podcastTitle:e.title,podcastUrl:e.url,showPlaceholder:r})}):(0,o.Y)(tI,{})})]})},ig=()=>{let{iString:e}=(0,C.GO)(),{topPosts:t}=(0,u.useContext)(F);return t?(0,o.FD)(x.I1,{gap:16,children:[(0,o.Y)(e7.F,{children:e("Top posts")}),(0,o.Y)(eQ.m,{posts:t.slice(0,5),variant:"one-column-list"})]}):null},iv=e=>{let{ids:t}=e,i=s()(t.map(e=>"subscribe"===e?(0,o.Y)(tF,{}):"recommendations"===e?(0,o.Y)(tD,{hideHeaderBorder:!0,showEmptyState:!0}):"links"===e?iY(tC,{hideHeaderBorder:!0}):"contributors"===e?(0,o.Y)(it,{}):"podcasts"===e?(0,o.Y)(im,{}):"newsletters"===e?(0,o.Y)(is,{}):"top-posts"===e?(0,o.Y)(ig,{}):null));return(0,o.Y)(x.I1,{children:i.map((e,t)=>(0,o.FD)(o.FK,{children:[e,t<i.length-1&&(0,o.Y)(t6.r,{})]}))})},iY=(e,t)=>{let i=(0,o.Y)(e,(0,n._)({},t));return"function"==typeof i.type&&null===i.type(t)?null:i},ib=e=>{let t,i,n,{numPosts:r,posts:l,pub:a,showEmptyState:s,showSearch:d,showSeeAllLink:c,sidebarLeft:u,sidebarRight:p,title:m,viewAllUrl:g}=e,{isDesktop:v,isTablet:Y}=(0,h.sM)();if(!s&&0===l.length)return null;let f=u&&u.length>0,b=p&&p.length>0;v?(t=f?(0,o.Y)(iv,{ids:u}):void 0,i=b?(0,o.Y)(iv,{ids:p}):void 0,n=4-!!b-!!f):Y?b?(i=(0,o.Y)(iv,{ids:[...p,...null!=u?u:[]]}),n=2):f?(t=(0,o.Y)(iv,{ids:u}),n=2):n=3:n=1;let y=(0,o.FD)(o.FK,{children:[m&&(0,o.Y)(tQ,{pub:a,showSearch:d,title:m,viewAllUrl:g}),l.length?(0,o.FD)(o.FK,{children:[(0,o.Y)(t7.C,{numColumns:n,posts:l.slice(0,r)}),c&&g&&(0,o.Y)(t4.k,{url:g})]}):(0,o.Y)(tX,{})]});return(0,o.Y)(t2.I,{leftContent:t,mainContent:y,rightContent:i,stretchToFullWidth:!0})},iy=e=>{let t,i,{numPosts:n,posts:r,pub:l,showEmptyState:a,showSearch:s,showSeeAllLink:d,sidebarLeft:c,sidebarRight:u,title:p,viewAllUrl:m}=e,{isTablet:g,isDesktop:v}=(0,h.sM)();if(!a&&0===r.length)return null;let Y=c&&c.length>0,f=u&&u.length>0,b=(0,o.FD)(o.FK,{children:[p&&(0,o.Y)(tQ,{pub:l,showSearch:s,title:p,viewAllUrl:m}),r.length?(0,o.FD)(o.FK,{children:[(0,o.Y)(eQ.m,{posts:r.slice(0,n),variant:"two-column-list"}),d&&m&&(0,o.Y)(t4.k,{url:m})]}):(0,o.Y)(tX,{})]});return v?(t=Y?(0,o.Y)(iv,{ids:c}):void 0,i=f?(0,o.Y)(iv,{ids:u}):void 0):g&&(f?i=(0,o.Y)(iv,{ids:[...u,...null!=c?c:[]]}):Y&&(t=(0,o.Y)(iv,{ids:c}))),(0,o.Y)(t2.I,{leftContent:t,mainContent:b,rightContent:i})};var i_=i(56458);let iw=e=>{let{contentBlock:t}=e,{iString:i}=(0,C.GO)(),{freeSignup:n}=(0,u.useContext)(F),{pub:r,user:l}=(0,eS.np)(),a=(0,ec.mJ)(),s=(0,eE.Pu)(),{isMobile:d}=(0,h.sM)(),c=(0,e6.s7)({pub:r,includeTheRampart:!0}),p=n||(null==l?void 0:l.is_free_subscribed),m=null==l?void 0:l.is_pledged,v=!a.getConfigFor("pledges_disabled")&&!!s.getSettingFor("payment_pledges_enabled"),{cta:Y,message:f}=iC({contentBlock:t,freeSignup:n,pub:r,pubSettings:s,siteConfigs:a,user:l}),b=(0,R.eV6)(r,{params:{utm_source:L.VU.subscribeContentBlock,gift:!0,next:document.location.href}}),y=(0,R.eV6)(r,{addBase:!0,user:l,params:{utm_source:L.VU.subscribeContentBlock,simple:!0,next:document.location.href,referring_pub_ids:(0,M.y)("referring_pub_ids")}}),_=(0,R.RKl)({pub:r,user:l,params:{utm_source:L.VU.subscribeContentBlock,next:document.location.href}}),w=(0,R.LG3)({pub:r});return(0,o.Y)("div",{className:g()("outerContainer-cCKm5T",{"thebulwark-dw_07J":c}),children:(0,o.Y)(eq.az,{className:"innerContainer-hMBAPa",paddingY:c||d?40:48,children:(0,o.FD)(x.Ye,{alignItems:"center",direction:d?"column":"row",gap:d?c?16:24:40,justifyContent:c?"space-between":"center",paddingX:8,children:[c&&(0,o.FD)(x.Ye,{alignItems:"center",className:"logoContainer-iUK1Lv",gap:4,children:[(0,o.Y)(E.wg,{pub:r,size:c||d?56:80}),c&&!d&&(0,o.Y)(N.EY,{color:"pub-primary-text",font:"pub-headings",nowrap:!0,size:20,children:"The Bulwark +"})]}),f&&(0,o.Y)(x.Ye,{alignItems:"center",direction:d?"column":"row",gap:8,children:(0,o.Y)(N.EY,{align:d||c?"center":"left",className:"message-IKztq4",color:"pub-primary-text",font:"pub-headings",lineHeight:30,size:c?20:24,children:(0,tq.preventOrphans)(f)})}),Y&&(0,o.Y)(eq.az,{className:"ctaContainer-WOl42W",flex:"auto",children:"subscribe"===Y||"upgrade"===Y?(0,o.Y)(P.$n,{href:y,localNavigation:!1,priority:"primary",children:c?"Join Bulwark +":(0,tq.getSubscribeText)(r,{isFreeSubscribed:p,isPledged:m,pledgesEnabled:v})}):"upgrade_founding"===Y?(0,o.Y)(P.$n,{href:_,localNavigation:!1,priority:"primary",children:i("Upgrade to founding")}):"pledge"===Y?(0,o.Y)(P.$n,{href:y,localNavigation:!1,priority:"primary",children:i("Pledge your support")}):"gift"===Y?c?(0,o.Y)(P.$n,{href:w,localNavigation:!1,priority:"primary",children:i("Gift a subscription")}):(0,o.Y)(P.$n,{href:b,localNavigation:!1,priority:"primary",children:i("Gift a subscription")}):null})]})})})},iC=e=>{let{contentBlock:t,freeSignup:i,pub:n,pubSettings:r,siteConfigs:l,user:o}=e,a=i||(null==o?void 0:o.is_free_subscribed),s="enabled"===n.payments_state,d=!l.getConfigFor("pledges_disabled")&&!!r.getSettingFor("payment_pledges_enabled"),c=null==o?void 0:o.is_subscribed,u=null==o?void 0:o.is_founding,p=(0,i_.QN)(n);return{cta:a?s?c?!u&&p?"upgrade_founding":"gift":"upgrade":d?"pledge":null:"subscribe",message:u&&p?t.attrs.founding_member_message:c&&s?t.attrs.paid_subscriber_message:a?t.attrs.free_subscriber_message:t.attrs.non_subscriber_message}};var iI=i(11574),ik=i(77433);let iS=e=>{let{posts:t,title:i,viewAllUrl:n}=e,{isMobile:r,isTablet:l}=(0,h.sM)();return r?(0,o.Y)(iD,{posts:t,title:i,viewAllUrl:n}):(0,o.FD)(x.I1,{gap:40,children:[(0,o.Y)(ik.M,{title:i,titlePreset:"st2"}),(0,o.FD)(x.I1,{gap:32,children:[t[0]&&(0,o.Y)(ef.R,{post:t[0],titlePreset:"h4-sans-condensed",variant:"content-block-listing"}),(0,o.Y)(x.Ye,{gap:40,children:t.slice(1,l?3:4).map(e=>(0,o.Y)(x.I1,{borderTop:"detail-themed",flex:"grow",paddingTop:32,children:(0,o.Y)(ef.R,{post:e,variant:"mini"})}))})]})]})},iD=e=>{let{posts:t,title:i,viewAllUrl:n}=e;return(0,o.FD)(x.I1,{gap:20,children:[(0,o.Y)(ik.M,{title:i,titlePreset:"st2",viewAllUrl:n}),(0,o.FD)(x.I1,{gap:32,children:[t[0]&&(0,o.Y)(ef.R,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,o.Y)(x.I1,{children:t.slice(1,4).map(e=>(0,o.Y)(x.I1,{borderTop:"detail-themed",paddingY:16,children:(0,o.Y)(ef.R,{post:e,variant:"mini"})}))})]})]})};var iF=i(60250),iT=i(87677),iP=i(72880),ix=i(77124),iA=i(95691),iE=i(57753),iN=i(74894),iB=i(95294);let iM="panel-K8JY99",iR="navButton-hcrBJt",iL="primaryButton-AbjjpI",iO="secondaryButton-GUipKK",iz="podcastArt-U81yKg",iU=e=>{var t,i,n,r,l,a,s,d,c,p,m,g;let{contentBlock:v}=e,{isMobile:Y}=(0,h.sM)(),{pub:f}=(0,eS.np)(),{sections:b,metadata:y}=(0,iA.P)({pub:f}),{ids:_,metadata:w}=(0,ix.q)({pub:f}),{latestPodcastPosts:C}=(0,u.useContext)(F),[I,k]=(0,u.useState)(2),[S,D]=(0,u.useState)(!1),[T,P]=(0,u.useState)(0),A=(0,u.useRef)(null),E=(0,u.useRef)(null),N=(0,u.useRef)(null),B=(0,u.useRef)(null),M=(null==(i=v.attrs)||null==(t=i.media_carousel)?void 0:t.variant)==="videos"?"videos":"podcasts",R=(0,iN.Zu)(f).filter(e=>!!e.sectionId),L=tg()(R,e=>{var t;return _.indexOf(null!=(t=e.sectionId)?t:-1)}),O="podcasts"===M?L.length:b.length,z=[...L.slice(-2),...L,...L.slice(0,2)],U=[...b.slice(-2),...b,...b.slice(0,2)],q=()=>{k(e=>e+1)},H=()=>{k(e=>e-1)};return((0,u.useEffect)(()=>{1===I?setTimeout(()=>{D(!0),k(O+1),setTimeout(()=>{D(!1)},100)},300):I===O+2&&setTimeout(()=>{D(!0),k(2),setTimeout(()=>{D(!1)},100)},300)},[I,O]),0===O)?null:1===O?"podcasts"===M&&L[0]?(0,o.Y)(iH,{colorString:null!=(a=null==(n=w[null!=(l=L[0].sectionId)?l:"pub"])?void 0:n.carouselColor)?a:"black",podcast:L[0],post:L[0].sectionId?null!=(s=null==C||null==(r=C.sectionPodcasts)?void 0:r[L[0].sectionId])?s:null:null!=(d=null==C?void 0:C.pubPodcast)?d:null}):"videos"===M&&b[0]?(0,o.Y)(iq,{colorString:null!=(m=null==(c=y[b[0].id])?void 0:c.carouselColor)?m:"black",post:null!=(g=null==C||null==(p=C.sectionPodcasts)?void 0:p[b[0].id])?g:null,section:b[0]}):null:(0,o.FD)(x.I1,{gap:16,children:[Y&&(0,o.Y)(es.T,{align:"center",preset:"st2",children:"podcasts"===M?"Listen to Our Latest":"Scroll Through Our Shows"}),(0,o.FD)(x.I1,{className:"container-opjHc4",children:[!Y&&(0,o.Y)("div",{className:iR,role:"button",onClick:H,children:(0,o.Y)(iF.A,{size:32,strokeWidth:1.5})}),(0,o.Y)(x.Ye,{className:"track-bJrNCJ",style:{transform:"translateX(calc(".concat(Y?32+64*I:80+160*I,"px - ").concat(100*I,"% + ").concat(T,"px))"),transition:S||0!==T?"none":Y?"transform 0.15s ease-out":"transform 0.3s ease-in-out"},onTouchEnd:Y?()=>{if(null===A.current||null===N.current||null===E.current||null===B.current)return void P(0);let e=N.current-A.current;Math.abs(e)>Math.abs(B.current-E.current)&&Math.abs(e)>50&&(e>0?H():q()),P(0)}:void 0,onTouchMove:Y?e=>{var t,i,n,r;if(N.current=null!=(n=null==(t=e.touches[0])?void 0:t.clientX)?n:null,B.current=null!=(r=null==(i=e.touches[0])?void 0:i.clientY)?r:null,null!==A.current&&null!==E.current&&null!==N.current&&null!==B.current){let t=N.current-A.current;Math.abs(t)>Math.abs(B.current-E.current)&&(e.preventDefault(),P(t))}}:void 0,onTouchStart:Y?e=>{var t,i,n,r;A.current=null!=(n=null==(t=e.touches[0])?void 0:t.clientX)?n:null,E.current=null!=(r=null==(i=e.touches[0])?void 0:i.clientY)?r:null,N.current=null,B.current=null,P(0)}:void 0,children:"podcasts"===M?z.map(e=>{var t,i,n,r,l,a;return(0,o.Y)("div",{className:iM,children:(0,o.Y)(iH,{colorString:null!=(r=null==(t=w[null!=(n=e.sectionId)?n:-1])?void 0:t.carouselColor)?r:"black",podcast:e,post:e.sectionId?null!=(l=null==C||null==(i=C.sectionPodcasts)?void 0:i[e.sectionId])?l:null:null!=(a=null==C?void 0:C.pubPodcast)?a:null})})}):U.map(e=>{var t,i,n,r;return(0,o.Y)("div",{className:iM,children:(0,o.Y)(iq,{colorString:null!=(n=null==(t=y[e.id])?void 0:t.carouselColor)?n:"black",post:null!=(r=null==C||null==(i=C.sectionPodcasts)?void 0:i[e.id])?r:null,section:e})})})}),!Y&&(0,o.Y)("div",{className:iR,role:"button",onClick:q,children:(0,o.Y)(iT.A,{size:32,strokeWidth:1.5})})]})]})},iq=e=>{var t;let{colorString:i,post:n,section:r}=e,{pub:l}=(0,eS.np)(),{isMobile:a}=(0,h.sM)(),s=(0,R.Dor)(l,{section:r}),d=null!=(t=iE.Q[i])?t:iE.Q.black,c=d.hex;return(0,o.Y)(x.I1,{style:{backgroundColor:c,height:"100%"},children:a?(0,o.Y)(x.I1,{alignItems:"center",className:"videoPanelContentMobile-r5D1RZ",paddingX:16,paddingY:24,children:(0,o.Y)(iK,{image:n&&(0,o.Y)(iB.D,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:n}),isInverted:d.invertTextColors,post:n,sectionName:r.name,sectionOrPodcastUrl:s})}):(0,o.FD)(x.Ye,{alignItems:"center",className:"videoPanelContentDesktop-ecA07Z",paddingX:64,paddingY:32,children:[(0,o.Y)(iW,{isInverted:d.invertTextColors,isVideo:!0,post:n,sectionTitle:r.name,sectionUrl:s}),(0,o.Y)(x.I1,{flex:"grow",paddingRight:8,children:n&&(0,o.Y)(iB.D,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:n})})]})})},iH=e=>{var t,i,n;let{colorString:r,podcast:l,post:a}=e,{isMobile:s}=(0,h.sM)(),{pub:d}=(0,eS.np)(),c=(0,eg.t6y)({pub:d,section:l.sectionId&&null!=(n=d.sections.find(e=>e.id===l.sectionId))?n:null}),u=null==(t=iE.Q[r])?void 0:t.hex,p=null==(i=iE.Q[r])?void 0:i.invertTextColors;return(0,o.Y)(x.I1,{style:{backgroundColor:u,height:"100%"},children:s?(0,o.Y)(x.I1,{alignItems:"center",className:"podcastPanelContentMobile-En_Ak9",paddingX:16,paddingY:24,children:(0,o.Y)(iK,{image:l.artUrl?(0,o.Y)(iP.o,{className:iz,maxWidth:360,src:l.artUrl}):null,isInverted:p,post:a,sectionName:l.podcastTitle,sectionOrPodcastUrl:c})}):(0,o.FD)(x.Ye,{alignItems:"center",className:"podcastPanelContentDesktop-NIL93C",gap:40,justifyContent:"center",paddingX:64,paddingY:32,children:[l.artUrl&&(0,o.Y)(iP.o,{className:iz,maxWidth:300,src:l.artUrl}),(0,o.Y)(iW,{isInverted:p,isVideo:!1,post:a,sectionTitle:l.podcastTitle,sectionUrl:c})]})})},iW=e=>{let{isInverted:t,isVideo:i,post:n,sectionTitle:r,sectionUrl:l}=e,a=t?"white":"primary";return(0,o.FD)(x.I1,{gap:24,paddingLeft:8,style:{width:426},children:[(0,o.Y)(x.I1,{paddingBottom:8,style:{borderBottom:"1px solid ".concat(t?"white":"var(--color-fg-primary-themed)")},children:(0,o.Y)(es.T,{color:a,preset:"h6-serif",children:r})}),(0,o.FD)(x.I1,{gap:24,children:[n&&(0,o.FD)(x.I1,{gap:12,children:[(0,o.Y)(es.T,{clamp:2,color:a,preset:"h6-sans",children:n.title}),(0,o.Y)(es.T,{clamp:3,color:a,preset:"d3-serif",children:n.description})]}),(0,o.FD)(x.Ye,{alignItems:"center",gap:16,children:[n&&(0,o.Y)(es.T,{as:"a",href:n.canonical_url,preset:"detail-large",children:(0,o.Y)(x.Ye,{className:iL,padding:16,children:i?"Watch now":"Listen now"})}),(0,o.Y)(es.T,{as:"a",className:iO,color:a,href:l,preset:"detail-large",children:"View all episodes"})]})]})]})},iK=e=>{let{image:t,isInverted:i,post:n,sectionName:r,sectionOrPodcastUrl:l}=e,a=i?"white":"primary";return(0,o.FD)(x.I1,{alignItems:"center",gap:16,children:[(0,o.Y)(es.T,{color:a,preset:"h6-serif",children:r}),(0,o.FD)(x.I1,{gap:32,children:[n&&(0,o.FD)(x.I1,{alignItems:"center",gap:28,children:[t,(0,o.FD)(x.I1,{gap:8,children:[(0,o.Y)(es.T,{align:"center",clamp:2,color:a,preset:"h4-sans-condensed",children:n.title}),(0,o.Y)(es.T,{align:"center",clamp:3,color:a,preset:"d3-serif",children:n.description})]})]}),(0,o.FD)(x.I1,{alignItems:"center",gap:16,children:[n&&(0,o.Y)(es.T,{as:"a",href:n.canonical_url,preset:"detail-large",children:(0,o.Y)(x.Ye,{className:iL,padding:16,children:"Watch now"})}),(0,o.Y)(es.T,{as:"a",className:iO,color:a,href:l,preset:"detail-large",children:"View all episodes"})]})]})]})},iG="miniPost-O80hP6",iV=e=>{let{posts:t}=e,{latestPostFromSections:i}=(0,u.useContext)(F),{isMobile:n}=(0,h.sM)(),{pub:r}=(0,eS.np)(),l=(0,e6.JQ)({pub:r}),a=s()(l.map(e=>null==i?void 0:i[e]));return n?(0,o.Y)(ij,{posts:t,sectionPosts:a}):(0,o.FD)("div",{className:"container-YOdLMp",children:[(0,o.FD)(x.Ye,{className:"podcastEpisodeContainer-nd115M",gap:20,children:[t[0]&&(0,o.Y)(ef.R,{post:t[0],variant:"content-block-episode"}),(0,o.Y)(x.I1,{children:(0,o.Y)(eC.A,{gap:24,children:a.map(e=>(0,o.Y)(ef.R,{hideUfi:!0,post:e,showStar:!0,variant:"mini"}))})})]}),(0,o.FD)("div",{className:"plusThreeContainer-VOEUMx",children:[t[1]&&(0,o.Y)(ef.R,{post:t[1],titlePreset:"h6-sans",variant:"content-block-listing"}),(0,o.FD)(x.Ye,{gap:40,children:[t[2]&&(0,o.Y)("div",{className:iG,children:(0,o.Y)(ef.R,{post:t[2],showDescription:!0,variant:"mini"})}),t[3]&&(0,o.Y)("div",{className:iG,children:(0,o.Y)(ef.R,{post:t[3],showDescription:!0,variant:"mini"})})]})]})]})},ij=e=>{let{posts:t,sectionPosts:i}=e;return(0,o.FD)(x.I1,{gap:32,children:[t[0]&&(0,o.Y)(ef.R,{post:t[0],variant:"content-block-episode"}),(0,o.Y)(eC.A,{gap:24,includeBottomDivider:!0,includeTopDivider:!0,children:i.map(e=>(0,o.Y)(ef.R,{post:e,showStar:!0,variant:"mini"}))}),t[1]&&(0,o.Y)(ef.R,{post:t[1],variant:"content-block-listing"}),(0,o.FD)(x.Ye,{gap:24,children:[t[2]&&(0,o.Y)(x.Ye,{flex:"grow",children:(0,o.Y)(ef.R,{post:t[2],variant:"mini"})}),t[3]&&(0,o.Y)(x.Ye,{flex:"grow",children:(0,o.Y)(ef.R,{post:t[3],variant:"mini"})})]})]})},iX=e=>{let{posts:t}=e;return t[0]?(0,o.Y)(x.I1,{className:"container-nYRgUV",children:(0,o.Y)(ef.R,{post:t[0],variant:"content-block-single-large"})}):null};var iJ=i(53971);let iZ=()=>{let{isMobile:e,isTablet:t}=(0,h.sM)(),{freeSignup:i,freeSignupEmail:n}=(0,u.useContext)(F),{pub:r,user:l}=(0,eS.np)();return(0,o.FD)(x.I1,{alignItems:"center",className:"container-liQ2Vy",gap:24,justifyContent:"center",paddingX:t?16:40,style:{backgroundImage:"url(".concat((0,ey.dJ)("".concat((0,eb.Ew)(),"/img/thefp/fp-subscribe-block-bg.jpg"),304),")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundBlendMode:"multiply"},children:[(0,o.Y)(es.T,{align:"center",color:"white",preset:e?"lg-preview-byline":"h6-sans",children:(null==l?void 0:l.is_subscribed)?(0,o.FD)(o.FK,{children:["Share ",(0,o.Y)("em",{children:"The Free Press"})," with other free thinkers."]}):(null==l?void 0:l.is_free_subscribed)?"Become a Paid Subscriber to access our comments section, special columns, and more.":(0,o.FD)(o.FK,{children:["Sign up for your daily window into the world of ",(0,o.Y)("em",{children:"The Free Press"}),"and our take on the world at large"]})}),(0,o.Y)("div",{children:(null==l?void 0:l.is_subscribed)?(0,o.Y)(eo.v,{href:(0,eg.eV6)(r,{utm_source:L.VU.subscribeContentBlock,gift:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Send Gift"}):(null==l?void 0:l.is_free_subscribed)?(0,o.Y)(eo.v,{href:(0,eg.eV6)(r,{utm_source:L.VU.freePressPromoBox,simple:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Upgrade"}):(0,o.Y)(_.A,{align:"left",expectTruncation:!0,freeSignup:i,freeSignupEmail:n,isStatic:!1,pub:r,source:"the-fp-subscribe-block",user:l})})]})};var iQ=i(7755);let i$=()=>{let{isMobile:e}=(0,h.sM)();return(0,o.FD)("div",{className:g()("container-Q2UekY",{"containerMobile-op5rRO":e}),children:[(0,o.Y)(i0,{}),(0,o.Y)(i1,{}),(0,o.Y)(iZ,{})]})},i0=()=>(0,o.Y)("a",{className:g()("promoContainer-M2SbsD","merchContainer-rvwMsY"),href:"https://shop.thefp.com/",rel:"noopener noreferrer",target:"_blank",children:(0,o.FD)(x.I1,{justifyContent:"space-between",padding:32,children:[(0,o.FD)(es.T,{color:"white",preset:"h5-serif",children:["Get (or give!) a",(0,o.Y)("br",{}),"Free Press hat,",(0,o.Y)("br",{}),"tote, or TGIF socks."]}),(0,o.FD)(x.Ye,{alignItems:"center",gap:8,children:[(0,o.Y)(es.T,{color:"white",preset:"detail-large",children:"Shop Merch"}),(0,o.Y)(iJ.A,{size:16,stroke:"white"})]}),(0,o.Y)("img",{alt:"Socks",className:"merchSocks-lut01J",src:(0,ey.dJ)("".concat((0,eb.Ew)(),"/img/thefp/thefp-socks.png"))})]})}),i1=()=>{var e,t,i;let{isMobile:n,isDesktop:r}=(0,h.sM)(),{latestPodcastPosts:l}=(0,u.useContext)(F),{pub:a}=(0,eS.np)(),s=null!=(e=a.sections.find(e=>"honestly"===e.slug))?e:null,{artUrl:d}=(0,iQ.ed)({pub:a,section:s}),c=(0,eg.t6y)({pub:a,section:s}),p=null!=(i=null==l?void 0:l.sectionPodcasts[null!=(t=null==s?void 0:s.id)?t:""])?i:null,m=(0,eg.wu9)(a,p,{noBase:!0});return(0,o.FD)(x.Ye,{children:[d&&(0,o.Y)("a",{href:c,children:(0,o.Y)(iP.o,{className:"podcastImage-tqEnIM",loading:"lazy",maxWidth:440,src:d})}),(0,o.FD)(x.I1,{as:"a",flex:"grow",gap:r?40:16,href:null!=m?m:c,justifyContent:"center",paddingX:16,style:{backgroundColor:"#fa3409",borderLeft:"1px solid var(--web_bg_color)",textDecoration:"none"},children:[p&&(0,o.Y)(es.T,{clamp:n?4:5,color:"white",preset:"h6-serif",children:p.title}),(0,o.FD)(x.Ye,{alignItems:"center",gap:8,children:[(0,o.Y)(es.T,{color:"white",preset:"detail-large",children:r?"Listen now":"Listen"}),(0,o.Y)(iJ.A,{size:16,stroke:"white"})]})]})]})},i2=e=>{var t,i,n;let{contentBlock:r,posts:l,pub:a,showEmptyState:s,showSearch:d=!1,showSeeAllLink:c,title:u,viewAllUrl:p}=e,{breakpoint:m}=(0,h.sM)(),g=(0,e6.lu)({pub:a});if("list"===r.block_type)return(0,o.Y)(iy,{numPosts:null!=(t=r.num_posts)?t:e$.AD.posts.default,posts:l,pub:a,showEmptyState:s,showSearch:d,showSeeAllLink:c,sidebarLeft:r.secondary_sidebar_modules,sidebarRight:r.primary_sidebar_modules,title:u,viewAllUrl:p});if("grid"===r.block_type){let e=(0,e$.VK)({contentBlock:r,breakpoint:m});return(0,o.Y)(ib,{numPosts:e,posts:l,pub:a,showEmptyState:s,showSearch:d,showSeeAllLink:c,sidebarLeft:r.secondary_sidebar_modules,sidebarRight:r.primary_sidebar_modules,title:u,viewAllUrl:p})}if("feature"===r.block_type){let e=(null==(i=r.attrs.feature)?void 0:i.title)||u,t=null==(n=r.attrs.feature)?void 0:n.variant;return g?(0,o.Y)(iI.$,{posts:l,title:e,variant:t,viewAllUrl:p}):(0,o.Y)(t0,{posts:l,pub:a,showEmptyState:s,showSearch:d,title:e,variant:t,viewAllUrl:p})}return"subscribe"===r.block_type?(0,o.Y)(iw,{contentBlock:r}):"podcast_plus_three"===r.block_type?(0,o.Y)(iV,{posts:l}):"subscribe_plus_five"===r.block_type?(0,o.Y)(i$,{}):"single_post"===r.block_type?(0,o.Y)(iX,{posts:l}):"half_feature"===r.block_type?(0,o.Y)(iS,{posts:l,title:u,viewAllUrl:p}):"media_carousel"===r.block_type?(0,o.Y)(iU,{contentBlock:r}):null},i4=()=>(0,o.Y)(eq.az,{paddingBottom:120,children:(0,o.Y)(t2.I,{leftContent:(0,o.Y)("div",{children:"\xa0"}),mainContent:(0,o.Y)(tN.t,{postCount:4,variant:"list"}),rightContent:(0,o.Y)("div",{children:"\xa0"})})});var i7=i(77007),i6=i(10238),i8=i(81929),i3=i(91916);let i9=e=>{let{insertAfterIndex:t,variant:i="default"}=e,{iString:n}=(0,C.GO)(),{isPreview:r,showOverlay:l,requestBlockPicker:a}=(0,i3.$E)(),s=(0,u.useRef)(null),d="none"===i?null:"space"===i?(0,o.Y)(x.Ye,{paddingBottom:32}):(0,o.Y)(t6.r,{});return r?(0,o.FD)("div",{ref:s,className:"container-ONtPSl",children:[(0,o.Y)("div",{className:"content-z4c_Vf",children:d}),l&&(0,o.Y)("div",{className:"overlay-EwVpd6",style:{zIndex:i6.AG},onClick:()=>{if(!s.current)return;let e=s.current.getBoundingClientRect();a({insertAfterIndex:t,yPercent:(e.top+e.height/2)/window.innerHeight})},children:(0,o.Y)(i8.vw,{className:"tag-xNo4_w",priority:"primary",theme:"substack",children:n("Click to add block")})})]}):"none"===i?null:(0,o.Y)(o.FK,{children:d})},i5="contentBlockEditButton-g_2FSh",ne=["media_carousel","subscribe","subscribe_plus_five"],nt=e=>{var t,n;let{contentBlocks:r,postsBySectionId:l,postsByTagId:a,postsForContentBlockPins:s,recentPosts:d,showEmptyStates:c}=e,{isMobile:p,breakpoint:m}=(0,h.sM)(),{pub:v,user:Y}=(0,eS.np)(),f=(0,e6.S2)({pub:v}),b=(0,e6.lu)({pub:v}),{canRender:y}=(e=>{let{pub:t,user:i}=e,{freeSignup:n}=(0,u.useContext)(F),r=(0,eE.Pu)(),l=(0,ec.mJ)();return{canRender:e=>{let{contentBlock:o}=e,{cta:a,message:s}=iC({contentBlock:o,freeSignup:n,pub:t,pubSettings:r,siteConfigs:l,user:i});return!!(a||s)}}})({pub:v,user:Y}),[_,w]=(0,u.useState)(null),C=!1,I=r.filter(e=>"latest"===e.post_source).length>1,k=r.filter(e=>"subscribe"!==e.block_type||y({contentBlock:e})),S=k.findIndex(e=>e.id===_),D=-1!==S?k[S]:null,T=(0,e$.cD)({contentBlocks:k,breakpoint:m,isTheFP:b,recentPosts:d,postsBySectionId:l,postsByTagId:a,postsForContentBlockPins:s});if(!k.length&&c)return(0,o.Y)(i4,{});let A=nn({contentBlocks:k}),E=b||f,N=e=>{if(E)return"none";let t=k[e],i=k[e+1];return(null==t?void 0:t.block_type)==="subscribe"||(null==i?void 0:i.block_type)==="subscribe"?"space":"default"};return(0,o.FD)(x.I1,{paddingBottom:40,children:[k.length>0&&(0,o.Y)(i9,{insertAfterIndex:-1,variant:N(-1)}),A.map(e=>{let{groupType:t,contentBlocks:i}=e;return(0,o.Y)("div",{className:g()({"halfWidthContainer-OZxoCR":"half-width"===t&&!p,"pillarContentBlocks-pkmgrG":f}),children:i.map(e=>{var t,i,n;let r=null!=(n=null==(t=T[e.id])?void 0:t.posts)?n:[],{title:l,viewAllUrl:a}=ni({contentBlock:e,hideRecentPostsTitle:I&&!b,pub:v}),s=!1,d=k.findIndex(t=>t.id===e.id),h=k.slice(d+1),m="latest"===e.post_source&&h.every(e=>"latest"!==e.post_source);return"latest"!==e.post_source||C||(s=!0,C=!0),(0,o.FD)(u.Fragment,{children:[(0,o.Y)(e3.WO,{pub:v,showPubPins:"latest"===e.post_source,showSectionPins:!1,children:(0,o.FD)(x.I1,{className:"contentBlockContainer-BNIIae",id:"block-".concat(e.id),paddingBottom:b?p?64:80:0,style:{scrollMarginTop:48},children:[!ne.includes(e.block_type)&&b&&(null==Y?void 0:Y.is_admin)&&(0,o.Y)("div",{className:i5,children:(0,o.Y)(P.K0,{priority:"primary-mono",size:"sm",onClick:()=>{w(e.id)},children:(0,o.Y)(ei.A,{size:16})})}),"media_carousel"===e.block_type&&(null==Y?void 0:Y.is_admin)&&(0,o.Y)("div",{className:i5,children:(0,o.Y)(tj.m,{pub:v,sectionType:(null==(i=e.attrs.media_carousel)?void 0:i.variant)==="videos"?"video":"podcast",user:Y})}),(0,o.Y)(i7.k,{previewBlockId:{type:"content-block",contentBlockId:e.id},children:(0,o.Y)(i2,{contentBlock:e,posts:r,pub:v,showEmptyState:c,showSearch:s,showSeeAllLink:m,title:l,viewAllUrl:a})})]})}),d<k.length-1&&(0,o.Y)(i9,{insertAfterIndex:d,variant:N(d)})]},e.id)})})}),k.length>0&&(0,o.Y)(i9,{insertAfterIndex:k.length-1,variant:N(k.length-1)}),D&&b&&(0,o.Y)(eD.Ic,{containerId:"block-".concat(D.id),contentBlock:D,module:"@/frontend/components/thefp/EditPinsModal",pinnedPosts:s,posts:null!=(n=null==(t=T[D.id])?void 0:t.postsWithoutPins)?n:[],renderPreview:e=>{let{posts:t}=e,{title:i}=ni({contentBlock:D,hideRecentPostsTitle:!1,pub:v});return(0,o.Y)(i2,{contentBlock:D,posts:t,pub:v,showEmptyState:c,showSearch:!1,showSeeAllLink:!1,title:i})},resolve:e=>e.EditContentBlockPinsModal,whileLoading:(0,o.Y)("div",{}),onClose:()=>{w(null)},onRequest:()=>i.e("937").then(i.bind(i,93936))})]})},ni=e=>{let t,{contentBlock:i,hideRecentPostsTitle:n,pub:r}=e,l="";if("latest"===i.post_source)l=n?"":"Recent posts",t=(0,eg.Xt9)(r);else if("section"===i.post_source&&i.section){let e=i.section;l=(null==e?void 0:e.name)||"",t=e?(0,R.Dor)(r,{section:e}):null}else if("tag"===i.post_source&&i.postTag){let e=i.postTag;l=(null==e?void 0:e.name)||"",t=e?(0,R.ii9)(r,e):null}return{title:l,viewAllUrl:t}},nn=e=>{let{contentBlocks:t}=e,i=[],n=[],r="full-width";for(let e of t)"half_feature"===e.block_type?"full-width"===r&&(n.length&&(i.push({groupType:"full-width",contentBlocks:n}),n=[]),r="half-width"):"half-width"===r&&(n.length&&(i.push({groupType:"half-width",contentBlocks:n}),n=[]),r="full-width"),n.push(e);return n.length&&i.push({groupType:r,contentBlocks:n}),i};var nr=i(70557);let nl=e=>{let{posts:t,pub:i,user:n,utm:r}=e,{isMobile:l}=(0,h.sM)();if(!t.length||!t[0])return null;let a=t[0],s=a.section_id?i.sections.find(e=>e.id===a.section_id):void 0,d=(0,i_.rI)({post:a,section:null!=s?s:null,pub:i});return(0,o.Y)(x.I1,{cursor:"pointer",paddingX:16*!!l,onClick:()=>{let e=a.canonical_url;"video"===a.type?e=(0,eg.oRR)(a.canonical_url,{autoPlay:!0}):r&&(e=(0,eg.yRP)(a.canonical_url,{utm:r})),(0,D.V2)(e)},children:(0,o.Y)(nr.X,{columns:4,highlightPost:!0,isPodcast:!d,post:t[0],pub:i,section:s,user:null!=n?n:null})})};var no=i(24782);let na=e=>{let{columns:t=4,posts:i,pub:n}=e,{isMobile:r}=(0,h.sM)();return r?null:(0,o.Y)(ek.P,{variant:3===t?"three-column-width":"full-width",children:(0,o.FD)(x.I1,{gap:12,children:[(0,o.Y)(e8,{pub:n}),(0,o.Y)(eQ.m,{posts:i,variant:3===t?"three-column-mini-row":"mini-row"})]})})};var ns=i(21919),nd=i(73443),nc=i(92019);let nu=e=>{let{pub:t,user:i}=e,[n,r]=(0,u.useState)(!0),{isMobile:l}=(0,h.sM)(),{changeSetting:a}=(0,I.ur)(),{refetch:s}=(0,ep.st)({pathname:"/api/v1/subscription/sections/email?utm_source=newsletters-modal",auto:!1,method:"PATCH"}),d=async()=>{await a("hasSeenOnboardingNewslettersScreen",!0),r(!1)},c=async(e,t)=>{try{let i=Object.fromEntries([...e.map(e=>[e,{setting:"individual"}]),...t.map(e=>[e,{setting:"disabled"}])]);await s({json:i}),await d()}catch(e){console.error("Failed to update newsletter preferences:",e)}};return(0,o.Y)(o.FK,{children:(0,o.FD)(ea.S,{isOpen:n,width:894,onClose:d,stretchModal:l,fullscreenMobile:!0,children:[l&&(0,o.FD)(x.Ye,{style:{width:"100%"},children:[(0,o.Y)("div",{className:nc.A.topBorder}),(0,o.Y)(ns.G,{logoOnly:!0,pub:t,user:i,activeLiveStream:null,freeSignup:!1,showCustomerSupportModeModal:!1}),(0,o.Y)(P.Nm,{className:nc.A.closeButton,onClick:d,children:(0,o.Y)(Y.A,{size:24})})]}),(0,o.Y)(nd.k,{isNewSubscriber:!1,pub:t,fullScreen:!1,onSkip:d,onSubmit:c})]})})};var np=i(13558),nh=i(44309);let nm=e=>{let{children:t}=e,{isPreview:i,showBodyButton:n,setActivePreviewBlock:r}=(0,i3.$E)(),[l,a]=(0,u.useState)(!1);return i?(0,o.FD)("div",{className:"container-wWVlBe",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[(0,o.Y)("div",{className:"iconButtonWrapper-KOpYl9",children:(0,o.Y)("div",{className:g()("iconButton-YMKM22",{"visible-uwKdVO":l&&n}),children:(0,o.Y)(nh.w,{children:(0,o.Y)(P.K0,{priority:"secondary-accent",size:"md",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),r({previewBlockId:{type:"home-body"}})},children:(0,o.Y)(np.A,{size:20})})})})}),t]}):(0,o.Y)(o.FK,{children:t})};var ng=i(16291);let nv="container-LSZllu",nY="container--empty-D_rgwk",nf=(0,u.memo)(e=>{var t,i,a,d,c,p,m;let{activeLiveStream:v,bodyPostGroups:Y,freeSignup:b,freeSignupEmail:_,homepageData:w,isPreview:C,pub:S,showSiteMap:T,theme:P,user:A,utm:E,giftCard:N,abTestingId:B}=e,R=(0,l._)(e,["activeLiveStream","bodyPostGroups","freeSignup","freeSignupEmail","homepageData","isPreview","pub","showSiteMap","theme","user","utm","giftCard","abTestingId"]),{getConfigFor:O}=(0,ec.mJ)(),z=null!=(c=O("use_theme_editor_v2"))&&c,U=(0,u.useMemo)(()=>(0,e6.lu)({pub:S})&&w?s()(Object.values(w.contentBlockData.latestPostFromSections).map(e=>null==e?void 0:e.id)):[],[w,S]),q=(0,u.useMemo)(()=>{var e,t,i;let n=new Set([...(null!=(e=null==w?void 0:w.pinnedPosts)?e:[]).map(e=>e.id),...U]);return(null!=(t=null==w?void 0:w.pinnedPosts)?t:[]).concat((null!=(i=null==w?void 0:w.newPosts)?i:[]).filter(e=>!n.has(e.id)))},[null==w?void 0:w.newPosts,null==w?void 0:w.pinnedPosts,U]),{activeLiveStream:H}=(0,eN.Y)({pub:S,user:A,preloadedActiveLiveStream:v}),{breakpoint:W,isMobile:K,isDesktop:G}=(0,h.sM)(),{getSettingFor:V}=(0,eE.Pu)(),j=(0,tq.ensureInList)(V("post_preview_crop_gravity"),["center","auto"]),X=(0,ec.mJ)(),{open:J,modal:Z}=(0,f.El)({utm_campaign:(null==N||null==(t=N.gifter)?void 0:t.id)===S.author_id?L._9.viralGiftAppIncentiveFromPub:L._9.viralGiftAppIncentive,utm_source:L.VU.substack,giftCard:N,pub:S,abTestingId:B}),{open:Q,modal:et}=function(e){let{pub:t,abTestingId:i,startingOpen:n,giftCard:r}=e,[l,a]=(0,u.useState)(null!=n&&n),[s,d]=(0,u.useState)(r),c=(0,u.useCallback)(e=>{d(e),a(!0),(0,k.u4)(k.qY.ACCEPT_GIFT_MODAL_OPENED,{has_sender_token:!!(0,M.y)(window._preloads.original_url,"senderToken"),starting_open:n})},[]),p=(0,u.useCallback)(()=>{a(!1)},[]);return{open:c,modal:(0,o.Y)($,{isOpen:l,onClose:p,pub:t,giftCard:s,abTestingId:i})}}({pub:S,abTestingId:B,startingOpen:!!(0,M.y)("accepting_gift"),giftCard:N}),ei=(0,e6.lu)({pub:S}),en=(0,e6.S2)({pub:S}),er=en&&"magaziney"===P.home_hero,{userSettings:el}=(0,I.ur)(),eo=ei&&A&&(null==el?void 0:el.hasSeenOnboardingNewslettersScreen)!==!0;(0,u.useEffect)(()=>{(0,M.y)("accepting_gift")?((0,D.qm)("accepting_gift"),(0,D.qm)("senderToken"),Q(N)):N&&S&&(N.expired?Q(N):J())},[]);let ea=q[0],es=(0,u.useMemo)(()=>{var e;return null==w||null==(e=w.topPosts)?void 0:e.filter(e=>!ea||e.id!==ea.id)},[ea,null==w?void 0:w.topPosts]);if(!w)return(0,o.Y)(x.I1,{alignItems:"center",className:g()(nv,nY),justifyContent:"center",children:(0,o.Y)("div",{className:"more-loader"})});if(0===q.length)return(0,o.Y)(nb,{});let ed=!(null==(i=q[0])?void 0:i.cover_image),{numPostsInHero:eu,effectiveHero:ep}=ny({breakpoint:W,firstPostMissingImage:ed,heroVariant:P.home_hero,numTotalPosts:q.length,pub:S,replaceTopPostsWithLatestInHero:er}),eh="podcast"===ep,em=["newspaper","podcast"].includes(ep)&&"list"===P.home_posts,eg=0===eu||q.length>=eu||"custom"===P.home_posts,ev=eg?q.slice(eu):q,ef=!!(eg&&P.home_show_top_posts&&es&&"magaziney"!==ep&&!K),eb=eg&&q.length>eu&&"custom"!==P.home_posts;["feature-media","podcast"].includes(ep)&&!ef&&(eb=!1),(ei||en)&&(eb=!1);let ey=!1,e_=!1;ei&&(ey=null!=(p=S.showIntroModule)&&p,e_=null!=(m=S.isPortraitLayout)&&m);let ew=!!(z&&(null==(a=S.theme)?void 0:a.custom_footer)&&"default"!==S.theme.custom_footer.layout);return(0,o.Y)(eS.XL,{authorPagesEnabled:!!X.getConfigFor("enable_author_pages"),cropGravity:j,highlightByline:!!X.getConfigFor("post_preview_highlight_byline"),pub:S,showSectionOrTag:(0,e6.S2)({pub:S}),user:A,utm:E,children:(0,o.Y)(F.Provider,{value:{contributors:w.contentBlockData.contributors,freeSignup:b,freeSignupEmail:_,homepageLinks:w.homepageLinks,latestPodcastPosts:w.contentBlockData.latestPodcastPosts,latestPostByContributorId:w.contentBlockData.latestPostByContributorId,latestPostFromSections:w.contentBlockData.latestPostFromSections,numRecommendations:w.numRecommendations,recommendations:w.recommendations,topPosts:w.topPosts},children:(0,o.FD)(y.DH,{children:[!ei&&(null==H?void 0:H.liveStream.id)&&(0,ng.A)(H.liveStream.started_streaming_at).isBefore((0,ng.A)().subtract(1,"minute"))?H.liveStreamInformation.desktopPlaybackUrl&&"autoPlay"===V("live_stream_homepage_style")?(0,o.Y)(x.I1,{alignItems:"center",paddingTop:24,children:(0,o.Y)(eq.az,{className:"liveStreamContainer-t0i18u",position:"relative",children:(0,o.Y)(ee.q,{activeLiveStream:H,fromPub:!0})})}):(0,o.Y)(no.A,{activeLiveStream:H}):null,eo&&(0,o.Y)(nu,{pub:S,user:A}),et,Z,(0,o.Y)(nm,{children:(0,o.FD)(x.I1,{className:nv,paddingTop:eh||ei?0:16,children:[(0,o.Y)(x.I1,{paddingTop:ei?G?56:28:!eg&&K?24:0,children:(0,o.Y)(i7.k,{disabled:"feature-media"===ep&&!(ef&&es),previewBlockId:{type:"hero"},children:(0,o.FD)(x.I1,{children:[eg&&(ei?(0,o.Y)(e3.WO,{pub:S,showPubPins:!0,showSectionPins:!1,children:(0,o.Y)(eT,{isPortraitLayout:e_,posts:q.slice(0,eu),showIntroModule:ey})}):"feature-media"===ep?(0,o.Y)(x.I1,{paddingBottom:K||ef?24:40,paddingTop:K?16:8,children:(0,o.Y)(i7.k,{disabled:!!(ef&&es),previewBlockId:{type:"hero"},children:(0,o.Y)(nl,{posts:q,pub:S,user:A,utm:E})})}):(0,o.Y)(e3.WO,{pub:S,showPubPins:!0,showSectionPins:!1,children:(0,o.Y)(ts,{bodyVariant:P.home_posts,firstPostMissingImage:ed,hasMiniPostsRowUnderneath:ef,heroAlignment:P.home_hero_alignment,isMobile:K,posts:q.slice(0,eu),replaceTopPostsWithLatest:er,showPodcastLinks:P.home_hero_show_podcast_links,topPosts:es,variant:ep})})),ef&&es&&!ei&&(0,o.FD)(o.FK,{children:[!["feature-media","podcast"].includes(ep)&&(0,o.Y)(t6.r,{numColumns:em?3:4,paddingBottom:16,paddingTop:16}),(0,o.Y)(na,{columns:em?3:4,posts:es,pub:S})]})]})})}),(0,o.FD)(x.I1,{className:"bodyContainer-GD8kK4",id:"modular-home-posts",children:[eb&&(0,o.Y)(t6.r,{numColumns:em?3:4}),(0,o.FD)("div",{id:"home-body",style:{scrollMarginTop:48,paddingTop:en?K?40:64:void 0},children:["custom"!==P.home_posts&&(0,o.Y)(tV,(0,r._)((0,n._)({},R),{bodyPostGroups:Y,hasCustomFooter:ew,hasEmptyGroupOptions:e.hasEmptyGroupOptions,hideImagesFromList:P.hide_images_from_list,posts:ev,postsByGroupId:w.postsByGroupId,pub:S,showSiteMap:T,source:"".concat(P.home_hero,"-").concat(P.home_posts,"-home"),user:A,variant:P.home_posts})),"custom"===P.home_posts&&(0,o.Y)(nt,{contentBlocks:w.contentBlockData.contentBlocks,postsBySectionId:w.contentBlockData.postsBySectionId,postsByTagId:w.contentBlockData.postsByTagId,postsForContentBlockPins:w.contentBlockData.postsForContentBlockPins,recentPosts:ev,showEmptyStates:C})]})]})]})}),ew&&(null==(d=S.theme)?void 0:d.custom_footer)&&(0,o.Y)(eH,{customFooterTheme:S.theme.custom_footer,isPreview:C,pub:S,socialMediaLinks:S.theme.social_media_links}),ei&&(0,o.Y)(eY,{})]})})})}),nb=()=>{let{iString:e}=(0,C.GO)();return(0,o.Y)(x.I1,{alignItems:"center",className:g()(nv,nY),justifyContent:"center",children:e("Coming Soon")})},ny=e=>{let{breakpoint:t,heroVariant:i,firstPostMissingImage:n,numTotalPosts:r,pub:l,replaceTopPostsWithLatestInHero:o}=e,a=e$.O[i].postCount[t],s=i;return n&&["magaziney","magazine-5"].includes(i)&&["desktop","tablet"].includes(t)&&(a+=2),o&&"magaziney"===i&&(a+="tablet"===t?3:5),r<a&&(s="newspaper",a=1),(0,e6.lu)({pub:l})&&(a=11,"tablet"===t&&(a-=2)),{numPostsInHero:a,effectiveHero:s}};var n_=i(91089),nw=i(57961);let nC=e=>{var t,{blurbs:i,freeSignup:a,freeSignupEmail:d,hasEmptyGroupOptions:m,hide_intro_popup:g,homepageData:v,isPreview:Y,notify_user:f,pub:b,referralCode:y,showWelcome:_,user:w,postTags:C,launchWelcomePage:I,skipIntroPopupRender:k}=e,S=(0,l._)(e,["blurbs","freeSignup","freeSignupEmail","hasEmptyGroupOptions","hide_intro_popup","homepageData","isPreview","notify_user","pub","referralCode","showWelcome","user","postTags","launchWelcomePage","skipIntroPopupRender"]);let D=(0,h.bH)({preloadedHomepageData:v});(0,u.useEffect)(()=>{f&&"undefined"!=typeof window&&(0,p.Ay)(f)},[f]);let F=!!((null==D?void 0:D.newPosts)&&(null==D?void 0:D.newPosts.length)>0),T=(0,u.useMemo)(()=>{var e,t;return s()(null==(t=b.theme)||null==(e=t.body_post_groups)?void 0:e.map(e=>{var t,i,n,r,l;return e.tag_id?null!=(i=null!=(t=e.post_tag)?t:null==C?void 0:C.find(t=>t.id===e.tag_id))?i:null:e.section_id&&null!=(l=null!=(r=e.section)?r:null==(n=b.sections)?void 0:n.find(t=>t.id===e.section_id))?l:null}))},[C,b.sections,null==(t=b.theme)?void 0:t.body_post_groups]);return b.theme?(0,o.FD)("div",{className:"home-page home-page--modular",children:[(0,o.Y)(n_.PageMetaData,{isHomepage:!0,pub:b}),(0,o.Y)(nf,(0,r._)((0,n._)({},c()(S,"matches")),{bodyPostGroups:T,freeSignup:a,freeSignupEmail:d,hasEmptyGroupOptions:m,homepageData:D,isPreview:!!Y,pub:b,showSiteMap:F,theme:b.theme,user:w})),k?null:(0,o.Y)(nw.l,{blurbs:i,freeSignup:a,freeSignupEmail:d,hide_intro_popup:g,launchWelcomePage:I,pub:b,referralCode:y,showWelcome:_,user:w})]}):null}},80098:function(e,t,i){i.d(t,{P:()=>s});var n=i(10201),r=i(32485),l=i.n(r),o=i(76977);let a={container:"container-k4OAt1","full-width":"full-width-zjiPxJ",fullWidth:"full-width-zjiPxJ","full-width-with-sidebar":"full-width-with-sidebar-epMpKX",fullWidthWithSidebar:"full-width-with-sidebar-epMpKX","show-below":"show-below-NE36A8",showBelow:"show-below-NE36A8","full-width-with-border-and-sidebar":"full-width-with-border-and-sidebar-aSAAEB",fullWidthWithBorderAndSidebar:"full-width-with-border-and-sidebar-aSAAEB","vertical-divider":"vertical-divider-Z42nad",verticalDivider:"vertical-divider-Z42nad","three-column-width":"three-column-width-gNtKSr",threeColumnWidth:"three-column-width-gNtKSr","three-column-width-with-sidebar":"three-column-width-with-sidebar-cRFEVE",threeColumnWidthWithSidebar:"three-column-width-with-sidebar-cRFEVE","two-column-width":"two-column-width-f6IAWT",twoColumnWidth:"two-column-width-f6IAWT","one-column-two-column":"one-column-two-column-dAuMkN",oneColumnTwoColumn:"one-column-two-column-dAuMkN","two-column-one-column-one-column":"two-column-one-column-one-column-GnEn49",twoColumnOneColumnOneColumn:"two-column-one-column-one-column-GnEn49","one-column-two-column-one-column":"one-column-two-column-one-column-g_nrA3",oneColumnTwoColumnOneColumn:"one-column-two-column-one-column-g_nrA3","one-column-one-column-two-column":"one-column-one-column-two-column-e79cH1",oneColumnOneColumnTwoColumn:"one-column-one-column-two-column-e79cH1","one-column-three-columns":"one-column-three-columns-lf36oo",oneColumnThreeColumns:"one-column-three-columns-lf36oo","three-column-one-column-one-column":"three-column-one-column-one-column-MC1z4c",threeColumnOneColumnOneColumn:"three-column-one-column-one-column-MC1z4c"},s=e=>{let{children:t,hideVerticalDividers:i,showContentBelowOnMobile:r,stretchVertically:s,variant:d}=e,c=i?void 0:"detail-themed";return"none"===d?(0,n.Y)("div",{children:t}):(0,n.Y)("div",{style:s?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,n.FD)("div",{className:l()(a.container,a[d],{[a["show-below"]]:r}),style:s?{width:"100%"}:void 0,children:[t,"full-width-with-border-and-sidebar"===d&&(0,n.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]}),["two-column-one-column-one-column","one-column-two-column-one-column","one-column-one-column-two-column","three-column-one-column-one-column"].includes(d)&&(0,n.FD)(n.FK,{children:[(0,n.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]}),(0,n.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]})]}),"one-column-two-column"===d&&(0,n.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]})]})})}},9757:function(e,t,i){i.d(t,{I:()=>c});var n=i(10201),r=i(32485),l=i.n(r),o=i(68410),a=i(89490);let s="column-O67nhJ",d="column1-pd0Ws0",c=e=>{let{leftContent:t,mainContent:i,rightContent:r,stretchToFullWidth:c}=e,{isMobile:u,isTablet:p,isDesktop:h}=(0,o.sM)(),m=2;return c&&(h?m=4-!!t-!!r:p&&(m=3-(t||r?1:0))),u&&(m=1),(0,n.Y)("div",{className:"outerContainer-p1amnX",children:(0,n.FD)("div",{className:"container-uYF5Qm",children:[t&&(0,n.Y)(a.az,{className:l()(s,d),paddingTop:8,children:t}),(0,n.Y)(a.az,{className:l()(s,{"column2-jVKqxY":2===m,"column3-Brgr2S":3===m,"column4-Z0B2N_":4===m}),children:i}),r&&(0,n.Y)(a.az,{className:l()(s,d),paddingTop:8,children:r})]})})}},24782:function(e,t,i){i.d(t,{A:()=>s});var n=i(10201),r=i(76977),l=i(63136),o=i(49807),a=i(57324);let s=e=>{let{activeLiveStream:t}=e;return(0,n.Y)(r.Ye,{className:"liveStreamBanner-Petbnm",justifyContent:"center",children:(0,n.Y)("a",{href:(0,o.Xrv)({liveStreamId:t.liveStream.id,utm_source:a.VU.web,utm_campaign:a._9.liveStreamPubBanner}),style:{textDecoration:"none"},children:(0,n.FD)(r.Ye,{alignItems:"center",gap:8,padding:12,paddingTop:{desktop:12,mobile:16},children:[(0,n.Y)("div",{className:"liveBadge-f3ITqf",children:(0,n.Y)(l.EY.B5,{color:"white",translated:!0,weight:"semibold",children:"Live"})}),(0,n.FD)(l.EY.B3,{color:"white",translated:!0,weight:"semibold",children:[(0,n.Y)("span",{style:{textTransform:"uppercase"},children:"Live Video"}),": ",I18N.p(t.liveStream.title)]})]})})})}},68265:function(e,t,i){i.d(t,{v:()=>a});var n=i(10201),r=i(76977);let l=e=>{let{children:t,paddingTop:i,paddingBottom:l}=e;return(0,n.Y)("div",{className:"container-FJSDzM",children:(0,n.Y)(r.I1,{paddingBottom:l,paddingTop:i,paddingX:16,children:t})})};var o=i(68410);let a=e=>{let{children:t}=e,{isMobile:i}=(0,o.sM)();return(0,n.Y)(r.I1,{bg:"secondary",className:"container-_aNEvf",paddingY:i?32:64,children:(0,n.Y)(l,{children:t})})}},64648:function(e,t,i){i.d(t,{S:()=>p});var n=i(10201),r=i(72880),l=i(84236),o=i(80098),a=i(68265),s=i(38501),d=i(89490),c=i(76977),u=i(63136);let p=e=>{let{columns:t,description:i,imageUrl:p,name:h,post:m,pub:g,section:v,showPodcastLinks:Y,user:f}=e,b=(0,d.iF)({radius:"lg",shadow:"xl"});return(0,n.Y)(a.v,{children:(0,n.Y)(o.P,{variant:4===t?"full-width-with-sidebar":"three-column-width",children:(0,n.FD)(c.Ye,{alignItems:"center",gap:40,paddingX:8,children:[p&&(0,n.Y)(r.o,{className:b,imageIsFixedWidth:!0,maxWidth:250,src:p,useRetinaSizing:!0}),(0,n.FD)(c.I1,{gap:16,children:[(0,n.FD)(c.I1,{gap:8,children:[(0,n.Y)(u.EY.H2,{color:"pub-primary-text",font:"pub-headings",children:h}),(0,n.Y)(u.EY.B2,{color:"pub-secondary-text",children:i}),(0,n.Y)(l.pJ,{align:"right",post:m,pub:g,section:v})]}),Y&&(0,n.Y)(s.D,{post:m,pub:g,section:v,user:f})]})]})})})}},64232:function(e,t,i){i.d(t,{i:()=>h});var n=i(10201),r=i(72880),l=i(84236),o=i(68410),a=i(80098),s=i(68265),d=i(38501),c=i(89490),u=i(76977),p=i(63136);let h=e=>{let{description:t,imageUrl:i,name:h,post:m,pub:g,section:v,showPodcastLinks:Y,user:f}=e,{isMobile:b}=(0,o.sM)(),y=(0,c.iF)({radius:"sm",shadow:"lg"});return(0,n.Y)(s.v,{children:(0,n.Y)(a.P,{variant:"two-column-width",children:(0,n.FD)(u.I1,{alignItems:"center",gap:24,paddingX:8*!b,children:[i&&(0,n.Y)(r.o,{className:y,imageIsFixedWidth:!0,maxWidth:100,src:i,useRetinaSizing:!0}),(0,n.FD)(u.I1,{gap:8,children:[(0,n.Y)(p.EY.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:h}),(0,n.Y)(p.EY.B2,{align:"center",color:"pub-secondary-text",children:t})]}),(0,n.Y)(l.pJ,{align:"center",paddingX:8,post:m,pub:g,section:v}),Y&&(0,n.Y)(d.D,{align:"center",post:m,pub:g,section:v,user:f})]})})})}},13790:function(e,t,i){i.d(t,{_:()=>u});var n=i(10201),r=i(72880),l=i(84236),o=i(68265),a=i(38501),s=i(89490),d=i(76977),c=i(63136);let u=e=>{let{description:t,imageUrl:i,name:u,post:p,pub:h,section:m,showPodcastLinks:g,user:v}=e,Y=(0,s.iF)({radius:"lg",shadow:"xl",width:160});return(0,n.Y)(o.v,{children:(0,n.FD)(d.I1,{alignItems:"center",gap:24,children:[i&&(0,n.Y)("div",{children:(0,n.Y)(r.o,{className:Y,imageIsFixedWidth:!0,maxWidth:160,src:i,useRetinaSizing:!0})}),(0,n.FD)(d.I1,{gap:16,children:[(0,n.FD)(d.I1,{gap:8,children:[(0,n.Y)(c.EY.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:u}),(0,n.Y)(c.EY.B2,{align:"center",color:"pub-secondary-text",children:t}),(0,n.Y)(l.pJ,{align:"center",paddingY:8,post:p,pub:h,section:m})]}),g&&(0,n.Y)(a.D,{limit:2,post:p,pub:h,section:m,stretch:!0,user:v})]})]})})}},38501:function(e,t,i){i.d(t,{D:()=>w});var n=i(69277),r=i(70408),l=i(32641),o=i(10201),a=i(17402),s=i(82519),d=i(13950),c=i(36233),u=i(84605),p=i(86500),h=i(74894),m=i(68349),g=i(35369),v=i(76977),Y=i(88774),f=i(59294),b=i(60816),y=i(7755),_=i(39318);let w=e=>{let{align:t="left",limit:i=4,post:n,pub:r,section:l,stretch:g,user:w}=e,{iString:I}=(0,u.GO)(),{feedUrl:k,isLoaded:S}=(0,f.Zq)({pub:r,section:l,user:w}),[D,F]=(0,a.useState)(!1),T=n?i-1:i,P=(0,y.Em)({pub:r,section:l,spotifySettings:(0,h.Om)({pub:r,section:null!=l?l:null})}),x=(0,y.dV)({feedUrl:k,isApple:(0,m.cX)()||(0,m.gI)(),isMobile:!1,showLinks:P,userIsSubscribed:!!(null==w?void 0:w.is_subscribed)}),A=x.length+ +!!k>T;(0,a.useEffect)(()=>{S&&F(!0)},[S]);let E=()=>{(0,p.u4)(p.qY.PODCAST_FEED_URL_COPIED,{feedUrl:k}),(0,c.Ay)("RSS feed URL copied"),(0,m.lW)(k)},N=e=>{let{label:t,url:i}=e;return()=>{(0,p.u4)(p.qY.PODCAST_APP_LINK_CLICK,{appName:t,feedUrl:k,url:i}),window.open(i,"_blank")}};return(0,o.Y)(d.DH,{children:(0,o.FD)(v.Ye,{gap:8,justifyContent:"center"===t?"center":void 0,opacity:100*!!D,wrap:"wrap",children:[n&&(0,o.FD)(C,{stretch:g,onClick:N({label:"Substack",url:(0,_.XV8)(r.subdomain,n.slug,{redirect:"app-marketing",source:"podcast-player-link"})}),children:[(0,o.Y)(b.l,{platformKey:"substack"}),"Substack"]}),x.slice(0,T).map(e=>{let{label:t,platform:i,url:n}=e;return(0,o.FD)(C,{stretch:g,onClick:N({label:t,url:n}),children:[(0,o.Y)(b.l,{platformKey:i}),t]})}),k&&!A&&(0,o.FD)(C,{stretch:g,onClick:E,children:[(0,o.Y)(b.l,{platformKey:"rss"}),I("RSS feed")]}),A&&(0,o.FD)(Y.W1,{trigger:(0,o.FD)(C,{children:[I("More"),(0,o.Y)(s.A,{})]}),children:[x.slice(T).map(e=>{let{label:t,platform:i,url:n}=e;return(0,o.Y)(Y.Dr,{leading:(0,o.Y)(b.l,{platformKey:i}),onClick:N({label:t,url:n}),children:t})}),(0,o.Y)(Y.Dr,{leading:(0,o.Y)(b.l,{platformKey:"rss"}),onClick:E,children:I("RSS feed")})]})]})})},C=(0,a.forwardRef)((e,t)=>{var{children:i,stretch:a,onClick:s}=e,d=(0,l._)(e,["children","stretch","onClick"]);return(0,o.Y)(g.$n,(0,r._)((0,n._)({ref:t},d,a?{flex:"grow",justifyContent:"center"}:null),{className:"podcast-player-button",priority:"secondary",onClick:s,children:i}))})},16831:function(e,t,i){i.d(t,{b:()=>c});var n=i(10201),r=i(49802),l=i(50802),o=i(76977),a=i(63136);let s={audio:r.A,video:l.A},d={audio:"Audio",video:"Video"},c=e=>{let{medium:t}=e,i=s[t];return(0,n.FD)(o.Ye,{alignItems:"center",bg:"secondary",color:"pub-secondary-text",gap:4,paddingX:6,radius:"sm",children:[(0,n.Y)(i,{size:12}),(0,n.Y)(a.EY,{font:"text",lineHeight:20,size:12,weight:"semibold",children:d[t]})]})}},24634:function(e,t,i){i.d(t,{t:()=>u});var n=i(10201),r=i(32485),l=i.n(r),o=i(17402),a=i(88553),s=i(76977),d=i(22602);let c=(0,o.forwardRef)((e,t)=>{let{variant:i}=e;return["grid","grid-groups"].includes(i)?(0,n.FD)(s.I1,{ref:t,gap:12,children:[(0,n.Y)("div",{style:{aspectRatio:a.fg},children:(0,n.Y)(d.O,{height:"100%"})}),(0,n.FD)(s.I1,{gap:8,children:[(0,n.Y)(d.O,{height:24,width:"70%"}),(0,n.Y)(d.O,{height:20,width:"90%"}),(0,n.Y)(d.O,{height:20,width:"50%"})]})]}):"list"===i?(0,n.FD)(s.I1,{ref:t,gap:8,children:[(0,n.Y)(d.O,{height:28,width:"60%"}),(0,n.Y)(d.O,{height:24,width:"80%"}),(0,n.Y)(d.O,{height:20,width:"20%"})]}):null}),u=(0,o.forwardRef)((e,t)=>{let{postCount:i,variant:r}=e;return(0,n.Y)("div",{ref:t,className:l()({"loadingContainerGrid-ydRZVl":["grid","grid-groups"].includes(r),"loadingContainerList-gZ_Mu2":"list"===r}),children:Array.from(Array(i)).map(()=>(0,n.Y)(c,{variant:r}))})})},72692:function(e,t,i){i.d(t,{k:()=>d});var n=i(10201),r=i(87677),l=i(84605),o=i(68410),a=i(35369),s=i(76977);let d=e=>{let{url:t}=e,{isMobile:i}=(0,o.sM)(),{iString:d}=(0,l.GO)();return(0,n.Y)(s.Ye,{paddingTop:16,paddingX:8*!i,children:(0,n.Y)(a.$n,{"data-testid":"archive-view-all",href:t,priority:"secondary",trailing:(0,n.Y)(r.A,{size:20}),children:d("See all")})})}},85965:function(e,t,i){i.d(t,{C:()=>u});var n=i(10201),r=i(32485),l=i.n(r),o=i(21013),a=i.n(o),s=i(68410),d=i(56897),c=i(76977);let u=e=>{let{hideDescriptions:t,posts:i,numColumns:r,onClickPost:o}=e,{isMobile:u}=(0,s.sM)(),p=i.every(e=>!e.cover_image),h=a()(i,r);return(0,n.Y)(c.I1,{gap:u?28:4,children:h.map(e=>(0,n.Y)(c.Ye,{className:"postRow-schahZ",children:e.map(e=>(0,n.Y)("div",{className:l()("postContainer-okMiTM",{"postContainerTwoColumn-OPvMmL":2===r,"postContainerThreeColumn-W6tLrW":3===r,"postContainerFourColumn-WylYbU":4===r}),children:(0,n.Y)(d.z,{hideDescription:t,hideImage:p,post:e,variant:"square",onClick:o})}))}))})}},93800:function(e,t,i){i.d(t,{m:()=>h});var n=i(69277),r=i(70408),l=i(32641),o=i(10201),a=i(32485),s=i.n(a),d=i(80098),c=i(56897),u=i(76977);let p={container:"container-O1YsI6",divider:"divider-QOeHtM",dividerVertical:"dividerVertical-pPOkXS","long-divider":"long-divider-CDn5cl",longDivider:"long-divider-CDn5cl","two-small-one-large":"two-small-one-large-QUGVE5",twoSmallOneLarge:"two-small-one-large-QUGVE5","two-column-grid":"two-column-grid-h3GUav",twoColumnGrid:"two-column-grid-h3GUav","three-column-grid":"three-column-grid-tc6QOt",threeColumnGrid:"three-column-grid-tc6QOt","four-column-grid":"four-column-grid-IPXx88",fourColumnGrid:"four-column-grid-IPXx88","one-column-list":"one-column-list-YqnT5h",oneColumnList:"one-column-list-YqnT5h","one-column-list-flex":"one-column-list-flex-kqNmJm",oneColumnListFlex:"one-column-list-flex-kqNmJm","large-listing-listing-column":"large-listing-listing-column-feCdFL",largeListingListingColumn:"large-listing-listing-column-feCdFL","square-square-column":"square-square-column-b5mOve",squareSquareColumn:"square-square-column-b5mOve","two-column-list":"two-column-list-BLHtzo",twoColumnList:"two-column-list-BLHtzo","two-column-list--with-dividers":"two-column-list--with-dividers-cHfR0M",twoColumnListWithDividers:"two-column-list--with-dividers-cHfR0M","five-up":"five-up-H_hegz",fiveUp:"five-up-H_hegz","vertical-divider":"vertical-divider-GcHWq8",verticalDivider:"vertical-divider-GcHWq8","mini-row":"mini-row-KFztmA",miniRow:"mini-row-KFztmA","three-column-mini-row":"three-column-mini-row-ep3LFs",threeColumnMiniRow:"three-column-mini-row-ep3LFs"},h=e=>{var t;let{flex:i,hideImages:r,hideHorizontalDividers:l,hideVerticalDividers:a,linkToComments:d,posts:h,source:f,variant:b,onClickPost:y}=e;if("two-three-two"===b)return(0,o.Y)(g,(0,n._)({},e));if("two-small-three-medium"===b)return(0,o.Y)(m,(0,n._)({},e));if(["mini-row","three-column-mini-row"].includes(b))return(0,o.Y)(v,(0,n._)({},e));let _=a?void 0:"detail-themed",w=l?void 0:"detail-themed";return(0,o.Y)("div",{style:"grow"===i?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,o.Y)("div",{className:s()(p.container,p[b],{[null!=(t=p["two-column-list--with-dividers"])?t:""]:"two-column-list"===b&&!l}),children:h.map((e,t)=>(0,o.FD)(o.FK,{children:[t>0&&["one-column-list","two-column-list","two-column-grid","three-column-grid","four-column-grid","large-listing-listing-column"].includes(b)&&(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),t%2==0&&t>0&&["two-column-grid"].includes(b)&&(0,o.Y)(u.Ye,{borderBottom:w,className:p["long-divider"]}),t%4==0&&t>0&&["four-column-grid"].includes(b)&&(0,o.Y)(u.Ye,{borderBottom:w,className:p["long-divider"]}),(0,o.Y)(c.z,{hideImage:r,linkToComments:d,post:e,testid:["large-listing-listing-column","two-small-one-large"].includes(b)?"magazine-spot-".concat(t+1):void 0,variant:Y(b,t),onClick:y&&f?i=>{let{event:n}=i;y({event:n,post:e,index:t,source:f})}:void 0}),"five-up"===b&&t===h.length-1&&(0,o.FD)(o.FK,{children:[(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),(0,o.Y)(u.Ye,{borderRight:_,className:p["vertical-divider"]}),(0,o.Y)(u.Ye,{borderRight:_,className:p["vertical-divider"]})]}),"two-small-one-large"===b&&t===h.length-1&&(0,o.FD)(o.FK,{children:[(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),(0,o.Y)(u.Ye,{borderRight:_,className:p["vertical-divider"]})]}),"square-square-column"===b&&1===t&&(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider})]}))})})},m=e=>{let{posts:t,hideVerticalDividers:i}=e,a=(0,l._)(e,["posts","hideVerticalDividers"]),s=t.slice(0,3),c=t.slice(3);return(0,o.FD)(d.P,{hideVerticalDividers:i,stretchVertically:!0,variant:"one-column-two-column",children:[(0,o.Y)(h,(0,r._)((0,n._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,o.Y)(h,(0,r._)((0,n._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"}))]})},g=e=>{let{hideVerticalDividers:t,posts:i}=e,a=(0,l._)(e,["hideVerticalDividers","posts"]),s=i.slice(0,3),c=i.slice(3,5),u=i.slice(5);return(0,o.FD)(d.P,{hideVerticalDividers:t,variant:"one-column-two-column-one-column",children:[(0,o.Y)(h,(0,r._)((0,n._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,o.Y)(h,(0,r._)((0,n._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"})),(0,o.Y)(h,(0,r._)((0,n._)({},a),{flex:"grow",hideImages:!1,posts:u,variant:"square-square-column"}))]})},v=e=>{let{linkToComments:t,posts:i,source:n,variant:r,onClickPost:l}=e;return(0,o.Y)("div",{children:(0,o.Y)("div",{className:s()(p.container,p[r]),children:i.slice(0,"mini-row"===r?4:3).map((e,i)=>(0,o.FD)(o.FK,{children:[i>0&&(0,o.Y)(u.Ye,{alignItems:"center",className:s()(p.divider,p.dividerVertical),paddingY:8,children:(0,o.Y)(u.Ye,{borderLeft:"detail-themed"})}),(0,o.Y)(c.z,{linkToComments:t,post:e,variant:Y(r,i),onClick:l&&n?t=>{let{event:r}=t;l({event:r,post:e,index:i,source:n})}:void 0})]}))})})},Y=(e,t)=>"square-square-column"===e?"square":"large-listing-listing-column"===e?0===t?"large":"listing":"two-small-one-large"===e?0===t?"large":"square":"two-column-list"===e?"listing":"five-up"===e?0===t?"large":"square":["mini-row","three-column-mini-row","one-column-list","one-column-list-flex"].includes(e)?"mini":"square"},72750:function(e,t,i){i.d(t,{h:()=>X});var n=i(69277),r=i(70408),l=i(10201),o=i(17402),a=i(13950),s=i(72987),d=i(36233),c=i(16447),u=i(72880),p=i(20562),h=i(68410),m=i(16831),g=i(76977),v=i(63136),Y=i(4016),f=i(57324);let b=e=>{let{description:t,logoUrl:i,name:n,pub:r,section:o,user:a}=e,{isMobile:s}=(0,h.sM)(),d=(0,Y.s7)({pub:r,includeTheRampart:!0});return(0,l.FD)(g.Ye,{alignItems:"center",direction:s?"column":"row",gap:32,paddingBottom:24,paddingTop:16,paddingX:8*!s,children:[i&&(0,l.Y)(u.o,{alt:n,className:"logo-vqxCjr",imageIsFixedWidth:!0,maxWidth:300,src:i,useRetinaSizing:!0}),(0,l.FD)(g.I1,{gap:16,children:[(0,l.FD)(g.I1,{children:[d&&(null==a?void 0:a.is_subscribed)&&(0,Y.rD)({sectionId:null==o?void 0:o.id})&&(0,l.Y)(v.EY.Meta,{color:"accent",paddingBottom:8,children:"+ Member-Only"}),(0,l.Y)(v.EY.H1,{color:"pub-primary-text",font:"pub-headings",children:n}),d&&(0,l.Y)(g.Ye,{alignItems:"center",gap:8,paddingBottom:12,paddingTop:8,children:(0,Y.ot)({sectionId:null==o?void 0:o.id}).map(e=>(0,l.Y)(m.b,{medium:e}))}),t&&(0,l.Y)(g.I1,{gap:8,children:t.split("\n").map(e=>(0,l.Y)(v.EY.B3,{color:"pub-secondary-text",children:e}))})]}),d&&(0,l.Y)(p.t,{pub:r,section:o,trackingSource:f.VU.sectionPage,variant:(null==a?void 0:a.is_subscribed)?"default":"member-only"})]})]})};var y=i(84605),_=i(74894),w=i(59294),C=i(66728),I=i(7755);let k=e=>{let{firstPodcastPost:t,pub:i,user:n,section:r=null}=e,{iString:o}=(0,y.GO)(),{isMobile:a}=(0,h.sM)(),{feedUrl:s}=(0,w.Zq)({pub:i,user:n,section:r}),d=(0,I.Em)({pub:i,section:r,spotifySettings:(0,_.Om)({pub:i,section:null!=r?r:null})});return(0,l.Y)(g.pT,{paddingX:8*!a,children:(0,l.Y)(C.b,{description:o("Add this podcast to your player of choice:"),feedUrl:s,post:null!=t?t:null,pub:i,section:r,showLinks:d,user:n})})};var S=i(10939),D=i(91089),F=i(93800),T=i(12592),P=i(82776);let x=e=>{var t,i,n,r;let{newPosts:o,pinnedPosts:s,podcastSettings:d,pub:u,search:p,section:m,sort:g,user:v,utm:Y,welcomeAndShareElement:f}=e,{isMobile:y}=(0,h.sM)(),_=(0,P.sectionIsSpecificallyMarkedAsNewsletter)({pub:u,section:m});return(0,l.Y)(a.DH,{children:(0,l.FD)(T.c,{columns:3,children:[(0,l.Y)(D.PageMetaData,{isPodcast:!0,pub:u,section:m}),(0,l.Y)(b,{description:null!=(t=d.description)?t:"",logoUrl:(null==v?void 0:v.is_subscribed)&&null!=(i=d.paidEpisodeArtUrl)?i:d.artUrl,name:null!=(n=d.title)?n:"",pub:u,section:m,user:v}),!y&&(0,l.Y)(S.r,{numColumns:4}),(0,l.FD)("div",{className:"bodyContainer-P2vZHh",children:[(0,l.Y)(c.M,{isPodcast:!_,maxPosts:7,newPosts:o,pinnedPosts:s,pub:u,search:p,sectionId:null==m?void 0:m.id,sort:g,user:v,utm:Y,variant:"list",children:e=>{var t;let{posts:i,linkToComments:n,onClickPost:r}=e;return(0,l.Y)(F.m,{hideImages:null==(t=u.theme)?void 0:t.hide_images_from_list,linkToComments:n,posts:i,variant:"two-column-list",onClickPost:r})}}),(0,l.Y)(k,{firstPodcastPost:null!=(r=null==o?void 0:o.filter(e=>"podcast"===e.type)[0])?r:null,pub:u,section:m,user:v})]}),f]})})};var A=i(32485),E=i.n(A),N=i(80098),B=i(9757),M=i(89490);let R=e=>{let{align:t,columns:i,description:n,imageUrl:r,name:o,pub:a}=e,{isMobile:s}=(0,h.sM)(),d=(0,M.iF)({radius:"md",width:80}),c=(0,l.FD)(g.I1,{paddingTop:16,children:[(0,l.FD)(g.I1,{alignItems:"center"===t?"center":void 0,gap:12,paddingX:8*!s,children:[r&&(0,l.Y)(u.o,{className:d,imageIsFixedWidth:!0,maxWidth:80,src:r,useRetinaSizing:!0}),(0,l.Y)(v.EY.H1,{className:E()({"pillarHeader-Bn88EX":(0,Y.S2)({pub:a})}),color:"pub-primary-text",font:"pub-headings",children:o}),(0,l.Y)(v.EY.B2,{align:t,color:"pub-secondary-text",children:n})]}),(0,l.Y)(S.r,{paddingBottom:0,paddingTop:32})]});return 2===i?(0,l.Y)(B.I,{mainContent:c}):(0,l.Y)(N.P,{variant:"three-column-width",children:c})};var L=i(64648),O=i(64232),z=i(13790),U=i(70557),q=i(49807);let H=e=>{var t;let{columns:i,podcastSettings:n,firstPost:r,heroAlignment:o,pub:a,section:s,showPodcastLinks:d,user:c,utm:u,variant:p}=e,{isMobile:m}=(0,h.sM)(),v=null!=(t=n?n.description:null==s?void 0:s.description)?t:"",Y=n?n.artUrl:null==s?void 0:s.logo_url,f=n?n.title:null==s?void 0:s.name,b=(0,q.ScI)(Y);return"feature-media"===p&&2!==i?r?(0,l.Y)(g.I1,{paddingTop:m?16:24,children:(0,l.Y)(U.X,{columns:i,hideLogo:!Y||b,isPodcast:!!n,post:r,pub:a,section:s,showPodcastLinks:d,user:null!=c?c:null,utm:u})}):null:"podcast"===p&&m?(0,l.Y)(z._,{description:v,imageUrl:Y,name:f,post:r,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&"center"===o?(0,l.Y)(O.i,{description:v,imageUrl:Y,name:f,post:r,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&n?(0,l.Y)(L.S,{columns:Math.max(i,3),description:v,imageUrl:Y,name:f,post:r,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):(0,l.Y)(R,{align:o,columns:Math.min(i,3),description:v,imageUrl:b?null:Y,name:f,pub:a})};var W=i(28528),K=i(7761);let G=e=>{let{columns:t,isPodcast:i,newPosts:n,pinnedPosts:r,pub:o,search:a,section:s,sort:d,user:u,utm:p,variant:h,onChangeFirstPost:m}=e,g=7;"grid"===h&&(4===t&&(g=8),3===t&&(g=9));let v=(0,l.Y)(c.M,{includePins:!(i&&!s),isPodcast:i,maxPosts:g,newPosts:n,pinnedPosts:r,pub:o,search:a,sectionId:null==s?void 0:s.id,sort:d,user:u,utm:p,variant:h,onPostsLoaded:e=>{var t;let{posts:i}=e;m({post:null!=(t=i[0])?t:null})},children:e=>{var i;let{posts:n,linkToComments:r,onClickPost:a}=e;return(0,l.Y)(K.WO,{pub:o,showPubPins:!1,showSectionPins:!0,children:(0,l.Y)(F.m,{hideHorizontalDividers:"grid"===h,hideImages:null==(i=o.theme)?void 0:i.hide_images_from_list,linkToComments:r,posts:n,variant:function(e){let{columns:t,variant:i}=e;return"list"===i?"two-column-list":4===t?"four-column-grid":"three-column-grid"}({columns:t,variant:h}),onClickPost:a})})}});return"list"===h?(0,l.Y)(B.I,{mainContent:v}):(0,l.Y)(N.P,{variant:function(e){let{columns:t}=e;return 4===t?"full-width":"three-column-width"}({columns:t}),children:v})};var V=i(57961),j=i(46009);let X=e=>{var t,i,c,u,p,m,v,f,b,y,_,w;let{blurbs:C,freeSignup:I,freeSignupEmail:k,hide_intro_popup:S,isPodcast:F,newPostsForPubPodcast:P,notify_user:A,pageTheme:E,pub:N,referralCode:B,search:M,slug:R,sort:L,showWelcome:O,user:z,utm:U,launchWelcomePage:q,sectionPageData:K,skipIntroPopupRender:X}=e,{isMobile:Z,isTablet:Q}=(0,h.sM)(),$=R?N.sections.find(e=>e.slug===R):void 0,ee=F&&!$,et=null!=(u=null!=E?E:ee?null==(t=N.pageThemes)?void 0:t.podcast:null==$?void 0:$.pageTheme)?u:null,ei=F&&!$?P:null==K||null==(i=K[null!=(p=null==$?void 0:$.id)?p:0])?void 0:i.newPosts,en=null==K||null==(c=K[null!=(m=null==$?void 0:$.id)?m:0])?void 0:c.pinnedPosts,er=null!=(v=[...null!=en?en:[],...null!=ei?ei:[]][0])?v:null,[el,eo]=(0,o.useState)(er?{[$?$.id:"pubPodcast"]:er}:{}),[ea,es]=(0,o.useState)(!1),ed=null!=(f=el[$?$.id:"pubPodcast"])?f:null,ec=(0,o.useCallback)(e=>{let{post:t}=e;ed||(t?(eo(e=>(0,r._)((0,n._)({},e),{[$?$.id:"pubPodcast"]:t})),es(!1)):es(!0))},[ed,$]);if((0,o.useEffect)(()=>{A&&"undefined"!=typeof window&&(0,d.Ay)(A)},[A]),!$&&!F)return console.warn("Should be either a section or podcast or both"),null;let eu=null;if((F||(null==$?void 0:$.is_podcast))&&(eu=$?(0,j.lL)({pub:N,section:$}):(0,j.j_)({pub:N})),(0,Y.lu)({pub:N})&&(F||$))return(0,l.Y)(s.N,{freeSignup:I,freeSignupEmail:k,isPodcast:!!F,newPosts:ei,pub:N,scheduledLiveStreams:null==K||null==(b=K[null!=(y=null==$?void 0:$.id)?y:0])?void 0:b.scheduledLiveStreams,section:null!=$?$:null,user:z,utm:U},null!=(_=null==$?void 0:$.id)?_:-1);let ep=(0,Y.s7)({pub:N,includeTheRampart:!0})&&eu,eh=(0,l.Y)(V.l,{blurbs:C,freeSignup:I,freeSignupEmail:k,hide_intro_popup:S,isPodcast:F,launchWelcomePage:q,pub:N,referralCode:B,showWelcome:O,user:z});if(ep&&eu&&$)return(0,l.Y)(x,{newPosts:ei,pinnedPosts:en,podcastSettings:eu,pub:N,search:M,section:$,sort:L,user:z,utm:U,welcomeAndShareElement:X?null:eh});let em=et;em||(em=((null==$?void 0:$.is_podcast)||F)&&!ea?{hero_alignment:"left",page_hero:"feature-media",page_posts:"grid",show_podcast_links:!1}:{hero_alignment:"left",page_hero:"default",page_posts:"list",show_podcast_links:!1}),em.page_hero=J(em.page_hero);let eg=2,ev="grid"===em.page_posts?3:2;return"feature-media"===em.page_hero?"grid"===em.page_posts?eg=ev=Q?3:4:"list"===em.page_posts&&(eg=3,ev=2):eg=ev,(0,l.Y)(W.XL,{pub:N,children:(0,l.Y)(a.DH,{children:(0,l.FD)(T.c,{columns:4,paddingTop:"podcast"===em.page_hero||"feature-media"===em.page_hero?0:void 0,children:[(0,l.Y)(D.PageMetaData,{isPodcast:F,pub:N,section:$}),(0,l.Y)(H,{columns:eg,firstPost:ed,heroAlignment:em.hero_alignment,podcastSettings:eu,pub:N,section:$,showPodcastLinks:em.show_podcast_links,user:z,utm:U,variant:em.page_hero}),(0,l.Y)(g.I1,{opacity:"feature-media"!==em.page_hero||ed?100:0,paddingBottom:32,paddingTop:Z?24:32,children:(0,l.Y)(G,{columns:ev,isPodcast:!!F,newPosts:ei,pinnedPosts:en,pub:N,search:M,section:$,sort:L,user:z,utm:U,variant:em.page_posts,onChangeFirstPost:ec},null!=(w=null==$?void 0:$.id)?w:-1)}),!X&&eh]})})})},J=e=>e?"podcast-with-post"===e?"podcast":e:"default"},57961:function(e,t,i){i.d(t,{l:()=>h});var n=i(10201),r=i(17402),l=i(9266),o=i(58398),a=i(12215);let s=["astralcodexten","thecoddlingmovie","bariweiss","theprepress"];var d=i(41086),c=i(82776),u=i(68349),p=i(39318);let h=e=>{let{blurbs:t,freeSignup:i,freeSignupEmail:h,hide_intro_popup:m,pub:g,referralCode:v,showWelcome:Y,user:f,launchWelcomePage:b}=e,[y,_]=(0,r.useState)(!1),w=(e=>{let{pub:t,user:i,freeSignup:n}=e,r=new Date(Date.now()-864e5);if((0,d.y)("no_cover")||(0,d.y)("hide_intro_popup"))return!0;if((0,d.y)("showWelcome"))return!1;if("share"===(0,d.y)("action")||(0,d.y)("accepting_gift")||!t||s.includes(t.subdomain)||n||i&&(i.is_free_subscribed||i.is_subscribed||i.is_contributor))return!0;let l=a.get("intro_popup_last_hidden_at");return!!(l&&new Date(l)>=r||"undefined"!=typeof navigator&&(0,c.isSearchEngineCrawlerQuick)(navigator.userAgent))})({pub:g,user:f,freeSignup:i});return(0,r.useEffect)(()=>{"share"===(0,d.y)("action")&&(window.history.replaceState({},document.title,(0,p.oRR)({action:null})),_(!0)),"undefined"!=typeof window&&Y&&(0,u.qm)("showWelcome")},[Y]),(0,n.FD)(n.FK,{children:[(0,n.Y)(o.Z,{isOpen:y,medium:"web",pub:g,user:f,onClose:()=>_(!1)}),(0,n.Y)(l.Ay,{blurbs:t,freeSignup:i,freeSignupEmail:h,hidden:m||y||w,launchWelcomePage:b,publication:g,referralCode:v,showOnMount:Y,user:f})]})}},91704:function(e,t,i){i.d(t,{i:()=>o});var n=i(69277);let r={sm:{size:15,lineHeight:20},md:{size:19,lineHeight:26},lg:{size:30,lineHeight:38},mobileMd:{size:17,lineHeight:24},mobileLg:{size:30,lineHeight:38}},l={sinocism:{sm:{size:13,lineHeight:20},md:{size:16,lineHeight:24},lg:{size:27,lineHeight:36},mobileMd:{size:16,lineHeight:24},mobileLg:{size:27,lineHeight:36}},thepillar:{sm:{size:16,lineHeight:20,fontFamily:"Georgia, serif"},md:{size:22,lineHeight:28,fontFamily:"Georgia, serif"},lg:{size:36,lineHeight:42,fontFamily:"Georgia, serif"},mobileMd:{size:20,lineHeight:26,fontFamily:"Georgia, serif"},mobileLg:{size:28,lineHeight:36,fontFamily:"Georgia, serif"}}},o=e=>{let{preset:t,pub:i}=e;return(i?(0,n._)({},r,l[i.subdomain]):r)[t]}},11574:function(e,t,i){i.d(t,{$:()=>f});var n=i(69277),r=i(70408),l=i(10201),o=i(32485),a=i.n(o),s=i(70103),d=i(78956),c=i(15894),u=i(77433),p=i(68410),h=i(80098),m=i(60355),g=i(76977),v=i(49807),Y=i(45663);let f=e=>{let{posts:t,title:i,variant:o,viewAllUrl:a,headerVariant:s="align-left-with-see-all"}=e,d={posts:t,title:i,viewAllUrl:a,headerVariant:s};switch(o){case"special-feature":return(0,l.Y)(b,(0,n._)({},d));case"large-in-middle":return(0,l.Y)(w,(0,r._)((0,n._)({},d),{largeColumnPosition:"middle"}));case"large-on-left":return(0,l.Y)(w,(0,r._)((0,n._)({},d),{largeColumnPosition:"left"}));case"large-on-right":return(0,l.Y)(w,(0,r._)((0,n._)({},d),{largeColumnPosition:"right"}));default:return null}},b=e=>{let{posts:t,title:i}=e,{isMobile:n,isTablet:r,isDesktop:o}=(0,p.sM)();return n?(0,l.Y)(y,{posts:t,title:i}):(0,l.FD)("div",{children:[(0,l.Y)(_,{title:i}),(0,l.FD)(h.P,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[t[0]&&(0,l.Y)(m.R,{align:o?"center":"left",post:t[0],showImageLast:o,titlePreset:"h2-serif",variant:"large"}),(0,l.Y)(d.A,{paddingTop:64*!!o,children:t.slice(1,r?5:3).map(e=>(0,l.Y)(m.R,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),o&&(0,l.Y)(d.A,{paddingTop:64,children:t.slice(3,5).map(e=>(0,l.Y)(m.R,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))})]}),(0,l.Y)("div",{className:Y.A.threeColumnContainer,children:t.slice(5,8).map(e=>(0,l.Y)(g.I1,{borderTop:"detail-themed",paddingTop:24,children:(0,l.Y)(m.R,{align:"center",hideDescription:!0,hideImage:!0,post:e,variant:"square"})}))})]})},y=e=>{let{title:t,posts:i}=e;return(0,l.FD)("div",{children:[(0,l.Y)(_,{title:t}),(0,l.FD)(g.I1,{gap:32,children:[i[0]&&(0,l.Y)(m.R,{align:"left",post:i[0],titlePreset:"h2-serif",variant:"large"}),(0,l.Y)(s.Z,{children:i.slice(1,5).map(e=>(0,l.Y)(m.R,{hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),(0,l.Y)(d.A,{gap:16,includeTopDivider:!0,children:i.slice(5,8).map(e=>(0,l.Y)(m.R,{post:e,variant:"mini"}))})]})]})},_=e=>{let{title:t}=e,{isMobile:i}=(0,p.sM)(),n="America at 250"===t;return(0,l.FD)(g.Ye,{alignItems:"center",className:Y.A.specialFeatureHeaderContainer,gap:20,paddingBottom:i?28:56,children:[(0,l.Y)("div",{className:n?a()(Y.A.thickRule,Y.A.a250Rule):Y.A.thickRule}),n?(0,l.Y)("a",{className:Y.A.america250HomepageHeader,href:"/america250",children:(0,l.Y)("img",{className:Y.A.a250Logo,src:(0,v.dJ9)("".concat((0,v.Ewe)(),"/img/thefp/a250_homepage.png"),500,{quality:"auto:good",crop:"limit"}),width:446})}):(0,l.Y)(c.T,{color:"accent",preset:"st3",children:t}),(0,l.Y)("div",{className:n?a()(Y.A.thickRule,Y.A.a250Rule):Y.A.thickRule})]})},w=e=>{let{largeColumnPosition:t,posts:i,title:n,viewAllUrl:r,headerVariant:o}=e,{isMobile:a,isTablet:s,isDesktop:c}=(0,p.sM)();return a?(0,l.Y)(C,{headerVariant:o,posts:i,title:n,viewAllUrl:r}):(0,l.FD)(g.I1,{gap:28,children:[(0,l.Y)(u.M,{title:n,titlePreset:"st2",variant:o,viewAllUrl:r}),(0,l.FD)(h.P,{hideVerticalDividers:!0,variant:{middle:"one-column-two-column-one-column",left:"two-column-one-column-one-column",right:"one-column-one-column-two-column"}[t],children:[i[0]&&(0,l.Y)(m.R,{align:"left",post:i[0],titlePreset:"h3-condensed",variant:"large"}),(0,l.Y)(d.A,{paddingTop:40*!!c,children:i.slice(1,s?5:3).map(e=>(0,l.Y)(m.R,{hideDescription:s,post:e,variant:"square"}))}),c&&(0,l.Y)(d.A,{paddingTop:40,children:i.slice(3,5).map(e=>(0,l.Y)(m.R,{post:e,variant:"square"}))})]})]})},C=e=>{let{posts:t,title:i,viewAllUrl:n,headerVariant:r}=e;return(0,l.FD)(g.I1,{gap:20,children:[(0,l.Y)(u.M,{title:i,titlePreset:"st2",variant:r,viewAllUrl:n}),(0,l.FD)(g.I1,{gap:32,children:[t[0]&&(0,l.Y)(m.R,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,l.Y)(s.Z,{children:t.slice(1,5).map(e=>(0,l.Y)(m.R,{hideDescription:!0,post:e,variant:"square"}))})]})]})}},77433:function(e,t,i){i.d(t,{M:()=>p});var n=i(69277),r=i(32641),l=i(10201),o=i(63446),a=i(15894),s=i(84605),d=i(68410),c=i(76977),u=i(45663);let p=e=>{var{variant:t="align-left-with-see-all"}=e,i=(0,r._)(e,["variant"]);return"align-left-with-see-all"===t?(0,l.Y)(h,(0,n._)({},i)):(0,l.Y)(m,(0,n._)({},i))},h=e=>{let{titlePreset:t,title:i,viewAllUrl:n}=e,{iString:r}=(0,s.GO)(),{isMobile:p}=(0,d.sM)();return(0,l.FD)(c.Ye,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,l.Y)(a.T,{preset:t,children:i}),(0,l.FD)(c.Ye,{alignItems:"end",flex:"grow",children:[(0,l.Y)("div",{className:u.A.mediumRule}),n&&(p?(0,l.Y)(c.Ye,{className:u.A.headerButtonMobile,position:"absolute",children:(0,l.Y)(o.v,{href:n,size:"md",trailingIcon:"chevron-right",variant:"tertiary",children:r("See all")})}):(0,l.Y)(o.v,{href:n,trailingIcon:"chevron-right",children:r("See all")}))]})]})},m=e=>{let{titlePreset:t,title:i}=e;return(0,l.FD)(c.Ye,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,l.Y)("div",{className:u.A.mediumRule}),(0,l.Y)(a.T,{preset:t,children:i})]})}},28528:function(e,t,i){i.d(t,{XL:()=>c,np:()=>u,wZ:()=>d});var n=i(69277),r=i(70408),l=i(10201),o=i(69843),a=i.n(o),s=i(17402);let d=(0,s.createContext)({authorPagesEnabled:!1,cropGravity:"center",disableInteractive:!1,hideUfi:!1,highlightByline:!1,linkToComments:!1,pub:null,modifiedPosts:{},showPinForPostIds:new Set,user:null,onChangePost:()=>void 0,onUnpinPost:()=>void 0}),c=e=>{let{actionsClassName:t,authorPagesEnabled:i,children:o,cropGravity:c,disableInteractive:u,hideUfi:p,highlightByline:h,linkToComments:m,postPreviewUrl:g,pub:v,showPinForPostIds:Y,showSectionOrTag:f,user:b,utm:y,onClickPost:_,onToggleMenu:w,onUnpinPost:C}=e,I=(0,s.useContext)(d),[k,S]=(0,s.useState)({}),D=(0,s.useCallback)(e=>{let{post:t}=e;S(e=>(0,r._)((0,n._)({},e),{[t.id]:t}))},[]);return(0,l.Y)(d.Provider,{value:(0,r._)((0,n._)({},I,a()(t)?null:{actionsClassName:t},a()(i)?null:{authorPagesEnabled:i},a()(c)?null:{cropGravity:c},a()(u)?null:{disableInteractive:u},a()(p)?null:{hideUfi:p},a()(h)?null:{highlightByline:h},a()(m)?null:{linkToComments:m},a()(g)?null:{postPreviewUrl:g},a()(v)?null:{pub:v},a()(Y)?null:{showPinForPostIds:Y},a()(f)?null:{showSectionOrTag:f},a()(b)?null:{user:b},a()(y)?null:{utm:y},a()(_)?null:{onClickPost:_},a()(w)?null:{onToggleMenu:w},a()(C)?null:{onUnpinPost:C}),{modifiedPosts:k,onChangePost:D}),children:o})},u=()=>{let e=(0,s.useContext)(d);if(!e.pub)throw Error("No pub provided to PostPreviewContext");return e}},56897:function(e,t,i){i.d(t,{z:()=>z});var n=i(69277),r=i(70408),l=i(32641),o=i(79785),a=i(10201),s=i(32485),d=i.n(s),c=i(17402),u=i(84605),p=i(68349),h=i(68410),m=i(28528),g=i(41935),v=i(76977),Y=i(82776);let f=e=>{let{justified:t,post:i}=e,{actionsClassName:n,pub:r,user:l,onChangePost:o,onToggleMenu:s}=(0,m.np)(),d="restack"===i.type;return d?null:(0,a.Y)(v.I1,{className:n,children:(0,a.Y)(g.xx,{allowEdit:!d,editButtonIsLast:!0,hideComments:!(0,Y.showCommentsOnPost)({publication:r,post:i}),hideReactions:!r.community_enabled,hideShare:d,isStatic:!1,justified:t,labelStyle:"counts-or-none",position:"pub-preview",post:i,pub:r,showRestackButton:!0,style:"compressed",user:l,onChange:o,onToggleMenu:s})})};var b=i(84032),y=i(74762),_=i(63136),w=i(65942),C=i(4016);let I=e=>{let{align:t,clamp:i,lineHeight:n=20,maxLength:r=152,paddingBottom:l,post:o,size:s=14,textWrap:d}=e,{postPreviewUrl:c,pub:u}=(0,m.np)();return(0,a.Y)(v.I1,{paddingBottom:l,children:(0,a.Y)(_.EY,{align:t,as:"a",clamp:i,color:"primary",font:"text",href:c,lineHeight:n,size:s,style:(0,C.S2)({pub:u})?{fontFamily:"Georgia, serif"}:void 0,tabIndex:-1,textWrap:d,children:(0,w.A)((0,Y.truncateWords)(o.description,r))})})};var k=i(38970),S=i.n(k),D=i(99862),F=i(49807);let T=e=>{var t,i;let{paddingBottom:n,post:r}=e,{pub:l,showSectionOrTag:o}=(0,m.np)();if(!o)return null;let s=null,d=null;if(r.section_id){let e=l.sections.find(e=>e.id===r.section_id);e&&(s=e.name,d=(0,F.Dor)(l,{section:e}))}else if(null==(t=r.postTags)?void 0:t.length){let e=S()(l.navigationBarItems.filter(e=>e.postTag).map(e=>e.postTag),"id"),t=null==(i=r.postTags)?void 0:i.find(t=>e[t.id]);t&&(s=t.name,d=(0,F.ii9)(l,t))}return s&&d?(0,a.Y)(v.pT,{paddingBottom:n,children:(0,a.Y)(_.EY.Meta,{as:"a",color:"primary",href:d,onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,D.route)(d)},children:s})}):null};var P=i(71834),x=i(88553),A=i(56262);let E=e=>{let{isSmall:t,post:i}=e,{hideUfi:n}=(0,m.np)(),{isTablet:r}=(0,h.sM)(),l=!!(0,A.getCoverImageUrl)(i);return(0,a.FD)("div",{className:d()("container-m3tNBN",{"containerNoImage-bRvPTc":!l}),children:[l&&(0,a.Y)(y.t,{className:"image-e4U1t2",imageAspectRatio:t?x.fg:x.H9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:72,post:i,squareImageSize:"large"}),(0,a.FD)(v.I1,{alignItems:"center",className:"content-jHL69Q",justifyContent:"center",paddingBottom:64*!l,paddingTop:l?24:64,paddingX:l?32:64,children:[(0,a.Y)(T,{paddingBottom:4,post:i}),(0,a.Y)(P.Z,{align:"center",clamp:3,paddingBottom:8,post:i,preset:r?"mobileLg":"lg",preventOrphans:!0}),(0,a.Y)(I,{align:"center",clamp:3,lineHeight:24,paddingBottom:8,post:i,size:17}),(0,a.Y)(b.xx,{post:i}),!n&&(0,a.Y)(v.I1,{paddingTop:8,children:(0,a.Y)(f,{post:i})})]})]})};var N=i(86500),B=i(82772),M=i(27437),R=i(16291);function L(){let e=(0,o._)(["Post preview for ",""]);return L=function(){return e},e}let O={jumbo:E,"jumbo-small":e=>(0,a.Y)(E,(0,r._)((0,n._)({},e),{isSmall:!0})),large:e=>{let{align:t="center",hideImage:i,imageAspectRatio:n="standard",post:r}=e,{hideUfi:l,pub:o}=(0,m.np)();return(0,a.FD)(v.I1,{children:[!i&&(0,a.Y)(y.t,{className:"image-QTMr_S",imageAspectRatio:"wide"===n?x.H9:x.fg,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:r,squareImageSize:"large"}),(0,a.FD)(v.I1,{alignItems:"center"===t?"center":"start",flex:"grow",justifyContent:(0,C.S2)({pub:o})?"start":"center",paddingBottom:0,paddingTop:32,paddingX:16*("left"!==t),children:[(0,a.Y)(T,{paddingBottom:4,post:r}),(0,a.Y)(P.Z,{align:t,clamp:4,paddingBottom:8,post:r,preset:"lg",preventOrphans:!0,textWrap:"balance"}),(0,a.Y)(I,{align:t,clamp:2,lineHeight:(0,C.S2)({pub:o})?28:24,paddingBottom:8,post:r,size:(0,C.S2)({pub:o})?20:17,textWrap:"balance"}),(0,a.Y)(b.xx,{post:r}),!l&&(0,a.Y)(v.I1,{paddingTop:8,children:(0,a.Y)(f,{post:r})})]})]})},listing:e=>{let{hideImage:t,post:i}=e,{hideUfi:n,pub:r}=(0,m.np)(),{isMobile:l}=(0,h.sM)(),o=!!r.community_enabled;return t&&!l&&(o=!1),(0,a.FD)("div",{className:d()("container-Qnseki",{"container--no-image-zKZVLo":t}),children:[(0,a.FD)(v.I1,{flex:"grow",gap:4,position:"relative",children:[(0,a.Y)(T,{post:i}),(0,a.Y)(P.Z,{clamp:3,post:i,preset:l?"mobileMd":"md"}),!(0,C.S2)({pub:r})&&(0,a.Y)(I,{clamp:2,lineHeight:t?24:20,post:i,size:15}),(0,a.Y)(b.xx,{post:i}),!n&&(0,a.Y)(f,{justified:o,post:i})]}),!t&&(i.cover_image?(0,a.Y)("div",{children:(0,a.Y)(y.t,{className:"image-tkPTAj",imageAspectRatio:l?1:x.fg,imageWidth:l?150:320,isBelowTheFold:!0,playButtonSize:l?32:40,post:i,squareImageSize:"small"})}):(0,a.Y)("div",{}))]})},mini:e=>{let{post:t}=e,{hideUfi:i,pub:n}=(0,m.np)(),r=!!n.community_enabled;return(0,a.FD)(v.I1,{gap:4,children:[(0,a.FD)(v.Ye,{gap:12,children:[(0,a.FD)(v.I1,{flex:"grow",gap:4,children:[(0,a.Y)(T,{post:t}),(0,a.Y)(P.Z,{clamp:2,post:t,preset:"sm"}),(0,a.Y)(b.xx,{clamp:1,post:t})]}),(0,a.Y)(y.t,{className:"image-tBOtsv",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t})]}),!i&&(0,a.Y)(f,{justified:r,post:t})]})},"mini-episode":e=>{let{post:t}=e,i=(0,c.useRef)(null);return(0,B.S8)(i,()=>{(0,N.u4)(N.qY.RECENT_EPISODE_ITEM_SEEN,{post_id:t.id})}),(0,a.FD)(v.Ye,{ref:i,gap:16,children:[(0,a.Y)(y.t,{className:"image-UySkN_",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t}),(0,a.FD)(v.I1,{flex:"grow",children:[(0,a.Y)(P.Z,{clamp:2,paddingBottom:4,post:t,preset:"sm"}),(0,a.Y)(b.xx,{clamp:1,post:t})]})]})},"mini-video":e=>{let{post:t}=e;return(0,a.FD)(v.Ye,{gap:16,children:[(0,a.FD)(v.I1,{flex:"grow",gap:4,children:[(0,a.Y)(_.EY.Meta,{color:"secondary",children:(0,R.A)(t.post_date).locale("en").format("MMM DD")}),(0,a.Y)(_.EY.B3,{clamp:2,color:"primary",weight:"semibold",children:t.title}),(0,a.Y)(_.EY.Meta,{color:"secondary",children:t.publishedBylines.map((e,t)=>(0,a.FD)(a.FK,{children:[t>0?", ":null,(0,a.Y)(M.ProfileHoverCard,{disabled:!1,subject:e,trigger:(0,a.Y)(_.EY,{as:"a",decoration:"hover-underline",children:e.name}),utmSource:"byline"})]}))})]}),(0,a.Y)(y.t,{className:"image-XZMKsB",hidePlaceholder:!0,hideTimestampIcon:!0,imageAspectRatio:x.fg,imageWidth:120,isBelowTheFold:!1,playButtonSize:null,post:t})]})},"mobile-hero":e=>{let{hidePlaceholder:t,post:i}=e,{hideUfi:n,pub:r}=(0,m.np)(),l=!!r.community_enabled;return(0,a.FD)(v.I1,{children:[i.cover_image&&(0,a.Y)(y.t,{className:"image-vqosjM",hidePlaceholder:t,imageAspectRatio:x.H9,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:i,squareImageSize:"large"}),(0,a.FD)(v.I1,{flex:"grow",justifyContent:"center",paddingTop:16,paddingX:16,children:[(0,a.Y)(T,{paddingBottom:4,post:i}),(0,a.FD)(v.I1,{gap:8,paddingBottom:12,children:[(0,a.Y)(P.Z,{clamp:3,post:i,preset:"mobileLg",preventOrphans:!0}),(0,a.Y)(I,{clamp:3,lineHeight:20,post:i,size:15}),(0,a.Y)(b.xx,{post:i})]}),!n&&(0,a.Y)(f,{justified:l,post:i})]})]})},square:e=>{let{hideDescription:t,hideImage:i,post:n}=e,{hideUfi:r,pub:l}=(0,m.np)(),o=!!l.community_enabled,s=t||(0,C.S2)({pub:l});return(0,a.FD)(v.I1,{gap:12,children:[!i&&(0,a.Y)(y.t,{className:d()("image-Ac018u"),imageAspectRatio:x.fg,imageWidth:600,isBelowTheFold:!0,playButtonSize:56,post:n,squareImageSize:"medium"}),(0,a.FD)(v.I1,{flex:"grow",gap:4,children:[(0,a.Y)(T,{post:n}),(0,a.Y)(P.Z,{clamp:3,post:n,preset:"md"}),!s&&(0,a.Y)(I,{clamp:1,post:n}),(0,a.Y)(b.xx,{post:n}),!r&&(0,a.Y)(f,{justified:o,post:n})]})]})}},z=e=>{var t,{linkToComments:i,post:o,testid:s,variant:g,onClick:Y}=e,f=(0,l._)(e,["linkToComments","post","testid","variant","onClick"]);let{iTemplate:b}=(0,u.GO)(),{isMobile:y}=(0,h.sM)(),{disableInteractive:_,pub:w,modifiedPosts:I,utm:k}=(0,m.np)(),S=null!=(t=I[o.id])?t:o,[D,F]=(0,c.useState)(!1),[T,P]=(0,c.useState)(!1),A=(0,c.useCallback)(e=>{let{active:t}=e;F(!!t)},[]),E=O[g];if(!E)return console.warn("PostPreview: ".concat(g," not implemented")),null;let N=(0,x.Uv)({linkToComments:!!i,post:S,pub:w,utm:k});return(0,a.Y)(m.XL,{actionsClassName:d()("actions-YFg47u",{"actions--menu-open-bDkeVH":D||T}),hideUfi:(0,C.S2)({pub:w}),postPreviewUrl:N,onToggleMenu:A,children:(0,a.Y)(x.dn.Provider,{value:{setIsOnboarding:P},children:(0,a.Y)(v.I1,{"aria-label":b(L(),S.title),className:d()("container-H2dyKk",{"container--menu-open-RRT2Fw":D}),"data-testid":s,padding:8*!y,position:"relative",radius:"sm",role:"article",tabIndex:0,onClick:e=>{Y&&Y({event:e,post:S}),_||(0,p.V2)(N,{event:e})},children:(0,a.Y)(E,(0,r._)((0,n._)({},f),{post:S}))})})})}},84032:function(e,t,i){i.d(t,{xx:()=>D,aR:()=>T});var n=i(69277),r=i(70408),l=i(79785),o=i(10201),a=i(38970),s=i.n(a),d=i(27786),c=i(36066),u=i(27437),p=i(41935),h=i(84605),m=i(85478),g=i(28528),v=i(7761),Y=i(63136),f=i(16291),b=i(4016),y=i(56262),_=i(39318),w=i(82776);let C="icon-cvHqCn",I="link-HFGLqU",k="dividerChar-SbAJEi";function S(){let e=(0,l._)(["Published on ",""]);return S=function(){return e},e}let D=e=>{let{clamp:t,hideLock:i,post:n}=e,{iTemplate:r}=(0,h.GO)(),{getPubPinInfo:l,getSectionPinInfo:a}=(0,v.b$)(),{highlightByline:s,pub:u,user:p}=(0,g.np)(),{showPin:m}=l({post:n}),{showPin:f}=a({post:n}),_=(m||f)&&(!(0,b.S2)({pub:u})||!!(null==p?void 0:p.is_contributor)),I=!i&&(0,y.isPaidAudience)(n.audience)&&!(0,b.zM)({post:n})&&!(0,b.S2)({pub:u}),D=(0,w.getBylineUsers)(n);return(0,o.FD)(Y.EY.Meta,{clamp:t,color:"pub-secondary-text",display:"inline",children:[_&&(0,o.Y)("div",{className:C,children:(0,o.Y)(d.A,{size:12})}),I&&(0,o.Y)("div",{className:C,children:(0,o.Y)(c.A,{audience:n.audience,size:12})}),n.restacked_pub_name?(0,o.FD)(o.FK,{children:[(0,o.Y)("span",{children:r(S(),n.restacked_pub_name)}),"\xa0",(0,o.Y)("span",{className:k,children:""}),"\xa0"]}):null,(0,o.Y)(T,{post:n}),"restack"!==n.type&&D.length>0&&u.bylines_enabled&&(0,o.FD)(o.FK,{children:["\xa0",(0,o.Y)("span",{className:k,children:""}),"\xa0",(0,o.Y)(Y.EY,{as:"span",color:s?"accent":void 0,children:(0,o.Y)(F,{clamp:t,post:n,pub:u})})]})]})},F=e=>{let{post:t,clamp:i,pub:l}=e,a=(0,w.getBylineUsers)(t),{getConfigFor:d}=(0,m.mJ)(),c=!!d("enable_author_pages"),p=s()(l.contributors,"user_id"),h=e=>{let t=c?(0,_.cxh)({userId:e.id,pub:l}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:c?{href:void 0,onClick:void 0}:{href:(0,_.laT)(e,l),onClick:e=>e.stopPropagation()}},g=e=>{var t,i,n;return null!=(n=null!=(i=null==(t=p[e.id])?void 0:t.name)?i:e.name)?n:""};return(0,o.Y)(o.FK,{children:(0,w.oxfordComma)(a.map(e=>i?(0,o.Y)("a",(0,r._)((0,n._)({className:I},h(e)),{children:g(e)})):(0,o.Y)(u.ProfileHoverCard,{disabled:c,subject:e,trigger:h(e).href?(0,o.Y)("a",(0,r._)((0,n._)({className:I},h(e)),{children:g(e)})):(0,o.Y)("span",{className:"notLink-oAjaXn",children:g(e)}),utmSource:"byline"})),{noBreakSpace:!0})})},T=e=>{let{customFormat:t="MM.DD.YY",post:i}=e,{language:n}=(0,h.GO)(),{pub:r}=(0,g.np)();return(0,o.Y)("time",{className:"date-rtYe1v",dateTime:(0,f.A)(i.post_date).toISOString(),children:(0,b.lu)({pub:r})?(0,f.A)(i.post_date).format(t):(0,b.S2)({pub:r})?(0,f.A)(i.post_date).format("MMMM D, YYYY"):(0,p.sq)({post:i,showDatetime:!1,language:n})})}},74762:function(e,t,i){i.d(t,{t:()=>w});var n=i(10201),r=i(32485),l=i.n(r),o=i(49802),a=i(50802),s=i(17402),d=i(72880),c=i(85478),u=i(68410),p=i(28528),h=i(91694),m=i(73066),g=i(47885),v=i(76977),Y=i(13348),f=i(59294),b=i(56262),y=i(39318);let _={container:"container-XxSyR3",image:"image-nBNbRY","image-square-legacy":"image-square-legacy-jBVF2K",imageSquareLegacy:"image-square-legacy-jBVF2K",containerSquare:"containerSquare-M6P7XI","inner-wrapper":"inner-wrapper-ymo6T9",innerWrapper:"inner-wrapper-ymo6T9","inner-wrapper-small":"inner-wrapper-small-h1CnSS",innerWrapperSmall:"inner-wrapper-small-h1CnSS","inner-wrapper-medium":"inner-wrapper-medium-JvLb2H",innerWrapperMedium:"inner-wrapper-medium-JvLb2H","inner-wrapper-large":"inner-wrapper-large-ffUJx1",innerWrapperLarge:"inner-wrapper-large-ffUJx1","image-square":"image-square-b7oiFr",imageSquare:"image-square-b7oiFr","image-square-small":"image-square-small-v9eiR2",imageSquareSmall:"image-square-small-v9eiR2","image-square-medium":"image-square-medium-Z6HNx5",imageSquareMedium:"image-square-medium-Z6HNx5","image-square-large":"image-square-large-dp7_L9",imageSquareLarge:"image-square-large-dp7_L9"},w=e=>{var t,i,r,w,I;let{className:k,disableVideoHover:S,hidePlaceholder:D,hideTimestamp:F,hideTimestampIcon:T,imageAspectRatio:P,imageWidth:x,isBelowTheFold:A,playButtonSize:E,post:N,squareImageSize:B}=e,{cropGravity:M,pub:R}=(0,p.np)(),{getConfigFor:L}=(0,c.mJ)(),{isMobile:O}=(0,u.sM)(),z=L("show_entire_square_image"),U=(0,s.useRef)(null),[q]=(0,f.TR)(U),H=q&&!S,W=!!N.videoUpload,K=!!(!W&&"podcast"===N.type),G=(0,b.getCoverImageUrl)(N);!G&&((null==(w=N.videoUpload)?void 0:w.thumbnail_id)?G=(0,y.Pzx)(N.videoUpload):(null==(I=N.podcastUpload)?void 0:I.thumbnail_id)&&(G=(0,y.Pzx)(N.podcastUpload,{post:N})));let V=x<=640;if(!G&&D)return null;let j=x||P?P:1.32,X=x||336,J=!!G&&N.cover_image_is_square&&z,Z=J&&!!B&&(!O||"small"!==B),Q=A?"lazy":void 0,$=(0,b.getDurationForPostPreview)({post:N}),ee=!!(null==(t=N.videoUpload)?void 0:t.live_stream_id);return Z?(0,n.Y)(C,{aspectRatio:j,className:k,imageUrl:G,loading:Q,size:B,width:X}):(0,n.FD)("div",{ref:U,className:l()(k,_.container,{"post-preview-cover-image-container--empty":!G}),style:"aspect-ratio: ".concat(j),children:[(W||K)&&null!==E&&(0,n.Y)(v.Ye,{alignItems:"center",inset:0,justifyContent:"center",opacity:W&&H?0:100,position:"absolute",style:{transition:"opacity ".concat(V?"var(--animation-timing-fast)":"var(--animation-timing-slow)"," var(--animation-smooth)")},children:(0,n.Y)(Y.ro,{isPlaying:!1,size:E})}),W&&(V?(0,n.Y)(h.A,{aspectRatio:(null==(i=N.videoUpload)?void 0:i.width)&&(null==(r=N.videoUpload)?void 0:r.height)?N.videoUpload.width/N.videoUpload.height:j,containerRef:U,post:N,size:x>320?"large":"medium"}):(0,n.Y)(m.A,{isHovered:H,post:N,pub:R})),G?(0,n.Y)(d.o,{alt:"",className:l()(_.image,{[_["image-square-legacy"]]:J}),imageProps:j?{height:Math.round(X/j),smartCrop:!0,gravity:ee?"auto":M}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:Q,maxWidth:X,src:G,style:{aspectRatio:"".concat(j)}}):null,!!$&&!F&&(0,n.Y)(g.Y,{duration:$,icon:T?null:K?(0,n.Y)(o.A,{size:12,stroke:"white"}):(0,n.Y)(a.A,{size:14,stroke:"white"})})]})},C=e=>{let{aspectRatio:t,className:i,imageUrl:r,width:o,loading:a,size:s}=e;return(0,n.Y)("div",{className:l()(i,_.container,_.containerSquare),style:"aspect-ratio: ".concat(t),children:(0,n.Y)("div",{className:l()(_["inner-wrapper"],_["inner-wrapper-".concat(s)]),children:(0,n.Y)(d.o,{alt:"",className:l()(_.image,_["image-square"],_["image-square-".concat(s)]),imageProps:{height:o,smartCrop:!0,gravity:"center"},loading:a,maxWidth:o,src:r})})})}},70557:function(e,t,i){i.d(t,{X:()=>F});var n=i(10201),r=i(50802),l=i(49802),o=i(48635),a=i(17402),s=i(41935),d=i(84236),c=i(84605),u=i(68349),p=i(68410),h=i(80098),m=i(38501),g=i(74762),v=i(88553),Y=i(89490),f=i(35369),b=i(76977),y=i(63136),_=i(13348),w=i(91496),C=i(7755),I=i(56262),k=i(82776);let S={container:"container-pFhu3n",containerNoImage:"containerNoImage-W5VZl3",videoLayer:"videoLayer-gwRrVN",contentLayer:"contentLayer-OGm4Y9",content:"content-iO1vNE",imageContainer:"imageContainer-ddA7f9",image:"image-deX_la",flippedImageContainer:"flippedImageContainer-rBB6TZ",flippedImage:"flippedImage-rChY0M",blurOverlay:"blurOverlay-xN2HYo",darkOverlay:"darkOverlay-jsLZzF",postTitleMobile:"postTitleMobile-ut7sIL"},D=(0,Y.yw)({position:"absolute",inset:0,radius:"sm",pointerEvents:"none"}),F=e=>{let{columns:t,hideLogo:i,highlightPost:r=!1,isPodcast:l,post:o,pub:c,section:Y,showPodcastLinks:f,user:_,utm:k}=e,F=(0,a.useRef)(null),{isMobile:x}=(0,p.sM)(),A=(0,I.getDurationForPostPreview)({post:o}),{title:E,description:N}=(0,C.ed)({pub:c,podcastUpload:o.podcastUpload,section:null!=Y?Y:null}),B=r?o.title:E,M=r?o.subtitle:N,R=e=>{let t=(0,v.Uv)({linkToComments:!1,post:o,pub:c,utm:k});(0,u.V2)(t,{event:e})};return x?(0,n.FD)(b.I1,{gap:12,children:[(0,n.Y)(b.I1,{onClick:R,children:(0,n.FD)(b.Ye,{ref:F,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,n.FD)(b.Ye,{className:S.videoLayer,direction:"column",position:"absolute",radius:"sm",children:[(0,n.Y)(b.Ye,{flex:"grow",position:"relative",style:{width:"100%"},children:(0,n.Y)(g.t,{className:S.image,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:F,squareImageSize:"large"})}),(0,n.Y)(b.Ye,{className:S.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,n.Y)(g.t,{className:S.flippedImage,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:F,squareImageSize:"large"})}),(0,n.Y)(D,{className:S.darkOverlay}),(0,n.Y)(b.Ye,{className:S.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,n.Y)(b.Ye,{className:S.contentLayer,pointerEvents:"none",position:"absolute",children:(0,n.Y)(b.Ye,{flex:"grow",children:(0,n.FD)(b.I1,{gap:16,padding:16,paddingBottom:24,children:[!i&&!r&&(0,n.Y)(w.M,{post:o,pub:c,section:null!=Y?Y:null,size:48,useSection:!l}),(0,n.FD)(b.I1,{gap:8,children:[(0,n.Y)(y.EY.H4,{color:"white",font:"pub-headings",children:B}),(0,n.Y)(y.EY.B4,{clamp:2,className:S.descriptionMobile,color:"white",children:M}),(0,n.Y)(b.Ye,{flex:"grow"})]}),o.videoUpload||o.podcastUpload||o.podcast_url?(0,n.Y)(T,{duration:A,highlightPost:r,post:o}):(0,n.Y)(P,{highlightPost:r,post:o})]})})})]})}),(0,n.Y)(d.pJ,{align:"center",post:o,pub:c,section:Y}),f&&l&&(0,n.Y)(m.D,{limit:2,post:o,pub:c,section:null!=Y?Y:null,stretch:!0,user:_})]}):(0,n.Y)(h.P,{variant:4===t?"full-width":"three-column-width",children:(0,n.FD)(b.I1,{gap:12,children:[(0,n.Y)(b.I1,{paddingX:8,onClick:R,children:(0,n.FD)(b.Ye,{ref:F,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,n.Y)(b.Ye,{position:"absolute",style:{bottom:16,right:16,zIndex:1},children:(0,n.Y)(s.xx,{allowEdit:!0,hideComments:!0,hideFeedRestackButton:!0,hideReactions:!0,hideSavePost:!0,hideShare:!0,isStatic:!1,labelStyle:"counts-or-none",post:o,pub:c,style:"compressed",user:_,onChange:()=>void 0})}),(0,n.FD)(b.Ye,{position:"absolute",radius:"sm",style:{width:"100%",height:"100%"},children:[(0,n.Y)(b.Ye,{flex:"grow",position:"relative",children:(0,n.Y)(b.Ye,{className:S.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,n.Y)(g.t,{className:S.flippedImage,disableVideoHover:!0,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:F,squareImageSize:"large"})})}),(0,n.Y)(b.Ye,{className:S.imageContainer,position:"relative",children:(0,n.Y)(g.t,{className:S.image,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:F,squareImageSize:"large"})}),(0,n.Y)(D,{className:S.darkOverlay}),(0,n.Y)(b.Ye,{className:S.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,n.FD)(b.Ye,{pointerEvents:"none",position:"absolute",style:{width:"100%",height:"100%"},children:[(0,n.Y)(b.Ye,{flex:"grow",children:(0,n.Y)(b.I1,{justifyContent:i||r?"end":"center",padding:48,children:(0,n.FD)(b.I1,{gap:24,children:[!i&&!r&&(0,n.Y)(w.M,{post:o,pub:c,section:null!=Y?Y:null,size:76,useSection:!l}),(0,n.FD)(b.I1,{gap:8,children:[(0,n.Y)(y.EY.H2,{clamp:3,color:"white",font:"pub-headings",children:B}),(0,n.Y)(y.EY.B4,{clamp:3,color:"white",children:M}),(0,n.Y)(b.Ye,{flex:"grow"})]}),o.videoUpload||o.podcastUpload||o.podcast_url?(0,n.Y)(T,{duration:A,highlightPost:r,post:o}):(0,n.Y)(P,{highlightPost:r,post:o})]})})}),(0,n.Y)(b.Ye,{flex:"grow",pointerEvents:"none"})]})]})}),(0,n.Y)(d.pJ,{align:"right",paddingX:8,post:o,pub:c,section:Y}),f&&l&&(0,n.Y)(b.I1,{paddingX:8,children:(0,n.Y)(m.D,{post:o,pub:c,section:null!=Y?Y:null,stretch:!0,user:_})})]})})},T=e=>{let{duration:t,highlightPost:i,post:o}=e,{iString:s}=(0,c.GO)(),{isMobile:d}=(0,p.sM)();return(0,n.FD)(b.Ye,{alignItems:"center",gap:d?16:24,pointerEvents:"auto",children:[(0,n.Y)(b.Ye,{flex:"auto",children:(0,n.Y)(_.ro,{isPlaying:!1,size:d?56:72})}),(0,n.Y)(b.Ye,{alignItems:"center",children:(0,n.FD)(b.I1,{children:[(0,n.FD)(b.Ye,{alignItems:"center",gap:4,children:[(0,n.Y)(b.Ye,{gap:4,width:16,children:o.videoUpload?(0,n.Y)(r.A,{size:14,stroke:"white"}):(0,n.Y)(l.A,{size:14,stroke:"white"})}),(0,n.Y)(y.EY.Meta,{color:"white",children:s("LATEST")}),t>0&&(0,n.FD)(a.Fragment,{children:[(0,n.Y)(y.EY.Meta,{color:"white",children:"\xb7"}),(0,n.Y)(y.EY.Meta,{color:"white",children:(0,k.secondsToHHMMSS)(t)})]})]}),!i&&(0,n.Y)(y.EY.Meta,{color:"white",children:o.title})]})})]})},P=e=>{let{highlightPost:t,post:i}=e,{iString:r}=(0,c.GO)();return(0,n.FD)(b.Ye,{alignItems:"center",gap:16,pointerEvents:"auto",children:[(0,n.Y)(f.K0,{rounded:!0,size:"md",children:(0,n.Y)(o.A,{size:20})}),(0,n.FD)(b.I1,{children:[(0,n.Y)(y.EY.Meta,{color:"white",children:r(t?"READ THE LATEST":"LATEST")}),!t&&(0,n.Y)(y.EY.B2,{clamp:1,color:"white",weight:"semibold",children:i.title})]})]})}},98920:function(e,t,i){i.d(t,{Z:()=>d});var n=i(10201),r=i(17402),l=i(46271),o=i(88553),a=i(21398),s=i(62088);let d=e=>{let{displaySignInModal:t,onCloseSignInModal:d,isStatic:c,entry:u}=e,{setIsOnboarding:p}=(0,r.useContext)(o.dn),h=(0,r.useRef)(null),{user:m,setUser:g}=(0,l.ur)();return c?null:(0,n.FD)(n.FK,{children:[(0,n.Y)(s.M9,{isOpen:!!t,onCancel:d,onSignup:()=>{var e;d(),null==(e=h.current)||e.open()},onSuccess:()=>{document.location.reload()},onUserCreated:e=>{var t;d(),g(e),null==(t=h.current)||t.open()}}),(0,n.Y)(a.fG,{entry:u||"post-preview",innerRef:h,module:"@/frontend/reader/onboarding",noCloseButton:!!m,noExit:!!m,resolve:e=>e.ReaderOnboardingModal,skipRedirectOnExit:!0,user:m,onBeforeOpen:()=>{p&&p(!0)},onClose:()=>{m&&document.location.reload()},onRequest:()=>Promise.all([i.e("7517"),i.e("7222"),i.e("108"),i.e("7521")]).then(i.bind(i,44502))})]})}},71834:function(e,t,i){i.d(t,{Z:()=>h});var n=i(69277),r=i(70408),l=i(10201),o=i(15052),a=i(91704),s=i(28528),d=i(76977),c=i(63136),u=i(4016),p=i(82776);let h=e=>{let{align:t,clamp:i,maxLength:h=140,noIcons:m,paddingBottom:g,post:v,preset:Y,preventOrphans:f,textWrap:b}=e,{linkToComments:y,postPreviewUrl:_,pub:w}=(0,s.np)(),{lineHeight:C,size:I,fontFamily:k}=(0,a.i)({preset:Y,pub:w}),S=(0,u.S2)({pub:w}),D=I>=28;return(0,l.Y)(d.I1,{paddingBottom:g,children:(0,l.FD)(c.EY,(0,r._)((0,n._)({},_?{as:"a",href:_,tabIndex:-1}:null),{align:t,clamp:S?void 0:i,color:"pub-primary-text","data-testid":"post-preview-title",font:"pub-headings",style:{fontSize:I,lineHeight:"".concat(C,"px"),fontFamily:k},textWrap:b,children:["thread"===v.type&&!m&&(0,l.Y)(o.A,{className:"icon-cUpv7d",height:D?26:17}),y&&"thread"!==v.type&&"Comments on: ",f?(0,p.preventOrphans)((0,p.truncateWords)(v.title,h)):(0,p.truncateWords)(v.title,h)]}))})}},73066:function(e,t,i){i.d(t,{A:()=>m});var n=i(10201),r=i(32485),l=i.n(r),o=i(63122),a=i(55584),s=i(17402),d=i(41873),c=i(25006),u=i(35369),p=i(76977),h=i(40345);let m=e=>{let{isHovered:t,post:i}=e,[r,m]=(0,s.useState)(!0),[g,v]=(0,s.useState)(!1),Y=(0,s.useRef)(null),f=(0,c.df)();return(0,s.useEffect)(()=>{var e,i,n,l,o,a,s,d,c,u;let p=()=>v(!0);return null==(i=Y.current)||null==(e=i.player)||e.addEventListener("loadedmetadata",p),t?(null==(o=Y.current)||null==(l=o.player)||null==(n=l.play)||n.call(l),(null==(a=Y.current)?void 0:a.player)&&(Y.current.player.volume=+!r)):(null==(c=Y.current)||null==(d=c.player)||null==(s=d.pause)||s.call(d),(null==(u=Y.current)?void 0:u.player)&&(Y.current.player.volume=0)),()=>{var e,t;null==(t=Y.current)||null==(e=t.player)||e.removeEventListener("loadedmetadata",p)}},[t]),f&&i.videoUpload&&t?(0,n.Y)("div",{className:l()(h.A.gifPreview,{[h.A.visible]:g}),children:(0,n.FD)(p.Ye,{alignItems:"center",justifyContent:"center",position:"relative",style:{width:"100%",height:"100%"},children:[(0,n.Y)(d.A,{ref:Y,autoPlay:!0,className:h.A.videoPlayerWrapper,contentType:"post",entityKey:i.id,entityType:"post",mediaUpload:i.videoUpload,noControls:!0,noPreview:!0,pub:f,surface:"publication",videoClassName:h.A.videoClassName,videoPlayerClassName:h.A.videoPlayerClassName,videoType:"post-preview"}),(0,n.Y)(p.Ye,{padding:12,position:"absolute",style:{top:0,right:0},children:(0,n.Y)(u.mZ,{onClick:e=>{var t;e.stopPropagation(),m(!r),(null==(t=Y.current)?void 0:t.player)&&(Y.current.player.volume=+!!r)},children:r?(0,n.Y)(o.A,{size:20}):(0,n.Y)(a.A,{size:20})})})]})}):null}},47173:function(e,t,i){i.d(t,{q:()=>h});var n=i(69277),r=i(70408),l=i(10201),o=i(32485),a=i.n(o),s=i(38970),d=i.n(s),c=i(85478),u=i(39318),p=i(82776);let h=e=>{let{post:t,clamp:i,pub:o}=e,s=(0,p.getBylineUsers)(t),{getConfigFor:h}=(0,c.mJ)(),m=!!h("enable_author_pages"),g=d()(o.contributors,"user_id"),v=e=>{let t=m?(0,u.cxh)({userId:e.id,pub:o}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:m?{href:void 0,onClick:void 0}:{href:(0,u.laT)(e,o),onClick:e=>e.stopPropagation()}},Y=e=>{var t,i,n;return null!=(n=null!=(i=null==(t=g[e.id])?void 0:t.name)?i:e.name)?n:""};return(0,l.Y)("div",{className:a()("container-Mw45dL",{"containerSingleLine-xWghSN":1===i}),children:(0,p.oxfordComma)(s.map(e=>v(e).href?(0,l.Y)("a",(0,r._)((0,n._)({className:"link-iknc0_"},v(e)),{children:Y(e)})):(0,l.Y)("span",{className:"notLink-U0WbwD",children:Y(e)})),{noBreakSpace:!0})})}},60355:function(e,t,i){i.d(t,{R:()=>N});var n=i(69277),r=i(70408),l=i(32641),o=i(10201),a=i(32485),s=i.n(a),d=i(27786),c=i(61250),u=i(68349),p=i(28528),h=i(36027),m=i(68410),g=i(95294),v=i(15894),Y=i(76977),f=i(65942),b=i(82776);let y=e=>{let{align:t="left",clamp:i,color:n,paddingBottom:r,post:l,preset:a}=e,{postPreviewUrl:s}=(0,p.np)();return(0,o.Y)(Y.I1,{paddingBottom:r,children:(0,o.Y)(v.T,{align:t,as:"a",clamp:i,color:n,href:s,preset:a,wrap:"center"===t?"balance":"pretty",children:(0,f.A)((0,b.truncateWords)(l.subtitle,152))})})},_=e=>{var{align:t="left",clamp:i,color:a,paddingBottom:d,post:c,preset:u,preventOrphans:h=!0}=e,m=(0,l._)(e,["align","clamp","color","paddingBottom","post","preset","preventOrphans"]);let{postPreviewUrl:g}=(0,p.np)(),f=(0,b.truncateWords)(c.title,140),y=h?(0,b.preventOrphans)(f):f;return(0,o.Y)(Y.I1,{paddingBottom:d,children:(0,o.Y)(v.T,(0,r._)((0,n._)({},m,g?{as:"a",href:g}:null),{align:t,clamp:i,className:s()("post-preview-title","title-vqpS7B",{"hoverColor-w9y2tS":"white"!==a}),color:a,preset:u,wrap:"center"===t?"balance":"pretty",children:y}))})};var w=i(61755);let C=e=>{let{post:t}=e,{pub:i,user:n,onChangePost:r}=(0,p.np)(),l=(0,b.showCommentsOnPost)({publication:i,post:t}),a=i.community_enabled,s=!!(null==n?void 0:n.is_contributor);return"restack"===t.type?null:(0,o.FD)(Y.Ye,{alignItems:"center",gap:6,children:[l&&(0,o.Y)(w.qS,{post:t,pub:i,size:"small"}),a&&(0,o.Y)(w.ct,{post:t,pub:i,size:"small",user:n,onChange:r}),s&&(0,o.Y)(w.xn,{context:"post-preview",post:t,pub:i,user:n})]})};var I=i(84032),k=i(47173);let S=e=>{let{align:t="left",color:i,paddingBottom:n,post:r,preset:l}=e,{pub:a}=(0,p.np)();return(0,o.Y)(Y.I1,{paddingBottom:n,children:(0,o.FD)(v.T,{align:t,color:null!=i?i:"sm-preview-byline"===l?"accent":void 0,preset:l,children:[(0,o.Y)(k.q,{post:r,pub:a}),"  ",(0,o.Y)(I.aR,{post:r})]})})};var D=i(88553);let F=e=>{let{align:t,hideDescription:i,hideImage:n,post:r,titlePreset:l}=e;return(0,o.FD)(Y.I1,{children:[!n&&(0,o.Y)(g.D,{className:"image-EaGmDd",imageAspectRatio:D.H9,imageWidth:600,isBelowTheFold:!0,post:r}),(0,o.FD)(Y.I1,{gap:4,paddingTop:8*!n,children:[(0,o.Y)(_,{align:t,post:r,preset:null!=l?l:n?"h5-serif":"h7-serif"}),!i&&(0,o.Y)(y,{align:t,clamp:3,post:r,preset:"d4-serif"}),(0,o.Y)(Y.I1,{alignItems:"center"===t?"center":"start",paddingY:4,children:(0,o.Y)(C,{post:r})}),(0,o.Y)(S,{align:t,post:r,preset:"sm-preview-byline"})]})]})};var T=i(13589);let P=e=>{let{post:t}=e;return(0,o.FD)(Y.I1,{alignItems:"center",children:[(0,o.Y)(Y.I1,{alignSelf:"stretch",paddingBottom:32,children:(0,o.Y)(g.D,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t})}),(0,o.Y)(_,{align:"center",color:"white",paddingBottom:32,post:t,preset:"h2-serif"}),(0,o.Y)(y,{align:"center",color:"white",paddingBottom:32,post:t,preset:"d1-sans-medium"}),(0,o.Y)(S,{color:"white",post:t,preset:"lg-preview-byline"})]})};var x=i(39318),A=i(92636);let E={archive:e=>{let{forceShowPlayButton:t,post:i}=e,{isMobile:n}=(0,m.sM)();return(0,o.FD)(Y.Ye,{gap:n?24:40,children:[(0,o.Y)(Y.I1,{flex:"auto",children:(0,o.Y)(g.D,{className:"image-YTYBVT",forceShowPlayButton:t,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!0,post:i})}),(0,o.FD)(Y.I1,{gap:8*!n,overflow:"hidden",children:[(0,o.Y)(_,{post:i,preset:"h5-serif"}),(0,o.Y)(Y.I1,{flex:n?void 0:"grow",paddingBottom:16*!!n,children:(0,o.Y)(y,{clamp:3,post:i,preset:"d3-serif"})}),(0,o.Y)(h.E,{post:i})]})]})},"content-block-episode":e=>{let{post:t}=e,{isMobile:i}=(0,m.sM)();return i?(0,o.Y)(F,{align:"left",post:t,titlePreset:"h4-sans-condensed"}):(0,o.FD)(Y.Ye,{gap:20,children:[(0,o.Y)(g.D,{className:"image-Vu2JCA",imageAspectRatio:22/31,imageWidth:440,isBelowTheFold:!0,post:t}),(0,o.FD)(Y.I1,{flex:"grow",gap:8,children:[(0,o.Y)(_,{post:t,preset:"h4-sans-condensed"}),(0,o.FD)(Y.I1,{gap:8,children:[(0,o.Y)(y,{clamp:3,post:t,preset:"d4-serif"}),(0,o.Y)(C,{post:t}),(0,o.Y)(S,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-listing":e=>{let{post:t,titlePreset:i="h6-sans"}=e,n="h4-sans-condensed"===i;return(0,o.FD)(Y.Ye,{gap:20,children:[(0,o.Y)(Y.I1,{flex:"auto",children:(0,o.Y)(g.D,{className:n?"image220-p05U5w":"image140-mQ92WN",imageAspectRatio:1,imageWidth:300,isBelowTheFold:!0,post:t})}),(0,o.FD)(Y.I1,{gap:n?8:4,children:[(0,o.Y)(_,{post:t,preset:i}),(0,o.FD)(Y.I1,{gap:8,children:[(0,o.Y)(y,{clamp:3,post:t,preset:"d4-serif"}),(0,o.Y)(C,{post:t}),(0,o.Y)(S,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-single-large":e=>{let{post:t}=e,{isMobile:i}=(0,m.sM)(),[l,a]=(0,T.Mk)();return i?(0,o.Y)(P,{post:t}):(0,o.FD)(Y.Ye,{alignItems:"center",gap:40,children:[(0,o.FD)(Y.I1,{alignItems:"center",flex:"grow",children:[(0,o.Y)(S,{color:"white",paddingBottom:56,post:t,preset:"lg-preview-byline"}),(0,o.Y)(_,(0,r._)((0,n._)({},a),{align:"center",color:"white",paddingBottom:40,post:t,preset:"h2-serif"})),(0,o.Y)(Y.I1,{width:360,children:(0,o.Y)(y,{align:"center",color:"white",post:t,preset:"d1-sans-medium"})})]}),(0,o.Y)(Y.I1,{flex:"grow",children:(0,o.FD)(Y.I1,(0,r._)((0,n._)({},a),{className:"imageContainer-LhpEMl",position:"relative",children:[(0,o.Y)(g.D,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t}),(0,o.Y)(Y.Ye,{className:"imageContainerOverlay-L73_9b",inset:0,position:"absolute",style:{opacity:+!!l}})]}))})]})},"event-page":e=>{let{post:t}=e;return(0,o.FD)(Y.I1,{gap:20,children:[(0,o.Y)(_,{post:t,preset:"h4-sans-regular"}),(0,o.Y)(g.D,{className:"image-J1_9gh",imageAspectRatio:16/9,imageWidth:660,isBelowTheFold:!0,post:t})]})},large:e=>{let{align:t="center",hideImage:i,imageAspectRatio:n="standard",post:r,showImageLast:l,titlePreset:a="h3-compressed"}=e,{isMobile:s}=(0,m.sM)(),d=!i&&(0,o.Y)(g.D,{className:"image-v6H72k",imageAspectRatio:"wide"===n?D.H9:"portrait"===n?3/4:D.fg,imageWidth:1250,isBelowTheFold:!1,post:r});return(0,o.FD)(Y.I1,{children:[!l&&d,(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",justifyContent:"center",paddingBottom:8*!!l,paddingTop:l?0:s?16:32,paddingX:16*("left"!==t),children:[(0,o.Y)(_,{align:t,paddingBottom:8,post:r,preset:a}),l&&(0,o.Y)(Y.I1,{alignSelf:"stretch",paddingBottom:8,children:d}),(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",gap:s?8:12,children:[(0,o.Y)(y,{align:t,post:r,preset:"d2-serif"}),(0,o.FD)(Y.Ye,{alignItems:"center",gap:24,justifyContent:"center",children:[(0,o.Y)(S,{align:t,post:r,preset:"lg-preview-byline"}),(0,o.Y)(C,{post:r})]})]})]})]})},mini:e=>{let{clampTitle:t,hideUfi:i,post:n,showDescription:r,showStar:l}=e;return(0,o.FD)(Y.Ye,{alignItems:"start",gap:16,children:[l&&(0,o.Y)("img",{alt:"star",height:24,src:(0,x.dJ9)("".concat((0,A.Ew)(),"/img/thefp/thefp-star.svg")),width:24}),(0,o.FD)(Y.I1,{gap:4,children:[(0,o.Y)(_,{clamp:t,post:n,preset:"h6-serif"}),r&&(0,o.Y)(y,{clamp:3,post:n,preset:"d4-serif"}),!i&&(0,o.Y)(Y.I1,{paddingY:4,children:(0,o.Y)(C,{post:n})}),(0,o.Y)(S,{post:n,preset:"sm-preview-byline"})]})]})},portrait:e=>{let{align:t="center",hideImage:i,post:n,titlePreset:r="h3-compressed"}=e,{isMobile:l}=(0,m.sM)(),a=!i&&(0,o.Y)(g.D,{className:"image-UumsF2",imageAspectRatio:3/4,imageWidth:1250,isBelowTheFold:!1,post:n});return(0,o.FD)(Y.Ye,{className:"container-lZcN1f",gap:24,children:[a,(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",className:"text-WvW3re",justifyContent:"space-between",paddingBottom:0,paddingX:16*("left"!==t),children:[(0,o.FD)(Y.I1,{className:"contentWrapper-NnSZwz",justifyContent:"center",children:[(0,o.Y)(_,{align:t,paddingBottom:8,post:n,preset:r,preventOrphans:!1}),(0,o.Y)(y,{align:t,post:n,preset:"d2-serif"})]}),(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",gap:l?8:12,children:[(0,o.Y)(C,{post:n}),(0,o.Y)(S,{align:t,post:n,preset:"lg-preview-byline"})]})]})]})},square:F},N=e=>{var t,i,a,{linkToComments:h,post:m,testid:g,variant:v,onClick:f}=e,b=(0,l._)(e,["linkToComments","post","testid","variant","onClick"]);let{cropGravity:y,disableInteractive:_,pub:w,modifiedPosts:C,showPinForPostIds:I,utm:k,onClickPost:S,onUnpinPost:F}=(0,p.np)(),T=null!=(i=C[m.id])?i:m,P=!!(null==I?void 0:I.has(T.id)),x=null!=(a=null==(t=T.postTheme)?void 0:t.post_preview_crop_gravity)?a:y,A=E[v];if(!A)return console.warn("PostPreview: ".concat(v," not implemented")),null;let N=(0,D.Uv)({linkToComments:!!h,post:T,pub:w,utm:k});return(0,o.Y)(p.XL,{cropGravity:x,linkToComments:h,postPreviewUrl:N,children:(0,o.FD)(Y.I1,{className:s()("container-r9Uobv","post-preview-container"),"data-testid":g,position:"relative",radius:"sm",onClick:e=>{f&&f({event:e,post:T}),S&&S({event:e,post:T}),_||(0,u.V2)(N,{event:e})},children:[(0,o.Y)(A,(0,r._)((0,n._)({},b),{post:T})),P&&(0,o.FD)(Y.Ye,{bg:"white",className:"pinContainer-waOJ8r",padding:8,position:"absolute",radius:"xs",onClick:e=>{e.stopPropagation(),F({postId:T.id})},children:[(0,o.Y)(d.A,{className:"pinIcon-Ad2m5R",size:20}),(0,o.Y)(c.A,{className:"unpinIcon-vVpw5q",size:20})]})]})})}},95294:function(e,t,i){i.d(t,{D:()=>f});var n=i(10201),r=i(32485),l=i.n(r),o=i(17402),a=i(36534),s=i(59307),d=i(72880),c=i(68410),u=i(28528),p=i(91694),h=i(73066),m=i(76977),g=i(59294),v=i(56262),Y=i(39318);let f=e=>{var t,i,r,f,b;let{className:y,disableVideoHover:_,disableVideoHoverFade:w,forceShowPlayButton:C,hidePlaceholder:I,imageAspectRatio:k,imageWidth:S,isBelowTheFold:D,post:F,videoPlayIconVariant:T="default"}=e,{cropGravity:P,pub:x}=(0,u.np)(),{isMobile:A}=(0,c.sM)(),E=(0,o.useRef)(null),[N]=(0,g.TR)(E),B=!!F.videoUpload,M=!!(!B&&"podcast"===F.type),R=(0,v.getCoverImageUrl)(F);!R&&((null==(f=F.videoUpload)?void 0:f.thumbnail_id)?R=(0,Y.Pzx)(F.videoUpload):(null==(b=F.podcastUpload)?void 0:b.thumbnail_id)&&(R=(0,Y.Pzx)(F.podcastUpload,{post:F})));let L=S<=640;if(!R&&I)return null;let O=S||k?k:1.32,z=S||336,U=!!(null==(t=F.videoUpload)?void 0:t.live_stream_id);return(0,n.FD)("div",{ref:E,className:l()(y,"container-XQwt8c","post-preview-image",{"post-preview-cover-image-container--empty":!R}),style:"aspect-ratio: ".concat(O),children:[(M||B||C)&&(0,n.Y)(m.Ye,{alignItems:"center",className:l()("fpPodcastOverlay-F_ObU8",{"fpPodcastOverlayHover-j8gEjt":!w}),inset:0,justifyContent:"center",position:"absolute",children:"default"===T?(0,n.Y)(a.A,{fill:"white",height:36,stroke:"none"}):(0,n.Y)("div",{className:"redPlayContainer-gIeqLa",children:(0,n.Y)(s.A,{fill:"white",height:A?12:20,stroke:"none"})})}),B&&(L?(0,n.Y)(p.A,{aspectRatio:(null==(i=F.videoUpload)?void 0:i.width)&&(null==(r=F.videoUpload)?void 0:r.height)?F.videoUpload.width/F.videoUpload.height:O,containerRef:E,post:F,size:S>320?"large":"medium"}):(0,n.Y)(h.A,{isHovered:N&&!_,post:F,pub:x})),R?(0,n.Y)(d.o,{alt:"",className:"image-wHmpR_",imageProps:O?{height:Math.round(z/O),smartCrop:!0,gravity:U?"auto":P}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:D?"lazy":void 0,maxWidth:z,src:R,style:{aspectRatio:"".concat(O)}}):null]})}},88218:function(e,t,i){i.d(t,{F:()=>l});var n=i(10201),r=i(63136);let l=e=>{let{align:t,children:i}=e;return(0,n.Y)(r.EY.B2,{align:t,color:"pub-primary-text",font:"pub-headings",weight:"bold",children:i})}},15040:function(e,t,i){i.d(t,{$o:()=>k,Ex:()=>f,Ff:()=>x,Pk:()=>T,w4:()=>D});var n=i(69277),r=i(70408),l=i(32641),o=i(10201),a=i(32485),s=i.n(a),d=i(14701),c=i(14647),u=i(20713),p=i(76977),h=i(81203),m=i(63136),g=i(49095),v=i(6986),Y=i(62614);let f=e=>{let t;var{content:i,children:r}=e,a=(0,l._)(e,["content","children"]);return t=i?"number"==typeof i?(0,o.Y)(C,(0,n._)({number:i},a)):"string"==typeof i?(0,o.Y)(w,(0,n._)({text:i},a)):(0,o.Y)(I,(0,n._)({icon:i},a)):(0,o.Y)(_,(0,n._)({},a)),(0,o.Y)(b,{badge:t,children:r})},b=e=>{let{children:t,badge:i}=e;return(0,o.FD)(p.pT,{position:"relative",className:v.A.container,children:[t,i]})},y=e=>{let{priority:t="primary",theme:i="accent",placement:n="top-right",shape:r="circle",radius:l="full",className:a,children:d,style:c}=e;return(0,o.Y)(p.pT,{alignItems:"center",justifyContent:"center",position:"absolute",userSelect:"none",sizing:"border-box",radius:l,className:s()(v.A.badge,v.A["placement_".concat(n)],v.A["shape_".concat(r)],Y.A["theme_".concat(i)],Y.A["priority_".concat(t)],a),style:c,children:d})},_=e=>{var{className:t}=e,i=(0,l._)(e,["className"]);return(0,o.Y)(y,(0,r._)((0,n._)({},i),{className:s()(v.A.dot,t)}))},w=e=>{var{text:t,className:i}=e,a=(0,l._)(e,["text","className"]);let d=1===t.length;return(0,o.Y)(y,(0,r._)((0,n._)({},a),{className:s()(v.A.text,d&&v.A.singleElement,i),children:(0,o.Y)(m.EY.Meta,{as:"span",color:"inherit",children:t})}))},C=e=>{var{number:t,className:i}=e,a=(0,l._)(e,["number","className"]);let d=1===t.toString().length;return(0,o.Y)(y,(0,r._)((0,n._)({},a),{className:s()(v.A.text,d&&v.A.singleElement,i),children:(0,o.Y)(m.EY.Meta,{as:"span",color:"inherit",children:t})}))},I=e=>{var{icon:t,fillIcon:i,className:a,style:d}=e,c=(0,l._)(e,["icon","fillIcon","className","style"]);return(0,o.Y)(y,(0,r._)((0,n._)({},c),{className:s()(v.A.singleElement,i&&v.A.fillIcon,a),style:d,children:t}))},k=e=>{var{children:t,placement:i="bottom-right",tier:r}=e,a=(0,l._)(e,["children","placement","tier"]);let s=(0,o.Y)(S,(0,n._)({placement:i,tier:r},a));return r?(0,o.Y)(b,{badge:s,children:t}):(0,o.Y)(o.FK,{children:t})},S=e=>{var{userId:t,tier:i,className:a}=e,d=(0,l._)(e,["userId","tier","className"]);return(0,o.Y)(y,(0,r._)((0,n._)({},d),{className:s()(v.A.singleElement,v.A.empty,a),children:(0,o.Y)(g.UserStatusSymbols,{tier:i,userId:t,size:"sm"})}))},D=e=>{var{children:t,placement:i="bottom-right"}=e,r=(0,l._)(e,["children","placement"]);let a=(0,o.Y)(F,(0,n._)({placement:i},r));return(0,o.Y)(b,{badge:a,children:t})},F=e=>{var{tier:t,fgOverride:i,bgOverride:r}=e,a=(0,l._)(e,["tier","fgOverride","bgOverride"]);return"author"===t?(0,o.Y)(I,(0,n._)({theme:"accent",fillIcon:!0,icon:(0,o.Y)(u.A,{size:12}),style:(0,n._)({},r&&{"--color-tag-bg":r}||{},i&&{"--color-tag-fg":i}||{})},a)):"founding"===t?(0,o.Y)(I,(0,n._)({theme:"default",priority:"secondary",icon:(0,o.Y)(d.A,{size:12})},a)):"paid"===t?(0,o.Y)(I,(0,n._)({theme:"default",priority:"secondary",icon:(0,o.Y)(c.A,{size:12})},a)):null},T=e=>{var{children:t}=e,i=(0,l._)(e,["children"]);return(0,o.Y)(b,{badge:(0,o.Y)(P,(0,n._)({},i)),children:t})},P=e=>{var{badge:t,placement:i="bottom-right",className:a}=e,d=(0,l._)(e,["badge","placement","className"]);return(0,o.Y)(y,(0,r._)((0,n._)({},d),{placement:i,className:s()(v.A.singleElement,v.A.empty,a),children:(0,o.Y)(g.UserBadge,{userBadge:t,size:"sm"})}))},x=e=>{var{pub:t,children:i,placement:r="bottom-right"}=e,a=(0,l._)(e,["pub","children","placement"]);let s=(0,o.Y)(A,(0,n._)({pub:t,placement:r},a));return t?(0,o.Y)(b,{badge:s,children:i}):(0,o.Y)(o.FK,{children:i})},A=e=>{var{pub:t,className:i}=e,a=(0,l._)(e,["pub","className"]);return(0,o.Y)(y,(0,r._)((0,n._)({},a),{radius:"xs",className:s()(v.A.singleElement,v.A.empty,i),children:(0,o.Y)(h.Nq,{pub:t,size:16,radius:"xs"})}))}},58326:function(e,t,i){i.d(t,{N:()=>h});var n=i(10201),r=i(32485),l=i.n(r),o=i(71464),a=i(17402),s=i(84605),d=i(35369),c=i(76977),u=i(63136),p=i(98949);let h=e=>{let{onFileSelected:t,dropCTA:i,pickCTA:r,pickCTAHandler:h,acceptableTypes:m,loading:g,className:v,multiple:Y=!1,addMode:f=!1,onDrop:b,onPick:y,info:_}=e,[w,C]=(0,a.useState)(!1),I=(0,a.useRef)(null),{iString:k}=(0,s.GO)();r||h||(r=(0,n.Y)(d.$n,{size:"sm",priority:"secondary-outline",children:Y?k("Choose files"):k("Choose file")})),i||(i=k("Drop file here"));let S=e=>{e.preventDefault(),C(!0)},D=async e=>{var i,n,r,l;let o,a;if(e.preventDefault(),C(!1),(null==(n=e.dataTransfer)||null==(i=n.items)?void 0:i.length)>0){let t=Array.from(e.dataTransfer.items);for(let e of t)if("file"!==e.kind)return void alert(k("Please only drag files!"));o=e.dataTransfer.items[0].getAsFile(),a=t.map(e=>e.getAsFile())}else{if(!((null==(l=e.dataTransfer)||null==(r=l.files)?void 0:r.length)>0))return void alert(k("Something went wrong!"));o=e.dataTransfer.files[0],a=e.dataTransfer.files}Y?await t(a):await t(o),null==b||b(Y?a:o)};return(0,n.FD)(n.FK,{children:[(0,n.FD)(c.VP,{alignItems:"center",justifyContent:"center",gap:12,radius:"md",className:l()("dragArea-sMT00C",v,{"dragActive-g1aWbC":w,"test-drag-active":w}),onDragEnter:S,onDragOver:S,onDragLeave:e=>{e.preventDefault(),C(!1)},onDrop:D,"aria-label":k("File Picker"),onClick:()=>{if(!h){var e;null==(e=I.current)||e.click()}},children:[!f&&(0,n.Y)(o.A,{size:32,strokeWidth:1.5}),!p.Fr&&(0,n.Y)("p",{className:"text-ehFyYa",children:g?k("Loading..."):w?k("Release to upload"):f?k("Add another image"):(0,n.FD)(n.FK,{children:[i," ",k("or")," "]})}),(0,n.FD)(c.VP,{gap:4,children:[(0,n.Y)(u.EY.B3,{color:"primary",weight:"medium",children:f?k("Add another file"):k("Drag files here to upload")}),_?"string"==typeof _?(0,n.Y)(u.EY.B4,{color:"secondary",children:_}):_:null]}),r||(h?h(()=>{var e;null==(e=I.current)||e.click()}):null)]}),(0,n.Y)("input",{className:l()("file-P3qftv","file-picker-input"),ref:I,type:"file",name:"file",accept:m,multiple:Y,onInput:async e=>{let i=e.target,n=i.files;n&&n[0]&&(Y?await t(n):await t(n[0]),null==y||y(Y?n:n[0])),i.value=""}})]})}},49045:function(e,t,i){i.d(t,{Z:()=>m});var n=i(10201),r=i(38314),l=i(37455),o=i(32485),a=i.n(o),s=i(24914),d=i(12815),c=i(17028),u=i(65842),p=i(97684),h=i(24311);function m(e){let{options:t,value:i,onChange:o,placeholder:m,disabled:g,onCreate:v,isCreateOptionValid:Y}=e,{trimmedInputValue:f,filteredOptions:b,handleInputChange:y,showCreateOption:_,noResults:w,processSelectionValue:C,getDisplayValue:I}=(0,d.B)({options:t,onCreate:v,isCreateOptionValid:Y}),{refs:k,floatingStyles:S}=(0,r.we)(s.Oo),D=async e=>{C(e,o)};return(0,n.Y)(l.G,{value:i,onChange:D,disabled:g,nullable:!0,children:e=>{let{open:t}=e;return(0,n.FD)(n.FK,{children:[(0,n.FD)(c.fI,{ref:k.setReference,flex:"grow",alignItems:"center",position:"relative",children:[(0,n.Y)(l.G.Input,{className:a()("pencraft",h.A.input,h.A.inputText,h.A.trailing,g&&h.A.disabled),onChange:y,placeholder:m,displayValue:I}),(0,n.Y)(u.uk,{position:"trailing",pointerEvents:"auto",children:(0,n.Y)(s.TO,{})})]}),t&&(0,n.FD)(l.G.Options,{ref:k.setFloating,style:S,static:!0,className:a()(p.A.options,w&&p.A.empty),children:[b.slice(0,s.DT).map(e=>{let t=e.value===i;return(0,n.Y)(s.jO,{option:e,isSelected:t},String(e.value))}),_&&(0,n.Y)(s.vS,{inputString:f})]})]})}})}},72879:function(e,t,i){i.d(t,{M:()=>d});var n=i(10201),r=i(17402),l=i(76977),o=i(20500),a=i(76171),s=i(65842);let d=e=>{let{className:t,children:i,detail:l,label:o,alignment:a="vertical",error:s=!1}=e;return(0,n.Y)("vertical"===a?c:u,{className:t,detail:l,error:s,label:o,children:r.Children.map(i,e=>(0,r.isValidElement)(e)?(0,r.cloneElement)(e,{error:s}):e)})},c=e=>{let{children:t,className:i,detail:r,error:l,label:d}=e;return(0,n.FD)(s.A0,{className:i,children:[(0,n.Y)(a.JU,{weight:"semibold",color:l?"error":"primary",children:d}),t,r?(0,n.Y)(o.EE,{children:r}):l?(0,n.Y)(o.yn,{children:l}):null]})},u=e=>{let{children:t,className:i,detail:r,error:d,label:c}=e;return(0,n.FD)(l.Ye,{className:i,justifyContent:"space-between",alignItems:"start",gap:12,children:[(0,n.FD)(s.A0,{children:[c&&(0,n.Y)(a.JU,{children:c}),r&&(0,n.Y)(o.EE,{children:r}),d&&(0,n.Y)(o.yn,{children:d})]}),t]})}},77103:function(e,t,i){i.d(t,{E:()=>l});var n=i(86500),r=i(39318);let l=e=>{let{feedUrl:t,pub:i,post:l}=e;(0,n.u4)(n.qY.PODCAST_APP_LINK_CLICK,{appName:"Substack App",feedUrl:t}),document.location.href=(0,r.XV8)(null==i?void 0:i.subdomain,null==l?void 0:l.slug,{redirect:"app-marketing",source:"podcast-dropdown"})}},25758:function(e,t,i){i.d(t,{r:()=>b});var n=i(10201),r=i(70511),l=i(78834),o=i(17402),a=i(84605),s=i(89490),d=i(35369),c=i(76977),u=i(16993),p=i(57820),h=i(75303),m=i(21356),g=i(92563),v=i(83447);let Y=[{value:"card",label:"Card"},{value:"poster",label:"Poster"},{value:"split",label:"Split"},{value:"overlay",label:"Overlay"},{value:"title",label:"Title"},{value:"app",label:"App"},{value:"solid",label:"Solid"}],f={card:["composed","sticker","background"],poster:["composed","sticker","background"],split:["composed"],overlay:["composed"],title:["composed","sticker","background"],app:["composed"],solid:["composed"]};function b(e){var t;let{isOpen:i,onClose:h,post:b}=e,{iString:_}=(0,a.GO)(),[I,k]=(0,o.useState)("card"),[S,D]=(0,o.useState)("composed"),[F,T]=(0,o.useState)("stories"),[P,x]=(0,o.useState)("light"),[A,E]=(0,o.useState)(!1);(0,o.useEffect)(()=>{E(!1)},[I,S,F]),(0,o.useEffect)(()=>{f[I].includes(S)||D("composed")},[I,S]);let{width:N,height:B}=(0,g.S8)(F),M="/api/v1/press_kit/asset/".concat(b.id,"/").concat(I,"/").concat(S,"?aspectRatio=").concat(F,"&mode=").concat(P,"&contentType=text/html"),R="/api/v1/press_kit/asset/".concat(b.id,"/").concat(I,"/").concat(S,"?aspectRatio=").concat(F,"&mode=").concat(P,"&contentType=image/png"),L="".concat(null==(t=b.title)?void 0:t.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_").concat(I,"_").concat(S,"_").concat(P,".png"),O="composed"===S?w:C,z=[{value:"stories",label:(0,n.Y)(m.s,{children:(0,n.Y)(r.A,{size:20})})},{value:"grid",label:(0,n.Y)(m.s,{children:(0,n.Y)(l.A,{size:20})})}],U=[{value:"light",label:(0,n.Y)(y,{backgroundColor:"var(--color-light-bg-primary)"})},{value:"dark",label:(0,n.Y)(y,{backgroundColor:"var(--color-dark-bg-primary)"})},{value:"accent",label:(0,n.Y)(y,{backgroundColor:"var(--color-accent)"})}];return(0,n.FD)(u.aF,{isOpen:i,onClose:h,width:500,children:[(0,n.Y)(u.rQ,{title:_("Social assets"),showClose:!0,onClose:h,showDivider:!0}),(0,n.Y)(u.cw,{children:(0,n.FD)(c.VP,{gap:20,children:[(0,n.FD)(c.fI,{justifyContent:"center",gap:12,children:[(0,n.Y)(m.T,{tabs:z,value:F,onChange:T}),"solid"===I&&(0,n.Y)(m.T,{tabs:U,value:P,onChange:x})]}),(0,n.Y)(c.ov,{children:(0,n.FD)(O,{style:{width:N,height:B},children:[!A&&(0,n.Y)(c.ov,{className:v.A.spinner,children:(0,n.Y)(p.y$,{})}),(0,n.Y)(s.az,{as:"iframe",src:M,onLoad:()=>{E(!0)},style:{width:N,height:B},border:"unset"})]})}),(0,n.Y)(c.ov,{children:(0,n.Y)(m.T,{tabs:Y,value:I,onChange:k})})]})}),(0,n.Y)(u.jl,{direction:"column",primaryButton:(0,n.Y)(d.vx,{priority:"primary",href:R,download:L,children:_("Download")})})]})}function y(e){let{backgroundColor:t}=e;return(0,n.Y)(_,{children:(0,n.Y)(s.az,{height:20,width:20,style:{backgroundColor:t}})})}let _=(0,h.I4)({height:20,width:20,radius:"xs",overflow:"hidden",border:"detail"}),w=(0,h.I4)({position:"relative",overflow:"hidden",radius:"md",outline:"detail",bg:"secondary"}),C=(0,h.I4)({position:"relative",overflow:"hidden",radius:"md",outline:"detail",className:v.A.transparent})},89129:function(e,t,i){i.d(t,{a:()=>l});var n=i(16291),r=i(82776);let l=function(e){let{stripeSub:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.A)(e).subtract((!t||t.cancel_at_period_end||"trialing"===t.status?0:"send_invoice"===t.billing?r.MANUAL_BILLING_DAYS_UNTIL_DUE:r.GRACE_PERIOD_DAYS)*24,"hour")}},77007:function(e,t,i){i.d(t,{k:()=>u});var n=i(10201),r=i(32485),l=i.n(r),o=i(17402),a=i(84605),s=i(10238),d=i(81929),c=i(91916);let u=e=>{let{children:t,disabled:i,fadeBackgroundColor:r,flushTop:u,previewBlockId:p}=e,{iString:h}=(0,a.GO)(),{isPreview:m,activePreviewBlockId:g,isActive:v,setActivePreviewBlock:Y,showOverlay:f,shouldFade:b}=(0,c.$E)(),y=(0,o.useRef)(null),_=v({previewBlockId:p}),w=(0,o.useCallback)(e=>{_?e.stopPropagation():g||(e.stopPropagation(),Y({previewBlockId:p}))},[Y,p,_,g]),C=b({previewBlockId:p}),I=r&&C;return!m||i?(0,n.Y)(n.FK,{children:t}):(0,n.FD)("div",{className:l()("container-o7NCXX",{[String("faded-SmKLU_")]:C&&!r}),"data-preview-section-id":(0,c.xm)(p),children:[(0,n.Y)("div",{className:"content-pk_ack",children:t}),I&&(0,n.Y)("div",{className:"fadeOverlay-gfsMFv",style:{background:r}}),f&&(0,n.Y)("div",{ref:y,className:l()("overlay-oTZ29Q",{[String("flushTop-VPZKWV")]:u}),style:{zIndex:s.AG},onClick:w,children:(0,n.Y)(d.vw,{className:"tag-rzunjJ",priority:"primary",theme:"substack",children:h("Click to edit")})})]})}},80303:function(e,t,i){i.d(t,{z:()=>h});var n=i(10201),r=i(46271),l=i(13074),o=i(24078),a=i(35369),s=i(76977),d=i(16993),c=i(63136),u=i(49807),p=i(3074);let h=e=>{let{isOpen:t,utmSource:i,onClose:h,setShared:m}=e,{user:g}=(0,r.ur)();if(!g)return(0,n.Y)(n.FK,{});let v=(0,u.gYq)(g,{utm_source:i}),Y="/img/profile_cards/card-bg-".concat(Math.ceil((null==g?void 0:g.id)?g.id%9+1:8*Math.random()),".png");return(0,n.FD)(d.aF,{isOpen:t,onClose:h,width:480,children:[(0,n.Y)(d.rQ,{showClose:!0,onClose:h}),(0,n.FD)(s.I1,{paddingX:32,paddingTop:16,paddingBottom:24,gap:20,children:[(0,n.FD)(s.I1,{alignItems:"center",gap:8,children:[(0,n.Y)(c.EY.H2,{weight:"semibold",children:"Invite your friends"}),(0,n.Y)(c.EY.B3,{align:"center",color:"secondary",children:"Share your profile to help your friends and followers find you on Substack."})]}),(0,n.FD)(s.I1,{justifyContent:"center",alignItems:"center",border:"detail",radius:"md",shadow:"lg",className:p.A.card,children:[(0,n.Y)(s.I1,{flex:"grow",className:p.A.cardTop,children:(0,n.Y)("img",{className:p.A.cardOverlay,src:(0,u.dJ9)(Y,800)})}),(0,n.FD)(s.I1,{flex:"grow",alignSelf:"stretch",className:p.A.cardBottom,gap:16,paddingX:20,paddingBottom:20,paddingTop:0,children:[(0,n.FD)(s.pT,{justifyContent:"space-between",alignItems:"end",children:[(0,n.Y)(o.eu,{user:g,size:112,className:p.A.cardAvatar}),(0,n.Y)(a.$n,{priority:"secondary",rounded:!0,className:p.A.fakeButton,children:"Subscribe"})]}),(0,n.FD)(s.I1,{flex:"grow",gap:8,children:[(0,n.Y)(c.EY.H2,{children:g.name}),(0,n.Y)(c.EY.Meta,{className:p.A.cardUrl,size:12,color:"substack",children:v.replace(/^(http|https):\/\//,"").replace(/\?.*$/,"")}),g.bio&&(0,n.Y)(c.EY.B4,{color:"secondary",children:g.bio})]})]})]}),(0,n.Y)(c.EY.Meta,{align:"center",children:"Share via"}),(0,n.Y)(l.lE,{shareUrl:v,shareEventType:"profile",shareText:"Subscribe to me on Substack",itemKey:g.id,onShare:()=>{m&&m()}})]})]})}},504:function(e,t,i){i.d(t,{KY:()=>C,Q$:()=>d,Qb:()=>u,Si:()=>b,aK:()=>y,fP:()=>p,n5:()=>g,qx:()=>w,rX:()=>f,tR:()=>c});var n=i(69277),r=i(70408),l=i(62193),o=i.n(l),a=i(27749),s=i(86500);function d(e,t){var i;let{extraEventProps:n={},tabId:r,primaryItem:l,isLoggedIn:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="trackingParameters"in e&&"item_entity_key"in e.trackingParameters?null==(i=e.trackingParameters)?void 0:i.item_entity_key:null;a&&o&&fetch("/api/v1/reader/feed/".concat(a,"/seen"),{method:"POST"}),Y("seen",e,t,{extraEventProps:n,tabId:r,primaryItem:l})}function c(e,t,i){let{extraEventProps:l={},tabId:o,primaryItem:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Y("seen_for_duration",e,t,{extraEventProps:(0,r._)((0,n._)({},l),{timeVisible:i}),tabId:o,primaryItem:a})}function u(e,t,i){let{extraEventProps:l={},tabId:o,primaryItem:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Y("clicked",e,t,{extraEventProps:(0,r._)((0,n._)({clicked_element:i},l),{tabId:o,primaryItem:a})})}function p(e,t){let{extraEventProps:i={},tabId:l,primaryItem:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y("swiped",e,t,{extraEventProps:(0,r._)((0,n._)({},i),{tabId:l,primaryItem:o})})}function h(e){var t,i,n,r,l,o,a,s,d,c,u,p,h,m,g;let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{primaryItem:Y}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{item_primary_entity_key:Y&&"entity_key"in Y?Y.entity_key:"entity_key"in e?e.entity_key:"",item_entity_key:"entity_key"in e?e.entity_key:"",item_type:e.type,item_content_user_id:"comment"in e?e.comment&&e.comment.user_id?e.comment.user_id:0:"post"in e?null!=(h=null==(i=e.post.publishedBylines)||null==(t=i[0])?void 0:t.id)?h:e.publication.author_id:0,item_content_timestamp:"comment"in e&&(null==(n=e.comment)?void 0:n.date)?new Date(e.comment.date).toISOString():"post"in e&&(null==(r=e.post)?void 0:r.post_date)?new Date(e.post.post_date).toISOString():"community_post"in e&&(null==(l=e.community_post)?void 0:l.created_at)?new Date(e.community_post.created_at).toISOString():null,item_context_type:"context"in e?e.context.type:"",item_context_type_bucket:"context"in e&&null!=(m=e.context.typeBucket)?m:"",item_context_timestamp:new Date("context"in e?e.context.timestamp:new Date).toISOString(),item_context_user_id:"context"in e?null==(o=e.context.users[0])?void 0:o.id:void 0,item_context_user_ids:"context"in e&&(null!=(g=null==(a=e.context.users)?void 0:a.length)?g:0)>0?e.context.users.map(e=>{let{id:t}=e;return t}):[],item_publication_id:"publication"in e?null==(s=e.publication)?void 0:s.id:void 0,item_post_id:null==(d=e.post)?void 0:d.id,item_comment_id:null==(c=e.comment)?void 0:c.id,item_can_reply:!("canReply"in e)||e.canReply,item_source:"frontend",item_model_rank:null,item_model_score:null,tab_id:null!=v?v:void 0,item_module_id:"id"in e?e.id:void 0,followed_user_count:0,subscribed_publication_count:0,is_following:!1,is_explicitly_subscribed:!1,trending_topic_id:"trendingTopic"in e?null==(u=e.trendingTopic)?void 0:u.id:void 0,trending_topic_query:"trendingTopic"in e?null==(p=e.trendingTopic)?void 0:p.query:void 0}}function m(e,t){let{primaryItem:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"comment"===e.type||"post"===e.type||"featuredCollection"===e.type||"featuredPublication"===e.type?o()(e.trackingParameters)?h(e,t,{primaryItem:i}):e.trackingParameters:h(e,t,{primaryItem:i})}function g(e){let{primaryItem:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r._)((0,n._)({},e),{trackingParameters:h(e,null,{primaryItem:t})})}i(40659),i(82776);let v=new Map([["featuredCollection","featured_collection"],["featuredPublication","featured_publication"]]);function Y(e,t,i){let{extraEventProps:r={},tabId:l,primaryItem:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=m(t,null!=l?l:null,{primaryItem:o}),d=v.get(t.type);(0,s.u4)("seen"===e?s.qY.FEED_ITEM_SEEN:"seen_for_duration"===e?s.qY.FEED_ITEM_SEEN_FOR_DURATION:"swiped"===e?s.qY.FEED_ITEM_SWIPED:s.qY.FEED_ITEM_CLICKED,(0,n._)({surface:i,tabId:l,module:d},a,r))}function f(e,t,i){let{extraEventProps:r={},tabId:l,primaryItem:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=m(t,null!=l?l:null,{primaryItem:o}),d=v.get(t.type);(0,s.u4)("seen"===e?s.qY.FEED_MODULE_ITEM_SEEN:s.qY.FEED_MODULE_ITEM_CLICKED,(0,n._)({surface:i,tabId:l,module:d},a,r))}function b(e,t){let{extraEventProps:i={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_("seen",e,t,{extraEventProps:i})}function y(e,t,i){let{extraEventProps:r={}}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_("clicked",e,t,{extraEventProps:(0,n._)({clicked_element:i},r)})}function _(e,t,i){var r,l,o;let{extraEventProps:a={}}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,s.u4)("seen"===e?s.qY.FEED_USER_SUGGESTION_SEEN:s.qY.FEED_USER_SUGGESTION_CLICKED,(0,n._)({suggested_user_id:t.user.id,suggested_publication_id:null!=(l=null==(r=t.publication)?void 0:r.id)?l:null,suggestion_source:null!=(o=t.source)?o:null,surface:i},t.trackingParameters,a))}function w(e,t){let{tabId:i,noteId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.u4)(s.qY.FEED_HIDDEN_ATTACHMENT_SHOWN,{attachmentId:e,reason:t,tabId:i,noteId:n})}function C(e){let{props:t,isModuleItem:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,a.PK)(),l=i?f:Y;return i=>{l("clicked",e,r,{extraEventProps:(0,n._)({clicked_element:i},t)})}}},9761:function(e,t,i){i.d(t,{QH:()=>S});var n=i(69277),r=i(70408),l=i(10201),o=i(50172),a=i(45773),s=i(80697),d=i(17402),c=i(46271),u=i(82772),p=i(24078),h=i(35369),m=i(76977);i(22602);var g=i(81203),v=i(63136),Y=i(2548),f=i(85050),b=i(32848),y=i(49095),_=i(73030),w=i(96301),C=i(39318),I=i(49807),k=i(57324);function S(e){let{items:t,surface:i,page_num:a=0,focusedPubId:s,onClickItem:d,onItemFirstVisible:c}=e,u=(0,b.n7)(),p=a*_.Ew,h=new Map(t.map(e=>{var t,i;let{publication:n}=e;return[n.id,null==(i=u.result)||null==(t=i.subscriptions)?void 0:t.some(e=>e.publication_id===n.id&&e.membership_state&&(0,w.KB)(e.membership_state))]}));return(0,l.Y)(Y.I1,{gap:8,children:t.map((e,t)=>{var l;return(0,o.createElement)(D,(0,r._)((0,n._)({},e),{key:e.publication.id,isSubscribed:null!=(l=h.get(e.publication.id))&&l,rank:t+p+1,surface:i,isFocused:s===e.publication.id,onClick:d,onFirstVisible:c}))})})}function D(e){let{user:t,publication:i,rank:n,isSubscribed:r,surface:o,isFocused:a,onClick:s,onFirstVisible:h,trackingParameters:f}=e,b=(0,c.Jd)(),_=(0,d.useRef)(null),w=!!b&&b.id===(null==t?void 0:t.id);return(0,u.S8)(_,()=>{null==h||h({publication:i,rank:n,trackingParameters:f})}),(0,l.Y)(Y.Qe,{id:i.id.toString(),bg:w||a?"accent-orange":void 0,href:t?(0,I.gYq)(t):(0,C.$_T)(i),onClick:()=>s({publication:i,rank:n,trackingParameters:f}),children:(0,l.FD)(m.pT,{justifyContent:"space-between",flex:"grow",alignItems:"center",paddingX:12,ref:_,children:[(0,l.FD)(m.pT,{gap:16,alignItems:"center",children:[(0,l.Y)(v.EY.Digit,{minWidth:16,children:n}),t&&(0,l.FD)(l.FK,{children:[(0,l.Y)(p.eu,{user:t,size:40}),(0,l.FD)(Y.I1,{children:[(0,l.FD)(m.pT,{alignItems:"center",gap:4,children:[(0,l.Y)(v.EY.B3,{weight:"semibold",children:t.name}),(0,l.Y)(y.UserStatusSymbols,{tier:t.bestseller_tier,status:t.status,userId:t.id,size:"sm"})]}),(0,l.Y)(v.EY.B4,{color:"secondary",children:i.name})]})]}),!t&&(0,l.FD)(l.FK,{children:[(0,l.Y)(g.Nq,{radius:"full",pub:i,size:32}),(0,l.Y)(Y.I1,{children:(0,l.Y)(v.EY.B3,{weight:"bold",children:i.name})})]})]}),!w&&(0,l.Y)(F,{pub:i,user:t,surface:o,isSubscribed:r,currentUser:b})]})})}function F(e){let{pub:t,user:i,surface:n,isSubscribed:r,currentUser:o}=e,d=(0,b.n7)(),c=(0,f.s)({surface:n})(t);return r?(0,l.Y)(m.pT,{alignItems:"center",justifyContent:"center",padding:8,children:(0,l.Y)(a.A,{size:16,stroke:"var(--color-fg-tertiary)"})}):(0,l.Y)(h.K0,{priority:"secondary",size:"sm",newTab:!0,href:(0,C.eV6)(t,{addBase:!0,user:o,utm_source:k.VU.substack,utm_medium:k.Jn.web,utm_campaign:k._9.reader2}),onClick:e=>{if(e.stopPropagation(),i){let e="visibilitychange",i=()=>{"visible"===document.visibilityState&&(document.removeEventListener(e,i),d.refetchPublication(t.id))};document.addEventListener(e,i)}c(e)},children:(0,l.Y)(s.A,{size:20})})}},28916:function(e,t,i){i.d(t,{I:()=>k,w:()=>S});var n=i(69277),r=i(10201),l=i(15977),o=i(50180),a=i(17402),s=i(71941),d=i(84605),c=i(46271),u=i(12501),p=i(68349),h=i(35369),m=i(76977),g=i(88774),v=i(16993),Y=i(63136),f=i(36372),b=i(5180),y=i(2481),_=i(90554),w=i(70189),C=i(18947),I=i(49807);function k(e){var t,i;let{pub:h,post:m,comment:v,feedItem:Y,onRestack:k,tabId:D,surface:F,renderWithoutUser:T=!1}=e,P=(0,c.Jd)(),x=(0,f.d)(),A=(!!P||T)&&!(null==h?void 0:h.hide_post_restacks)&&!(null==h?void 0:h.invite_only),E=!!(null==(t=v||m)?void 0:t.restacked),N=(null==(i=v||m)?void 0:i.restacks)||0,B=(0,b.wA)(),M=(0,y.NP)(),[R,L]=(0,a.useState)(!1),O=(0,u.st)({pathname:"/api/v1/restack/feed"}),{iString:z}=(0,d.GO)(),{nuxModal:U,showRestackNux:q}=S(v&&!v.post_id?"note":v?"comment":"post"),H=async()=>{var e,t;if(!P)return void L(!0);null==k||k(!0);let i=await O.refetch({method:"POST",json:{postId:v?null:null==m?void 0:m.id,commentId:(null==v?void 0:v.id)||null,mediaClipId:(null==Y?void 0:Y.type)==="post"?null==(e=Y.mediaClip)?void 0:e.id:void 0,tabId:D,surface:F}});if(i instanceof Error){null==k||k(!1),alert((0,p.uX)(i));return}if(x.popToast(()=>(0,r.Y)(f.y,{text:i.comment?z("Note restacked"):z("Post restacked"),Icon:l.A,cta:z("View now"),href:(0,w.oT)()})),i.comment)B({type:"comment_restack",payload:{commentId:i.comment.id,isRestacked:!0}});else{B({type:"post_restack",payload:{postId:i.post.id,isRestacked:!0}});let e=(null==Y?void 0:Y.type)==="post"?null==(t=Y.mediaClip)?void 0:t.id:void 0;e&&B({type:"post_restack",payload:{postId:i.post.id,mediaClipId:e,isRestacked:!0}})}q()},W=async()=>{var e,t;null==k||k(!1);let i=await O.refetch({method:"DELETE",json:{postId:v?null:null==m?void 0:m.id,commentId:(null==v?void 0:v.id)||null,mediaClipId:(null==Y?void 0:Y.type)==="post"?null==(e=Y.mediaClip)?void 0:e.id:void 0,tabId:D}});if(i instanceof Error){null==k||k(!0),alert((0,p.uX)(i));return}if(x.popToast(()=>(0,r.Y)(f.y,{text:z("Restack undone"),Icon:o.A})),v)B({type:"comment_restack",payload:{commentId:v.id,isRestacked:!1}});else if(m){B({type:"post_restack",payload:{postId:m.id,isRestacked:!1}});let e=(null==Y?void 0:Y.type)==="post"?null==(t=Y.mediaClip)?void 0:t.id:void 0;e&&B({type:"post_restack",payload:{postId:m.id,mediaClipId:e,isRestacked:!1}})}},K=async()=>{if(!P)return void L(!0);try{var e;await M.open((0,n._)({feedItem:Y,restackUrl:v?(0,C.XB)(m,v,h):(0,I.wu9)(h,m),tabId:D,surface:F},(null==Y?void 0:Y.type)==="post"&&{mediaClipId:null==(e=Y.mediaClip)?void 0:e.id})),q()}catch(e){}};return(0,_.y)({name:"restack-comment",action:()=>{A&&K()}}),{canRestack:A,isRestacked:E,restacks:N,nuxModal:U,loggedOutRestackAttempt:R,menuItems:[E?(0,r.Y)(g.Dr,{leading:(0,r.Y)(o.A,{}),onClick:W,children:z("Undo restack")}):(0,r.Y)(g.Dr,{leading:(0,r.Y)(l.A,{}),onClick:H,children:z("Restack")}),(0,r.Y)(g.Dr,{leading:(0,r.Y)(s.A,{}),onClick:K,children:z("Restack with a note")})]}}function S(e){let t=function(e){let{entityType:t}=e,[i,n]=(0,a.useState)(!1),l=()=>{n(!1)};return{open:()=>{n(!0)},element:(0,r.Y)(v.aF,{isOpen:i,onClose:l,children:(0,r.Y)(D,{onClose:l,entityType:t})})}}({entityType:e}),i=(0,u.st)({pathname:"/api/v1/feed/has-restacked",auto:!1,cacheTtl:1/0}),n=async()=>{var e;let n=null!=(e=i.result)?e:await i.refetch();n instanceof Error||(null==n?void 0:n.hasRestacked)!==!1||(t.open(),i.setResult({hasRestacked:!0}))};return{nuxModal:t.element,showRestackNux:n}}function D(e){let{onClose:t,entityType:i}=e,{iString:n}=(0,d.GO)();return(0,r.FD)(m.I1,{paddingX:16,children:[(0,r.Y)(m.pT,{justifyContent:"center",paddingTop:32,paddingBottom:24,children:(0,r.Y)(l.A,{size:40,stroke:"var(--color-fg-primary)"})}),(0,r.FD)(m.I1,{gap:12,children:[(0,r.FD)(Y.EY.H3,{align:"center",children:["comment"===i&&n("You restacked a comment"),"note"===i&&n("You restacked a note"),"post"===i&&n("You restacked a post")]}),(0,r.FD)(Y.EY.B3,{color:"secondary",align:"center",children:["comment"===i&&n("Restack comments that inspire you to share them with more people."),"note"===i&&n("Restack notes that inspire you to share them with more people."),"post"===i&&n("Restack posts that inspire you to share them with more people.")," ",n("Subscribers can see your restacks in the Notes tab and on your profile.")]})]}),(0,r.FD)(m.I1,{paddingBottom:16,paddingTop:20,gap:8,children:[(0,r.Y)(h.$n,{priority:"primary",href:(0,w.oT)(),children:n("View now")}),(0,r.Y)(h.$n,{priority:"secondary-outline",onClick:t,children:n("OK")})]})]})}},90554:function(e,t,i){i.d(t,{y:()=>r});var n=i(17402);function r(e){let{name:t,action:i}=e;(0,n.useEffect)(()=>{if("undefined"==typeof window)return;let e=new URL(window.location.href);if(e.searchParams.get("action")===t){i();let t=e.searchParams;t.delete("action"),window.history.replaceState({},"","".concat(e.origin).concat(e.pathname,"?").concat(t))}},[])}},60816:function(e,t,i){i.d(t,{l:()=>c});var n=i(10201),r=i(32485),l=i.n(r),o=i(43954);let a="icon-20-rna120",s="icon-40-EI6f0n",d={apple_podcasts:"/img/shows_app_icons/apple_podcasts.svg?v=1",overcast:"/img/shows_app_icons/overcast.svg?v=1",pocket_casts:"/img/shows_app_icons/pocket_casts.svg?v=1",rss:"/img/shows_app_icons/rss.svg?v=1",spotify:"/img/shows_app_icons/spotify.svg?v=1",spotify_for_paid_users:"/img/shows_app_icons/spotify.svg?v=1",spotify_open_access:"/img/shows_app_icons/spotify.svg?v=1",substack:"/img/shows_app_icons/substack.svg?v=1",youtube:"/img/shows_app_icons/youtube.svg?v=1",youtube_music:"/img/shows_app_icons/youtube_music.svg?v=1"},c=e=>{let{platformKey:t,size:i=20}=e;return"email"===t?(0,n.Y)(o.A,{className:l()("emailIcon-VHOnI0",{[a]:20===i,[s]:40===i})}):(0,n.Y)("img",{className:l()({[a]:20===i,[s]:40===i}),src:d[t]})}},66728:function(e,t,i){i.d(t,{b:()=>b});var n=i(10201),r=i(45994),l=i(32485),o=i.n(l),a=i(15734),s=i.n(a),d=i(36233),c=i(84605),u=i(86500),p=i(68349),h=i(88218),m=i(76977),g=i(63136),v=i(77103),Y=i(60816),f=i(7755);let b=e=>{let{description:t,feedUrl:i,pub:r,post:l,section:o,showLinks:a,user:s}=e,{iString:d}=(0,c.GO)();return(0,n.FD)(m.I1,{gap:t?8:16,"data-testid":"shows-listen-on",role:"region","aria-label":d("Listen on"),"aria-hidden":!0,children:[(0,n.Y)(h.F,{children:d("Listen on")}),t&&(0,n.Y)(g.EY.B3,{color:"pub-secondary-text",paddingBottom:8,children:t}),(0,n.FD)(m.Ye,{gap:8,wrap:"wrap",children:[l&&(0,n.Y)(y,{platformKey:"substack",label:d("Substack App"),onClick:()=>{(0,v.E)({feedUrl:i,pub:r,post:l})}}),(0,f.RM)({feedUrl:i,isApple:(0,p.cX)(),isMobile:!1,showLinks:a,user:s,render:e=>{let{label:t,key:i,onClick:r}=e;return(0,n.Y)(y,{label:t,platformKey:i,onClick:r})}}),(null==s?void 0:s.is_subscribed)&&(0,n.Y)(_,{section:o})]})]})},y=e=>{let{disabled:t,label:i,platformKey:r,onClick:l}=e;return(0,n.FD)(m.Ye,{alignItems:"center",bg:"secondary",className:o()("listen-on-item-yiZDJR",{"listen-on-item--disabled-S4EzSi":t}),gap:8,paddingX:12,radius:"sm",onClick:t?void 0:l,children:[(0,n.Y)(m.pT,{opacity:t?40:100,children:(0,n.Y)(Y.l,{platformKey:r})}),(0,n.Y)(g.EY.B4,{weight:"semibold",color:"pub-secondary-text",opacity:t?80:100,nowrap:!0,children:i})]})},_=e=>{let{section:t}=e,{iString:i}=(0,c.GO)(),[l,o]=(0,r.J0)(!1),a=async()=>{try{(0,u.u4)(u.qY.PODCAST_EMAIL_LINK_CLICKED),await s().post("/api/v1/subscription/send_podcast_email").send({section_id:null==t?void 0:t.id}),(0,d.Ay)(i("Email sent")),o(!0)}catch(e){(null==e?void 0:e.status)===429?((0,d.Ay)(i("Email already sent")),o(!0)):(0,d.Ay)(i("Something went wrong sending email"))}};return(0,n.Y)(y,{disabled:l,label:l?i("Email sent"):i("Email mobile setup link"),platformKey:"email",onClick:()=>{a()}})}},79564:function(e,t,i){i.d(t,{H:()=>tL});var n=i(69277),r=i(70408),l=i(10201),o=i(17402),a=i(15734),s=i.n(a),d=i(69715),c=i(71328),u=i(6212),p=i(13918),h=i(41935),m=i(86227),g=i(46360),v=i(85478),Y=i(46271),f=i(95064),b=i(26289),y=i(86500),_=i(74894),w=i(68349),C=i(68410),I=i(76977),k=i(45994);let S=e=>{let{visible:t,className:i,style:n={}}=e,[r,o]=(0,k.J0)(!1),[a,s]=(0,k.J0)(t);return((0,k.vJ)(()=>{t?(s(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!0)})})):o(!1)},[t]),(0,k.vJ)(()=>{t&&s(!0)},[t]),a)?(0,l.Y)("div",{className:"".concat("backdrop-_YQndu"," ").concat(r?"backdropVisible-eL7zZp":"backdropHidden-pg_NJc"," ").concat(i),onTransitionEnd:function(){t||s(!1)},style:n}):null};var D=i(59294),F=i(32485),T=i.n(F),P=i(27747),x=i(4016);let A=e=>{let{audioPlayerRef:t,hasPaywall:i,feedUrl:n,isPrivateFeed:r,isServingFreePodcastUrl:o,post:a,pub:s,section:d,user:c,onChange:u,onCommentsClick:p,freeSignup:m,reaction_token:g}=e,{isMobile:v}=(0,C.sM)(),Y=(0,x.lu)({pub:s});return(0,l.Y)("div",{className:T()("player-wrapper-outer-eAOhcD",{"playerWrapperOuterFP-bKWoVB":Y}),children:(0,l.Y)("div",{className:T()("player-wrapper-inner-KUdif0",{"playerWrapperInnerFP-Cm0O_q":Y}),children:(0,l.Y)(P.Uz,{audioPlayerRef:t,explicitHeight:Y?340:void 0,feedUrl:n,hasPaywall:i,isPrivateFeed:r,isServingFreePodcastUrl:o,post:a,pub:s,radius:Y&&v?"none":void 0,section:d,user:c,freeSignup:m,ufiComponent:Y?null:(0,l.Y)(h.xx,{isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:a,pub:s,style:"large-on-dark",user:c,onChange:u,onCommentsClick:p}),reaction_token:g})})})};var E=i(20674),N=i(13950),B=i(84236),M=i(63446),R=i(82180),L=i(36027),O=i(7903),z=i(15894),U=i(37659),q=i(28528),H=i(16074),W=i(63136),K=i(69308),G=i(73164),V=i(84605),j=i(35369),X=i(16993),J=i(75303),Z=i(36372),Q=i(77103),$=i(60816),ee=i(7755),et=i(98949);let ei=e=>{let{feedUrl:t,isStandaloneVideo:i,eligibleForPodcast:n,post:r,pub:a,showLinks:s,user:d,onTranscriptClick:c}=e,{iString:u}=(0,V.GO)(),[p,h]=(0,o.useState)(!1);return(0,l.FD)(l.FK,{children:[(0,l.FD)(I.Ye,{gap:8,overflowX:"auto",className:"horizontalScrolling-CUpSMl",children:[(0,l.Y)(j.$n,{leading:(0,l.Y)(G.A,{height:18,style:{stroke:"none"}}),priority:"secondary",onClick:()=>(0,Q.E)({feedUrl:t,pub:a,post:r}),children:u("Open in app")}),c&&(0,l.Y)(j.$n,{leading:(0,l.Y)(K.A,{size:20}),priority:"secondary",onClick:c,children:u("Transcript")}),!i&&n&&(0,l.Y)(j.$n,{priority:"secondary",onClick:()=>{h(!0)},children:u("Listen via...")})]}),(0,l.Y)(en,{isModalOpen:p,setIsModalOpen:h,feedUrl:t,showLinks:s,user:d})]})},en=e=>{let{isModalOpen:t,setIsModalOpen:i,feedUrl:n,showLinks:r,user:o}=e,{iString:a}=(0,V.GO)(),s=(0,Z.d)();return(0,l.FD)(X.aF,{isOpen:t,onClose:()=>i(!1),children:[(0,l.Y)(X.rQ,{title:a("Listen via..."),description:a("Select your favorite podcast app from the list below."),showClose:!0,showDivider:!0,onClose:()=>i(!1)}),(0,l.Y)(X.cw,{children:(0,l.Y)(I.I1,{gap:20,children:r&&(0,ee.RM)({feedUrl:n,isApple:(0,et.aR)(),isMobile:!0,showLinks:r,user:o,render:e=>{let{key:t,label:i,url:n,onClick:r}=e;return(0,l.Y)(er,{platformKey:t,label:i,url:n,onClick:r})}})})}),(0,l.Y)(X.jl,{direction:"column",secondaryButton:(0,l.Y)(j.$n,{priority:"secondary",onClick:()=>{s.popToast(()=>(0,l.Y)(Z.y,{text:a("Copied link to clipboard")})),(0,w.lW)(n)},children:a("Copy RSS feed URL")})})]})},er=e=>{let{platformKey:t,label:i,url:n,onClick:r}=e;return(0,l.Y)(J.AE,{href:n,children:(0,l.FD)(I.Ye,{alignItems:"center",gap:12,onClick:r,children:[(0,l.Y)($.l,{platformKey:t,size:40}),(0,l.Y)(W.EY.B3,{weight:"bold",children:i})]})})};var el=i(39318),eo=i(49807),ea=i(96063);let es=e=>{let{feedUrl:t,isStandaloneVideo:i,eligibleForPodcast:n,post:r,pub:o,magicToken:a,section:s,showLinks:d,user:c,onChange:u,onCommentsClick:p,onToggleRestackModal:m,onTranscriptClick:g}=e,{isMobile:v}=(0,C.sM)();return(0,x.lu)({pub:o})?(0,l.Y)(ed,{post:r,pub:o,section:s,user:c}):(0,l.Y)(N.DH,{children:(0,l.FD)(I.I1,{gap:16,children:[v&&(0,l.Y)(ei,{feedUrl:t,isStandaloneVideo:i,eligibleForPodcast:n,post:r,pub:o,showLinks:d,user:c,onTranscriptClick:g}),v&&(0,l.Y)(B.pJ,{align:"center",direction:"column",gap:8,paddingY:8,post:r,pub:o,section:s,textField:"episode_short_text"}),(0,l.FD)(I.I1,{gap:8,children:[(0,l.Y)(W.EY.H2,{color:"pub-primary-text",font:"pub-headings",dir:"auto",className:ea.A.title,children:r.title}),r.subtitle&&(0,l.Y)(W.EY.B2,{color:"pub-secondary-text",font:"pub-headings",weight:"regular",dir:"auto",className:ea.A.subtitle,children:r.subtitle})]}),(0,l.Y)(E.D,{variant:"shows",post:r,pub:o}),!v&&(0,l.Y)(h.bW,{post:r,pub:o,user:c,onChange:u,postReactionToken:a,onCommentsClick:p,onToggleRestackModal:m,onTranscriptClick:g,position:"shows-episode-player"})]})})},ed=e=>{let{post:t,pub:i,section:n,user:r}=e,{isMobile:o}=(0,C.sM)(),a=(0,el.t6y)({pub:i,section:n}),s=!!t.videoUpload;return(0,l.Y)(q.XL,{pub:i,children:(0,l.Y)(N.DH,{children:(0,l.FD)(I.I1,{gap:24,children:[(0,l.FD)(I.I1,{gap:12,children:[(0,l.FD)(I.I1,{gap:8,children:[n&&(0,l.Y)(M.v,{alignSelf:"start",href:s?(0,eo.Dor)(i,{section:n}):a,variant:"tertiary",size:"md",leadingIcon:"chevron-left",children:"View all episodes"}),(0,l.Y)(z.T,{preset:"h4-serif",children:t.title}),(0,l.Y)(L.E,{post:t})]}),t.subtitle&&(0,l.Y)(z.T,{preset:"d3-serif",children:t.subtitle})]}),!s&&(0,l.FD)(I.pT,{alignItems:o?"start":"center",direction:o?"column":"row",gap:24,justifyContent:"space-between",children:[(0,l.Y)(R.Z,{pub:i,section:n,user:r}),n&&(0,l.Y)(O.S,{pub:i,section:n,user:r,isPodcastOrVideo:!0})]}),s&&n&&(0,x.lu)({pub:i})&&(0,l.FD)(I.pT,{direction:o?"column":"row",justifyContent:"space-between",children:[(0,l.Y)(U.m,{pub:i,section:n}),(0,l.Y)(O.S,{pub:i,section:n,user:r,isPodcastOrVideo:!0})]}),(0,l.Y)(H.c,{})]})})})};var ec=i(88218),eu=i(24078),ep=i(15040);let eh=e=>{let{bylines:t,variant:i}=e;return(0,l.Y)(I.pT,(0,r._)((0,n._)({},"shows"===i?{direction:"row",gap:12,wrap:"wrap"}:{direction:"column",gap:24}),{children:t.map(e=>(0,l.FD)(I.Ye,{alignItems:"center",gap:8,children:[(0,l.Y)(ep.$o,{tier:e.bestseller_tier,children:(0,l.Y)(eu.tp,{user:e,utmSource:"author-byline-face-podcast",size:32})}),(0,l.FD)(I.I1,{children:[(0,l.Y)(W.EY.B4,{color:"pub-primary-text",children:e.name}),e.primaryPublicationName&&(e.primaryPublicationUrl?(0,l.FD)(W.EY.B4,{color:"pub-secondary-text",translated:!0,children:["Writes"," ",(0,l.Y)("a",{style:{textDecoration:"none"},href:e.primaryPublicationUrl,children:I18N.p(e.primaryPublicationName)})," ",(0,l.Y)("a",{href:"".concat(e.primaryPublicationUrl,"/subscribe"),children:"Subscribe"})]}):(0,l.FD)(W.EY.B4,{color:"pub-secondary-text",translated:!0,children:["Writes ",I18N.p(e.primaryPublicationName)]}))]})]}))}))},em=e=>{let{bylines:t,isStandaloneVideo:i,eligibleForPodcast:n}=e,{iString:r}=(0,V.GO)();return(0,l.FD)(I.I1,{gap:16,"aria-label":"Appears in episode",role:"region",children:[(0,l.Y)(ec.F,{children:r(i||!n?"Authors":"Appears in episode")}),(0,l.Y)(eh,{bylines:t,variant:"shows"})]})};var eg=i(81209),ev=i(16831),eY=i(91496);let ef=e=>{let{post:t,pub:i,section:n,user:r,isStandaloneVideo:o}=e,{title:a,description:s,url:d}=(0,ee.ed)({pub:i,section:n,useSection:o});return(0,l.FD)(I.I1,{border:"detail-themed",className:"container-MuztBl",gap:24,paddingX:16,paddingY:24,radius:"md",shadow:"lg",onClick:()=>{window.location.href=d},children:[(0,l.FD)(I.I1,{gap:8,alignItems:"center",children:[(0,l.Y)(eY.M,{post:t,pub:i,section:n,useSection:o}),a&&(0,l.Y)(ec.F,{align:"center",children:a}),(0,x.s7)({pub:i,includeTheRampart:!0})&&(0,l.Y)(I.Ye,{alignItems:"center",gap:8,children:(0,x.ot)({sectionId:null==n?void 0:n.id}).map(e=>(0,l.Y)(ev.b,{medium:e}))}),s&&(0,l.FD)(I.I1,{gap:8,children:[s.split("\n").map(e=>(0,l.Y)(W.EY.B4,{className:"description-ij0plp",color:"pub-secondary-text",align:"center",children:e})),(0,l.Y)("span",{hidden:!0,"data-testid":"podcast-description",children:s})]})]}),!(null==r?void 0:r.is_subscribed)&&(0,l.Y)("div",{className:"subscribe-container-_pmqCv",onClick:e=>{e.stopPropagation()},children:(0,l.Y)(eg.A,{expectTruncation:!0,pub:i,source:"episode-page-sidebar",user:r})})]})};var eb=i(66728),ey=i(56897);let e_=e=>{let{isStandaloneVideo:t,pub:i,recentEpisodes:n,user:r}=e,{iString:o}=(0,V.GO)(),{isMobile:a}=(0,C.sM)();return(0,l.Y)(q.XL,{pub:i,user:r,children:(0,l.FD)(I.I1,{gap:a?12:8,"aria-label":o("Recent episodes"),role:"region",children:[(0,l.Y)(ec.F,{children:o(t?"Recent Posts":"Recent Episodes")}),(0,l.Y)(I.I1,{gap:12,style:{margin:a?void 0:"0 -8px"},"aria-label":o("Recent episodes"),role:"region",children:n.map(e=>(0,l.Y)(ey.z,{post:e,variant:"mini-episode",onClick:()=>{(0,y.u4)(y.qY.RECENT_EPISODE_ITEM_CLICKED,{post_id:e.id})}}))})]})})};var ew=i(82776);let eC=e=>{var t;let{feedUrl:i,isStandaloneVideo:r,eligibleForPodcast:o,post:a,pub:d,recentEpisodes:c,section:u,showLinks:p,user:h}=e,{iString:m}=(0,V.GO)(),{isMobile:g}=(0,C.sM)(),[v,Y]=(0,k.J0)(c),f=(0,k.Kr)(()=>{var e;return null!=(e=null==v?void 0:v.filter(e=>e.id!==a.id))?e:null},[v,a.id]),b=(0,B.Jq)(d,u),y=(0,ew.getBylineUsers)(a).sort((e,t)=>e.id===d.author_id?-1:t.id===d.author_id?1:e.is_guest&&!t.is_guest?-1:!e.is_guest&&t.is_guest?1:(e.name||"").localeCompare(t.name||""));return(0,k.vJ)(()=>{let e=async()=>{var e,t;Y(null!=(t=(await s().get("/api/v1/recent_posts").query((0,n._)({rss_episodes_only:!(null==(e=a.podcastFields)?void 0:e.hide_from_feed)},(null==u?void 0:u.id)?{section_id:u.id}:{}))).body)?t:[])};c||e()},[a.id,null==(t=a.podcastFields)?void 0:t.hide_from_feed,c,d.id,null==u?void 0:u.id]),(0,l.FD)(I.I1,{gap:b?24:32,"aria-label":m("Sidebar content"),role:"complementary",children:[!g&&(0,l.Y)(B.pJ,{align:"center",direction:"column",gap:8,post:a,pub:d,section:u,textField:"episode_short_text"}),!g&&(0,l.Y)(ef,{post:a,pub:d,section:u,user:h,isStandaloneVideo:r}),(0,l.FD)(I.I1,{gap:32,children:[!g&&!r&&o&&(0,l.Y)(eb.b,{feedUrl:i,showLinks:p,post:a,pub:d,section:u,user:h}),!g&&d.bylines_enabled&&y.length>0&&(0,l.Y)(em,{bylines:y,isStandaloneVideo:r,eligibleForPodcast:o}),f&&f.length>0&&(0,l.Y)(e_,{isStandaloneVideo:r,pub:d,recentEpisodes:f,user:h})]})]})};var eI=i(50172),ek=i(26747),eS=i(72536),eD=i(48697),eF=i(52077),eT=i(21003),eP=i(89490);let ex="transcriptionWords-u5CRAD",eA="transcription-timestamp-mDeQkH",eE="transcription-text-align-left-V7cht2",eN=e=>{let{activeRowIndex:t,isPlaying:i,postId:n,row:r,rowIndex:o,showSpeaker:a,speakerName:s,words:d,onPause:c,onPlay:u}=e,{searchTerm:p,focusedItemStart:h}=(0,f.IS)(),m=(0,k.li)(null),g=p&&r.text.toLowerCase().includes(p.toLowerCase());(0,k.vJ)(()=>{if(h&&m.current&&r.start===h){var e;null==(e=m.current)||e.scrollIntoView({behavior:"smooth",block:"center"})}},[h,r.start]);let v=()=>g?(0,l.Y)(eT.x,{isFocused:r.start===h,searchTerm:p,rowIndex:o,text:r.text.trim()}):(0,l.Y)(eP.az,{display:"inline",className:ex,lineHeight:20,radius:"sm","data-chunk-index":o,children:((null==d?void 0:d.length)?d.map(e=>e.word).join(" "):r.text).trim()});return(0,l.Y)("div",{ref:m,children:(0,l.Y)(eF.vo,{onPlay:u,onPause:c,postId:n,isActiveRow:t==o,isPlaying:i,row:r,rowIndex:o,className:"transcription-chunk-YeZNdv",activeClassName:"transcription-chunk--active-HnAU7N",children:s&&a?(0,l.FD)(I.I1,{paddingTop:2,children:[(0,l.FD)(I.Ye,{alignItems:"baseline",gap:12,children:[(0,l.Y)(W.EY.B4,{className:T()(eA,eE),color:"pub-secondary-text",children:s?(0,ew.secondsToHHMMSS)(r.start):""}),(0,l.Y)(W.EY.Meta,{padding:2,paddingTop:4,color:"accent",weight:"semibold",children:s})]}),(0,l.FD)(I.Ye,{alignItems:"baseline",gap:12,"data-chunk-index":o,children:[(0,l.Y)(W.EY.B4,{className:T()(eA,eE),color:"pub-secondary-text",children:s?"":(0,ew.secondsToHHMMSS)(r.start)}),(0,l.Y)(eP.az,{display:"inline",className:ex,lineHeight:20,padding:2,radius:"sm","data-chunk-index":o,children:v()})]})]}):(0,l.FD)(I.Ye,{alignItems:"baseline",gap:12,"data-chunk-index":o,children:[(0,l.Y)(W.EY.B4,{className:T()(eA,eE),color:"pub-secondary-text",children:s?"":(0,ew.secondsToHHMMSS)(r.start)}),(0,l.Y)(eP.az,{display:"inline",className:ex,padding:2,radius:"sm","data-chunk-index":o,children:v()})]})})},o)},eB=e=>{let{post:t,playerRef:i,transcription:o,fullWidth:a,onClose:s,onExpand:d,onCollapse:c}=e,{isMobile:u}=(0,C.sM)(),[p,h]=(0,k.J0)(0),m=(0,k.li)(null),[g,v]=(0,k.J0)(!1),[Y,b]=(0,k.J0)(0),{searchTerm:y}=(0,f.IS)(),_=()=>{if(m.current){let e=m.current.getBoundingClientRect().top,t=window.scrollY||window.scrollY;t>Y&&e<=0?v(!0):t<=Y&&v(!1)}};return(0,k.vJ)(()=>{let e=m.current,t=()=>{e&&!g&&b(e.offsetTop)};t();let i=new ResizeObserver(t);return e&&i.observe(e),window.addEventListener("scroll",_),()=>{e&&i.unobserve(e),window.removeEventListener("scroll",_)}},[g]),(0,l.Y)(N.DH,{children:(0,l.FD)(I.I1,{gap:24,flex:"grow",children:[(0,l.FD)(I.Ye,{gap:8,alignItems:"center",children:[(0,l.Y)(I.Ye,{flex:"grow",ref:m,className:g?"sticky-zutBDd":"",display:!y&&g?"none":void 0,children:(0,l.Y)(I.Ye,{paddingLeft:u&&g?8:0,children:(0,l.Y)(f.Qj,{postId:t.id,closeAlwaysVisible:!1})})}),!u&&(0,l.FD)(eI.Fragment,{children:[!a&&(0,l.Y)(j.K0,{onClick:d,children:(0,l.Y)(ek.A,{})}),a&&(0,l.Y)(j.K0,{onClick:c,children:(0,l.Y)(eS.A,{})})]}),(0,l.Y)(j.K0,{onClick:s,children:(0,l.Y)(eD.A,{})})]}),(0,l.Y)("div",{className:"transcription-full-body-container-LXFSNv",children:(0,l.Y)(eF.Ay,{player:i,postId:t.id,renderTranscriptionChunk:e=>(0,l.Y)(eN,(0,r._)((0,n._)({},e),{activeRowIndex:p,postId:t.id})),transcription:o,onUpdateActiveRowIndex:h})})]})})};var eM=i(99851),eR=i(32641),eL=i(77849),eO=i(41873),ez=i(16784),eU=i(83137),eq=i(70107),eH=i(60285),eW=i(49869),eK=i(13348),eG=i(99070),eV=i(72880),ej=i(28734),eX=i(8734),eJ=i(4246),eZ=i(46009);let eQ=e=>{var t,i,n,r;let{alternateAudioSource:o,audioPlayerRef:a,hideControls:s,isIdle:d,post:c,pub:u,showPaywall:p,onFinishAudio:h,onSetAudioIsPlaying:m}=e,{iString:g}=(0,V.GO)(),{isMobile:v}=(0,C.sM)(),Y=(0,b.By)(a),f=c.section_id&&null!=(t=u.sections.find(e=>e.id===c.section_id))?t:null,{artUrl:y}=f?(0,eZ.lL)({pub:u,section:f}):(0,eZ.j_)({pub:u}),_=f?null!=(i=f.podcastPalette)?i:null:null!=(n=u.podcastPalette)?n:null,w=["extra_audio_preview","alternate_audio_preview"].includes(o.type);return(0,k.vJ)(()=>{m(Y)},[Y,m]),(0,l.Y)(eG.A,{ref:a,src:o.url,updateOnEveryFrame:(null!=(r=c.podcast_duration)?r:0)<300,onFinishAudio:h,trackingProps:{contentType:"post",entityKey:c.id,entityType:"post",surface:"post"},render:e=>{let{duration:t,isPlaying:i,togglePlayback:n}=e,r=e=>e.stopPropagation();return(0,l.FD)(I.I1,{alignItems:"center",bg:"primary",flex:"grow",justifyContent:"center",position:"relative",overflow:v?"auto":"hidden",onClick:()=>{n()},children:[(0,l.Y)(ej._,{backgroundUrl:y,blurAmount:40,isBlurred:!0,palette:_,radius:"none"}),(0,l.Y)(I.Ye,{className:"darkenBottom-zaTJyO",position:"absolute",inset:0}),(0,l.FD)(I.Ye,{position:"relative",children:[y&&!p&&(0,l.Y)(eV.o,{imageIsFixedWidth:!0,maxWidth:v?160:340,radius:"md",src:y,useRetinaSizing:!0}),(0,l.Y)(I.Ye,{alignItems:"center",inset:0,justifyContent:"center",position:"absolute",children:(0,l.Y)(I.Ye,{onClick:r,opacity:100*!s,children:(0,l.Y)(eK.ro,{isPlaying:null!=i&&i,size:v?56:72,onTogglePlayback:n})})})]}),(0,l.Y)(I.Ye,{onClick:r,children:(0,l.Y)(eJ.Jf,{disableShortcuts:!0,disableTooltips:!0,duration:t,handle:null,isActive:(!i||!d)&&!p,isAudio:!0,isFocused:!1,post:c,pub:u,mediaUpload:null,mediaRef:a,showPaywall:!1})}),w&&(0,l.Y)(I.Ye,{position:"absolute",style:{top:12,left:12},children:(0,l.Y)(eX.d,{avoidBackgroundBlur:!0,children:g("Preview")})})]})}})};var e$=i(31790),e0=i(50802),e1=i(49802),e2=i(66511);let e4={unselectedButton:"unselectedButton-LnSrSa"},e7="switcher-audio-button",e6=e=>{let{selected:t,sourceType:i,onSelect:n}=e,{iString:r}=(0,V.GO)(),{isMobile:o}=(0,C.sM)(),a={alternate_audio_preview:r("Switch to audio"),alternate_full_audio:r("Switch to audio"),extra_audio_preview:r("Switch to the audio preview"),free_podcast_url:r("Switch to the full ad-supported audio")}[i];return(0,l.FD)(I.I1,{bg:"glass-inverted-medium",gap:4*!o,padding:4,pointerEvents:o?"none":"auto",radius:"full",children:[(0,l.Y)(e2.m_,{disabled:o,side:"right",text:r("Switch to video"),children:(0,l.Y)(j.mZ,{className:T()({[e4.unselectedButton]:"video"!==t}),rounded:!0,size:o?"sm":"md",onClick:()=>{null==n||n("video")},children:(0,l.Y)(e0.A,{size:o?18:20})})}),(0,l.Y)(I.Ye,{position:"relative",className:e4.audioButtonContainer,children:(0,l.Y)(e2.m_,{disabled:o,side:"right",text:a,children:(0,l.Y)(j.mZ,{id:e7,className:T()({[e4.unselectedButton]:"audio"!==t}),rounded:!0,size:o?"sm":"md",onClick:()=>{null==n||n("audio")},children:(0,l.Y)(e1.A,{size:o?16:18})})})})]})},e8=(0,eI.createContext)({containerRef:{current:null},clearSelection:()=>void 0,finishedSelection:null,isSelecting:!1,selectionBegin:null,selectionFinish:null,selectionRef:{current:null}}),e3=e=>{let{children:t}=e,i=(0,k.li)(null),n=(0,k.li)(null),[r,o]=(0,k.J0)(!1),[a,s]=(0,k.J0)(!1),[d,c]=(0,k.J0)(null),[u,p]=(0,k.J0)(null),h=d&&u&&(u.rowIndex<d.rowIndex||u.rowIndex===d.rowIndex&&u.wordIndex<d.wordIndex),m=h?u:d,g=h?d:u,v=(0,k.Kr)(()=>a&&m&&g?{begin:m,finish:g}:null,[m,g,a]);(0,k.vJ)(()=>{if(!i.current)return;let e=i.current,t=e=>{a&&(s(!1),o(!1),c(null),p(null));let t=Number(e.target.dataset.rowIndex),i=Number(e.target.dataset.wordIndex);isNaN(t)||isNaN(i)||c({rowIndex:t,wordIndex:i})},n=e=>{if(!d||a)return;r||o(!0);let t=e.target.dataset;if("true"===t.inBetween){let e=Number(t.prevRowIndex),i=Number(t.prevWordIndex),n=Number(t.nextRowIndex),r=Number(t.nextWordIndex);if(isNaN(e)||isNaN(i)||isNaN(n)||isNaN(r))return;d.rowIndex<e||d.rowIndex===e&&d.wordIndex<i?p({rowIndex:e,wordIndex:i}):p({rowIndex:n,wordIndex:r});return}let i=Number(t.rowIndex),n=Number(t.wordIndex);isNaN(i)||isNaN(n)||p({rowIndex:i,wordIndex:n})},l=()=>{s(!0)};return e.addEventListener("mousedown",t),e.addEventListener("mousemove",n),e.addEventListener("mouseup",l),()=>{e.removeEventListener("mousedown",t),e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",l)}},[i,a,r,d]);let Y=(0,k.hb)(()=>{s(!1),o(!1),c(null),p(null);let e=window.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())},[]);return(0,l.Y)(e8.Provider,{value:{clearSelection:Y,finishedSelection:v,isSelecting:r,containerRef:i,selectionBegin:m,selectionFinish:g,selectionRef:n},children:t})},e9=()=>(0,k.NT)(e8);var e5=i(78659),te=i.n(e5),tt=i(69843),ti=i.n(tt),tn=i(7350),tr=i.n(tn),tl=i(6632),to=i(43241),ta=i(23623),ts=i(90250),td=i(98394),tc=i(6579),tu=i(90128),tp=i.n(tu),th=i(16858),tm=i(92967);let tg="hideSelectionBackground-vjEoVj",tv=(0,o.memo)(e=>{var t;let{clipWordEnd:i,clipWordStart:o,isFinishedSelecting:a,focusedItemStart:s,isClipping:d,isFaded:c,isFirstInSelection:u,isMeasuring:p,isScrolling:h,isSelecting:m,listContainerRef:g,postId:v,rowIndex:Y,rows:f,searchTerm:b,selectedWordEnd:_,selectionRef:w,selectedWordStart:C,speakerMap:S,onClickRow:D,onCreateClip:F}=e,P=(0,k.li)(null),x=f[Y];x||console.error("Transcript row at index ".concat(Y," is missing"));let A=0===Y?null:f[Y-1],E=Y===f.length-1?null:f[Y+1],N=0===Y?null:f[Y-1],B=(!N||N.speaker!==x.speaker)&&x.speaker?null!=(t=S[x.speaker])?t:function(e){if(!e)return"Unknown Speaker";let t=e.split("_"),i=parseInt(t[1]);return"".concat(tp()(t[0])," ").concat(i+1)}(x.speaker):null,M=b&&x.text.toLowerCase().includes(b.toLowerCase()),R=A?{"data-in-between":!0,"data-prev-row-index":Y-1,"data-prev-word-index":A.words.length-1,"data-next-row-index":Y,"data-next-word-index":0}:{},L=E?{"data-in-between":!0,"data-prev-row-index":Y,"data-prev-word-index":x.words.length-1,"data-next-row-index":Y+1,"data-next-word-index":0}:{};return(0,l.FD)(I.Ye,{alignItems:"start",gap:12,paddingX:16,"data-transcript-row-index":Y,onClick:()=>{var e;(null==(e=window.getSelection())||!e.toString())&&D&&v&&((0,y.u4)(y.qY.TRANSCRIPTION_TIMESTAMP_CLICKED,{post_id:v,timestamp:(0,tm.kq)(x.start)}),D({rowIndex:Y}))},style:p?{overflowY:"scroll"}:void 0,children:[(0,l.Y)(I.Ye,{bg:"glass-inverted-medium",paddingX:4,radius:"sm",userSelect:"none",children:(0,l.Y)(W.EY.Meta,{color:"white",lineHeight:20,children:(0,ew.secondsToHHMMSS)(x.start)})}),(0,l.FD)(I.I1,{flex:"grow",gap:2,children:[B&&(0,l.Y)(W.EY.Meta,(0,r._)((0,n._)({color:"white",opacity:60,userSelect:"none",weight:"semibold"},R),{children:B})),(0,l.FD)(I.I1,{position:"relative",children:[M&&(0,l.Y)(tY,{isFocused:x.start===s,searchTerm:b,text:x.text.trim()}),(0,l.FD)(I.I1,{ref:P,position:"relative",children:[(0,l.Y)(W.EY.B3,(0,r._)((0,n._)({className:T()(tg,{"textContainerFadedShows-pHGywl":c}),cursor:"pointer",lineHeight:20,paddingBottom:12},L),{children:!x.words.length||h&&!d&&ti()(C)&&ti()(_)?x.text:x.words.map((e,t)=>{let n=!ti()(C)&&!ti()(_)&&t>=C&&t<=_,r=u&&t===C,a=d&&!m&&!ti()(i)&&!ti()(o)&&t>=o&&t<=i;return(0,l.FD)(l.FK,{children:[(0,l.Y)("span",{ref:r?w:null,className:T()("word-IefdhU",{"wordSelectedShows-Tf85j5":a||n}),"data-row-index":Y,"data-word-index":t,children:e.word})," "]})})})),u&&a&&F&&g&&!d&&(0,l.Y)(tb,{firstWordRef:w,listContainerRef:g,rowElemRef:P,children:(0,l.Y)(ty,{onClick:F})})]})]})]})]})}),tY=e=>{let{searchTerm:t,isFocused:i,text:n}=e,r=RegExp("(".concat(t,")"),"gi"),o=n.split(r);return(0,l.Y)(W.EY.B3,{className:"textHidden-zukLlK",position:"absolute",inset:0,children:o.map(e=>e.match(r)?(0,l.Y)("span",{className:T()("searchResult-cbPSuC",{"isFocused-wy1BKg":i}),children:e}):(0,l.Y)("span",{children:e}))})},tf=(0,o.memo)(e=>{let{style:t,index:i,data:n,isScrolling:r}=e,{activeRowIndex:o,listContainerRef:a,postId:s,rows:c,speakerMap:u,onClickRow:p,onCreateClip:h}=n,{finishedSelection:m,isSelecting:g,selectionBegin:v,selectionFinish:Y,selectionRef:b}=e9(),{searchTerm:y,focusedItemStart:_}=(0,f.IS)(),{clipTimes:w,isClipping:C}=(0,d.MC)(),I=c[i];I||console.error("Transcript row at index ".concat(i," is missing"));let k=!!(v&&v.rowIndex===i),S=null,D=null;if(v&&Y){let e=i===v.rowIndex&&i===Y.rowIndex,t=i===v.rowIndex,n=i===Y.rowIndex,r=i>v.rowIndex&&i<Y.rowIndex;e?(S=v.wordIndex,D=Y.wordIndex):t?(S=v.wordIndex,D=I.words.length-1):n?(S=0,D=Y.wordIndex):r&&(S=0,D=I.words.length-1)}let F=null,T=null;if(C&&w)for(let e=0;e<I.words.length;e++){let t=I.words[e];!ti()(t)&&t.end>w.start&&t.start<w.end&&(null===F&&(F=e),T=e)}return(0,l.Y)("div",{className:tg,style:t,children:(0,l.Y)(tv,{clipWordStart:F,clipWordEnd:T,focusedItemStart:_,isClipping:C,isFaded:!C&&"number"==typeof o&&o!==i,isFinishedSelecting:!!m,isFirstInSelection:k,isScrolling:r,isSelecting:g,listContainerRef:a,postId:s,rows:c,rowIndex:i,searchTerm:y,selectionRef:b,selectedWordStart:S,selectedWordEnd:D,speakerMap:u,onClickRow:p,onCreateClip:h})})},tc.t7),tb=e=>{let{children:t,firstWordRef:i,listContainerRef:n,rowElemRef:r}=e;if(!(null==i?void 0:i.current)||!r.current||!n.current)return null;let o=i.current.offsetTop,{top:a}=r.current.getBoundingClientRect(),{top:s,height:d}=n.current.getBoundingClientRect(),c=te()(o-8,s-a+8+32,s+d-a-8);return(0,l.Y)(I.I1,{position:"absolute",style:{top:c,left:"45%",transform:"translate(-50%, -100%)"},onClick:t_,onMouseDown:t_,onMouseMove:t_,onMouseUp:t_,userSelect:"none",zIndex:1,children:t})},ty=e=>{let{onClick:t}=e,{iString:i}=(0,V.GO)();return(0,l.Y)(j.$n,{leading:(0,l.Y)(th.A,{size:16}),priority:"secondary",onClick:t,children:i("Create clip")})},t_=e=>{e.stopPropagation()},tw=e=>{let{activeRowIndex:t,height:i,id:n,listContainerRef:r,listRef:o,postId:a,rows:s,speakerMap:d,width:c,onClickRow:u,onCreateClip:p,onScroll:h}=e,[m,g]=(0,k.J0)(null);(0,k.Nf)(()=>{if(m||!c)return;let e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.width="".concat(c,"px"),e.style.pointerEvents="none",e.style.visibility="hidden",g(e),document.body.appendChild(e)},[m,c]);let v=(0,k.hb)(e=>m?(m.innerHTML=(0,td.F0)((0,l.Y)(tv,{isMeasuring:!0,isScrolling:!1,rows:s,rowIndex:e,selectedWordEnd:null,selectedWordStart:null,speakerMap:d})),m.clientHeight||0):0,[m,s,d]),Y=(0,k.Kr)(()=>({activeRowIndex:t,listContainerRef:r,postId:a,rows:s,speakerMap:d,onClickRow:u,onCreateClip:p}),[t,r,a,s,d,u,p]);return m?(0,l.Y)("div",{id:n,children:(0,l.Y)(tc._m,{ref:o,itemCount:s.length,itemSize:v,height:i,width:c,itemData:Y,outerElementType:tC,useIsScrolling:!0,onScroll:h,children:tf})}):null},tC=(0,o.forwardRef)((e,t)=>{var{style:i}=e,o=(0,eR._)(e,["style"]);return(0,l.Y)("div",(0,n._)({ref:t,style:(0,r._)((0,n._)({},i),{overflowY:"scroll"})},o))});var tI=i(50874);let tk="video-transcription",tS=e=>{let{isClipping:t,playerRef:i,postId:r,transcription:a,onClose:s,surface:c}=e,{iString:u}=(0,V.GO)(),{clipTimes:p,virtualizedListRef:h,onStartClipping:m}=(0,d.MC)(),g=(0,k.li)(null),{containerRef:v,finishedSelection:Y,clearSelection:_,isSelecting:w}=e9(),{rows:C,speakerMap:S}=(0,D.Fy)({transcription:a,processAlignedRows:tI.qD}),{isPlaying:F,currentTime:T}=(0,b.yr)(i),{setItems:P,focusedItemStart:x,searchTerm:A}=(0,f.IS)(),[E,N]=(0,k.J0)(null),[B,M]=(0,k.J0)(!1),{width:R,height:L}=(0,eW.w)({containerRef:g}),[O,z]=(0,k.J0)("in-view"),[U,q]=(0,k.J0)("in-view"),[H,K]=(0,k.J0)("in-view"),G=!!(null==A?void 0:A.trim()),X=F&&!G&&!t&&!Y,J=p&&tD(C,p.start),Z=p&&tD(C,p.end);(0,o.useEffect)(()=>{P(C)},[C,P]),(0,o.useEffect)(()=>{var e,t,n,r;!w||(null==(t=i.current)||null==(e=t.player)?void 0:e.paused)||null==(r=i.current)||null==(n=r.player)||n.pause()},[w,i]),(0,o.useEffect)(()=>{if(B)return;let e=C.findIndex(e=>e.start<=T&&e.end>T);-1!==e&&e!==E&&N(e)},[E,T,B,C]),(0,o.useEffect)(()=>{if(!G||!(null==h?void 0:h.current))return;let e=C.findIndex(e=>e.start===x);h.current.scrollToItem(e,"start")},[x,G,C,h]),(0,o.useEffect)(()=>{var e,t;if(!X||!(null==h?void 0:h.current))return;let i=document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(E,'"]'));if(!i)return;let n=i.parentElement,r=document.querySelector("#".concat(tk," > div")),l=null!=(e=null==r?void 0:r.children[0])?e:null;if(!r||!n||!l)return;let o=l.offsetHeight-r.offsetHeight,a=parseInt(null!=(t=n.style.top.split("px")[0])?t:""),s=r.scrollTop,d=te()(a-32,0,o);(0,ts.eb)({virtualizedListRef:h,start:s,end:d,duration:300})},[E,X,h]);let Q=(0,k.hb)(tr()(()=>{if("number"!=typeof E)return;if(document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(E,'"]')))return void z("in-view");let e=document.querySelector("#".concat(tk," [data-transcript-row-index]"));e&&z(((null==e?void 0:e.dataset.transcriptRowIndex)?parseInt(e.dataset.transcriptRowIndex):-1)>E?"is-before":"is-after")},100),[E]),$=(0,k.hb)(tr()(()=>{if(ti()(J)||ti()(Z))return;let e=document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(J,'"]')),t=document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(Z,'"]')),i=document.querySelector("#".concat(tk," [data-transcript-row-index]"));if(!i)return;let n=(null==i?void 0:i.dataset.transcriptRowIndex)?parseInt(i.dataset.transcriptRowIndex):-1;e||t||n>J&&n<Z?q("in-view"):q(n>J?"is-before":"is-after")},100),[Z,J]),ee=(0,k.hb)(tr()(()=>{if(!Y)return;let e=Y.begin.rowIndex;if(document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(e,'"]')))return void K("in-view");let t=document.querySelector("#".concat(tk," [data-transcript-row-index]"));t&&K(((null==t?void 0:t.dataset.transcriptRowIndex)?parseInt(t.dataset.transcriptRowIndex):-1)>e?"is-before":"is-after")}),[Y]),et=(0,k.hb)(e=>{let{scrollUpdateWasRequested:i}=e;i||(Y?ee():t?$():Q())},[Y,t,Q,$,ee]);(0,o.useEffect)(()=>{F&&Q()},[F,Q]),(0,o.useEffect)(()=>{if(!p||!(null==h?void 0:h.current))return;let e=tD(C,p.start);h.current.scrollToItem(Math.max(e,0),"smart"),q("in-view")},[p,C,$,h]);let ei=(0,k.hb)(()=>{(null==h?void 0:h.current)&&(h.current.scrollToItem(E,"start"),z("in-view"))},[E,h]),en=(0,k.hb)(()=>{(null==h?void 0:h.current)&&(h.current.scrollToItem(J,"start"),q("in-view"))},[J,h]),er=(0,k.hb)(()=>{if(!Y||!C)return;let{start:e,end:t}=(0,ts.ng)({finishedSelection:Y,transcriptionRows:C});_(),(0,y.u4)(y.qY.MEDIA_CLIP_BUTTON_CLICKED,{button:"create",source:"post transcript",surface:c}),m({start:e,end:t,source:"side-by-side-transcript",title:null})},[_,Y,m,C,c]);(0,o.useEffect)(()=>{Y&&(t?er():ee())},[Y,er,t,ee]);let el=(0,k.hb)(async e=>{var n;let{rowIndex:r}=e;if(null==(n=i.current)?void 0:n.player){if(t){let e=C[r];m({start:e.start,end:e.end,source:"side-by-side-transcript",title:null});return}if(F&&r===E)return void i.current.player.pause();i.current.player.currentTime=C[r].start,N(r),M(!0),await i.current.player.play(),M(!1)}},[E,t,F,m,i,C]);return(0,l.Y)(ta.a,{children:(0,l.FD)(I.I1,{inset:0,position:"absolute",style:{backgroundColor:"#161718"},children:[(0,l.FD)(I.Ye,{alignItems:"center",justifyContent:"space-between",padding:16,children:[(0,l.Y)(W.EY.B2,{color:"primary",weight:"semibold",children:u(t?"Create clip":"Transcript")}),s&&(0,l.Y)(j.K0,{priority:"secondary",size:"sm",onClick:s,children:(0,l.Y)(eD.A,{size:20})})]}),(0,l.Y)(I.Ye,{paddingX:16,paddingBottom:16,onKeyDown:e=>{e.stopPropagation()},children:(0,l.Y)(f.Qj,{postId:r,closeAlwaysVisible:!1})}),(0,l.FD)(I.I1,{ref:g,flex:"grow",position:"relative",children:[(0,l.Y)(I.I1,{ref:v,position:"absolute",inset:0,children:!!R&&(0,l.Y)(tw,{activeRowIndex:F?E:null,height:L,id:tk,listContainerRef:g,listRef:h,postId:r,rows:C,speakerMap:S,width:R,onClickRow:el,onCreateClip:er,onScroll:et})}),X&&"in-view"!==O&&(0,l.Y)(I.I1,{position:"absolute",style:(0,n._)({left:16,right:16},"is-before"===O?{top:0}:{bottom:16}),children:(0,l.Y)(j.$n,{leading:"is-before"===O?(0,l.Y)(tl.A,{size:16}):(0,l.Y)(to.A,{size:16}),priority:"secondary",onClick:ei,children:u("Back to current time")})}),t&&!w&&"in-view"!==U&&(0,l.Y)(I.I1,{position:"absolute",style:(0,n._)({left:16,right:16},"is-before"===U?{top:0}:{bottom:16}),children:(0,l.Y)(j.$n,{leading:"is-before"===U?(0,l.Y)(tl.A,{size:16}):(0,l.Y)(to.A,{size:16}),priority:"secondary",onClick:en,children:u("Back to clipped segment")})}),Y&&"in-view"!==H&&!t&&(0,l.Y)(I.Ye,{position:"absolute",justifyContent:"center",style:(0,n._)({left:0,right:0},"is-before"===H?{top:0}:{bottom:16}),children:(0,l.Y)(ty,{onClick:er})})]})]})})},tD=(e,t)=>{for(let i=0;i<e.length;i++){if(e[i].start<=t&&e[i].end>=t)return i;if(t<e[i].start)return i>0?i-1:0}return e.length-1},tF="video-wrapper-lforaE",tT="preview-label-container-RuWmAN",tP="sidebar-NzGH2W",tx="sidebar--hidden-xMFnhp";class tA extends eO.A{constructor(...e){super(...e),(0,eM._)(this,"playbackEnabled",()=>!!this.props.showPreview)}}let tE=e=>{var t,i,a,s,c,u,p,m,g,v,{alternateAudioSource:Y,audioIsPlaying:b,audioPlayerHasMounted:_,audioPlayerRef:w,containerRef:S,disableShortcuts:F,hasPaywall:P,isIdle:A,isPostPreview:E,mediaUpload:N,post:B,pub:M,selectedMedium:R,showAudioPaywall:L,showVideoPaywall:O,style:z,transcription:U,user:q,videoIsPlaying:H,videoPlayerRef:W,onChange:K,onCommentsClick:G,onFinishAudio:j,onSelectMedium:X,onSetAudioIsPlaying:J}=e,Z=(0,eR._)(e,["alternateAudioSource","audioIsPlaying","audioPlayerHasMounted","audioPlayerRef","containerRef","disableShortcuts","hasPaywall","isIdle","isPostPreview","mediaUpload","post","pub","selectedMedium","showAudioPaywall","showVideoPaywall","style","transcription","user","videoIsPlaying","videoPlayerRef","onChange","onCommentsClick","onFinishAudio","onSelectMedium","onSetAudioIsPlaying"]);let{iString:Q}=(0,V.GO)(),$=(0,x.lu)({pub:M}),{isClipping:ee,onCancelClipping:et}=(0,d.MC)(),[ei,en]=(0,k.J0)(!1),er=(0,eL.V)(),el=(0,k.li)(null),{width:eo}=(0,eW.w)({containerRef:el}),[ea,es]=(0,k.J0)(er.active&&"undefined"!=typeof window?window.innerWidth:null!=(u=null==(t=el.current)?void 0:t.offsetWidth)?u:1100),[ed,ec]=(0,eq.f)({key:"video_player:show_transcript",initialValue:!1}),eu=(ed||ee)&&!!U,{isMobile:ep}=(0,C.sM)(),eh=(0,D.AC)(S),em=(null!=(p=N.preview_duration)?p:0)>0,[eg,ev]=(0,k.J0)(!1),eY=eu?(ea-360-36)/ea:1,ef="post";return(0,o.useEffect)(()=>{ee&&(0,y.u4)(y.qY.MEDIA_CLIP_CREATE_MODAL_OPENED,{video_upload_id:N.id,post_id:null==B?void 0:B.id,is_post_editor:!1,source:"create",surface:ef})},[ee,N.id,null==B?void 0:B.id]),(0,o.useEffect)(()=>{er.active&&"undefined"!=typeof window?setTimeout(()=>{es(window.innerWidth)},10):es(null!=eo?eo:1100)},[er.active,eo]),(0,l.FD)("div",{ref:el,className:T()(tF,{"video-full-screen-K4tmIj":er.active}),style:z,children:[(0,l.FD)("div",{style:{visibility:"audio"===R?"hidden":void 0},children:[(0,l.Y)(eL.m,{handle:er,children:(0,l.FD)(I.Ye,{justifyContent:"center",position:"relative",overflow:ee?"visible":"hidden",style:{width:"100%",height:"100%",backgroundColor:"#000"},children:[(0,l.Y)(I.Ye,{flex:"grow",position:"relative",style:{transform:"scale(".concat(eY,")"),transformOrigin:"0 50%",transition:"transform 0.15s ease-in-out",zIndex:ee?1:void 0},children:(0,l.Y)(tA,(0,r._)((0,n._)({},Z),{ref:W,doNotResetOnEnd:!0,hidePlayButton:O,isClipping:ee,mediaUpload:N,podcastUpload:B.podcastUpload,showPreview:!P||em,noControls:!0,noKeyboardShortcuts:!0,post:B,pub:M,renderPlayButton:()=>(0,l.Y)(eK.ro,{isPlaying:!1,size:ep?56:72}),usePreview:P&&em,videoType:"post",onAutoplayMuted:()=>ev(!0)}))}),(0,l.Y)(I.Ye,{position:"absolute",style:{left:0,right:0,bottom:0,width:"".concat(100*eY,"%"),transition:"width 0.15s ease-in-out"},children:(0,l.Y)(eJ.Jf,{disableShortcuts:F,handle:er,hasPaywall:P,hasTranscript:!!U,hideNextVideoButton:E||$,isActive:null!=(m=ei||!A||ee)&&m,isFocused:eh,mediaRef:W,mediaUpload:N,podcastUpload:null!=(g=null==(i=B.videoUpload)?void 0:i.extractedAudio)?g:B.podcastUpload,post:B,pub:M,showPaywall:O,showTranscript:eu,onShareMenuClose:()=>en(!1),onShareMenuOpen:()=>en(!0),onToggleShowTranscript:()=>{ec(!eu)},autoPlayMuted:eg})}),U&&(0,l.Y)(I.Ye,{color:"white",opacity:100*!!eu,overflow:"auto",pointerEvents:eu?"auto":"none",position:"absolute",style:{top:0,bottom:0,right:0,transform:eu?"translateX(0)":"translateX(20%)",transition:eu?"transform 0.1s ease-in-out 0.05s, opacity 0.1s ease-in-out 0.05s":"transform 0.15s ease-in-out, opacity 0.15s ease-in-out",width:360,zIndex:ee?1:void 0},children:(0,l.Y)(f.Of,{children:(0,l.Y)(e3,{children:(0,l.Y)(tS,{isClipping:null!=ee&&ee,playerRef:W,postId:B.id,transcription:U,onClose:()=>{if(ee){var e;(0,y.u4)(y.qY.VIDEO_CLIP_CREATE_MODAL_CLOSED,{post_id:B.id,surface:ef}),H&&(null==(e=W.current)?void 0:e.player)&&W.current.player.pause(),et()}else ec(!1)},surface:ef})})})})]})}),em&&P&&!O&&(0,l.Y)("div",{className:tT,children:(0,l.Y)(eX.d,{children:Q("Preview")})}),(null==(a=W.current)?void 0:a.player)&&(0,l.Y)(ez.p,{containerRef:S,post:B,pub:M,visible:ee,videoPlayerRef:W,videoUpload:N,surface:ef})]}),("audio"===R||_)&&Y&&(0,l.Y)(I.pT,{inset:0,position:"absolute",style:{visibility:"audio"!==R?"hidden":void 0},children:(0,l.Y)(eQ,{alternateAudioSource:Y,audioPlayerRef:w,isIdle:A,hideControls:(H||b)&&A,post:B,pub:M,showPaywall:L,onFinishAudio:j,onSetAudioIsPlaying:J})}),!ep&&!O&&!E&&!$&&(0,l.Y)("div",{className:T()(tP,"sidebar-right-ktL8if",{[tx]:(H||b)&&A}),children:(0,l.Y)(I.pT,{className:T()("sidebar-icons-YDR6ix"),bg:"glass-inverted-thick",paddingX:8,paddingY:16,children:(0,l.Y)(h.xx,{hideSavePost:!0,initialShareTimestamp:null!=(v=null==(c=W.current)||null==(s=c.player)?void 0:s.currentTime)?v:0,isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:B,pub:M,showClipping:!!B.videoUpload,style:"large-on-dark",user:q,onChange:K,onCommentsClick:G})})}),Y&&!$&&(0,l.Y)("div",{className:T()(tP,"sidebar-left-K3vrOP",{[tx]:(H||b)&&A}),style:{zIndex:O?1:void 0},children:(0,l.Y)(e6,{selected:R,sourceType:Y.type,onSelect:X})})]})},tN=e=>{var t,i;let{audioPlayerRef:a,hasPaywall:s,isPostPreview:d,mediaUpload:c,post:u,pub:p,user:h,videoIsPlaying:m,videoPlayerRef:g,onFinishVideo:v,freeSignup:Y,reaction_token:f}=e,b=(0,eR._)(e,["audioPlayerRef","hasPaywall","isPostPreview","mediaUpload","post","pub","user","videoIsPlaying","videoPlayerRef","onFinishVideo","freeSignup","reaction_token"]),{isMobile:_}=(0,C.sM)(),{iString:w}=(0,V.GO)(),S=(0,x.lu)({pub:p}),D=(0,ee.Ei)({post:u,pub:p,user:h}),[F,P]=(0,k.J0)(!1),[A,E]=(0,k.J0)(!1),[N,B]=(0,k.J0)(!1),M=(null!=(i=c.preview_duration)?i:0)>0,R=!!D&&!M&&s,[L,O]=(0,eH.k)({initialValue:R?"audio":"video",key:"initial_medium",type:"string",isArray:!1,disable:!D}),[z,U]=(0,k.J0)(R),q=(0,k.li)(null),{isIdle:H}=(0,eU.U)({idleAfter:2e3,element:q.current}),W="video"===L&&s&&(!M||A),K="audio"===L&&s&&F&&!!D&&"free_podcast_url"!==D.type,G=!_;(0,o.useEffect)(()=>{var e;let t=null==(e=g.current)?void 0:e.player;if(t&&!_){let e=()=>{t.paused?t.play():t.pause()};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}},[_,g,null==(t=g.current)?void 0:t.player]);let j=e=>{var t,i;if(e===L)return;let n=(e,t)=>5>Math.abs(e-t),r=null==(t=g.current)?void 0:t.player,l=null==(i=a.current)?void 0:i.player;"audio"===e&&(null==r?void 0:r.currentTime)&&l?r.currentTime>0&&n(l.duration,r.duration)&&(l.currentTime=r.currentTime,r.paused||l.play()):"video"===e&&(null==l?void 0:l.currentTime)&&r&&l.currentTime>0&&n(l.duration,r.duration)&&(r.currentTime=l.currentTime,l.paused||r.play()),m&&(null==r||r.pause()),"video"===e&&l&&l.pause(),A&&(E(!1),r&&(r.currentTime=0)),"audio"!==e||z||U(!0),(0,y.u4)(y.qY.AUDIO_VIDEO_SWITCHER_CLICKED,{post_id:u.id,selected:e}),O(e)},X=()=>{P(!0)};return(0,l.FD)("div",{className:T()("container-dlhqPD",{"postPreview-mgizmD":d}),ref:q,children:[G?(0,l.Y)(tE,(0,r._)((0,n._)({},e),{alternateAudioSource:D,audioIsPlaying:N,audioPlayerHasMounted:z,audioPlayerRef:a,containerRef:q,isIdle:H,selectedMedium:L,showAudioPaywall:K,showVideoPaywall:W,videoIsPlaying:m,onFinishAudio:X,onFinishVideo:()=>{if((null==D?void 0:D.type)==="free_podcast_url"){var e,t;null==(t=document.getElementById(e7))||null==(e=t.parentNode)||e.dispatchEvent(new Event("mouseenter"))}E(!0)},onSelectMedium:j,onSetAudioIsPlaying:B})):(0,l.FD)("div",{className:T()(tF),children:[(0,l.Y)(tA,(0,r._)((0,n._)({},b),{ref:g,doNotResetOnEnd:!0,hidePlayButton:W,mediaUpload:c,podcastUpload:u.podcastUpload,showPreview:!s||M,noControls:W&&!s,post:u,pub:p,renderPlayButton:()=>(0,l.Y)(eK.ro,{isPlaying:!1,size:_?56:72}),usePreview:s&&M,onFinishVideo:v,style:{visibility:"audio"===L?"hidden":void 0}})),M&&s&&!W&&"video"===L&&(0,l.Y)("div",{className:tT,children:(0,l.Y)(eX.d,{children:w("Preview")})}),("audio"===L||z)&&D&&(0,l.Y)(I.Ye,{position:"absolute",inset:0,style:{visibility:"audio"===L?"visible":"hidden"},children:(0,l.Y)(eQ,{alternateAudioSource:D,audioPlayerRef:a,hideControls:!1,isIdle:H,post:u,pub:p,showPaywall:K,onFinishAudio:X,onSetAudioIsPlaying:B})}),D&&!S&&(0,l.Y)(I.Ye,{position:"absolute",padding:12,onClick:()=>{j("audio"===L?"video":"audio")},style:{top:"50%",left:0,transform:"translateY(-50%)",visibility:"video"===L&&m&&H?"hidden":"visible"},children:(0,l.Y)(e6,{selected:L,sourceType:D.type,onSelect:null})})]}),W&&(0,l.Y)(e$.v,{disableButtons:d,isFreeSubscribed:!!((null==h?void 0:h.is_free_subscribed)||Y),medium:"video",post:u,pub:p,variant:"dialog",onRestart:M?()=>{var e;(null==(e=g.current)?void 0:e.player)&&(E(!1),g.current.player.currentTime=0,g.current.player.play())}:void 0,magicToken:f}),K&&(0,l.Y)(e$.v,{disableButtons:d,isFreeSubscribed:!!((null==h?void 0:h.is_free_subscribed)||Y),medium:"audio",post:u,pub:p,variant:"dialog",onRestart:()=>{var e;(null==(e=a.current)?void 0:e.player)&&(P(!1),a.current.player.currentTime=0,a.current.player.play())},magicToken:f})]})};var tB=i(56458),tM=i(9036);let tR=(0,o.forwardRef)((e,t)=>{var i;let{isServingFreePodcastUrl:a,paywall:k,post:F,pub:T,reaction_token:P,recentEpisodes:E,showComments:N,user:B,videoPlayerRef:M,onChange:R,freeSignup:L}=e,{getConfigFor:O}=(0,v.mJ)(),z=(0,Y.Qg)().autoPlayVideo,{isMobile:U}=(0,C.sM)(),[q,H]=(0,o.useState)(null),[W,K]=(0,o.useState)(null),[G,V]=(0,o.useState)(!1),[j,X]=(0,o.useState)(!1),[J,Z]=(0,o.useState)(!1),Q=(0,o.useRef)(null),{isClipping:$,onStartClipping:et}=(0,d.MC)(),ei=(0,tB.NJ)(F),en=!k||(0,x.NO)({pub:T}),er=(null==ei?void 0:ei.approved_at)&&en,{isPlaying:el}=(0,b.yr)(M),eo=(0,x.lu)({pub:T}),ea=e=>{(0,y.u4)(y.qY.TRANSCRIPTION_TOGGLED,{state:e?"expanded":"collapsed",post_id:F.id,transcript_as_content:!0}),V(e)};(0,o.useEffect)(()=>{("undefined"!=typeof window?(0,tM.m)(window.location.href):{}).clippingMode&&(setTimeout(()=>{et({source:"query-param",title:null})},10),(0,w.qm)("clippingMode"))},[et]);let ed=F.section_id&&null!=(i=T.sections.find(e=>e.id===F.section_id))?i:null,{feedUrl:ec,isPrivateFeed:eu}=(0,D.Zq)({pub:T,magicToken:P,user:null!=B?B:null,section:ed}),ep=(0,ee.Em)({pub:T,section:ed,spotifySettings:(0,_.Om)({pub:T,section:ed})}),eh=(0,tB.rI)({post:F,section:ed,pub:T}),em=(0,tB.Xk)({post:F,section:ed,pub:T}),eg=!!q&&q.length>0,ev=e=>{e.preventDefault(),(0,y.u4)(y.qY.COMMENTS_CLICKED,{post_id:F.id});let t=document.getElementById(ee.R4);t&&t.scrollIntoView({behavior:"smooth"})};(0,o.useEffect)(()=>{(async()=>{let e=await s().get("/api/v1/post/".concat(F.id,"/facepile"));H(e.body.reactors),K(e.body.restackers)})()},[F.id]);let eY=!1;return"undefined"!=typeof window&&(eY=new URLSearchParams(window.location.search).has("postPreview")),(0,l.Y)(u.L4,(0,r._)((0,n._)({},e),{ref:t,isShowsPost:!0,renderContent:e=>{let{comments:t,crossPostInfo:i,postContent:n}=e;return(0,l.FD)("div",{children:[(0,l.Y)(S,{visible:$,style:{zIndex:1}}),F.videoUpload?(0,l.Y)(tN,{audioPlayerRef:Q,autoPlay:z,disableShortcuts:J||$,duration:F.videoUpload.duration,hasPaywall:null!=k&&k,isClipping:$,isPostPreview:eY,mediaUpload:F.videoUpload,post:F,pub:T,freeSignup:L,reaction_token:P,restorePlaybackLocation:!eY,transcription:er?ei:null,user:null!=B?B:null,videoIsPlaying:el,videoPlayerRef:M,onChange:R,onCommentsClick:ev,surface:"post",entityKey:F.id,entityType:"post",contentType:"post"}):(0,l.Y)(A,{audioPlayerRef:Q,feedUrl:ec,hasPaywall:null!=k&&k,isPrivateFeed:eu,isServingFreePodcastUrl:a,post:F,pub:T,section:ed,user:null!=B?B:null,freeSignup:L,onChange:R,onCommentsClick:ev,reaction_token:P}),(0,l.FD)("div",{className:eo?"mainContentFP-GnDHcW":"main-content-and-sidebar-fw1PHW",children:[(0,l.FD)("div",{className:eo?"":j?"main-content-full-width-eYkBTb":"main-content-qKkUCg",children:[!G&&(0,l.FD)(I.I1,{gap:16,children:[(0,l.Y)(es,{feedUrl:ec,isStandaloneVideo:eh,eligibleForPodcast:em,magicToken:P,post:F,pub:T,section:ed,showLinks:ep,user:null!=B?B:null,onChange:R,onCommentsClick:ev,onToggleRestackModal:Z,onTranscriptClick:er?()=>{ea(!0)}:void 0}),eo&&(0,l.Y)(g.L,{post:F,pub:T,user:null!=B?B:null,variant:"shows-post"}),i&&(0,l.Y)(c.k,{crossPostInfo:i,postType:F.type}),(0,l.FD)("div",{className:"postContentWrapper-MYe7fH",children:[n,eo?(0,l.Y)(I.I1,{paddingTop:40,paddingBottom:20,children:(0,l.Y)(m.u,{post:F,pub:T,user:B})}):O("like_posts_enabled")&&T.community_enabled&&eg&&!k&&(0,l.Y)(I.pT,{borderTop:"detail-themed",paddingY:16,children:(0,l.Y)(p.d2,{post:F,pub:T,user:B,reactors:q,secondaryFaces:W})}),!k&&N&&t]})]}),G&&er&&(0,l.Y)(I.Ye,{paddingTop:j?32:void 0,children:(0,l.Y)(f.Of,{children:(0,l.Y)(eB,{fullWidth:j,playerRef:F.videoUpload?M:Q,post:F,transcription:ei,onClose:()=>{ea(!1),X(!1)},onCollapse:()=>X(!1),onExpand:()=>X(!0)})})})]}),!j&&!eo&&(0,l.Y)(I.I1,{className:"sidebar-RUDMha",borderLeft:U?void 0:"detail-themed",children:(0,l.Y)(eC,{feedUrl:ec,isStandaloneVideo:eh,eligibleForPodcast:em,post:F,pub:T,recentEpisodes:null!=E?E:null,section:ed,showLinks:ep,user:null!=B?B:null})})]}),U&&!eo&&(0,l.Y)(h.I2,{allowEdit:null==B?void 0:B.is_contributor,hideComments:!N,isStatic:!1,post:F,postReactionToken:P,pub:T,user:B,onCommentsClick:ev,onChange:R})]})}}))}),tL=(0,o.forwardRef)((e,t)=>{let i=(0,o.useRef)(null),a=(0,o.useRef)(null);return(0,l.Y)(d.UQ,{postId:e.post.id,videoPlayerRef:i,virtualizedListRef:a,children:(0,l.Y)(tR,(0,r._)((0,n._)({},e),{ref:t,videoPlayerRef:i}))})})},19601:function(e,t,i){i.d(t,{A:()=>r});var n=i(56262);let r=(e,t,i,r,l)=>!(!l&&!(null==e?void 0:e.has_publication)||r.invite_only||(0,n.isPaidAudience)(i.audience))&&!!t.enable_restacking},22092:function(e,t,i){i.d(t,{E:()=>l,_:()=>o});var n=i(4016),r=i(39318);let l=e=>{let{pub:t,section:i}=e;return(0,n.lu)({pub:t})&&!!i&&"the-free-press-live"===i.slug},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a7q)({for_pub:e.subdomain,justTrying:!0,redirect:(0,r.eV6)(e,t)})}},17031:function(e,t,i){i.d(t,{D:()=>c});var n=i(69277),r=i(70408),l=i(11993),o=i(95147),a=i(41245);let s={large:{desktop:{charactersTruncateTo:800,charactersTruncateIfOver:860,linesTruncateTo:8,linesTruncateIfOver:9},mobile:{charactersTruncateTo:440,charactersTruncateIfOver:500,linesTruncateTo:8,linesTruncateIfOver:9}},medium:{desktop:{charactersTruncateTo:500,charactersTruncateIfOver:560,linesTruncateTo:6,linesTruncateIfOver:8},mobile:{charactersTruncateTo:320,charactersTruncateIfOver:420,linesTruncateTo:6,linesTruncateIfOver:8}},small:{desktop:{charactersTruncateTo:340,charactersTruncateIfOver:400,linesTruncateTo:4,linesTruncateIfOver:6},mobile:{charactersTruncateTo:210,charactersTruncateIfOver:210,linesTruncateTo:4,linesTruncateIfOver:4}}},d={desktop:{TRUNCATED_LINES:32,TRUNCATED_CHARACTERS:2400},mobile:{TRUNCATED_LINES:20,TRUNCATED_CHARACTERS:1e3}};function c(e,t){var i,c,u,p;let{truncationProfile:h="medium",isMobile:m}=t,{charactersTruncateTo:g,charactersTruncateIfOver:v,linesTruncateTo:Y,linesTruncateIfOver:f}=s[c=e,"small"!==(u=h)&&(null==(p=c.attachments)?void 0:p.length)?"small":u][m?"mobile":"desktop"],b=function e(t){let i=null;if(t)if(i=(0,r._)((0,n._)({},t),{content:void 0,text:void 0}),null==t?void 0:t.content)for(let n of(i.content=[],t.content)){let t=e(n);t&&i.content.push(t)}else{var o,a;let e=null==(o=t.marks)?void 0:o.find(e=>"link"===e.type);(null==e||null==(a=e.attrs)?void 0:a.href)?i.text=(0,l.H)(e.attrs.href):i.text=t.text}return i}(null!=(i=null==e?void 0:e.body_json)?i:(null==e?void 0:e.body)?{type:"doc",attrs:{schemaVersion:"v1"},content:e.body.split("\n\n").map(e=>({type:"paragraph",content:[{type:"text",text:e}]}))}:null),y=(0,o.B)(b)>v,_=(0,o.M)(b)>f;if(!b||!(y||_))return{bodyJson:b,truncatedBodyJson:b,isTruncated:!1,shouldExpandInline:!1};let w=b,C=!1,I=0;if(y){let e=(0,a.x)(w,{limit:g});w=e.doc,C=e.isTruncated,I=(0,o.B)(b)-(0,o.B)(w)}let k=!1,S=0;if(_&&w){let e=(0,a.Z)(w,Y);w=e.doc,k=e.isTruncated,S=(0,o.M)(b)-(0,o.M)(w)}return{bodyJson:b,truncatedBodyJson:w,isTruncated:C||k,shouldExpandInline:S<d[m?"mobile":"desktop"].TRUNCATED_LINES&&I<d[m?"mobile":"desktop"].TRUNCATED_CHARACTERS}}}}]);