"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["1162"],{2256:function(e,t,n){n.d(t,{r:()=>l});var i=n(10201),r=n(10996);let o=2101!=n.j?{coverTheme:"coverTheme-PJLqY5"}:null;function l(e){let{children:t}=e;return(0,i.Y)(r.NP,{theme:o.coverTheme,children:t})}},9266:function(e,t,n){if(n.d(t,{Ay:()=>G,Be:()=>K,cL:()=>$}),2101!=n.j)var i=n(69277);if(2101!=n.j)var r=n(70408);var o=n(79785),l=n(10201),a=n(32485),s=n.n(a),d=n(12215);if(2101!=n.j)var c=n(87677);if(2101!=n.j)var u=n(48697);var p=n(17402),m=n(2256),h=n(97432),_=n(72880),g=n(70780),f=n(52820),b=n(84605),v=n(53989),y=n(85478),Y=n(34835),w=n(39520),E=n(86500),S=n(53928),x=n(68349),I=n(89490),C=n(35369),T=n(16074),A=n(76977),k=n(81203),D=n(63136),N=n(54754),F=n(21398),L=n(11510),R=n(61554),P=n(49095),O=n(28194),q=n(56262),j=n(39318);if(2101!=n.j)var U=n(41086);var B=n(82776);if(2101!=n.j)var M=n(57324);var W=n(82121);function z(){let e=(0,o._)(["By ",""]);return z=function(){return e},e}let V="intro_popup_last_hidden_at";function K(e){let{includePrice:t=!0,includeRankingDetail:i=!0,includeByline:r=!0,includeBadge:o=!1,rankingDetailOverrideText:a=null,language:s="en"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=s||e.language,{iTemplate:c}=I18N.i(s||e.language),u=(0,B.getByLine)(e),p=null;return i&&(p=a||(e.rankingDetailByLanguage&&"en"!==d&&e.rankingDetailByLanguage[d]?e.rankingDetailByLanguage[d].rankingDetail:e.rankingDetail)),(0,l.FD)(N.r,{separator:" \xb7 ",children:[r&&u?(0,l.FD)(A.pT,{inline:!0,gap:4,children:[c(z(),u),o&&(0,l.Y)(F.Ic,{module:"../user_badge/UserBadge",resolve:e=>e.UserStatusSymbols,onRequest:()=>Promise.resolve().then(n.bind(n,49095)),size:"sm",tier:e.author_bestseller_tier,userId:e.author_id,whileLoading:e.author_bestseller_tier?(0,l.Y)(A.pT,{alignItems:"center",children:(0,l.Y)(P.UserStatusSymbols,{size:"sm",tier:e.author_bestseller_tier})}):(0,l.Y)(l.FK,{})})]}):null,p,t&&function(e,t){let{language:n}=t,i=!e.disable_monthly_subscriptions&&e.plans&&e.plans.filter(e=>"month"===e.interval).sort((e,t)=>e.amount-t.amount)[0],r=!e.disable_annual_subscriptions&&e.plans&&e.plans.filter(e=>"year"===e.interval).sort((e,t)=>e.amount-t.amount)[0],o=i||r;if(o)return(0,O.xB)(o,{language:n})}(e,{language:s})]})}let G=2101!=n.j?(0,p.memo)(e=>{var t,n;let{publication:o,user:a,post:s,onHide:c,freeSignup:u,hidden:h,alwaysShow:_,showOnMount:g,freeSignupEmail:f,email:b,referralCode:v,blurbs:w,launchWelcomePage:S}=e,{getConfigFor:I}=(0,y.mJ)(),C=I("welcome_page_query_params"),[T,A]=(0,p.useState)(!1),[k,D]=(0,p.useState)(!!(S||_)),N=(e,t)=>{var n;return C&&null!=(n=(0,U.y)(e))?n:t},[F]=(0,p.useState)(N("no_skip",void 0)),[L]=(0,p.useState)(N("no_blurbs",!1)),[R]=(0,p.useState)(()=>{let e=N("hero_text",void 0);return e?decodeURIComponent(e):void 0});(0,p.useEffect)(()=>{let e=e=>{"Escape"===e.key&&W(!0)};if(k)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[k]),(0,p.useEffect)(()=>{if(S&&!z()||O()){if("undefined"!=typeof window&&(0,x.iQ)(document.documentElement,"has-intro-popup"),(0,U.y)("r")){let e=(0,U.y)("r");a&&(0,B.userReferralKey)(a)===e||(0,E.u4)(E.qY.COVER_PAGE_REFERRAL_VISIT,{referral_key:e,referring_user:(0,B.userFromReferralKey)(e)})}P()}else c&&c(),(0,Y.E)({hide_intro_popup:!0}),"undefined"!=typeof window&&(0,x.vy)(document.documentElement,"has-intro-popup"),!_&&"undefined"!=typeof window&&(0,x.nB)(document.documentElement,"show-intro-popup")&&(0,x.vy)(document.documentElement,"show-intro-popup");return["no_skip","no_blurbs","hero_text","hide_intro_popup"].forEach(e=>(0,x.qm)(e)),()=>{"undefined"!=typeof window&&(0,x.vy)(document.documentElement,"has-intro-popup"),W(!0)}},[]);let P=()=>{"undefined"!=typeof window&&((0,x.iQ)(document.documentElement,"show-intro-popup"),(0,E.u4)(E.qY.COVER_PAGE_SHOWN,{has_cover_photo:!!o.cover_photo_url,has_free_signup_email:!!f,has_free_signup:!!u,functional_version:!0,launch_welcome_page:S,always_show:_,hidden:h,screen_height:"undefined"!=typeof window?window.innerHeight:null,screen_width:"undefined"!=typeof window?window.innerWidth:null}),_||(0,E.b8)("pageview",{dl:"".concat(document.location.origin,"/welcome").concat(document.location.search)})),D(!0)},O=(0,p.useCallback)(()=>!!_||!h&&(!!g||!!T||!z()&&!!(null==s||s&&!(0,q.isPaidAudience)(s.audience))&&!u&&(!a||!a.is_free_subscribed&&!a.is_subscribed)),[_,u,h,s,g,T,a]),W=e=>{e||(K(),setTimeout(()=>{(0,Y.E)({hide_intro_popup:!0})},500)),c&&c(),!_&&"undefined"!=typeof window&&(0,x.nB)(document.documentElement,"show-intro-popup")&&(0,x.vy)(document.documentElement,"show-intro-popup")},z=()=>{let e=d.get(V);if(e&&new Date(e)>new Date(Date.now()-864e5))return!0;return!1},K=()=>{d.set(V,new Date().toJSON(),{expires:3650})},G=async e=>{(0,E.u4)(E.qY.COVER_PAGE_EMAIL_SUBMITTED,{is_paying_sub:!!e.body.prompt_to_login,has_plans:!!o.plans,functional_version:!0,homepage_type:o.homepage_type}),K(),A(!0),(0,Y.E)({freeSignup:!0,freeSignupEmail:e.body.email});let t=_?"/":document.location.href;e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,j.yRP)("/account/login",{redirect:t,email:e.body.email})},30):document.location.href=(0,j.yRP)("/subscribe",(0,r._)((0,i._)({next:t,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":"",utm_source:M.VU.coverPage,email:e.body.email,skip_redirect_check:!0}))};return k&&O()?(0,l.Y)(m.r,{children:(0,l.Y)("div",{className:"intro-popup",children:(0,l.Y)("div",{className:"intro-popup-page",children:(0,l.Y)(H,{source:"cover_page",email:b,pub:o,user:null!=a?a:null,freeSignup:u,freeSignupEmail:f,referralCode:v,forceSignup:null!=(n=null!=(t=(0,U.y)("force"))?t:F)?n:void 0,onMaybeLater:F?void 0:()=>{(0,E.u4)(E.qY.COVER_PAGE_MAYBE_LATER_CLICKED,{functional_version:!0}),W()},onFreeSignup:G,onSubscribeInApp:()=>W(),blurbs:w,hideBlurbs:L,overrideSubtitle:R})})})}):null}):null,$=e=>(0,l.Y)("div",{className:"intro-inline",children:(0,l.Y)(H,(0,i._)({},e))}),H=e=>{let{autoFocus:t=!0,pub:r,user:o,email:a,freeSignup:d,freeSignupEmail:u,referralCode:m,source:_,forceSignup:y,submitButtonText:Y,onMaybeLater:w,onFreeSignup:x,onSubscribeInApp:k,blurbs:N,hideBlurbs:P,overrideSubtitle:O}=e,q=(0,p.useContext)(v.l9),B=(0,L.Iu)(),{iString:z}=(0,b.GO)(),{getExperimentVariant:V,exposeExperiment:K}=(0,f.Wk)(),G=(0,U.y)("referralCode"),$=(0,U.y)("refSource"),H=z("Learn More"),Z=q.getSettingFor("welcome_page_opt_out_text"),ee="No thanks"===Z?z("No thanks"):null!=Z?Z:z("No thanks"),et=(0,j.DNs)(r,{params:(0,i._)({utm_source:M.VU.subscribeEmail,utm_content:M.fL.learnMore},G&&{referralCode:G},$&&{refSource:$})});(0,p.useEffect)(()=>{"subscribe_page"===_&&(0,E.u4)(E.qY.SUBSCRIBE_EMAIL_FULL_SCREEN_SHOWN,{functional_version:!0}),(0,E.u4)(E.qY.FULL_EMAIL_FORM_SHOWN,{source:_,functional_version:!0}),(0,S.jN)(S.ti.TRACK_REGISTRATION_SHOWN)},[_]);let en=N&&!P?N.filter(e=>""!=e.description):[],ei=!y&&!r.invite_only&&B;(0,p.useEffect)(()=>{!y&&!r.invite_only&&B&&((null==o?void 0:o.id)&&!(null==o?void 0:o.reader_installed_at)?K("show_subscribe_in_app_button_user_id"):(null==o?void 0:o.id)||K("show_subscribe_in_app_button_ab"))},[o,ei,K,y,r.invite_only,B,_]);let er="control";if(ei){var eo,el;(null==o?void 0:o.id)&&!(null==o?void 0:o.reader_installed_at)?er=null!=(eo=V("show_subscribe_in_app_button_user_id"))?eo:"control":(null==o?void 0:o.id)||(er=null!=(el=V("show_subscribe_in_app_button_ab"))?el:"control")}return(0,l.FD)("div",{className:"full-email-form",children:[(0,l.FD)("div",{className:"vertically-centered",children:[w&&!r.invite_only&&(0,l.Y)(Q,{onClick:w}),(0,l.Y)(J,{pub:r,overrideSubtitle:O}),!r.invite_only||o&&o.is_free_subscribed?(0,l.FD)(l.FK,{children:[(0,l.Y)(A.Ye,{justifyContent:"center",style:{width:"100%"},children:(0,l.FD)(A.I1,{gap:4,style:{width:"100%",maxWidth:"380px"},children:[(0,l.FD)(A.I1,{className:W.A.emailFormContainer,justifyContent:"center",alignItems:"center",children:[(0,l.Y)(h.A,{email:a,isWelcomePageColor:!0,freeSignup:d,freeSignupEmail:u,pub:r,referralCode:m,source:_,submitButtonText:Y,user:o,onConfirmationRequired:"enabled"===r.payments_state?()=>null:void 0,onSuccess:x||(()=>document.location.href="/"),autoFocus:t}),"top"===er&&(0,l.Y)(T.v,{text:z("Or"),paddingX:12,className:W.A.dividerText}),"top"===er&&(0,l.Y)(g.T,{publication:r,user:o,email:a,onSubscribeSuccess:k,variant:"top"})]}),(0,l.Y)(I.az,{paddingX:{mobile:16,desktop:0},paddingTop:16,className:W.A.tosText,children:(0,l.Y)(R.U,{includeCheckbox:!1,addSubscribePreamble:!0,color:"secondary",textAlign:"center",pub:r})})]})}),!y&&"top"!==er&&(w?(0,l.FD)(C.$n,{priority:"quaternary",className:W.A.maybeLater,onClick:w,"data-testid":"maybeLater",children:[ee,(0,l.Y)(c.A,{size:20})]}):(0,l.FD)(C.$n,{priority:"quaternary",className:W.A.maybeLater,href:et,localNavigation:!1,children:[H,(0,l.Y)(c.A,{size:20})]}))]}):(0,l.Y)(F.Ic,{onRequest:()=>n.e("273").then(n.bind(n,66312)),resolve:e=>e.InviteActions,module:"./InviteActions",pub:r,user:o,freeSignupEmail:u}),!!(null==en?void 0:en.length)&&(0,l.Y)("div",{className:"blurb-buffer"}),!!(null==en?void 0:en.length)&&(0,l.Y)(A.Ye,{className:"blurbs",gap:20,children:en.map(e=>(0,l.FD)(A.I1,{gap:8,className:"blurb",children:[(0,l.Y)(D.EY.B4,{className:s()("blurb-text",W.A.blurbText),children:(0,l.Y)(X,{text:"“".concat(e.description,"”")})}),(0,l.FD)(D.EY.B4,{weight:"semibold",className:s()("blurb-text",W.A.blurbText),children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,l.Y)("a",{href:(0,j.$_T)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]}),["top","bottom"].includes(er)&&(0,l.Y)(g.T,{publication:r,user:o,email:a,onSubscribeSuccess:k,onMaybeLater:w,variant:"bottom"===er?"bottom":"dismissal",dismissalUrl:et,dismissalText:w?ee:H})]})},J=e=>{let{pub:t,overrideSubtitle:n}=e,{getSettingFor:r}=(0,v.Pu)(),{language:o}=(0,b.GO)(),{title:a,subtitle:d,logoUrl:c,coverPhotoUrl:u,hideTitle:p,hideSubtitle:m}=((e,t)=>{let n,i,r,o,l,a,{getConfigFor:s}=(0,y.mJ)();if(s("section_specific_welcome_pages")&&e.section){var d;n=e.section.name,i=e.section.description,r=null!=(d=e.section.logo_url)?d:e.logo_url,l=!!((o=e.section.cover_photo_url)&&e.section.hide_intro_title),a=!!(o&&e.section.hide_intro_subtitle)}else n=e.name,i=e.hero_text,r=e.logo_url,l=!!((o=e.cover_photo_url)&&e.hide_intro_title),a=!!(o&&e.hide_intro_subtitle);return t&&(i=t),{title:n,subtitle:i,logoUrl:r,coverPhotoUrl:o,hideTitle:l,hideSubtitle:a}})(t,n),h=r("display_welcome_page_details"),g=u&&(0,j.d4Y)(u);return(0,l.FD)(l.FK,{children:[u?(0,l.Y)(_.o,{className:"publication-cover-photo",src:u,imageProps:{quality:"auto:best"},maxWidth:1360,loading:"eager",style:(0,i._)({},g&&g.width&&{height:"min(35vh, ".concat(680*g.height/g.width,"px)")})}):c&&(0,l.Y)(I.az,{paddingBottom:32,children:(0,l.Y)(k.Nq,{logoUrl:c,size:88})}),!p&&(0,l.Y)("h1",{className:s()("publication-name",{"no-logo":!c,"with-cover":u},W.A.balancedText),children:a}),!m&&d&&(0,l.Y)("p",{className:s()("publication-tagline with-cover",{verbose:!0,"with-cover":u},W.A.balancedText),children:d}),(0,l.Y)("div",{className:"publication-meta",children:K(t,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:t.rankingDetailFreeSubscriberCount,includeRankingDetail:!!h,language:o})})]})},Q=e=>{let{onClick:t}=e;return(0,l.Y)(C.K0,{onClick:t,"aria-label":"Close","data-testid":"close-welcome-modal",priority:"tertiary",className:W.A.closeWelcomeModal,children:(0,l.Y)(u.A,{size:20})})},X=e=>{let{text:t}=e,{truncatedText:n,measureRef:i}=(0,w.L)({text:t,truncationRules:[{minLines:5,truncateTo:4}],ellipsesText:"...”"}),r=n?"".concat(n,"...”"):t;return(0,l.FD)("div",{style:{position:"relative"},children:[(0,l.Y)("div",{children:r}),(0,l.Y)("div",{ref:i,style:{visibility:"hidden",position:"absolute",width:"100%"}})]})}},68776:function(e,t,n){n.d(t,{Qi:()=>o}),n(10201);var i=n(17402);let r=(0,i.createContext)({});r.displayName="WWWContext";let o=()=>(0,i.useContext)(r)},77441:function(e,t,n){n.d(t,{f:()=>_});var i=n(10201),r=n(17402),o=n(15734),l=n.n(o),a=n(82519),s=n(84605),d=n(86500),c=n(35369),u=n(76977),p=n(88774),m=n(50874);let h=3268==n.j?[".txt",".srt",".vtt"]:null,_=e=>{let{postId:t,mediaUpload:n,transcription:o,onTranscriptionUploadStarted:_,onTranscriptionUploadCancelled:g,onTranscriptionUploadError:f,onTranscriptionUploaded:b,disabled:v,setUploadedFile:y}=e,{iString:Y}=(0,s.GO)(),[w,E]=(0,r.useState)(!1),[S,x]=(0,r.useState)(""),I=o&&"in_progress"===o.status,[C,T]=(0,r.useState)(null),A=async e=>{if(T(e),null==_||_(),e.length>0&&e[0]){var i,r,o;let l;y&&y(e[0]);let a=null!=(i=e[0].name.split(".").pop())?i:"";(0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_STARTED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:a}),r=e[0],o=async t=>{x(t);let i=null,r={};try{if("txt"===a){var o;[i,r]=(0,m.b5)(t,null!=(o=null==n?void 0:n.duration)?o:0)}else"vtt"===a?[i,r]=(0,m._b)(t):"srt"===a&&([i,r]=(0,m._b)(t));let l=(0,m.gD)(i);if(i&&!l)await k(e[0],a,i,r);else{let e=Y("Error validating transcription file"),t="".concat(e,": ").concat(l);console.error(t),null==f||f(t)}}catch(t){let e=Y("Error parsing transcription file");console.error(e,t),null==f||f(e),y&&y(null)}finally{F()}},(l=new FileReader).onload=e=>{var t;o(null==(t=e.target)?void 0:t.result)},l.readAsText(r)}},k=async(e,i,r,o)=>{let{body:a}=await l().post("/api/v1/drafts/".concat(t,"/upload_transcription/start")).send({speaker_map:o}),{originalTranscriptionFileKey:s,unalignedTranscriptionFileKey:c,alignedTranscriptionFileKey:u}=a;E(!0);try{var p;await l().put(s).send(e).set("Content-Type",e.type),await l().put(c).send(JSON.stringify(r)).set("Content-Type","application/json"),await l().put(u).send(JSON.stringify(null!=(p=null==r?void 0:r.segments)?p:[])).set("Content-Type","application/json"),await l().post("/api/v1/drafts/".concat(t,"/upload_transcription/complete")).send(),await l().post("/api/v1/drafts/".concat(t,"/realign_transcription")).send({edits:{}}).then(e=>{var r;(null==(r=e.body)?void 0:r.data)&&((0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_COMPLETED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:i}),E(!1),b(e.body.data),F())})}catch(e){(0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_FAILED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:i}),console.error("File upload failed:",e),null==f||f(Y("Error uploading transcription file"))}};(0,r.useEffect)(()=>{},[S]);let{openFileDialog:D,fileInputRef:N}=function(e){let{onFilesSelected:t}=e,n=(0,r.createRef)(),i=e=>{let n=e.target;n.files&&n.files.length>0&&t(n.files)};return(0,r.useEffect)(()=>{let e=n.current;if(e)return e.addEventListener("change",i),()=>{e.removeEventListener("change",i)}},[n]),{openFileDialog:()=>{var e;null==(e=n.current)||e.click()},fileInputRef:n}}({onFilesSelected:A}),F=()=>{T(null),N.current&&(N.current.value=""),null==g||g()},L=null==C?void 0:C[0],R=e=>{(0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_TYPE_CLICKED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:e}),N.current&&(N.current.accept=e,setTimeout(()=>D(),50))};return I?null:(0,i.FD)(u.I1,{gap:8,children:[!w&&(0,i.FD)(p.W1,{onOpen:()=>{(0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_CLICKED,{post_id:t,audio_upload_id:null==n?void 0:n.id})},trigger:(0,i.Y)(c.$n,{disabled:v,priority:"secondary",trailing:(0,i.Y)(a.A,{}),children:Y("Upload transcript")}),children:[(0,i.Y)(p.Dr,{onClick:()=>R(".txt"),children:Y("Upload .txt file")}),(0,i.Y)(p.Dr,{onClick:()=>R(".vtt"),children:Y("Upload .vtt file")}),(0,i.Y)(p.Dr,{onClick:()=>R(".srt"),children:Y("Upload .srt file")})]}),L&&(0,i.Y)(u.I1,{gap:8}),(0,i.Y)("input",{type:"file",ref:N,style:{display:"none"},accept:h.join(",")})]})}},60346:function(e,t,n){n.d(t,{H:()=>h});var i=n(10201),r=n(32485),o=n.n(r),l=n(72880),a=n(84605),s=n(17028),d=n(46453),c=n(11510),u=n(49807);if(2101!=n.j)var p=n(57324);var m=n(44307);function h(e){let{onDismiss:t,version:n,asParent:r}=e,l=(0,c.Iu)();return(0,i.FD)(s.I1,{borderTop:r?"detail":"transparent",gap:8,justifyContent:"center",alignItems:"center",className:o()(m.A.transparentLoginPrompt,"app"===n&&m.A.appPrompt,r&&m.A.asParent),minHeight:l?400:void 0,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:["login"===n&&(0,i.Y)(_,{}),"app"===n&&(0,i.Y)(g,{onDismiss:t})]})}function _(){let{iString:e}=(0,a.GO)(),{requireLogin:t,onboardingModalRef:n}=(0,d.eE)();return(0,i.FD)(i.FK,{children:[(0,i.Y)(s.EY,{size:19,color:"primary",font:"display",fontWeight:"semibold",translated:!0,children:"Log in for more"}),(0,i.Y)(s.EY,{color:"secondary",size:15,translated:!0,children:"Or create an account"}),(0,i.FD)(s.Ye,{gap:8,paddingTop:8,children:[(0,i.Y)(s.$n,{style:{width:"138px"},size:"sm",priority:"secondary-outline",onClick:()=>null==t?void 0:t(),children:e("Login")}),(0,i.Y)(s.$n,{onClick:()=>{var e;return null==(e=n.current)?void 0:e.open()},style:{width:"138px"},size:"sm",priority:"primary",children:e("Create account")})]})]})}function g(e){let{onDismiss:t}=e,{iString:n}=(0,a.GO)();return(0,i.FD)(s.I1,{alignItems:"center",gap:16,paddingY:16,paddingX:24,paddingTop:32,children:[(0,i.Y)(s.pT,{width:48,paddingY:4,radius:"md",border:"detail",alignItems:"center",justifyContent:"center",bg:"primary",children:(0,i.Y)(l.o,{src:"https://substack.com/img/substack.png",maxWidth:40,useRetinaSizing:!0,imageIsFixedWidth:!0})}),(0,i.Y)(s.EY.B2,{size:17,textAlign:"center",font:"display",fontWeight:"semibold",translated:!0,children:"Get every post and note from creators you love with the Substack app."}),(0,i.FD)(s.I1,{style:{width:"100%"},padding:16,gap:8,children:[(0,i.Y)(s.$n,{size:"md",priority:"primary",onClick:t,href:(0,u._h3)({tab:"notes",redirect:"app-store",utm_source:p.VU.menu}),newTab:!0,children:n("Switch to the app")}),(0,i.Y)(s.$n,{onClick:t,size:"md",priority:"secondary",children:n("Maybe later")})]})]})}},72678:function(e,t,n){n.d(t,{g:()=>p});var i=n(10201);if(2101!=n.j)var r=n(50802);var o=n(17402),l=n(84605),a=n(12501),s=n(68349),d=n(88774),c=n(36372),u=n(39318);function p(e){let{pub:t}=e,{iString:n}=(0,l.GO)(),{popToast:p}=(0,c.d)(),{refetch:m,isLoading:h}=(0,a.st)({pathname:"/api/v1/live_stream/recording",method:"post"}),_=(0,o.useCallback)(async()=>{let e=await m();"id"in e?(0,s.V2)("".concat((0,u.$_T)({subdomain:t.subdomain}),"/publish/recording/").concat(e.id,"?startPractice=true")):p(()=>(0,i.Y)(c.y,{text:n("Something went wrong. Please try again.")}))},[m,t.subdomain]);return(0,i.Y)(d.Dr,{leading:(0,i.Y)(r.A,{}),disabled:h,onClick:_,children:n("Record a podcast")})}},8665:function(e,t,n){n.d(t,{Q:()=>o});var i=n(10201),r=n(59085);function o(){return(0,i.Y)(r.A,{size:12,color:"var(--color-fg-secondary)"})}},89256:function(e,t,n){n.d(t,{Lx:()=>T,Wp:()=>I,X_:()=>x,_V:()=>k,cY:()=>C});var i=n(69277),r=n(70408),o=n(10201),l=n(32485),a=n.n(l),s=n(43954),d=n(54718),c=n(56195),u=n(17402),p=n(86500);n(56804);var m=n(12501),h=n(76528),_=n(17028),g=n(97515),f=n(88774),b=n(65228),v=n(31679),y=n(70486),Y=n(62488),w=n(93427),E=n(39318),S=n(35407);function x(e){var t;let{onClick:n}=e,i=(0,y.Pk)();return i.inbox.pendingInviteCount?(0,o.Y)(_.VP,{className:a()(S.A.invitesRow),children:(0,o.FD)(v._h,{onClick:n,children:[(null!=(t=i.inbox.pendingInviteUnreadCount)?t:0)>0&&(0,o.Y)(w.XV,{className:S.A.unreadDot}),(0,o.Y)(_.fI,{width:56,justifyContent:"center",alignItems:"center",children:(0,o.Y)(s.A,{size:20})}),(0,o.Y)(v.Ru,{children:(0,o.FD)(_.fI,{justifyContent:"space-between",alignItems:"center",children:[(0,o.Y)(_.EY.B3,{weight:"semibold",translated:!0,children:"Requests"}),(0,o.Y)(_.EY.B4,{color:"secondary",flex:"auto"})]})})]})}):null}function I(){return(0,o.Y)(f.W1,{trigger:(0,o.Y)(_.K0,{"aria-label":"View more",priority:"tertiary",children:(0,o.Y)(d.A,{size:20})}),children:(0,o.Y)(f.Dr,{href:(0,E.tFi)({section:"privacy"}),target:"_blank",leading:(0,o.Y)(c.A,{}),children:(0,o.Y)(_.EY.B3,{weight:"semibold",children:"Messaging settings"})})})}function C(e){let t=[],n=[...(null==e?void 0:e.threads)||[],...(null==e?void 0:e.spamThreads)||[]];for(let e of null!=n?n:[])if("direct-message"===e.type){var o,l;t.push((0,r._)((0,i._)({},e),{members:e.messageThread.members.map(e=>{let{user:t}=e;return t}),messageThreadId:e.messageThread.id,recentMessageId:null!=(l=null==(o=e.recentMessage)?void 0:o.id)?l:null,recentMessage:e.recentMessage?{comment:e.recentMessage,userId:e.recentMessage.user_id}:null}))}return t}function T(e){let{error:t,items:n,isLoading:i,selectedConversationId:r,onSelect:l}=e,a=(0,Y.Z)(),{refetch:s}=(0,m.st)({pathname:"/api/v1/messages/inbox/invites/seen",method:"POST",auto:!1});return(0,u.useEffect)(()=>{i||(s(),(0,p.u4)(p.qY.DIRECT_MESSAGE_REQUESTS_VIEWED,{pending_conversation_requests:n.length,surface:a}))},[i]),(0,o.Y)(o.FK,{children:t?(0,o.Y)(o.FK,{children:"'Error'"}):i?(0,o.Y)(v.S,{}):(0,o.Y)(_.VP,{paddingY:12,gap:8,flex:"grow",children:n.length?n.map(e=>(0,o.Y)(b.L,{item:e,onSelect:(t,n)=>l(e.messageThread.id,n),isUnread:!e.lastViewedAt,isSelected:r===e.messageThread.id,tab:"requests"},e.id)):(0,o.Y)(A,{})})})}function A(e){let{spam:t}=e;return(0,o.Y)(_.VP,{flex:"grow",justifyContent:"center",alignItems:"center",sizing:"border-box",children:(0,o.Y)(g.p,{title:t?"No spam requests yet":"No requests yet",description:t?"Message requests that may be low-quality or unwanted will appear here.":"Control whose messages arrive as requests in your Settings.",button:t?void 0:(0,o.Y)(_.$n,{priority:"primary-mono",href:(0,E.tFi)({section:"privacy"}),newTab:!0,size:"sm",children:"Go to Settings"})})})}function k(){return(0,h.OU)("/api/v1/messages/dm/invites")}},30:function(e,t,n){function i(e,t){return e.map(t).filter(e=>null!=e)}function r(e,t,n){let i=e.slice();return i[t]=n,i}n.d(t,{A6:()=>r,Gt:()=>i}),n(58156)},54542:function(e,t,n){function*i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;for(let i=e;i<t;i+=n)yield i}function*r(e){let t=Array.from(e);for(let e=t.length-1;e>=0;e--)yield t[e]}n.d(t,{BE:()=>r,y1:()=>i})},50874:function(e,t,n){n.d(t,{$r:()=>_,_b:()=>m,b5:()=>u,gD:()=>h,qD:()=>c});var i=n(69277),r=n(70408);n(39944);var o=n(69843),l=n.n(o),a=n(82776);let s=3268==n.j?[{regex:/\((\d{2}):(\d{2}):(\d{2})\):/,parse:e=>3600*parseInt(e[1])+60*parseInt(e[2])+parseInt(e[3])},{regex:/\((\d{2}):(\d{2})\):/,parse:e=>60*parseInt(e[1])+parseInt(e[2])},{regex:/\((\d{2}:\d{2}\.\d{1,3})\)/,parse:e=>{let[t,n]=e[1]?e[1].split(":").map(parseFloat):[0,0];return 60*t+n}}]:null,d=3268==n.j?[{regex:/^(.*?[\w\s’‘,.'-]*)\s\(\d{2}:\d{2}:\d{2}\):/,parse:e=>e[1]},{regex:/^(.*?[\w\s’‘,.'-]*)\s\(\d{2}:\d{2}\):/,parse:e=>e[1]},{regex:/^(.*?[\w\s’‘,.'-]*)\s*\(\d{2}:\d{2}\.\d{1,3}\)$/,parse:e=>e[1]}]:null,c=e=>{let{rows:t,maxWordsPerRow:n=60}=e;if(l()(t[0]))return[];let o=[],a=(0,r._)((0,i._)({},t[0]),{words:t[0].words.map(e=>(0,r._)((0,i._)({},e),{originalIndex:0}))});for(let e=1;e<t.length;e++){let l=t[e];if(!l)continue;let s=(0,r._)((0,i._)({},l),{words:l.words.map(t=>(0,r._)((0,i._)({},t),{originalIndex:e}))});a.speaker===s.speaker&&a.words.length+s.words.length<=n?a={start:a.start,end:s.end,text:"".concat(a.text," ").concat(s.text),words:a.words.concat(...s.words),speaker:a.speaker}:(o.push(a),a=s)}return o.push(a),o},u=(e,t)=>{let n=e.split("\n"),o=[],l="",a="",c=0,u=0,p=new Set,m={},h=0;return n.forEach((e,i)=>{var r,_;let g=null!=(r=s.find(t=>!!e.match(t.regex)))?r:null,f=null!=(_=d.find(t=>!!e.match(t.regex)))?_:null,b=e.trim();if(g){let t=e.match(g.regex);t&&(u=g.parse(t),a&&(o.push({speaker:m[l],start:c,end:u,text:a.trim(),words:[]}),a=""),c=u,b=b.replace(g.regex,""))}if(f){let t=e.match(f.regex);t&&(l=f.parse(t),p.has(l)||(p.add(l),m[l]="SPEAKER_".concat(h++)),a+="".concat(b.substring(l.length)," "))}else""!==b.trim()&&(a+="".concat(b," "));i===n.length-1&&a&&o.push({speaker:m[l],start:c,end:t,text:a.trim(),words:[]})}),[{segments:o},Object.entries(m).reduce((e,t)=>(0,r._)((0,i._)({},e),{[t[1]]:t[0]}),{})]};function p(e){let[t,n,i]=e.split(":").map(parseFloat);return 3600*t+60*n+i}let m=e=>{let t=e.split("\n").map(e=>e.trim()),n=[],o=new Set,a={},s=0;for(let e=0;e<t.length;e++){let i=t[e];if(l()(i))continue;let r=i.trim();if(r.includes("--\x3e")){let i=r.split(" --\x3e ").map(e=>e.trim()),d=p(i[0]),c=p(i[1]);e++;let u=[],m="";for(;e<t.length&&!l()(t[e])&&""!==t[e].trim();){let n=t[e].trim();if(n.startsWith("<v ")){let e=n.match(/<v\s+([^>]+)>/);if(e&&e[1]){m=e[1].trim(),o.has(m)||(o.add(m),a[m]="SPEAKER_".concat(s++));let t=n.indexOf(">")+1;t<n.length&&u.push(n.substring(t).trim())}}else u.push(n);e++}n.push({speaker:a[m],start:d,end:c,text:u.join(" ").trim(),words:[]})}}return[{segments:n},Object.entries(a).reduce((e,t)=>(0,r._)((0,i._)({},e),{[t[1]]:t[0]}),{})]},h=e=>e?e.segments.some(e=>!e.text)?"Segment text is missing":e.segments.some(e=>l()(e.end)||l()(e.start))?"Segment start or end time is missing":null:"Transcription is missing",_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return e.forEach(e=>{let i="(".concat((0,a.secondsToHHMMSS)(e.start,{strict:!0}),"):\n").concat(e.text.trim(),"\n");if(Object.keys(t).length>0){var r;let o=t[null!=(r=e.speaker)?r:""];o?n.push("".concat(o," ").concat(i)):n.push(i)}else e.user_id?n.push("user_".concat(e.user_id," ").concat(i)):n.push(i)}),n.join("\n")}},25026:function(e,t,n){n.d(t,{O:()=>a,h:()=>l});var i=n(69277),r=n(70408),o=n(92636);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.c$)("/publish/chat",(0,r._)((0,i._)({},t),{pub:e}))}function a(e,t){return(0,o.c$)("/publish/growth/subscribers",(0,r._)((0,i._)({},t),{pub:e}))}}}]);