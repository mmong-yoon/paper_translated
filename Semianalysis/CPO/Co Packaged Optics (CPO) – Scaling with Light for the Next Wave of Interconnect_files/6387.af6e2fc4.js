"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["6387"],{61060:function(e,t,n){n.d(t,{A:()=>i});let i={root:"root-LeqPP3",badge:"badge-WYVub3",circle:"circle-_ZTVoA"}},63558:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(32641),o=n(10201),a=n(97731);let s=e=>{var{size:t=20,fill:n="var(--color-fg-primary)"}=e,s=(0,r._)(e,["size","fill"]);return(0,o.Y)(a.A,(0,l._)((0,i._)({},s),{name:"PauseIconFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:n,children:(0,o.Y)("path",{stroke:"none",d:"M5.29883 17.9082H7.52539C8.375 17.9082 8.82422 17.459 8.82422 16.5996V3.29883C8.82422 2.41016 8.375 2 7.52539 2H5.29883C4.44922 2 4 2.44922 4 3.29883V16.5996C4 17.459 4.44922 17.9082 5.29883 17.9082ZM12.3984 17.9082H14.6152C15.4746 17.9082 15.9141 17.459 15.9141 16.5996V3.29883C15.9141 2.41016 15.4746 2 14.6152 2H12.3984C11.5391 2 11.0898 2.44922 11.0898 3.29883V16.5996C11.0898 17.459 11.5391 17.9082 12.3984 17.9082Z"})}))}},43510:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(32641),o=n(10201),a=n(97731);let s=e=>{var{size:t=20,fill:n="var(--color-fg-primary)"}=e,s=(0,r._)(e,["size","fill"]);return(0,o.Y)(a.A,(0,l._)((0,i._)({},s),{name:"PlayIconFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:n,children:(0,o.Y)("path",{stroke:"none",d:"M5.04688 18.5527C5.4375 18.5527 5.76953 18.3965 6.16016 18.1719L17.5469 11.5898C18.3574 11.1113 18.6406 10.7988 18.6406 10.2812C18.6406 9.76367 18.3574 9.45117 17.5469 8.98242L6.16016 2.39063C5.76953 2.16602 5.4375 2.01953 5.04688 2.01953C4.32422 2.01953 3.875 2.56641 3.875 3.41602V17.1465C3.875 17.9961 4.32422 18.5527 5.04688 18.5527Z"})}))}},59307:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(10201),o=n(97731);let a=e=>(0,r.Y)(o.A,(0,l._)((0,i._)({},e),{name:"PlayIconRounded",svgParams:{height:16,width:16},stroke:"none",children:(0,r.Y)("path",{d:"M3.35866 16C2.58101 16 2 15.4101 2 14.4447V1.55531C2 0.598883 2.58101 0 3.35866 0C3.75196 0 4.10056 0.134078 4.54749 0.393296L15.1575 6.54302C15.9531 7.00782 16.3106 7.39218 16.3106 8C16.3106 8.61676 15.9531 9.00112 15.1575 9.45698L4.54749 15.6067C4.10056 15.8659 3.75196 16 3.35866 16Z"})}))},78895:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(10201),o=n(97731);let a=e=>(0,r.FD)(o.A,(0,l._)((0,i._)({},e),{name:"SubstackLogoIcon",svgParams:{height:18,width:16,fill:"#ff6719",stroke:"none"},children:[(0,r.Y)("path",{d:"M16 4H0V6H16V4Z"}),(0,r.Y)("path",{d:"M0 8V18L7.9993 13.534L16 18V8H0Z"}),(0,r.Y)("path",{d:"M16 0H0V2H16V0Z"})]}))},20504:function(e,t,n){n.d(t,{AI:()=>eC,at:()=>ex,TV:()=>eF,jB:()=>eI,I:()=>ek,Z1:()=>eS,sZ:()=>eD,cX:()=>eA,W1:()=>eB,mj:()=>eN,H$:()=>eE,b3:()=>eL});var i=n(69277),l=n(10201),r=n(32485),o=n.n(r),a=n(69843),s=n.n(a),d=n(60250),c=n(17402),u=n(78895),h=n(2977),m=n(70408),p=n(84605),f=n(53989),v=n(85478),g=n(78338);let y=e=>{let{pub:t,isChatActive:n,isMeetingsActive:i}=e,{language:l}=(0,p.GO)(),{getSettingFor:r}=(0,f.Pu)(),{getConfigFor:o}=(0,v.mJ)(),a=!!o("publication_tabs_reorder"),s=!!r("notes_feed_enabled"),d=!!(r("reader_referrals_enabled")&&r("reader_referrals_leaderboard_enabled")),u=!!r("group_sections_and_podcasts_in_menu_enabled"),h=(0,c.useMemo)(()=>(0,g.Bf)(t.navigationBarItems||[],{isFeedEnabled:s,isChatActive:!!n,isChatEnabled:!!t.threads_v2_enabled,isMeetingsActive:!!i,hasMultipleNewsletters:t.sections&&t.sections.length>0,isReaderReferralsLeaderboardActive:d,language:l,useReordering:a}).filter(e=>!e.is_hidden),[t.navigationBarItems,t.threads_v2_enabled,t.sections,s,n,i,d,l,a]);return(0,c.useMemo)(()=>B({groupNewsletters:u,navBarItems:h,pub:t,language:l}),[u,h,t,l])};var b=n(75107),Y=n(87677),_=n(8853),w=n(37767),k=n(68410),C=n(76977),x=n(88774);function A(e){let{className:t,hideBorders:n,items:i,menuItemClassName:r,selectedMenuItemClassName:a,selectedSlug:s,pub:u,maxWidth:h}=e,{isMobile:m}=(0,k.sM)(),p=(0,c.useRef)(null),[f,v]=(0,c.useState)(!1),[g,y]=(0,c.useState)(!1);function A(e){let{scrollLeft:t,scrollWidth:n,clientWidth:i}=e;v(t>10),y(n-(i+t)>10)}let S=e=>()=>{let{current:t}=p;t&&t.scrollBy({left:250*e,behavior:"smooth"})};return(0,c.useEffect)(()=>{A(p.current)},[]),(0,l.Y)("div",{className:o()("overflow-list-container",t),style:{maxWidth:h},children:(0,l.FD)(C.Ye,{borderBottom:n?void 0:"detail",borderTop:n||m?void 0:"detail",className:o()("section-bar",{scroll:!0,"overflow-left":f,"overflow-right":g}),font:"text",height:m?44:48,justifyContent:m?"start":"center",paddingX:4,position:"relative",children:[(0,l.Y)("div",{ref:p,className:"overflow-items",onScroll:e=>A(e.target),children:i.map(e=>{let{label:t,href:n,slug:i,isNative:d,onClick:c,noFollow:h,subItems:m,newTab:p}=e;return m?(0,l.Y)(x.W1,{placement:"bottom-start",trigger:(0,l.Y)("div",{className:o()("menu-item",{selected:i===s},r,a&&{[a]:i===s}),children:(0,l.FD)(w.A,{native:d,rel:h?"nofollow":null,onClick:c,children:[(0,l.Y)("span",{className:"overflow-item-text",children:t}),(0,l.Y)(b.A,{className:"chevron-_e2GYQ",size:16})]})}),children:m.map(e=>{let{label:t,href:n,isNative:i,onClick:r,noFollow:o,logoUrl:a}=e,s=a||(null==u?void 0:u.logo_url);return(0,l.Y)(x.Dr,{href:n,leading:s?(0,l.Y)(_.c,{height:24,radius:"xs",src:s,width:24}):null,native:i,rel:o?"nofollow":void 0,onClick:r,children:t})})}):(0,l.Y)("div",{className:o()("menu-item",{selected:i===s},r,a&&{[a]:i===s}),children:(0,l.Y)(w.A,{href:n,native:d,newTab:p,rel:h?"nofollow":null,onClick:c,children:(0,l.Y)("span",{className:"overflow-item-text",children:t})})})})}),(0,l.Y)("div",{className:"left-button",children:(0,l.Y)("div",{className:"scroll-button-hitbox",role:"button",onClick:S(-1),children:(0,l.Y)(d.A,{strokeWidth:1.5})})}),(0,l.Y)("div",{className:"right-button",children:(0,l.Y)("div",{className:"scroll-button-hitbox",role:"button",onClick:S(1),children:(0,l.Y)(Y.A,{strokeWidth:1.5})})})]})})}var S=n(96400),I=n(4016),N=n(49807),D=n(82776);let E={zeteo:{121146:"Weâ€™re Not Kidding"}},L=["/about","/chat","/archive","/newsletters","/videos","/watch"],F=e=>{let{isChatActive:t,isMeetingsActive:n,pub:i,selectedSectionId:r,hideBorders:o,maxWidth:a}=e,s=y({pub:i,isChatActive:t,isMeetingsActive:n});return(0,l.Y)(A,{items:s,className:"sections-overflow",selectedSlug:r,pub:i,hideBorders:o,maxWidth:a})},T={isTree:!0,label:"Recipe Index",subItems:[{label:"By Protein",subItems:[{href:"https://whattocook.substack.com/t/beef",label:"Beef"},{href:"https://whattocook.substack.com/t/chicken",label:"Chicken"},{href:"https://whattocook.substack.com/t/lamb",label:"Lamb"},{href:"https://whattocook.substack.com/t/pork",label:"Pork"},{href:"https://whattocook.substack.com/t/seafood",label:"Seafood"},{href:"https://whattocook.substack.com/t/vegetarian",label:"Vegetarian"},{href:"https://whattocook.substack.com/t/ground-meat",label:"Ground meat"}]},{label:"By Season",subItems:[{href:"https://whattocook.substack.com/t/spring",label:"Spring"},{href:"https://whattocook.substack.com/t/summer",label:"Summer"},{href:"https://whattocook.substack.com/t/fall",label:"Fall"},{href:"https://whattocook.substack.com/t/winter",label:"Winter"}]},{label:"By Meal Type",subItems:[{href:"https://whattocook.substack.com/t/one-pot",label:"One-pot"},{href:"https://whattocook.substack.com/t/sheet-pan",label:"Sheet-pan dinners"},{href:"https://whattocook.substack.com/t/kid-friendly",label:"Kid-friendly"},{href:"https://whattocook.substack.com/t/freezer-friendly",label:"Freezer-friendly"},{href:"https://whattocook.substack.com/t/grill",label:"Grill"},{href:"https://whattocook.substack.com/t/soup",label:"Soup"},{href:"https://whattocook.substack.com/t/salad",label:"Salad"},{href:"https://whattocook.substack.com/t/breakfast",label:"Breakfast"},{href:"https://whattocook.substack.com/t/dessert",label:"Dessert"},{href:"https://whattocook.substack.com/t/15-minute-meals",label:"15-minute meals"},{href:"https://whattocook.substack.com/t/30-minute-meals",label:"30-minute meals"}]},{label:"Meal Plans and More",subItems:[{href:"https://whattocook.substack.com/t/meal-plan",label:"Really simple meal plans"},{href:"https://whattocook.substack.com/t/entertaining-menus",label:"Entertaining Menus"},{href:"https://whattocook.substack.com/t/cooking-tips",label:"Cooking tips"},{href:"https://whattocook.substack.com/t/cooking-videos",label:"Cooking videos"},{href:"https://whattocook.substack.com/t/holiday-meal-plans",label:"Holiday meal plans"}]}]},B=e=>{let{groupNewsletters:t,navBarItems:n,pub:i,language:l}=e,{iString:r}=S.TH.i(l),o=[];o.push({href:"/",label:r("Home"),slug:"/home"}),i.podcast_enabled&&i.show_pub_podcast_tab&&o.push({href:"/podcast",label:r("Podcast"),slug:"/podcast"});let a=[];(0,I.ob)({pub:i})?a=M({navBarItems:n,groups:[{label:"Shows",condition:e=>!!e.section}]}):(0,I.wj)({pub:i})?a=M({navBarItems:n,groups:[{condition:e=>{var t;return(null==(t=e.section)?void 0:t.id)===118995},excludeFromOthers:!0,isStandalone:!0},{condition:e=>{var t;return(null==(t=e.section)?void 0:t.id)===121146},excludeFromOthers:!0,isStandalone:!0},{label:"Shows",condition:e=>{var t,n;return!!(null==(t=e.section)?void 0:t.is_podcast)||(null==(n=e.postTag)?void 0:n.slug)==="townhall"}},{label:"Columns",condition:e=>{var t,n,i;return!!e.section&&!(null==(t=e.section)?void 0:t.is_podcast)&&![132068,243259,214805].includes(null!=(i=null==(n=e.section)?void 0:n.id)?i:-1)}},{label:"Documentaries",condition:e=>{var t,n;return[132068,214805,243259].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)}}]}):(0,I.s7)({pub:i})?(o.push({href:"/watch",label:"Watch",slug:"/watch"}),o.push({href:"/listen",label:"Shows",slug:"/listen"}),a=M({navBarItems:n.filter(e=>"/watch"!==e.link_url&&(!e.section||!e.section.is_podcast||(0,D.sectionIsSpecificallyMarkedAsNewsletter)({section:e.section,pub:i}))),groups:[{label:"Newsletters",condition:e=>!!e.section}]})):a=(0,I.d4)({pub:i})?M({navBarItems:n,groups:[{label:"Projects",condition:e=>{var t,n;return[146942,146943,150226].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)},excludeFromOthers:!0},{label:"News / Research",condition:e=>{var t,n;return[146936,146935].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)},excludeFromOthers:!0},{label:"Calls-to-Action",condition:e=>{var t,n;return[146939,146941,146949].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)},excludeFromOthers:!0},{label:"Recommendations",condition:e=>{var t,n;return[146958].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)||"https://bookshop.org/shop/globalfreedoms"===e.link_url},excludeFromOthers:!0},{label:"Podcasts",condition:e=>{var t;return!!(null==(t=e.section)?void 0:t.is_podcast)},excludeFromOthers:!0}]}):t?M({navBarItems:n,groups:[{label:r("Newsletters"),condition:e=>{var t;return!!e.section&&!(null==(t=e.section)?void 0:t.is_podcast)}},{label:r("Podcasts"),condition:e=>{var t;return!!(null==(t=e.section)?void 0:t.is_podcast)}}]}):n;let s=[...o,...P({groupedNavBarItems:a,pub:i})];if((0,I.O3)({pub:i})){var d,c;if((null==(c=i.theme)||null==(d=c.custom_header)?void 0:d.navStyle)==="stacked"){let e=s.findIndex(e=>"RECIPE INDEX"===e.label);-1!==e&&(s[e]=T)}}return s},M=e=>{let{navBarItems:t,groups:n}=e,i=[...t],l=[],r=[...t];for(let e of n)if(e.isStandalone){let t=i.find(e.condition);if(!t)continue;l.push(t),r=r.filter(e=>e!==t),e.excludeFromOthers&&(i=i.filter(e=>e!==t))}else{var o;let t=i.filter(e.condition);if(0===t.length)continue;l.push({label:null!=(o=e.label)?o:"Other",navBarItems:t}),r=r.filter(t=>!e.condition(t)),e.excludeFromOthers&&(i=i.filter(t=>!e.condition(t)))}return[...l,...r]},P=e=>{let{groupedNavBarItems:t,pub:n}=e;return t.map(e=>"navBarItems"in e?{label:e.label,subItems:e.navBarItems.map(e=>z({navBarItem:e,pub:n}))}:z({navBarItem:e,pub:n}))},z=e=>{var t,n,l,r,o,a;let{navBarItem:s,pub:d}=e;if(s.section){let e=s.section,a=e.is_podcast&&null!=(r=null==(n=d.sections.find(t=>t.id===e.id))||null==(t=n.podcastSettings)?void 0:t.podcast_art_url)?r:e.logo_url;return(0,m._)((0,i._)({label:null!=(o=null==(l=E[d.subdomain])?void 0:l[e.id])?o:(0,D.truncateText)(e.name,30),href:(0,N.Dor)(d,{section:e})},a?{logoUrl:a}:null),{slug:e.id})}let c=(0,g.DF)(s),u="link"===c&&!(s.standard_key||L.includes(null!=(a=s.link_url)?a:"")),h=u&&d.tier<2;return(0,m._)((0,i._)({href:(0,N.cSL)(d,s,{addBase:u}),label:(0,D.truncateText)((0,g.ly)(s),30)},h?{noFollow:h}:null,"page"===c?{isNative:!0}:null),{slug:(0,N.cSL)(d,s,{addBase:!1}),newTab:u})};var O=n(68349),W=n(35369);let R="visible-S5xqLB",H=e=>{let{isChatActive:t,isMeetingsActive:n,pub:i,selectedSectionId:r,maxWidth:a,withoutLeftPadding:s=!1,withoutRightPadding:d=!1}=e,{language:u}=(0,p.GO)(),{getSettingFor:h}=(0,f.Pu)(),{getConfigFor:m}=(0,v.mJ)(),y=!!m("publication_tabs_reorder"),b="100%"===a,[Y,_]=(0,c.useState)(!1),w=!!h("notes_feed_enabled"),k=!!(h("reader_referrals_enabled")&&h("reader_referrals_leaderboard_enabled")),x=B({groupNewsletters:!!h("group_sections_and_podcasts_in_menu_enabled"),navBarItems:(0,g.Bf)(i.navigationBarItems||[],{isFeedEnabled:w,isChatActive:!!t,isChatEnabled:!!i.threads_v2_enabled,isMeetingsActive:!!n,hasMultipleNewsletters:i.sections&&i.sections.length>0,isReaderReferralsLeaderboardActive:k,language:u,useReordering:y}).filter(e=>!e.is_hidden),pub:i,language:u}).flatMap(e=>e.subItems?e.subItems:e),A=(0,c.useRef)(null),[S,I]=(0,c.useState)(!1),[N,D]=(0,c.useState)(!1),E=(0,c.useCallback)(e=>{let{scrollLeft:t,scrollWidth:n,clientWidth:i}=e;b||I(t>10),D(n-(i+t)>10)},[b]);(0,c.useLayoutEffect)(()=>{A.current&&E(A.current)},[x,E]);let L=(0,c.useCallback)(()=>{A.current&&(A.current.scrollWidth>A.current.clientWidth?_(!0):_(!1))},[]);return(0,c.useLayoutEffect)(()=>(window.addEventListener("resize",L),L(),()=>{window.removeEventListener("resize",L)}),[L]),(0,l.Y)(C.pT,{justifyContent:"center",alignItems:"center",style:{width:a,minWidth:280},paddingX:16*!!b,children:(0,l.FD)("div",{className:"scrollWrapper-acnikR",children:[!b&&(0,l.Y)("div",{className:o()("fadeLeft-eSWM6i",S&&R),style:{marginRight:b?"16px":0}}),(0,l.Y)(C.Ye,{ref:A,justifyContent:Y?"start":"center",gap:8,wrap:"nowrap",className:"scrollContainer-Zw8XO7",onScroll:e=>{E(e.target)},paddingY:8,paddingLeft:b||s?0:40,paddingRight:b||d?0:40,children:x.map(e=>{var t;let n=e.slug===r;return(0,l.Y)(W.$n,{priority:n?"primary":"secondary-outline",size:"sm",onClick:()=>{e.onClick?e.onClick():e.href&&(0,O.V2)(e.href,{local_navigation:!e.isNative})},rounded:!0,color:n?"inherit":"secondary",children:e.label},null!=(t=e.slug)?t:e.label)})}),(0,l.Y)("div",{className:o()("fadeRight-6i2p1g",N&&R),style:{marginLeft:b?"16px":0}})]})})};var V=n(13950);let j=e=>{let{menuItems:t,maxWidth:n,itemGap:i,moreButtonWidth:l,containerPadding:r=32,isFullWidth:o=!1,windowWidth:a="undefined"!=typeof window?window.innerWidth:0,isSmallScreen:s=!1}=e,d=(0,c.useRef)(null),u=(0,c.useRef)(null),h=(0,c.useRef)(null),[m,p]=(0,c.useState)([]),[f,v]=(0,c.useState)([]),[g,y]=(0,c.useState)(!1),b=(0,c.useCallback)(()=>{let e;if(!h.current)return;if(o)e=a-(s?20:40)-r;else if(n&&"number"==typeof n)e=n;else if(d.current)e=d.current.offsetWidth-r;else{if(!u.current)return;e=u.current.offsetWidth}let c=[];h.current.querySelectorAll(".measure-item").forEach((e,n)=>{let l=e.offsetWidth+i;t[n]&&c.push({item:t[n],width:l,index:n})});let m=0,f=0;for(let t=0;t<c.length;t++){let n=c[t];if(!n)continue;let i=m+n.width;if(t===c.length-1){i<=e&&(m=i,f++);break}if(i+l<=e)m=i,f++;else break}0===f&&c.length>0&&(f=c.length);let g=t.slice(0,f),b=t.slice(f);p(e=>e.length!==g.length||e.some((e,t)=>{var n;return e.slug!==(null==(n=g[t])?void 0:n.slug)})?g:e),v(e=>e.length!==b.length||e.some((e,t)=>{var n;return e.slug!==(null==(n=b[t])?void 0:n.slug)})?b:e),y(!0)},[t,n,o,a,s,i,l,r]);return(0,c.useLayoutEffect)(()=>{if(b(),!o)return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)}},[b,o]),{measurementRef:h,containerRef:u,outerContainerRef:d,visibleItems:m,overflowItems:f,isReady:g}},U="chevron-fUHuKc",q=e=>{let{isChatActive:t,isMeetingsActive:n,pub:i,selectedSectionId:r,hideBorders:a,maxWidth:s}=e,{iString:d}=(0,p.GO)(),{isMobile:u}=(0,k.sM)(),h="100%"===s,[m,f]=(0,c.useState)("undefined"!=typeof window?window.innerWidth:0),v=m<=992,g=y({pub:i,isChatActive:t,isMeetingsActive:n}),{measurementRef:Y,containerRef:A,outerContainerRef:S,visibleItems:I,overflowItems:N,isReady:D}=j({menuItems:g,maxWidth:s,itemGap:32,moreButtonWidth:80,containerPadding:32,isFullWidth:h,windowWidth:m,isSmallScreen:v});(0,c.useLayoutEffect)(()=>{let e=()=>{f(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let E=(e,t,n)=>{let{label:i,href:r,isNative:a,onClick:s,noFollow:d,subItems:c,newTab:u}=e;return c?(0,l.Y)(x.W1,{placement:"bottom-start",trigger:(0,l.Y)("div",{className:o()("menu-item",{selected:t}),children:(0,l.FD)(w.A,{native:a,rel:d?"nofollow":null,onClick:s,children:[(0,l.Y)("span",{className:"overflow-item-text",children:i}),(0,l.Y)(b.A,{className:U,size:16})]})}),children:c.map(e=>{let t=e.logoUrl;return(0,l.Y)(x.Dr,{href:e.href,leading:t?(0,l.Y)(_.c,{height:24,radius:"xs",src:t,width:24}):null,native:e.isNative,rel:e.noFollow?"nofollow":void 0,onClick:e.onClick,children:e.label},e.slug)})},n):(0,l.Y)("div",{className:o()("menu-item",{selected:t}),children:(0,l.Y)(w.A,{href:r,native:a,newTab:u,rel:d?"nofollow":null,onClick:s,children:(0,l.Y)("span",{className:"overflow-item-text",children:i})})},n)};return(0,l.FD)(l.FK,{children:[(0,l.Y)("div",{ref:Y,className:"measurementContainer-Wd518f",children:g.map((e,t)=>(0,l.Y)("div",{className:"measure-item",children:E(e,!1,"measure-".concat(t))},t))}),(0,l.Y)("div",{ref:S,className:o()("overflow-list-container","sections-overflow"),style:{maxWidth:h?"100%":s,width:h?"100%":void 0,paddingLeft:h&&!v?20:void 0,paddingRight:h?20:void 0,visibility:D?"visible":"hidden"},children:(0,l.Y)(C.Ye,{ref:A,borderBottom:a?void 0:"detail",borderTop:a||u?void 0:"detail",className:"section-bar",font:"text",height:u?44:48,justifyContent:u||v?"start":"center",paddingX:4,position:"relative",children:(0,l.FD)("div",{className:"overflow-items",children:[I.map(e=>{var t;let n=e.slug===r;return E(e,n,null!=(t=e.slug)?t:e.label)}),N.length>0&&(0,l.Y)(x.W1,{placement:"bottom-start",trigger:(0,l.Y)("div",{className:"menu-item",children:(0,l.FD)(w.A,{children:[(0,l.Y)("span",{className:"overflow-item-text",children:d("More")}),(0,l.Y)(b.A,{className:U,size:16})]})}),children:N.map(e=>{let t=e.noFollow?null:e.logoUrl;return(0,l.Y)(x.Dr,{href:e.href,leading:t?(0,l.Y)(_.c,{height:24,radius:"xs",src:t,width:24}):null,native:e.isNative,rel:e.noFollow?"nofollow":void 0,onClick:e.onClick,children:e.label},e.slug)})},"more-menu")]})})})]})},J=e=>{let{isChatActive:t,isMeetingsActive:n,pub:i,selectedSectionId:r,maxWidth:o}=e,{iString:a}=(0,p.GO)(),s="100%"===o,[d,u]=(0,c.useState)("undefined"!=typeof window?window.innerWidth:0),h=y({pub:i,isChatActive:t,isMeetingsActive:n}),{measurementRef:m,containerRef:f,visibleItems:v,overflowItems:g,isReady:Y}=j({menuItems:h,maxWidth:o,itemGap:8,moreButtonWidth:80,containerPadding:32,isFullWidth:s,windowWidth:d});return(0,c.useLayoutEffect)(()=>{let e=()=>{u(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,l.FD)(l.FK,{children:[(0,l.Y)("div",{ref:m,className:"measurementContainer-lK1Sqq",children:h.map((e,t)=>(0,l.Y)(W.$n,{className:"measure-item",priority:"secondary-outline",size:"sm",rounded:!0,color:"secondary",children:e.label},t))}),(0,l.Y)(C.pT,{justifyContent:"center",alignItems:"center",style:{width:s?"100%":o,minWidth:160,visibility:Y?"visible":"hidden"},paddingX:16*!!s,children:(0,l.FD)(C.Ye,{ref:f,justifyContent:"center",gap:8,wrap:"nowrap",paddingY:8,children:[v.map(e=>{var t;let n=e.slug===r;return(0,l.Y)(W.$n,{priority:n?"primary":"secondary-outline",size:"sm",onClick:()=>{e.onClick?e.onClick():e.href&&(0,O.V2)(e.href,{local_navigation:!e.isNative})},rounded:!0,color:n?"inherit":"secondary",children:e.label},null!=(t=e.slug)?t:e.label)}),g.length>0&&(0,l.Y)(x.W1,{placement:"bottom-start",trigger:(0,l.FD)(W.$n,{priority:"secondary-outline",size:"sm",rounded:!0,color:"secondary",children:[a("More"),(0,l.Y)(b.A,{className:"chevron-J7_gYb",size:16})]}),children:g.map(e=>{let t=e.noFollow?null:e.logoUrl;return(0,l.Y)(x.Dr,{href:e.href,native:e.isNative,onClick:e.onClick,leading:t?(0,l.Y)(_.c,{height:24,radius:"xs",src:t,width:24}):null,children:e.label},e.slug)})})]})})]})};var K=n(89230),G=n(3680),X=n(72880),$=n(89490),Z=n(91401),Q=n(75303),ee=n(63136);let et="menuItem-DLEJaw",en=e=>{var t;let{item:n,pub:i,selectedSectionId:r,onClose:o,onToggleExpand:a,isExpanded:s}=e;return(0,l.FD)(C.VP,{gap:0,children:[(0,l.Y)(W.$n,{size:"sm",onClick:()=>null==a?void 0:a(n.label),className:et,priority:"tertiary",children:(0,l.FD)(C.Ye,{alignItems:"center",justifyContent:"space-between",gap:12,paddingY:4,paddingLeft:8,children:[(0,l.Y)(C.Ye,{alignItems:"center",gap:12,children:(0,l.Y)(ee.EY,{weight:"regular",font:"text",children:n.label})}),(0,l.Y)(b.A,{size:20,style:{transform:s?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s ease"}})]})}),s&&(0,l.Y)(C.VP,{gap:4,paddingTop:8,paddingLeft:8,children:null==(t=n.subItems)?void 0:t.map(e=>e.subItems?(0,l.Y)(ei,{item:e,pub:i,selectedSectionId:r,onClose:o},e.label):(0,l.Y)(el,{item:e,pub:i,selectedSectionId:r,onClose:o},e.label))})]})},ei=e=>{var t;let{item:n,pub:i,selectedSectionId:r,onClose:o}=e,[a,s]=(0,c.useState)(!1);return(0,l.FD)(C.VP,{gap:0,children:[(0,l.Y)(W.$n,{onClick:()=>s(!a),className:et,priority:"tertiary",children:(0,l.FD)(C.Ye,{alignItems:"center",justifyContent:"space-between",gap:12,paddingY:12,children:[(0,l.Y)(C.Ye,{alignItems:"center",gap:12,children:(0,l.Y)(ee.EY,{weight:"regular",font:"text",children:n.label})}),(0,l.Y)(b.A,{size:20,style:{transform:a?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s ease"}})]})}),a&&(0,l.Y)(C.VP,{gap:0,paddingTop:8,paddingLeft:32,children:null==(t=n.subItems)?void 0:t.map(e=>(0,l.Y)(el,{item:e,pub:i,selectedSectionId:r,onClose:o},e.label))})]})},el=e=>{let{item:t,selectedSectionId:n,onClose:i}=e,r=t.slug===n;return(0,l.Y)(w.A,{href:t.href,native:t.isNative,rel:t.noFollow?"nofollow":void 0,onClick:()=>{var e;null==(e=t.onClick)||e.call(t),i()},className:et,"data-selected":r,children:(0,l.Y)(C.Ye,{alignItems:"center",gap:12,paddingY:12,children:(0,l.Y)(ee.EY,{font:"text",children:t.label})})})},er=e=>{var t;let{item:n,pub:i,selectedSectionId:r,onClose:o,onToggleExpand:a,isExpanded:s}=e;return(0,l.FD)(C.VP,{gap:0,children:[(0,l.Y)(W.$n,{size:"sm",onClick:()=>null==a?void 0:a(n.label),className:et,priority:"tertiary",children:(0,l.FD)(C.Ye,{alignItems:"center",justifyContent:"space-between",gap:12,paddingY:4,paddingLeft:8,children:[(0,l.Y)(C.Ye,{alignItems:"center",gap:12,children:(0,l.Y)(ee.EY,{weight:"regular",font:"text",children:n.label})}),(0,l.Y)(b.A,{size:20,style:{transform:s?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s ease"}})]})}),s&&(0,l.Y)(C.VP,{gap:0,paddingTop:8,paddingLeft:8,children:null==(t=n.subItems)?void 0:t.map(e=>(0,l.Y)(ea,{item:e,pub:i,selectedSectionId:r,onClose:o},e.label))})]})},eo=e=>{let{item:t,selectedSectionId:n,onClose:i}=e,r=t.slug===n;return(0,l.Y)(w.A,{href:t.href,native:t.isNative,rel:t.noFollow?"nofollow":void 0,onClick:()=>{var e;null==(e=t.onClick)||e.call(t),i()},className:et,"data-selected":r,children:(0,l.Y)(C.Ye,{alignItems:"center",gap:12,paddingX:16,paddingY:4,sizing:"border-box",height:32,children:(0,l.Y)(ee.EY,{font:"text",children:t.label})})})},ea=e=>{let{item:t,selectedSectionId:n,onClose:i}=e,r=t.slug===n,o=t.logoUrl;return(0,l.Y)(w.A,{href:t.href,native:t.isNative,rel:t.noFollow?"nofollow":void 0,onClick:()=>{var e;null==(e=t.onClick)||e.call(t),i()},className:et,"data-selected":r,children:(0,l.FD)(C.Ye,{alignItems:"center",gap:12,paddingLeft:16*!o,paddingY:12,children:[o&&(0,l.Y)(_.c,{height:24,radius:"xs",src:o,width:24}),(0,l.Y)(ee.EY,{font:"text",children:t.label})]})})},es=e=>{let{isChatActive:t,isMeetingsActive:n,pub:i,selectedSectionId:r}=e,{iString:o}=(0,p.GO)(),[a,s]=(0,c.useState)(!1),[d,u]=(0,c.useState)(new Set),h=y({pub:i,isChatActive:t,isMeetingsActive:n}).filter(e=>"/"!==e.href),m=()=>{s(!1)},f=e=>{u(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return(0,l.FD)(l.FK,{children:[(0,l.Y)(W.K0,{size:"md",priority:"tertiary","aria-label":o("Navigation menu"),onClick:()=>s(!0),children:(0,l.Y)(K.A,{size:20})}),(0,l.Y)(Z._,{isOpen:a,onClose:m,width:320,className:"drawer-_gS8Z4",style:a?{}:{visibility:"hidden"},children:(0,l.Y)(Z._.Body,{radius:"none",children:(0,l.FD)(C.VP,{gap:16,children:[(0,l.Y)(C.Ye,{alignItems:"start",paddingX:8,gap:12,children:(0,l.Y)($.az,{onClick:m,cursor:"pointer",children:(0,l.Y)(G.A,{height:24})})}),(0,l.Y)(C.Ye,{paddingX:8,paddingBottom:4,justifyContent:"center",children:(0,l.Y)(Q.AE,{href:"/",onClick:m,children:i.logo_url_wide?(0,l.Y)(X.o,{src:i.logo_url_wide,maxWidth:224,useRetinaSizing:!0,imageIsFixedWidth:!0}):i.name})}),h.map(e=>e.subItems?e.isTree?(0,l.Y)(en,{item:e,pub:i,selectedSectionId:r,onClose:m,onToggleExpand:f,isExpanded:d.has(e.label)},e.label):(0,l.Y)(er,{item:e,pub:i,selectedSectionId:r,onClose:m,onToggleExpand:f,isExpanded:d.has(e.label)},e.label):(0,l.Y)(eo,{item:e,pub:i,selectedSectionId:r,onClose:m},e.label))]})})})]})},ed=()=>Math.max(document.documentElement.scrollTop||document.body.scrollTop,0),ec=e=>{let{alwaysShow:t,disable:n,menuContentRef:i,menuHeight:l,ignoreScroll:r=!1}=e,o=(0,c.useRef)(!1),a=(0,c.useRef)(ed()),s=(0,c.useRef)(ed()),d=(0,c.useCallback)((e,t)=>{a.current=t,i.current&&(i.current.style.position=e,i.current.style.top="fixed"===e&&t>=0?"":"".concat(t,"px"))},[i]),u=(0,c.useCallback)(()=>{d("absolute",ed()-l),o.current=!1},[l,d]),h=(0,c.useCallback)(e=>{let t=e.target;((null==t?void 0:t.classList.contains("footnote-number"))||(null==t?void 0:t.classList.contains("footnote-anchor")))&&(o.current=!0,setTimeout(u,0))},[u]),m=(0,c.useCallback)(()=>{var e;if(t)return void d("fixed",0);if(o.current)return;let r=s.current;s.current=ed();let c=s.current,u=(null==(e=i.current)?void 0:e.style.position)==="fixed",h=c<=0||0>=(0,O.A9)(),m=c>=(0,O.A9)(),p=c>r,f=c<r;if(h)return void d("fixed",0);if(n)return void d("absolute",0);if(!m){if(p){if(u&&a.current>=0)return void d("absolute",c);if(!u&&a.current<c-l)return void d("fixed",-l)}if(f){if(a.current>c)return void d("fixed",c);let e=Math.max(c-l,0);if(a.current<e)return void d("absolute",e)}}},[t,i,n,d,l]);(0,c.useEffect)(()=>{if("undefined"!=typeof window&&!r)return window.addEventListener("scroll",m),window.addEventListener("click",h),m(),()=>{window.removeEventListener("scroll",m),window.removeEventListener("click",h)}},[n,h,m,d,r])};var eu=n(86500),eh=n(44333),em=n(81203),ep=n(37764),ef=n(39318),ev=n(57324);let eg={mainMenuContent:"mainMenuContent-DME8DR",profileContext:"profileContext-urkyyv",relative:"relative-ozgOAS",topBar:"topBar-pIF0J1",titleWithWordmark:"titleWithWordmark-GfqxEZ",titleContainer:"titleContainer-DJYq5v",overflowVisible:"overflowVisible-joA5t0",fullScreen:"fullScreen-Zzi89N",title:"title-oOnUGd",buttonsContainer:"buttonsContainer-SJBuep",logoContainer:"logoContainer-p12gJb",wordmark:"wordmark-WcDTTu",logoLeftAvatar:"logoLeftAvatar-XEWHpd",logoLeftWordmark:"logoLeftWordmark-FeTNhG",logoCenterPostAvatar:"logoCenterPostAvatar-MJBapZ",logoLeftPostAvatar:"logoLeftPostAvatar-lNfa5H",logoCenterPostWordmark:"logoCenterPostWordmark-j7Svao",logoLeftPostWordmark:"logoLeftPostWordmark-ERptdm",logoLeftNav:"logoLeftNav-eAaUI5",logoCenterSlot:"logoCenterSlot-xJtI3r",logoCenterPostSlot:"logoCenterPostSlot-qYOnTB",logoTopCenterSlot:"logoTopCenterSlot-hss6WZ",stackedTopCenter:"stackedTopCenter-TPTTqw",logoCenterPostLeftSlot:"logoCenterPostLeftSlot-EIqNto"},ey=e=>{var t;let{pub:n,wordmarkHeight:i,homeHref:r,fullScreen:a=!1,isMinimized:s=!1}=e;return(0,l.Y)("div",{className:o()(eg.titleContainer,eg.overflowVisible,a&&eg.fullScreen),style:{flexGrow:0,maxWidth:"100%"},children:(0,l.Y)(ee.EY,{as:"h1",className:o()(eg.title,{[null!=(t=eg.titleWithWordmark)?t:""]:n.logo_url_wide}),font:"pub-headings",id:"wordlogo",children:(0,l.Y)(Q.AE,{href:r,children:n.logo_url_wide?(0,l.Y)("img",{alt:n.name,src:(0,N.dJ9)(n.logo_url_wide,null,{height:2*i,crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"],aspect:1318/252}),className:eg.wordmark,style:{maxHeight:Math.max(20,s?ex:i)}}):n.name})})})},eb=e=>{var t,n,i,r,a,s,m,p,f,g;let{className:y,freeSignup:b,freeSignupEmail:Y,hideNavBar:_,hideTitle:w,isAccountContext:x,isChatActive:A,isMeetingsActive:S,isPostView:D,pub:E,selectedSectionId:L,showCustomerSupportModeModal:T,user:B}=e;w="profile"===E.homepage_type||w;let{getConfigFor:M}=(0,v.mJ)(),{isMobile:P}=(0,k.sM)(),[z]=(0,eh.rd)(),O=(0,c.useRef)(null),R=(0,c.useRef)(null),j="profile"===E.homepage_type,U=j&&z.path.match(/\/profile\/(subscribers|followers|following)/),K=!j&&!!E.logo_url&&!(0,I.S2)({pub:E}),G=!!(!w&&E.logo_url_wide),X=!!M("show_menu_on_posts"),$=D?X:!_,Z=(e=>{var t,n,i,l,r,o;let a,{theme:s,isPostView:d=!1,showNavOnPosts:c=!1}=e,u=(null==s||null==(t=s.custom_header)?void 0:t.layout)||ep.Tb.layout,h=(null==s||null==(n=s.custom_header)?void 0:n.navPosition)||ep.Tb.navPosition,m=(null==s||null==(i=s.custom_header)?void 0:i.navStyle)==="stacked";return"stacked"===u?(a="top"===h?"top-center":"bottom-center",m&&(a="top-left")):a="logo_left"===u?"top-center":"top-left",{layout:u,wordmarkLogoSize:Math.min((null==s||null==(l=s.custom_header)?void 0:l.wordmarkLogoSize)||eC,d?110:220),wordmarkPosition:"stacked"===u?"top"===h&&(!d||c)?"bottom-center":"top-center":"logo_left"===u?"top-left":"top-center",publicNavPosition:a,publicNavStyle:(null==s||null==(r=s.custom_header)?void 0:r.navStyle)||"text",backgroundColor:null==s||null==(o=s.custom_header)?void 0:o.backgroundColor}})({theme:E.theme,isPostView:D,showNavOnPosts:X}),{wordmarkPosition:Q,wordmarkLogoSize:ee,publicNavPosition:et,layout:en}=Z,ei="buttons"===Z.publicNavStyle,el="stacked"===Z.publicNavStyle,er="logo_center"===en&&el?"stacked":en,eo=P?240:340,ea=P?160:300,ed=P&&"bottom-center"!==Q?ek:ee||eC,{currentTopBarHeight:eb,currentMenuHeight:e_,isMinimized:ew}=eY({forceMaximized:!D&&!x,forceMinimized:!!x,isMobile:P,showNavBar:"stacked"===er&&!el&&$,showWordmark:G,themeLayoutOptions:Z,scaledWordmarkHeight:ed}),ex=P?eD:eE,eA=!P&&"top-center"===Q&&("stacked"===er||"logo_center"===er),eS="bottom-center"===Q;ec({alwaysShow:!1,disable:!D,menuContentRef:O,menuHeight:e_,ignoreScroll:eS});let eI=x?(0,N.$_T)(E):"/",eN=j&&!D&&!x&&!P,eL=()=>{(0,eu.u4)(eu.qY.NAV_BAR_HOME_LINK_CLICKED)},eF=!!Z.backgroundColor;return(0,l.Y)(V.DH,{prefix:eF?"header":void 0,children:(0,l.FD)("div",{className:o()("main-menu",y),"data-testid":"navbar",children:[(0,l.FD)("div",{ref:O,className:o()(eg.mainMenuContent,eN&&eg.profileContext,eS&&eg.relative),children:[(0,l.FD)(C.Ye,{alignItems:"center",borderBottom:$?void 0:"detail",className:eg.topBar,gap:12,justifyContent:"space-between",paddingBottom:P?12*!$:0,paddingTop:12*!!P,paddingX:ex,style:P?void 0:{position:"relative",height:eb-1},children:[w||"top-left"!==Q?$&&"top-left"===et?(0,l.Y)("div",{className:o()(eg.logoContainer,{[null!=(i=eg.logoLeftNav)?i:""]:"logo_center"===er}),style:{display:j||!K?"none":null,flexBasis:0,flexGrow:1},children:ei?(0,l.Y)(J,{isChatActive:!0,isMeetingsActive:!1,maxWidth:ea,pub:E,selectedSectionId:L}):el?(0,l.Y)(es,{isChatActive:A,pub:E,selectedSectionId:L}):(0,l.Y)(q,{hideBorders:!0,isChatActive:A,isMeetingsActive:S,pub:E,selectedSectionId:L,maxWidth:eo})}):(0,l.FD)("div",{className:o()(eg.logoContainer,{[null!=(r=eg.stackedTopCenter)?r:""]:"stacked"===er&&"top-center"===Q,[null!=(a=eg.logoCenterPostLeftSlot)?a:""]:"logo_center"===er&&D}),style:{display:j?"none":null,visibility:K?"visible":"hidden",flexBasis:0,flexGrow:1},children:[j&&(0,l.FD)(C.Ye,{alignItems:"center",gap:40,children:[(0,l.Y)(C.pT,{alignItems:"center",as:"a",height:20,href:(0,N.yRP)((0,N.$_T)(),{utm_content:ev.fL.islandSubstackLogo}),justifyContent:"center",tabIndex:-1,width:20,children:(0,l.Y)(u.A,{style:{transform:"scale(1.4)"}})}),U&&(0,l.Y)(W.K0,{className:eg.backButton,href:(0,ef.fOI)(E),size:"md",children:(0,l.Y)(d.A,{size:20})})]}),K&&(0,l.Y)(em.wg,{href:eI,pub:E,size:40,onClick:eL})]}):"logo_left"===Z.layout?(0,l.FD)(l.FK,{children:[(0,l.Y)("div",{className:o()(eg.logoLeftAvatar,{[null!=(t=eg.logoLeftPostAvatar)?t:""]:D}),children:(0,l.Y)(em.wg,{href:eI,pub:E,size:40,onClick:eL})}),(0,l.Y)("div",{className:o()(eg.logoLeftWordmark,{[null!=(n=eg.logoLeftPostWordmark)?n:""]:D}),children:(0,l.Y)(ey,{homeHref:eI,pub:E,wordmarkHeight:ed,isMinimized:ew})})]}):(0,l.Y)(ey,{homeHref:eI,pub:E,wordmarkHeight:ed,isMinimized:ew}),!w&&"top-center"===Q&&(0,l.Y)("div",{className:o()({[null!=(s=eg.logoCenterSlot)?s:""]:"logo_center"===er,[null!=(m=eg.logoCenterPostSlot)?m:""]:"logo_center"===er&&D,[null!=(p=eg.logoTopCenterSlot)?p:""]:"stacked"===er}),style:{flexBasis:0,flexGrow:eA||P?2:0,display:"flex",justifyContent:P?"flex-start":"center",pointerEvents:"auto"},children:"logo_center"===er?(0,l.FD)(l.FK,{children:[(0,l.Y)("div",{className:o()(eg.logoLeftAvatar,{[null!=(f=eg.logoCenterPostAvatar)?f:""]:D}),children:(0,l.Y)(em.wg,{href:eI,pub:E,size:40,onClick:eL})}),(0,l.Y)("div",{className:o()(eg.logoLeftWordmark,{[null!=(g=eg.logoCenterPostWordmark)?g:""]:D}),children:(0,l.Y)(ey,{homeHref:eI,pub:E,wordmarkHeight:ed,isMinimized:ew})})]}):(0,l.Y)(ey,{homeHref:eI,pub:E,wordmarkHeight:ed,isMinimized:ew})}),$&&"top-center"===et&&(0,l.FD)(l.FK,{children:[(0,l.Y)(C.pT,{alignItems:"center",justifyContent:"center",sizing:"border-box",style:{flexBasis:0,flexGrow:2*(!w&&"top-left"===Q),maxWidth:"100%",visibility:"hidden",width:510},children:(0,l.Y)("div",{style:{width:510,height:1}})}),(0,l.Y)("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",pointerEvents:"auto"},children:ei?(0,l.Y)(J,{isChatActive:!0,isMeetingsActive:!1,maxWidth:ea,pub:E,selectedSectionId:L}):(0,l.Y)(q,{hideBorders:!0,isChatActive:A,isMeetingsActive:S,pub:E,selectedSectionId:L,maxWidth:eo})})]}),(0,l.Y)(C.Ye,{alignItems:"center",justifyContent:"end",style:{flexBasis:0,flexGrow:+("logo_left"!==en)},children:(0,l.Y)("div",{ref:R,className:eg.buttonsContainer,children:(0,l.Y)(h.A,{freeSignup:b,freeSignupEmail:Y,isMeetingsActive:S,pub:E,showCustomerSupportModeModal:T,user:B})})})]}),$&&"bottom-center"===et&&("buttons"===Z.publicNavStyle?(0,l.Y)(C.pT,{alignItems:"center",justifyContent:"start",children:(0,l.Y)(H,{isChatActive:!0,isMeetingsActive:!1,maxWidth:"100%",pub:E,selectedSectionId:L})}):(0,l.Y)(F,{isChatActive:A,isMeetingsActive:S,pub:E,selectedSectionId:L})),!w&&"bottom-center"===Q&&(0,l.Y)(C.Ye,{justifyContent:"center",paddingY:8,children:(0,l.Y)(ey,{homeHref:eI,pub:E,wordmarkHeight:ed,fullScreen:!0})})]}),!eS&&(0,l.Y)("div",{style:{height:e_}})]})})},eY=e=>{let{forceMaximized:t,forceMinimized:n,isMobile:i,showNavBar:l,showWordmark:r,themeLayoutOptions:o,scaledWordmarkHeight:a}=e,[d,u]=(0,c.useState)(!1),h=(0,c.useRef)(null),m=!!n||!t&&d,p=e=>i?l?eA:eS:r?eN+("bottom-center"!==o.wordmarkPosition&&!m&&a>eC?a-eC:0):eI,f=l?i?eL:eF:0,v=p(m),g=p(!1),y="bottom-center"===o.wordmarkPosition?a:0,b=g+f+y,Y=(0,c.useCallback)(()=>{let e=h.current,t=document.documentElement.scrollTop||document.body.scrollTop;h.current=t,s()(e)||(t>e?t>b+5&&u(!0):t<=0&&u(!1))},[b]);return(0,c.useEffect)(()=>{u(!1)},[o.wordmarkPosition,o.layout]),(0,c.useEffect)(()=>(window.addEventListener("scroll",Y),()=>window.removeEventListener("scroll",Y)),[Y]),{currentTopBarHeight:v,currentMenuHeight:v+f+y,isMinimized:m}};var e_=n(79192),ew=n(10455);let ek=20,eC=36,ex=40,eA=44,eS=56,eI=72,eN=88,eD=12,eE=20,eL=45,eF=50,eT=e=>{var t;let{className:n,freeSignup:r,freeSignupEmail:a,hideNavBar:s,hideTitle:m,isAccountContext:p,isChatActive:f,isMeetingsActive:g,isPostView:y,pub:b,selectedSectionId:Y,showCustomerSupportModeModal:_,user:w,profile:x}=e;m="profile"===b.homepage_type||m;let{getConfigFor:A}=(0,v.mJ)(),{isMobile:S}=(0,k.sM)(),[D]=(0,eh.rd)(),E=(0,c.useRef)(null),L=(0,c.useRef)(null),T=(0,c.useRef)(null),B="profile"===b.homepage_type,M=B&&D.path.match(/\/profile\/(subscribers|followers|following)/),P=!B&&!!b.logo_url&&!(0,I.S2)({pub:b}),z=!!(!m&&b.logo_url_wide),O=y?!!A("show_menu_on_posts"):!s,R=(0,I.S2)({pub:b})||!!(A("larger_wordmark_on_publication_homepage")&&z),{currentMenuHeight:H,currentTopBarHeight:V,isMinimized:j,maxMenuHeight:U}=eM({hasExpandableTopBar:R,forceMaximized:!y&&!p,forceMinimized:!!p,isMobile:S,showNavBar:O,showWordmark:z}),q=S?eD:R?40:eE,J=!S&&R&&j?20:0,K=S?R?32:ek:R?72:eC,G=!S&&R&&j?ex/72:1;ec({alwaysShow:!1,disable:!y,menuContentRef:E,menuHeight:H});let{shouldCenterTitle:X}=eP({buttonsRef:T,titleRef:L,horizontalGap:12,horizontalPadding:R?40:eE}),$=S||!X,Z=p?(0,N.$_T)(b):"/",et=B&&!y&&!p&&!S;return(0,l.Y)(ez,{profile:x,pub:b,useAccentTheme:!!p,children:(0,l.FD)("div",{className:o()("main-menu",n),"data-testid":"navbar",children:[(0,l.FD)("div",{ref:E,className:o()(eg.mainMenuContent,et&&eg.profileContext),children:[(0,l.FD)(C.Ye,{alignItems:"center",borderBottom:O?void 0:"detail",className:eg.topBar,gap:12,justifyContent:"space-between",paddingBottom:S?12*!O:void 0,paddingTop:S?12:void 0,paddingX:q,style:S?void 0:{position:"relative",height:V-1},children:[(0,l.FD)("div",{className:eg.logoContainer,style:(0,i._)({display:B||!P&&$?"none":null,flexBasis:0,flexGrow:+!$},R?{transform:"translateX(-".concat(J,"px)")}:null),children:[B&&(0,l.FD)(C.Ye,{alignItems:"center",gap:40,children:[(0,l.Y)(C.pT,{alignItems:"center",as:"a",height:20,href:(0,N.yRP)((0,N.$_T)(),{utm_content:ev.fL.islandSubstackLogo}),justifyContent:"center",tabIndex:-1,width:20,children:S?(0,l.Y)(u.A,{height:24}):(0,l.Y)(u.A,{style:{transform:"scale(1.4)"}})}),M&&(0,l.Y)(W.K0,{className:eg.backButton,href:(0,ef.fOI)(b),size:S?"sm":"md",children:(0,l.Y)(d.A,{size:20})})]}),P&&(0,l.Y)(em.wg,{href:Z,pub:b,size:S?32:40,onClick:()=>{(0,eu.u4)(eu.qY.NAV_BAR_HOME_LINK_CLICKED)}})]}),!m&&(0,l.Y)("div",{ref:L,className:eg.titleContainer,style:(0,i._)({flexGrow:0},R?{transform:"translateX(".concat($?-J:0,"px)")}:null),children:(0,l.Y)(ee.EY,{as:"h1",className:o()(eg.title,{[null!=(t=eg.titleWithWordmark)?t:""]:b.logo_url_wide}),font:"pub-headings",children:(0,l.Y)(Q.AE,{href:Z,children:b.logo_url_wide?(0,l.Y)("img",{alt:b.name,src:(0,N.dJ9)(b.logo_url_wide,null,{height:2*K,crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"]}),style:(0,i._)({display:"block",height:K},R?{transform:"scale(".concat(G,")"),transformOrigin:$?"left":"center"}:null)}):b.name})})}),(0,l.Y)(C.Ye,{alignItems:"center",justifyContent:"end",style:{flexBasis:0,flexGrow:1},children:(0,l.Y)("div",{ref:T,className:eg.buttonsContainer,style:R?{transform:"translateX(".concat(J,"px)")}:void 0,children:(0,l.Y)(h.A,{freeSignup:r,freeSignupEmail:a,isMeetingsActive:g,pub:b,showCustomerSupportModeModal:_,user:w})})})]}),O&&(0,l.Y)(F,{isChatActive:f,isMeetingsActive:g,pub:b,selectedSectionId:Y})]}),(0,l.Y)("div",{style:{height:U}})]})})},eB=e=>{var t;return(null==(t=e.pub.theme)?void 0:t.custom_header)?(0,l.Y)(eb,(0,i._)({},e)):(0,l.Y)(eT,(0,i._)({},e))},eM=e=>{let{forceMaximized:t,forceMinimized:n,hasExpandableTopBar:i,isMobile:l,showNavBar:r,showWordmark:o}=e,[a,d]=(0,c.useState)(!1),u=(0,c.useRef)(null),h=!!n||!t&&a,m=e=>l?r?i?44:eA:eS:i?e?72:120:o?eN:eI,p=r?l?eL:eF:0,f=m(n)+p,v=m(h),g=(0,c.useCallback)(()=>{let e=u.current,t=document.documentElement.scrollTop||document.body.scrollTop;u.current=t,s()(e)||(t>e?t>f+5&&d(!0):t<=0&&d(!1))},[f]);return(0,c.useEffect)(()=>(window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)),[g]),{currentMenuHeight:v+p,currentTopBarHeight:v,isMinimized:h,maxMenuHeight:f}},eP=e=>{let{buttonsRef:t,titleRef:n,horizontalGap:i,horizontalPadding:l}=e,{isMobile:r}=(0,k.sM)(),[o,a]=(0,c.useState)(!r),s=(0,c.useCallback)(()=>{if(!t.current||!n.current)return;if(r)return void a(!1);let e=t.current.getBoundingClientRect().width,o=n.current.getBoundingClientRect().width;a(.5*document.body.clientWidth-e-i-l>.5*o)},[t,i,l,r,n]);return(0,c.useEffect)(()=>(window.addEventListener("resize",s),s(),setTimeout(s,0),()=>{window.removeEventListener("resize",s)}),[s]),{shouldCenterTitle:o}},ez=e=>{let{profile:t,pub:n,useAccentTheme:i,children:r}=e;return i?(0,l.Y)(e_.Z,{children:r}):"profile"===n.homepage_type&&t?(0,l.Y)(ew.b,{theme:t.theme,children:r}):(0,l.Y)(V.DH,{children:r})}},6641:function(e,t,n){n.d(t,{S:()=>g});var i=n(10201),l=n(35426),r=n(38390),o=n(32485),a=n.n(o),s=n(48697),d=n(17402),c=n(13950),u=n(35369),h=n(76977),m=n(80988),p=n(45346),f=n(48028),v=n(55734);let g=e=>{let{children:t,disableCloseOnBackdropClick:n=!1,fullscreenMobile:o,hideCloseButton:g,initialFocus:y,isOpen:b,testId:Y="modal",width:_=660,stretchModal:w=!1,onClose:k=()=>void 0}=e,C=(0,d.useRef)(null);return(0,i.Y)(c.DH,{children:(0,i.Y)(r.bL,{open:b,onOpenChange:e=>{e||k()},children:(0,i.Y)(r.ZL,{forceMount:!0,children:(0,i.Y)(l.e.Root,{show:b,children:(0,i.FD)(m.k,{children:[(0,i.Y)(p.B,{children:(0,i.Y)(p.k,{disableCloseOnBackdropClick:n,onClose:k})}),(0,i.Y)(v.p,{children:(0,i.FD)(f.I,{className:w?a()("modalBodyStretched-aq1p4E","the-free-press-theme"):a()("modalBody-s4SL_V","the-free-press-theme"),disableCloseOnBackdropClick:n,fullscreenMobile:o,initialFocus:void 0===y?C:y,testId:Y,width:_,children:[(0,i.Y)("div",{ref:C,"aria-hidden":"true",style:{position:"absolute",left:"-9999px"},tabIndex:-1}),(0,i.Y)(c.DH,{children:(0,i.FD)(h.I1,{paddingTop:g?24:8,children:[!g&&(0,i.Y)(h.Ye,{justifyContent:"end",children:(0,i.Y)(r.bm,{asChild:!0,children:(0,i.Y)(u.K0,{priority:"quaternary",onClick:k,children:(0,i.Y)(s.A,{})})})}),t]})})]})})]})})})})})}},58050:function(e,t,n){n.d(t,{A:()=>I,cC:()=>N,km:()=>D,ku:()=>A,uy:()=>S});var i=n(69277),l=n(79785),r=n(10201),o=n(91648),a=n.n(o),s=n(74242),d=n(31062),c=n(17402),u=n(25250),h=n(82936),m=n(84605),p=n(46271),f=n(72026),v=n(6547),g=n(94729),y=n(76528),b=n(68349),Y=n(88774),_=n(36372),w=n(46453),k=n(50963);function C(){let e=(0,l._)(["Followed ",""]);return C=function(){return e},e}function x(){let e=(0,l._)(["Unfollowed ",""]);return x=function(){return e},e}function A(e){let t=(0,p.Jd)();return(0,y.OU)("/api/v1/feed/following",(0,i._)({auto:!!t},e))}function S(){let{mutate:e}=(0,u.iX)();return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e("/api/v1/feed/following",...n)}}function I(e,t,n){let{isFollowing:i,toggle:l}=N(e,t,n),o=(0,p.Jd)(),a=(0,h.Hv)(null==e?void 0:e.id),s=!!(o&&e&&o.id!==e.id)&&!a,d=[];return s&&d.push((0,r.Y)(Y.Dr,{leading:i?(0,r.Y)(v.A,{stroke:"var(--color-fg-primary)"}):(0,r.Y)(f.D,{stroke:"var(--color-fg-primary)"}),onClick:l,children:i?"Unfollow":"Follow"})),d}function N(e,t,n,i){let l=(0,p.Jd)(),{onboardingModalRef:o,requireLogin:c}=(0,w.eE)(),u=function(e,t){let{data:n}=A(t);return(null!=n?n:[]).includes(null!=e?e:0)}(null==e?void 0:e.id,i),{mutate:h,data:f}=A(i),v=(0,_.d)(),y=(0,k.$k)((null==e?void 0:e.name)||""),{iString:Y,iTemplate:S}=(0,m.GO)(),I=async i=>{if(e){if(!l&&o.current)return void(c?c():o.current.open());h(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i?[...t,e.id]:a()(t,e.id)},{revalidate:!1});try{await (0,g.x6)("/api/v1/feed/".concat(e.id,"/follow"),{method:i?"POST":"DELETE",json:{surface:t,noteId:n}}),v.popToast(()=>(0,r.Y)(_.y,{Icon:i?s.A:d.A,text:i?S(C(),y):S(x(),y),cta:Y("Undo"),onAccept:()=>I(!i)}))}catch(e){v.popToast(()=>(0,r.Y)(_.y,{text:(0,b.uX)(e)}));return}}};return{isFollowing:u,toggle:()=>I(!u),isLoaded:!!f}}function D(e,t,n){let{isFollowing:i,toggle:l}=N(e,t,n),[r,o]=(0,c.useState)(!1);return{isFollowing:i,buttonProps:{onClick:()=>{l(),i||o(!0)},onMouseLeave:()=>o(!1)}}}},46275:function(e,t,n){n.d(t,{BR:()=>s,Sn:()=>a});var i=n(10201),l=n(17402),r=n(92636);let o=(0,l.createContext)({isOnDestination:(0,r.Sg)()});function a(e){let{children:t}=e,n=(0,l.useMemo)(()=>({isOnDestination:(0,r.Sg)()}),[]);return(0,i.Y)(o.Provider,{value:n,children:t})}function s(){return(0,l.useContext)(o)}o.displayName="IsDestinationContext"},97640:function(e,t,n){n.d(t,{Vd:()=>f,_b:()=>m});var i=n(10201),l=n(17402),r=n(79909),o=n(25006),a=n(94729),s=n(59922),d=n(12501),c=n(82772),u=n(68349),h=n(4016);function m(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:l=!1,activityToken:r,children:o}=e;return(0,i.Y)(v,{defaultState:null==t?void 0:t.activity,shouldLoad:n,shouldPoll:l,activityToken:r,children:o})}let p=(0,l.createContext)({lastViewedAt:null,activityUnreadCount:0,activityUnreadAtMax:!1,refetch:async()=>!0,markAllAsRead:async()=>{},hasLoadedOnce:!1});function f(){return(0,l.useContext)(p)}function v(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:m=!1,activityToken:f,children:v}=e,g=(0,d.st)({pathname:"/api/v1/activity/unread",deps:[],auto:n,initialResult:t,query:{token:f}}),y=(0,o.df)(),b=!!y&&(0,h.lu)({pub:y}),Y=!(0,c.ov)()&&!b,_=async()=>{let e=await (0,a.x6)("/api/v1/activity/unread",{method:"post",json:{after:new Date().toISOString(),token:f}});g.setResult(e)};(0,s.A)(async()=>{if(m&&n&&(0,u.Tf)()){var e;let t=(null==(e=g.result)?void 0:e.count)||0,n=await g.refetch();if(t!==(!(n instanceof Error)&&n.count||0))return!0}},6e4);let w=null!=g.result?g.result.count:0;return(0,l.useEffect)(()=>{try{var e,t;null==(e=(t=navigator).setAppBadge)||e.call(t,w)}catch(e){console.warn(e)}},[w]),(0,i.FD)(p.Provider,{value:{lastViewedAt:null!=g.result?g.result.lastViewedAt:null,activityUnreadCount:w,activityUnreadAtMax:null!=g.result&&g.result.max,refetch:g.refetch,markAllAsRead:_,hasLoadedOnce:g.hasLoadedOnce},children:[(0,i.Y)(r.Metadata,{badge:Y?w:void 0}),v]})}p.displayName="NotificationsContext"},77405:function(e,t,n){n.d(t,{s:()=>ew,J:()=>eC});var i=n(69277),l=n(70408),r=n(32641),o=n(10201),a=n(32708),s=n(82853),d=n(48309),c=n(42691),u=n(49436),h=n(84934),m=n(70010),p=n(93540),f=n(80964),v=n(54718),g=n(47796),y=n(57157),b=n(17402),Y=n(41935),_=n(94090),w=n(82936),k=n(58050),C=n(84605),x=n(40691),A=n(85478),S=n(46271),I=n(27749),N=n(32485),D=n.n(N),E=n(45773),L=n(78834),F=n(70511),T=n(78649),B=n(72880),M=n(93355),P=n(86500),z=n(12501),O=n(17028),W=n(62870),R=n(93812),H=n(92563),V=n(29682),j=n(39318),U=n(49807),q=n(98949);let J={header:"header-LkrdOr",footer:"footer-EnTWMp",swatchContainer:"swatchContainer-aa9QGg",checkIconContainer:"checkIconContainer-OhnBup",downloadOverlay:"downloadOverlay-xLD7ZC"};function K(e){var t,n,i,l,r,a;let{comment:s,imageShareAsset:d,aspectRatio:c}=e,{width:u,height:h}=(0,H.S8)(c),{img:m,imgDownload:p,shareData:f,useNativeShare:v}=(0,M.Y)({shareTitle:"A note from ".concat(s.name),shareText:s.body,shareUrl:(0,U.M$q)("c-".concat(s.id)),imageUrl:null!=(t=null==d?void 0:d.composed_url)?t:"",imageDownloadUrl:null!=(r=null!=(l=(0,j.tbS)({noteId:"c-".concat(s.id),variant:null!=(n=null==d?void 0:d.variant)?n:"orange",type:"composed",aspectRatio:null!=(i=null==d?void 0:d.aspectRatio)?i:"stories"}))?l:null==d?void 0:d.composed_url)?r:"",imageUrlSameOrigin:null!=(a=null==d?void 0:d.composed_url)?a:""});async function g(){if((0,P.u4)(P.qY.NOTE_IMAGE_ASSET_DOWNLOADED,{comment_id:s.id,aspect_ratio:null==d?void 0:d.aspectRatio,source:"note-image-asset",interaction:"click"}),f)try{await navigator.share(f)}catch(e){}}return(0,o.Y)(W.Cs,{onClick:g,href:v?void 0:p,children:(0,o.FD)(W.OK,{size:h,aspectRatio:u/h,children:[!(0,q.Fr)()&&m&&(0,o.Y)(W.lh,{className:J.downloadOverlay,onClick:g,width:u}),(0,o.Y)(W.BB,{img:m})]})})}function G(e){var t,n,i;let{comment:l}=e,[r,a]=(0,b.useState)("stories"),[s,d]=(0,b.useState)("orange"),c=((e,t)=>{let{result:n,error:i}=(0,z.st)({pathname:"/api/v1/note/assets/c-".concat(e.id),query:{aspectRatio:t},deps:[e.id,t],auto:!0});return(0,b.useMemo)(()=>i?[]:n,[n,i])})(l,r),u=null==c?void 0:c.find(e=>e.aspectRatio===r&&e.variant===s),h=null!=(i=null==(n=l.attachments)||null==(t=n.find(e=>"image"===e.type))?void 0:t.imageUrl)?i:l.photo_url;return(0,o.Y)(T.Q,{children:(0,o.FD)(Z,{children:[(0,o.Y)(O.az,{className:J.header,children:(0,o.Y)(Q,{aspectRatio:r,setAspectRatio:a})}),(0,o.Y)(O.Ye,{justifyContent:"center",padding:12,children:(0,o.Y)(K,{aspectRatio:r,comment:l,imageShareAsset:u})}),(0,o.Y)(X,{selectedVariant:s,setSelectedVariant:d,photoUrl:h})]})})}function X(e){let{selectedVariant:t,setSelectedVariant:n,photoUrl:i}=e;return(0,o.Y)(O.fI,{gap:8,justifyContent:"center",children:V.ix.map(e=>(0,o.Y)($,{variant:e,setSelectedVariant:n,isSelected:t===e,photoUrl:i},e))})}function $(e){let{variant:t,setSelectedVariant:n,isSelected:r,photoUrl:a}=e,s=(0,R.kE)({variant:t,width:32,height:32,backgroundImageSrc:a});return(0,o.FD)(O.az,{width:32,height:32,radius:"sm",cursor:"pointer",overflow:"hidden",sizing:"border-box",position:"relative",onClick:function(){n(t)},className:D()(J.swatchContainer,r&&J.selected),children:[(0,o.Y)(O.az,{className:J.checkIconContainer,children:r&&(0,o.Y)(E.A,{size:24})}),"css"===s.type?(0,o.Y)(O.az,{height:32,width:32,sizing:"border-box",style:s.style}):(0,o.Y)(B.o,{src:s.src,maxWidth:32,imageProps:(0,l._)((0,i._)({},s.imgProps),{height:32})})]})}let Z=(0,O.I4)({display:"flex",direction:"column",alignItems:"center",overflow:"hidden",paddingBottom:20});function Q(e){let{aspectRatio:t,setAspectRatio:n}=e;return(0,o.Y)(O.fI,{gap:8,borderBottom:"detail",padding:16,justifyContent:"center",children:V.yo.map(e=>(0,o.Y)(O.$n,{size:"sm",priority:t===e?"primary-mono":"secondary",onClick:()=>n(e),leading:"grid"===e?(0,o.Y)(L.A,{size:20}):(0,o.Y)(F.A,{size:20}),children:"grid"===e?"Grid":"Stories"},e))})}var ee=n(75840),et=n(94729),en=n(68349),ei=n(35369),el=n(76977),er=n(88774),eo=n(19832),ea=n(51177),es=n(36372),ed=n(52145),ec=n(504),eu=n(5180),eh=n(83629),em=n(46453),ep=n(2481),ef=n(16291),ev=n(56262),eg=n(70189),ey=n(82776),eb=n(57324),eY=n(44307);let e_=e=>{let{item:t,parentItem:n}=e;if(!t.comment&&!t.post)return null;let i=null;if("post"in t&&("post"===t.type||(null==n?void 0:n.type)==="post_reply"))i=t.post.id;else if((null==n?void 0:n.type)==="note_reply"){var l;let e=null==(l=t.parentComments[0])?void 0:l.id;e&&(i=e)}else i=t.comment.id;return i?{id:i,type:"post"in t&&("post"===t.type||(null==n?void 0:n.type)==="post_reply")?"post":"comment"}:null};function ew(e){var t,n,i,l,r,g,y;let{publication:Y,post:N,comment:D,item:E,parentItem:L,allowHide:F=!1}=e,T=(0,es.d)(),{getConfigFor:B}=(0,A.mJ)(),M=(0,I.PK)(),O=(0,ee.T)(),W=(0,eu.wA)(),R=(0,eu.Ro)(),{iString:H}=(0,C.GO)(),[V,j]=(0,b.useState)(!1),[q,J]=(0,b.useState)(!1),K=(0,S.Jd)(),{openModal:X}=(0,x.hS)(),$=null!=(g=null==D||null==(t=D.ancestor_path)?void 0:t.split(".").filter(Boolean).map(Number).map(e=>R.comments.get(e)))?g:[],Z=D?(0,ev.getCommentAuthor)(D):Y&&N?(0,ev.getPostAuthor)(Y,N):{id:0,name:"void"},Q=E&&"entity_key"in E?E.entity_key:void 0,em=(0,w.bd)(Z,{surface:M,noteId:Q,onClick(e){E&&(0,ec.Qb)(E,M,e,{tabId:O})}}),ew=(0,_.a2)({comment:D,publication:Y,post:N,item:E}),eC=(0,k.A)(Z,M,Q),ex=(0,z.st)({pathname:"/api/v1/comment/".concat(null!=(y=null==D?void 0:D.id)?y:0),method:"DELETE",json:{publication_id:null==Y?void 0:Y.id}}),eA=async()=>{if(!D||(j(!1),ex.isLoading))return;let e=await ex.refetch();e instanceof Error?alert((0,en.uX)(e)):(T.popToast(()=>(0,o.Y)(es.y,{text:H("Note deleted"),Icon:a.A})),W({type:"comment_delete",payload:{publication:null!=Y?Y:void 0,post:null!=N?N:void 0,comment:D}}))},eS=(0,ep.NP)(),eI=async()=>{D&&eS.open({editComment:D,tabId:O,surface:M,editingUserId:null==K?void 0:K.id})},eN=E&&"post"===E.type&&E.mediaClip?E.mediaClip:void 0,eD=async(e,t)=>{await (0,et.x6)("/api/v1/comment/".concat(e.id,"/juice"),{method:"POST",json:{times_to_show:t}}),T.popToast(()=>(0,o.Y)(es.y,{text:H("Juiced"),Icon:c.A})),J(!1)},eE=async(e,t)=>{let n,i=e_({item:e,parentItem:L});if(!i)return;switch(t){case"1hour":n=1;break;case"8hours":n=8;break;case"24hours":n=24}let l=n?{expires_at:(0,ef.A)().add(n,"hour").toISOString()}:{},{id:r,type:a}=i;await (0,et.x6)("/api/v1/notification_settings/".concat(a,"/").concat(r,"/mute"),{method:"POST",json:l}),W({type:"item_pause_notifications",payload:{entityKey:e.entity_key}}),T.popToast(()=>(0,o.Y)(es.y,{text:H("Paused"),Icon:u.A}))},eL=async e=>{let t=e_({item:e,parentItem:L});if(!t)return;let{id:n,type:i}=t;await (0,et.x6)("/api/v1/notification_settings/".concat(i,"/").concat(n,"/mute"),{method:"DELETE"}),W({type:"item_unpause_notifications",payload:{entityKey:e.entity_key}}),T.popToast(()=>(0,o.Y)(es.y,{text:H("Unpaused"),Icon:u.A}))},eF=async()=>{try{if(!D)return void T.popToast(()=>(0,o.Y)(es.y,{text:H("Error starting workflow: comment not found")}));let{workflowId:e}=await (0,et.x6)("/api/v1/comment/".concat(D.id,"/workflow"),{method:"POST",json:{}});T.popToast(()=>(0,o.Y)(es.y,{text:"Workflow started with id ".concat(e)}))}catch(e){T.popToast(()=>(0,o.Y)(es.y,{text:"Error starting workflow: ".concat(e)}))}},eT=(0,z.st)({pathname:"/api/v1/video/assets/clips/".concat(null==eN?void 0:eN.id),method:"DELETE"}),eB=async()=>{if(!eN||eT.isLoading)return;let e=await eT.refetch();e instanceof Error?alert((0,en.uX)(e)):(T.popToast(()=>(0,o.Y)(es.y,{text:H("Clip deleted"),Icon:a.A})),W({type:"clip_delete",payload:{mediaClip:eN,author:Z}}))},eM=F&&E&&"entity_key"in E&&K&&K.id!==Z.id,eP=K&&K.id===Z.id,ez=K&&!!(null==E||null==(n=E.post)?void 0:n.publishedBylines.find(e=>e.id===K.id)),eO=K&&(null==L?void 0:L.type)==="note_reply"&&(null==E||null==(i=E.parentComments[0])?void 0:i.user_id)===K.id,eW=(eP||ez||eO)&&(null==E?void 0:E.type)&&["comment","post"].includes(E.type),eR=[(0,o.Y)(er.Dr,{leading:(0,o.Y)(s.A,{}),onClick:()=>{let e={r:(0,ey.userReferralKey)(K),utm_source:eb.VU.notesShareAction,utm_medium:eb.Jn.web},t=D?(0,U.Zgx)(D,{urlParams:e}):N?(0,U.q$n)(Y,N,{mediaClip:eN,urlParams:e}):null;(0,en.lW)(t),T.popToast(()=>(0,o.Y)(es.y,{text:H("Copied link to clipboard"),Icon:s.A})),(0,P.u4)(P.qY.FEED_ITEM_SHARE_LINK_CLICKED,{type:"copy",shared_post_id:null==N?void 0:N.id,shared_comment_id:null==D?void 0:D.id})},children:H("Copy link")}),!D&&N&&(0,o.Y)(ek,{post:N}),...eC,D?B("updated_note_sharing_assets_enabled")?(0,o.Y)(er.Dr,{leading:(0,o.Y)(d.A,{}),onClick:()=>{X({children:(0,o.Y)(G,{comment:D}),width:540})},children:H("Save as image")}):(0,o.Y)(er.Dr,{leading:(0,o.Y)(d.A,{}),onClick:()=>{T.popToast(()=>(0,o.Y)(es.y,{text:H("Downloading image..."),Icon:d.A}))},href:(0,eg.Hr)(D.id),target:"_blank",download:!0,children:H("Save as image")}):null].filter(Boolean),eH=[(0,ey.canEditComment)(K,D)&&(0,o.Y)(er.Dr,{leading:(0,o.Y)(h.A,{}),onClick:eI,children:H("Edit")}),D&&((null==K?void 0:K.is_global_admin)||(null==K?void 0:K.id)===D.user_id||B("show_note_stats_for_all_notes")||(0,ey.canManageCommentAsPrimaryUser)(K,D))?(0,o.Y)(er.Dr,{leading:(0,o.Y)(m.A,{}),href:(0,eg.Kg)(D,{noBase:eh.Z}),native:!0,children:H("View stats")}):null].filter(Boolean),eV=(null==E?void 0:E.type)&&["comment","post"].includes(E.type)&&R.mutedFeedItems.has(E.entity_key),ej=[eM&&(0,o.Y)(er.Dr,{leading:(0,o.Y)(p.A,{}),onClick:async()=>{try{W({type:"item_hide",payload:{entityKey:E.entity_key}}),await (0,et.x6)("/api/v1/note/".concat(E.entity_key,"/hide"),{method:"POST",json:{tabId:O,surface:M}})}catch(e){T.popToast(()=>(0,o.Y)(es.y,{text:(0,en.uX)(e)}))}},children:(K.is_admin||K.is_contributor)&&"post-page-restacks-list"===M?H("Hide note from post"):H("Hide note")}),eW&&(eV?(0,o.Y)(ed.MI,{onClick:()=>eL(E),customLabel:H("Unpause notifications")}):(0,o.Y)(ed.DE,{onMute:e=>eE(E,e),customLabel:H("Pause notifications")})),(null==K?void 0:K.is_global_admin)&&D&&(null==(r=D.attachments)||null==(l=r[0])?void 0:l.type)==="video"?(0,o.Y)(er.Dr,{leading:(0,o.Y)(f.A,{}),priority:"secondary",onClick:eF,children:H("Run workflow")}):null].filter(Boolean),eU=[...em,ew,(0,ey.canDeleteComment)(K,D,{pub:null!=Y?Y:void 0,post:null!=N?N:void 0,parentComments:$})&&(0,o.Y)(er.Dr,{leading:(0,o.Y)(a.A,{}),priority:"destructive",onClick:()=>j(!0),children:H("Delete")}),eN&&eP&&(0,o.Y)(er.Dr,{leading:(0,o.Y)(a.A,{}),priority:"destructive",onClick:eB,children:H("Delete this clip")}),(null==K?void 0:K.is_global_admin)&&D?(0,o.Y)(er.Dr,{leading:(0,o.Y)(c.A,{}),priority:"destructive",onClick:async()=>{J(!0)},children:H("Juice")}):null].filter(Boolean),eq=[0!==eR.length&&eR,0!==eH.length&&(0,o.Y)(er.H9,{children:eH}),0!==ej.length&&(0,o.Y)(er.H9,{children:ej}),0!==eU.length&&(0,o.Y)(er.H9,{children:eU})];return 0===eq.length?null:(0,o.FD)(o.FK,{children:[(0,o.Y)(el.ov,{className:eY.A.moreButtonContainer,children:(0,o.Y)(er.W1,{trigger:(0,o.Y)(ei.K0,{priority:"quaternary",size:"sm",className:eY.A.moreButton,"aria-label":H("More options"),children:(0,o.Y)(v.A,{size:16})}),onOpen:()=>{E&&(0,ec.Qb)(E,M,"menu",{tabId:O})},children:eq})}),(0,o.Y)(eo.m,{isOpen:V,title:H("Delete note"),description:H("Are you sure you want to permanently delete this note? This action cannot be undone."),primaryButton:(0,o.Y)(ei.$n,{priority:"destructive",onClick:eA,children:H("Delete")}),secondaryButton:(0,o.Y)(ei.$n,{priority:"secondary",onClick:()=>j(!1),children:H("Cancel")}),onClose:()=>j(!1)}),(null==K?void 0:K.is_global_admin)&&(0,o.Y)(eo.m,{isOpen:q,title:H("Juice note"),description:H("How many additional impressions would you like this note to receive? 100 impressions equals roughly 1-3 likes."),primaryButton:(0,o.FD)(ea.t7,{priority:"secondary-outline",size:"md",children:[(0,o.Y)(ea.gm,{onClick:async()=>{await eD(D,100)},children:"100"}),(0,o.Y)(ea.gm,{onClick:async()=>{await eD(D,500)},children:"500"}),(0,o.Y)(ea.gm,{onClick:async()=>{await eD(D,1e3)},children:"1000"})]}),secondaryButton:(0,o.Y)(el.pT,{flex:"grow",children:(0,o.Y)(ei.$n,{priority:"secondary",onClick:()=>J(!1),children:H("Cancel")})}),onClose:()=>J(!1)})]})}function ek(e){var{post:t}=e,n=(0,r._)(e,["post"]);let a=(0,S.Jd)(),{requireLogin:s}=(0,em.eE)(),d=eC(t),{iString:c}=(0,C.GO)();return(0,o.Y)(er.Dr,(0,l._)((0,i._)({leading:t.is_saved?(0,o.Y)(g.A,{}):(0,o.Y)(y.A,{}),onClick:()=>a?d():null==s?void 0:s({redirectOverride:(0,U.wu9)(null,t,{urlParams:{triggerSave:!0}})})},n),{children:c(t.is_saved?"Unsave":"Save")}))}function eC(e){let t=(0,eu.wA)(),n=(0,Y.ib)();return()=>{let i=e.id,l=!e.is_saved;(0,Y.E0)(i,l,{surface:"reader"}),n(l),t({type:"post_save",payload:{postId:i,isSaved:l}})}}},27749:function(e,t,n){n.d(t,{IJ:()=>u,PK:()=>m});var i=n(10201),l=n(17402),r=n(78479),o=n(5180),a=n(68391),s=n(46453),d=n(2481),c=n(62088);function u(e){let{state:t,dispatch:n,surface:u,children:m}=e,{onboardingModalRef:p}=(0,s.eE)(),f=(0,l.useMemo)(()=>({dispatch:n}),[]);return(0,i.Y)(h.Provider,{value:u,children:(0,i.Y)(o.et.Provider,{value:f,children:(0,i.Y)(o.tO.Provider,{value:t,children:(0,i.Y)(r.sc,{children:(0,i.Y)(d.wG,{children:(0,i.FD)(a.Kl,{children:[m,(0,i.Y)(c.M9,{isOpen:!!t.isSigningIn,onCancel:()=>n({type:"sign_in",payload:{isSigningIn:!1}}),onSuccess:()=>{n({type:"sign_in",payload:{isSigningIn:!1}}),document.location.reload()},onSignup:()=>{var e;n({type:"sign_in",payload:{isSigningIn:!1}}),null==(e=p.current)||e.open()},noExit:t.signInNoExit})]})})})})})})}let h=(0,l.createContext)("feed");function m(){return(0,l.useContext)(h)}},57446:function(e,t,n){n.d(t,{Q:()=>p});var i=n(10201),l=n(17402),r=n(85478),o=n(46271),a=n(44333),s=n(68349),d=n(83873),c=n(39318),u=n(92636),h=n(41086);let m=(0,l.createContext)({ageVerification:null,isLoading:!1});function p(e){var t;let{children:n}=e,p=(0,o.Jd)(),[{path:f},v]=(0,a.rd)(),{getConfigFor:g}=(0,r.mJ)(),y=null!=(t=g("mobile_age_verification_learn_more_link"))?t:null,[b,Y]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=()=>{let e=(0,h.y)(window.location.href,"redirect_url");e?(0,s.V2)(e,{local_navigation:!1}):v("/",!0)};if(function(e,t){if(!t)return!1;let n=e=>"/"===e?e:e.replace(/\/$/,"");return n((0,s.Hm)(t))===n(e)}(f,y))return void Y(null);if(!(null==p?void 0:p.id)){Y(null),"/age-verification-required"===f&&e();return}let t=null==p?void 0:p.age_verification;if(!t||!t.force_verification){Y(null),"/age-verification-required"===f&&e();return}if("/age-verification-required"===f){let n=window.location.hostname.replace(/\.localhost$/,"");if(n.endsWith(".".concat(u.xJ))&&n!==u.xJ&&!n.startsWith("reader.".concat(u.xJ))&&!n.startsWith("www.".concat(u.xJ))){let e=(0,c.q$g)(),t=new URL(window.location.href),n="".concat(e).concat(t.pathname).concat(t.search);(0,s.V2)(n,{local_navigation:!1});return}if(t.status===d.Y.CompletedAdult){Y(null),e();return}Y(t);return}if(Y(t),t.status===d.Y.NotCompleted||t.status===d.Y.CompletedUnderage){let e=window.location.href;v((0,c.yRP)("/age-verification-required",{redirect_url:e}),!0)}},[null==p?void 0:p.id,null==p?void 0:p.age_verification,f,v]),(0,i.Y)(m.Provider,{value:{ageVerification:b,isLoading:!1},children:n})}m.displayName="AgeVerificationContext"},55200:function(e,t,n){n.d(t,{l:()=>l});var i=n(39318);function l(e,t){return(null==e?void 0:e.profile_set_up_at)?(0,i.gYq)(e,t):(0,i.W$o)((null==t?void 0:t.utm_source)?{utm_source:t.utm_source}:void 0)}},20562:function(e,t,n){n.d(t,{t:()=>d});var i=n(69277),l=n(10201),r=n(76977),o=n(63136),a=n(92636),s=n(49807);let d=e=>{let{firehoseFeedUrl:t,pub:n,section:d,trackingSource:c,variant:u="default"}=e,h=(0,a.yR)("/p/how-do-i-add-a-bulwark-member-only",(0,i._)({utm_source:c},d?{utm_content:d.id}:null)),m=(0,a.yR)("/account/add-all-podcasts",(0,i._)({utm_source:c},d?{utm_content:d.id}:null)),p=t?(0,l.FD)(o.EY.B3,{as:"li",font:"text",children:["Click here to set up your podcast app for"," ",(0,l.Y)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:"everything in one feed"})]}):null,f=(0,s.eV6)(n,{params:{utm_source:c}});return(0,l.Y)("div",{className:"container-o06YlK",children:"member-only"===u?(0,l.FD)(r.I1,{as:"ul",gap:4,children:[(0,l.FD)(o.EY.B3,{as:"li",font:"text",children:["Want to listen without ads? Join Bulwark+ for exclusive ad-free versions of all Bulwark shows."," ",(0,l.Y)("a",{href:f,rel:"noopener noreferrer",target:"_blank",children:"Upgrade now"})]}),(0,l.FD)(o.EY.B3,{as:"li",font:"text",children:["Already a Bulwark+ member? Login to access premium shows. ",(0,l.Y)("a",{href:h,children:"Learn more here"})]})]}):(0,l.FD)(r.I1,{as:"ul",gap:4,children:[(0,l.FD)(o.EY.B3,{as:"li",font:"text",children:["Learn about"," ",(0,l.Y)("a",{href:h,rel:"noopener noreferrer",target:"_blank",children:"setting up your Bulwark+ private podcast feeds"})]}),p||(0,l.FD)(o.EY.B3,{as:"li",font:"text",children:["Add the Bulwark Premium Show"," ",(0,l.Y)("a",{href:m,rel:"noopener noreferrer",target:"_blank",children:"super feed"})]})]})})}},12592:function(e,t,n){n.d(t,{c:()=>a});var i=n(10201),l=n(32485),r=n.n(l),o=n(89490);let a=e=>{let{children:t,columns:n=2,paddingTop:l=24}=e,a=(0,o.iF)({paddingTop:l,paddingX:16,paddingBottom:32});return(0,i.Y)("div",{className:r()("container-kIrj2N",a,{"containerThreeColumn-Rot594":3===n,"containerFourColumn-vOHVwe":4===n}),children:t})}},12387:function(e,t,n){n.d(t,{F:()=>h});var i=n(10201),l=n(32485),r=n.n(l),o=n(48697),a=n(89490),s=n(35369),d=n(76977),c=n(63136),u=n(74460);let h=e=>{let{title:t,description:n,Icon:l,onDismiss:r,theme:o="default",priority:a="tertiary",showClose:s=!0,flex:d="auto"}=e;return(0,i.FD)(y,{theme:o,priority:a,flex:d,children:[l&&(0,i.Y)(m,{Icon:l}),(0,i.FD)(b,{children:[t&&(0,i.Y)(p,{children:t}),n&&(0,i.Y)(f,{children:n})]}),s&&(0,i.Y)(v,{onClose:r,priority:a})]})},m=e=>{let{Icon:t}=e;return(0,i.Y)(g,{children:(0,i.Y)(t,{size:18,className:u.A.icon})})},p=e=>{let{children:t}=e;return(0,i.Y)(c.EY.B4,{weight:"medium",color:"primary",className:u.A.title,children:t})},f=e=>{let{children:t}=e;return(0,i.Y)(c.EY.B4,{weight:"regular",color:"secondary",className:u.A.description,children:t})},v=e=>{let{onClose:t,priority:n}=e;return(0,i.Y)(g,{children:(0,i.Y)(s.K0,{priority:"quaternary",onClick:t,size:"xs",children:(0,i.Y)(o.A,{size:18,className:r()(u.A.dismissIcon,u.A["priority_".concat(n)])})})})},g=(0,a.I4)({display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20}),y=e=>{let{theme:t,priority:n,children:l,flex:o}=e;return(0,i.Y)(d.fI,{flex:o,gap:12,paddingX:16,paddingY:12,radius:"sm",className:r()(u.A.alert,u.A["theme_".concat(t)],u.A["priority_".concat(n)]),children:l})},b=(0,a.I4)({display:"flex",direction:"column",flex:"grow",alignItems:"start"})},91401:function(e,t,n){n.d(t,{_:()=>T});var i=n(10201),l=n(35426),r=n(38390),o=n(89490),a=n(10238);let s="transition-w_bxsw",d="from-z8IAhO",c="to-tJ4gLS";function u(e){let{onClose:t,disableCloseOnBackdropClick:n}=e;return(0,i.Y)(r.hJ,{forceMount:!0,className:"backdrop-XhnYC7",onClick:()=>{n||t()}})}let h=e=>{let{children:t}=e;return(0,i.Y)(l.e.Child,{enter:s,enterFrom:d,enterTo:c,leave:s,leaveFrom:c,leaveTo:d,children:t})};var m=n(20347),p=n(3849),f=n(69277),v=n(76977),g=n(12601);let y={paddingTop:20,paddingBottom:20};var b=n(84843);let Y={paddingTop:20,paddingBottom:20},_={flex:"1",justifyContent:"center"};var w=n(32485),k=n.n(w),C=n(17402),x=n(11510);let A=(0,C.forwardRef)((e,t)=>{let{children:n,className:l,width:o,initialFocus:a,disableCloseOnBackdropClick:s=!1,testId:d,style:c}=e,u=(0,x.Iu)();return(0,i.Y)(r.UC,{forceMount:!0,ref:t,"data-testid":d,className:k()(l,"panel-kkbipN",u&&"mobile-_09kdk"),style:(0,f._)({width:u?void 0:o},c),onOpenAutoFocus:e=>{(null==a?void 0:a.current)&&(e.preventDefault(),a.current.focus())},onCloseAutoFocus:e=>{e.preventDefault()},onPointerDownOutside:e=>{e.preventDefault()},onEscapeKeyDown:e=>{s&&e.preventDefault()},children:n})});A.displayName="DrawerPanel";let S="transition-yXnIcD",I="from-ohdinI",N="to-pJrLpA",D=e=>{let{children:t}=e;return(0,i.Y)(l.e.Child,{as:C.Fragment,enter:S,enterFrom:I,enterTo:N,leave:S,leaveFrom:N,leaveTo:I,children:t})};var E=n(90460),L=n(10996);function F(e){let{children:t,renderOverReactLaagPortal:n}=e;return(0,i.Y)(o.az,{className:"layout-oewxMQ",style:{zIndex:n?a.Up+1:a.Up},children:t})}let T=e=>{let{isOpen:t,onClose:n=()=>void 0,children:o,testId:a="drawer",className:s,width:d=440,disableCloseOnBackdropClick:c=!1,initialFocus:m,renderOverReactLaagPortal:p=!1,style:f}=e;return(0,E.h)(t),(0,i.Y)(r.bL,{open:t,onOpenChange:e=>{e||null==n||n()},children:(0,i.Y)(r.ZL,{forceMount:!0,children:(0,i.Y)(l.e.Root,{show:t,children:(0,i.FD)(F,{renderOverReactLaagPortal:p,children:[(0,i.Y)(h,{children:(0,i.Y)(u,{onClose:n,disableCloseOnBackdropClick:c})}),(0,i.Y)(L.e$,{children:(0,i.Y)(D,{children:(0,i.Y)(A,{width:d,className:s,initialFocus:m,disableCloseOnBackdropClick:c,testId:a,style:f,children:o})})})]})})})})};T.Header=e=>{let{onClose:t,showClose:n=!0,title:l,description:r,showDivider:o=!1}=e,a=o?b.P0:b.UG;return(0,i.Y)(a,{style:(0,f._)({},Y),children:(0,i.FD)(v.fI,{children:[(0,i.FD)(b.fS,{style:(0,f._)({},_),children:[l&&(0,i.Y)(b.$q,{text:l,isInsideDialog:!1}),r&&(0,i.Y)(b.ph,{text:r,isInsideDialog:!1})]}),n&&t&&(0,i.Y)(b.J,{onClose:t,position:"relative"})]})})},T.Body=function(e){var t=(0,m._)({},(0,p._)(e));return(0,i.Y)(v.VP,(0,f._)({flex:"grow",overflow:"auto",padding:20},t))},T.Footer=e=>{let{primaryButton:t,secondaryButton:n,showDivider:l,direction:r="row"}=e,o="column"===r,a=!!n||!!t,s=l?o?g.X_:g.RY:o?g.MM:g.It,d=o?g.iF:g.Y9,c=[n,t].filter(Boolean);return(0,i.Y)(s,{style:(0,f._)({},y),children:a&&(0,i.Y)(d,{children:c})})}},68940:function(e,t,n){n.d(t,{u:()=>s});var i=n(10201),l=n(68349),r=n(81929),o=n(63136),a=n(89961);function s(e){var t,n;let s,{modifier:d,children:c,className:u}=e,h=(t=void 0===d?[]:Array.isArray(d)?d:[d],n=(0,l.cX)(),0===(s=t.map(e=>{switch(null==e?void 0:e.toLowerCase()){case"cmd":return n?"âŒ˜":"Ctrl";case"shift":return n?"â‡§":"Shift";case"alt":case"opt":return n?"âŒ¥":"Alt";case"ctrl":return n?"âŒƒ":"Ctrl";case"esc":return"Esc";case"left":return"â†";case"right":return"â†’";case"up":return"â†‘";case"down":return"â†“";default:return""}}).filter(Boolean)).length?"":s.join(""));return(0,i.Y)(r.vw,{priority:"secondary-outline",theme:"default",className:u,children:(0,i.FD)(o.EY,{as:"kbd",font:"text",weight:"regular",color:"secondary",className:a.A.kbd,children:[h,c]})})}},51177:function(e,t,n){n.d(t,{gm:()=>y,q7:()=>g,t7:()=>v});var i=n(69277),l=n(70408),r=n(32641),o=n(10201),a=n(32485),s=n.n(a),d=n(17402),c=n(82519),u=n(84605),h=n(35369),m=n(76977),p=n(88774);n(48625);var f=n(5370);let v=e=>{var{priority:t="secondary-outline",size:n="md"}=e,l=(0,r._)(e,["priority","size"]);"secondary-outline"===t&&(t="tertiary");let a="tertiary"===t;return(0,o.Y)(Y.Provider,{value:{priority:t,size:n},children:(0,o.Y)(m.fI,(0,i._)({radius:"sm"===n?"xs":"sm",className:s()(f.A.group,a&&f.A.outlined)},l))})},g=e=>{var{children:t,priority:n="primary",size:a="md",menuItems:s,additionalMenuProps:d={}}=e,h=(0,r._)(e,["children","priority","size","menuItems","additionalMenuProps"]);let{iString:m}=(0,u.GO)();return(0,o.FD)(v,{priority:n,size:a,children:[(0,o.Y)(y,(0,l._)((0,i._)({},h),{children:t})),(0,o.Y)(p.W1,(0,l._)((0,i._)({},d),{placement:"bottom-end",trigger:(0,o.Y)(b,(0,l._)((0,i._)({},h),{"aria-label":m("Dropdown menu"),children:(0,o.Y)(c.A,{size:"sm"===a?16:"md"===a?20:24})})),children:s}))]})},y=(0,d.forwardRef)((e,t)=>{var{className:n}=e,a=(0,r._)(e,["className"]);let{priority:c,size:u}=(0,d.useContext)(Y);return(0,o.Y)(h.$n,(0,l._)((0,i._)({priority:c,size:u,className:s()(f.A.segment,n)},a),{ref:t}))}),b=(0,d.forwardRef)((e,t)=>{var{className:n}=e,a=(0,r._)(e,["className"]);let{priority:c,size:u}=(0,d.useContext)(Y);return(0,o.Y)(h.K0,(0,l._)((0,i._)({priority:c,size:u,className:s()(f.A.segment,n)},a),{ref:t}))}),Y=(0,d.createContext)({priority:"primary",size:"md"})},15663:function(e,t,n){n.d(t,{r:()=>v});var i=n(10201),l=n(35426),r=n(17402),o=n(78649),a=n(52820),s=n(97640),d=n(46271),c=n(86500),u=n(12501),h=n(76977),m=n(21398),p=n(16291);let f="transition-FsyEAS";function v(){var e;let{activityUnreadCount:t}=(0,s.Vd)(),{exposeExperiment:v,getExperimentVariant:g}=(0,a.Wk)(),{isLoading:y,result:b,refetch:Y}=(0,u.st)({pathname:"/api/v1/activity-feed-web",query:{limit:1},auto:!1});(0,r.useEffect)(()=>{t>0&&Y()},[t]);let[_,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),{isLoading:x,fetch:A,result:S}=(0,m.vZ)({module:"./MiniNotificationsViewer",onRequest:()=>Promise.all([n.e("9966"),n.e("5894"),n.e("2531"),n.e("3398")]).then(n.bind(n,57114)),fetchImmediately:!1}),I=(0,p.A)(),{userSettings:N,changeSetting:D}=(0,d.ur)(),E=null==b||null==(e=b.activityItems)?void 0:e[0],L=(null==E?void 0:E.created_at)?(0,p.A)(null==E?void 0:E.created_at):I.subtract(100,"year"),F=(null==N?void 0:N.last_notification_alert_shown_at)?(0,p.A)(N.last_notification_alert_shown_at):I.subtract(100,"year"),T=7>I.diff(L,"day")&&L.diff(F,"hour")>2,B=(0,r.useRef)(null),M=()=>{B.current&&window.clearTimeout(B.current)},P=()=>{M(),B.current=window.setTimeout(()=>{w(!1)},6e3)};return(0,r.useEffect)(()=>{T&&t>0&&(v("notification_alert_improved"),"treatment"===g("notification_alert_improved")&&(S&&!_?window.setTimeout(()=>{w(!0),D("last_notification_alert_shown_at",(0,p.A)().toISOString()),(0,c.u4)(c.qY.NOTIFICATIONS_ALERT_SHOWN,["comment_audience","comment_id","community_comment_id","created_at","id","mention_id","publication_id","sender_count","target_comment_id","target_community_comment_id","target_community_post_id","target_post_id","target_user_id","type"].reduce((e,t)=>(e[t]=null==E?void 0:E[t],e),{})),P()},2e3):S||x||A()))},[y,b,t,x,T,_,w]),(0,i.Y)(i.FK,{children:(_||k)&&b&&(0,i.Y)(l.e,{style:{position:"fixed",left:"auto",right:20,top:92,zIndex:100},appear:!0,show:_,beforeEnter:()=>C(!0),afterLeave:()=>C(!1),enter:f,enterFrom:"enterFrom-dljIVN",enterTo:"enterTo-HLLVxF",leave:f,leaveFrom:"leaveFrom-aHkaAL",leaveTo:"leaveTo-k1oI5e",children:(0,i.Y)(o.Q,{children:(0,i.Y)(h.pT,{radius:"md",border:"detail",className:"alert-pEnrFa",onMouseEnter:M,onMouseLeave:P,shadow:"lg",bg:"primary",children:(0,i.Y)(m.Ic,{module:"@/frontend/reader2/activity/MiniNotificationsViewer",resolve:e=>e.MiniNotificationsStack,onRequest:()=>Promise.all([n.e("9966"),n.e("5894"),n.e("2531"),n.e("3398")]).then(n.bind(n,57114)),result:b,isReadOnly:!0})})})})})}},11710:function(e,t,n){n.d(t,{_:()=>c});var i=n(10201),l=n(63701),r=n(84605),o=n(17028),a=n(16993),s=n(22238),d=n(74055);function c(e){let{isOpen:t,onClose:n,scheduledLiveStreams:c,onCancelStream:u}=e,{iString:h}=(0,r.GO)(),m=(0,i.Y)(o.pT,{bg:"accent-red",radius:"full",width:48,height:48,alignItems:"center",justifyContent:"center",children:(0,i.Y)(l.A,{color:"var(--color-accent-fg-red)"})});return(0,i.FD)(a.aF,{isOpen:t,onClose:n,width:540,children:[(0,i.Y)(a.rQ,{title:h("Scheduled live videos"),icon:m,showClose:!0,onClose:n}),(0,i.Y)(o.I1,{paddingX:20,paddingY:20,gap:20,className:d.A.streamList,children:c.map(e=>(0,i.Y)(s.Q,{stream:e,onCancelStream:u},e.liveStream.id))})]})}},91324:function(e,t,n){n.d(t,{i:()=>c,u:()=>d});var i=n(69277),l=n(70408),r=n(10201),o=n(17402),a=n(86500);let s=(0,o.createContext)({surface:null,platform:"web"});function d(e){let{children:t,trackingProps:n}=e,l=(0,o.useContext)(s),a=(0,o.useMemo)(()=>(0,i._)({},l,n),Object.values(n));return(0,r.Y)(s.Provider,{value:a,children:t})}function c(){let e=(0,o.useContext)(s);return(t,n)=>(0,a.u4)(t,(0,i._)((0,l._)((0,i._)({},e),{ui:"page"===e.surface?"activity-page":e.surface}),n))}},15144:function(e,t,n){n.d(t,{D1:()=>l,d9:()=>r});var i=n(94729);let l=function(){let{before:e,tab:t="all"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async n=>{try{var l,r;let o=await (0,i.x6)("/api/v1/messages/inbox",{query:{paginate:"true",tab:t,before:e}});n({type:"inbox-new_items",payload:{threads:null==o?void 0:o.threads,hasMore:null==o?void 0:o.more,directMessagesUnreadCount:null==o?void 0:o.directMessagesUnreadCount,pendingInviteCount:null==o?void 0:o.pendingInviteCount,pendingInviteUnreadCount:null!=(l=null==o?void 0:o.pendingInviteUnreadCount)?l:null==o?void 0:o.pendingInviteCount,pubChatUnreadCount:null!=(r=null==o?void 0:o.pubChatUnreadCount)?r:0,mostRecentChatTimestamp:o.mostRecentChatTimestamp}})}catch(e){if(console.warn("error",e),e instanceof i.fk)n({type:"inbox-new_error",payload:{error:e}});else throw e}}},r=e=>async t=>{"direct-message"===e&&t(l({tab:"people"})),t({type:"inbox-set_filter",payload:e})}},78338:function(e,t,n){n.d(t,{Bf:()=>a,DF:()=>o,ly:()=>r});var i=n(69277),l=n(38123);function r(e){var t,n,i;return e.link_title||(null==(t=e.postTag)?void 0:t.name)||(null==(n=e.section)?void 0:n.name)||(null==(i=e.post)?void 0:i.title)||""}function o(e){var t;return e.postTag?"tag":e.section?"section":(null==(t=e.post)?void 0:t.type)==="page"?"page":e.post?"post":"link"}function a(e,t){let{isChatActive:n,isMeetingsActive:r,hasMultipleNewsletters:o,isChatEnabled:a,isFeedEnabled:s,isReaderReferralsLeaderboardActive:d,language:c="en",useReordering:u=!1}=t,h=e.filter(e=>!e.standard_key),m=new Map(e.filter(e=>e.standard_key).map(e=>[e.standard_key,e])),{iString:p}=I18N.i(c);for(let e of h){var f;(null==(f=e.section)?void 0:f.hide_from_navbar)&&(e.is_hidden=!0)}let v=[s&&{standard_key:"notes",link_title:"Notes",link_url:"/notes"},a&&{standard_key:"chat",link_title:"Chat",link_url:"/chat",is_hidden:!n},r&&{standard_key:"meetings",link_title:"Meetings",link_url:"/meetings"},...h,{standard_key:"archive",link_title:p("Archive"),link_url:"/archive"},o&&{standard_key:"newsletters",link_title:p("Newsletters"),link_url:"/newsletters",is_hidden:!0},d&&{standard_key:"leaderboard",link_title:p("Leaderboard"),link_url:"/leaderboard"},{standard_key:"about",link_title:p("About"),link_url:"/about"}].filter(e=>!!e).map(e=>{if(e.standard_key){let t=m.get(e.standard_key);if(t)return(0,l.qy)((0,i._)({},e),t)}return e});if(u){let e=["about","notes","chat","archive"];return[...v.filter(t=>!e.includes(t.standard_key||"")),...e.map(e=>v.find(t=>t.standard_key===e)).filter(e=>!!e)].filter(e=>!!e)}return v}}}]);